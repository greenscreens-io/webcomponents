class GSLog{static logging=!0;static tracing=!1;static info(t,e){this.#t(t,e,!0,'info')}static warn(t,e){this.#t(t,e,!0,'warn')}static error(t,e){this.#t(t,e,!0,'error')}static trace(t,e){GSLog.tracing&&this.#t(t,e,!1,'error')}static log(t,e,r){this.#t(t,e,r)}static#t(t,e,r,n){if(!r&&!this.logging)return;const s=t?`${t.nodeName} -> ${t.id}: ${e}`:e;let i=console[n||'log'];i='function'==typeof i?i:console.log,i(s),e instanceof Error&&i(e)}static{Object.seal(GSLog)}}class GSBase extends HTMLElement{static#e=0;#r='';static get observedAttributes(){return[]}static nextID(){return GSBase.#e++,`GSHID_${GSBase.#e}`}static hashCode(t){let e=0,r=t.length,n=0;if(r>0)for(;n<r;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}static sendEvent(t=document,e,r='',n=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:r,bubbles:n,composed:s,cancelable:i});return t.dispatchEvent(a)}static sendSuspendedEvent(t=document,e,r=''){requestAnimationFrame((()=>{GSBase.sendEvent(t,e,r)}))}connectedCallback(){const t=this;if(t.url&&t.isRenderable()){const e=GSBase.hashCode(t.url);if(document.querySelector(`[data-hash="${e}"]`))return void t.remove();const r=t.render();r&&!(r instanceof Promise)&&(r.dataset.hash=e,t.isHead?document.head.appendChild(r):t.insertAdjacentElement('afterend',r),t.isAuto&&(r.id=r.id?r.id:GSBase.nextID(),t.#r=r.id))}t.isAuto||t.remove()}disconnectedCallback(){const t=this;if(t.isAuto&&t.#r){const e=document.querySelector(`#${t.#r}`);e&&e.remove()}t.dispose()}attributeChangedCallback(t,e,r){const n=this;requestAnimationFrame((()=>{n.attributeCallback(t,e,r)}))}attributeCallback(t,e,r){}render(){}dispose(){}get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}get isProtocol(){const t=this.protocol;if(!t)return!0;const e=location.protocol.replace(':','');return'http'===t&&e===t||'https'===t&&e===t}get isAsset(){return this.isTarget('GreenScreens')}isTarget(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().includes(e)&&(t=!0)})),t}const r=new RegExp(`${t}`,'i');return!!navigator.userAgent.match(r)}isRenderable(){const t=this,e=t.isMobile,r=t.isAsset,n=t.isProtocol,s=t.target,i=t.env;return!!n&&(('assets'!==i||!1!==r)&&(('browser'!==i||!0!==r)&&(('mobile'!==i||!1!==e)&&(('desktop'!==i||!0!==e)&&!!t.isTarget(s)))))}get env(){return this.getAttribute('env')||''}get target(){return this.getAttribute('target')||''}get url(){const t=this;let e=t.getAttribute('url')||'';if('assets'===t.env)return'**'+e;if(t.#n)try{let t=`${location.origin}${location.pathname}`;e.startsWith('/')&&(t=location.origin),e.startsWith('http')&&(t=void 0);const r=new URL(e,t);r.searchParams.append('_dc',Date.now()),e=r.href}catch(t){GSLog.error(null,t)}return e}get type(){const t=this;let e=t.getAttribute('type')||'';return e||(t.url.includes('.js')?e='text/javascript':t.url.includes('.css')&&(e='text/css')),e}get async(){return this.hasAttribute('async')}get defer(){return this.hasAttribute('defer')}get isHead(){return this.hasAttribute('head')}get isAuto(){return this.hasAttribute('auto')}get protocol(){return this.getAttribute('protocol')||''}get nonce(){return this.getAttribute('nonce')||''}get crossorigin(){return this.getAttribute('crossorigin')}get fetchpriority(){return this.getAttribute('fetchpriority')||'auto'}get integrity(){return this.getAttribute('integrity')}get referrerpolicy(){return this.getAttribute('referrerpolicy')}get#n(){return'GS_NO_CACHE'in globalThis?globalThis.GS_NO_CACHE:!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static{Object.seal(GSBase)}}class GSDynamicStyle extends CSSStyleSheet{constructor(t){super(),this.id=t||GSBase.nextID()}deleteRule(t=''){const e=this;Array.from(e.cssRules).map(((e,r)=>e.selectorText===`.${t}`?r:-1)).filter((t=>t>-1)).forEach((t=>e.deleteRule(t)))}getRule(t=''){return Array.from(this.cssRules).filter((e=>e.selectorText===`.${t}`)).pop()}setRule(t,e='',r=!1){const n=this;if(!t)return;let s=n.getRule(t);if(!s)return n.insertRule(`.${t} {}`),n.setRule(t,e,r);if(!e)return s;let i=[];return i='string'==typeof e?e.replaceAll('\n','').split(';').map((t=>t.trim().split(':'))).filter((t=>2===t.length)):Object.entries(e),r?i.forEach((t=>n.#s(s,t[0],t[1]))):requestAnimationFrame((()=>{i.forEach((t=>n.#s(s,t[0],t[1])))})),s}#s(t,e='',r=''){const n=(r=r||'').includes('!important');r=r.replace('!important',''),e=e.trim(),t.style.setProperty(e,r,n?'important':'')}}class GSCacheStyles{static#i=new Map;static create(t){const e=new GSDynamicStyle(t);return this.#i.set(t,e),e}static set(t,e){const r=this;if(e instanceof CSSStyleSheet&&r.#i.set(t,e),e&&'string'==typeof e){GSCacheStyles.create(t).replaceSync(e)}return r.get(t)}static remove(t){return this.#i.delete(t)}static get(t){return this.#i.get(t)}static get dynamic(){const t='gs-dynamic';let e=GSCacheStyles.get(t);return e||(e=GSCacheStyles.create(t),document.adoptedStyleSheets=GSCacheStyles.styles),e}static getRule(t=''){return GSCacheStyles.dynamic.getRule(t)}static setRule(t='',e='',r=!1){return GSCacheStyles.dynamic.setRule(t,e,r)}static deleteRule(t=''){GSCacheStyles.dynamic.deleteRule(t)}static get styles(){return Array.from(new Map([...GSCacheStyles.#i].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static adopt(t='',e=0){if(t)try{e=e||GSBase.hashCode(t),GSCacheStyles.set(e,t),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){GSLog.error(null,t)}}static get#a(){return'.z-10k{z-index:10000 !important;}.gs-hide{display:none !important;}.gs-hide-orientation,.gs-render{display:none !important;}gs-item{display:none !important;}'}static{Object.freeze(GSCacheStyles),globalThis.GSCacheStyles=GSCacheStyles,GSCacheStyles.adopt(GSCacheStyles.#a)}}class GSLinkExt extends HTMLLinkElement{#o=null;constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.isCSS&&(t.#o=setInterval(t.#l.bind(t),1))}connectedCallback(){}disconnectedCallback(){const t=this;if(clearInterval(t.#o),!t.isCSS)return;const e=GSCacheStyles.remove(t.order);GSBase.sendSuspendedEvent(document,'gs-style',e)}#l(){const t=this;if(!t.sheet)return;clearInterval(t.#o),GSCacheStyles.adopt(t.asText,t.order);const e=GSCacheStyles.get(t.order);GSBase.sendSuspendedEvent(document,'gs-style',e)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join('')}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get isCSS(){return'stylesheet'===this.rel||this.href.includes('.css')}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}static{customElements.define('gs-ext-link',GSLinkExt,{extends:'link'}),Object.freeze(GSLinkExt)}}class GSStyleExt extends HTMLStyleElement{constructor(){super();this.order||(this.order=GSBase.nextID())}connectedCallback(){const t=this;if(!t.sheet)return;GSCacheStyles.adopt(t.asText,t.order);const e=GSCacheStyles.get(t.order);GSBase.sendSuspendedEvent(document,'gs-style',e)}disconnectedCallback(){const t=GSCacheStyles.remove(this.order);GSBase.sendSuspendedEvent(document,'gs-style',t)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join('')}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}static{Object.freeze(GSStyleExt),customElements.define('gs-ext-style',GSStyleExt,{extends:'style'})}}class GSCSS extends GSBase{static get observedAttributes(){return['disabled',...super.observedAttributes]}attributeCallback(t,e,r){const n=this;if('disabled'===t)return n.disabled?n.dispose():n.render()}constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.disabled=0==t.notheme&&t.theme!==GSCSS.activeTheme}async render(){const t=this;if(!t.disabled)try{const e=await fetch(t.url);if(!e.ok)return;const r=await e.text();GSCacheStyles.adopt(r,t.order);const n=GSCacheStyles.get(t.order);n&&GSBase.sendSuspendedEvent(document,'gs-style',n)}catch(e){GSCacheStyles.remove(t.order),GSLog.error(null,e)}}dispose(){const t=this;if(!t.isAuto)return;const e=GSCacheStyles.get(t.order);GSCacheStyles.remove(t.order),GSBase.sendSuspendedEvent(document,'gs-style',e),document.adoptedStyleSheets=GSCacheStyles.styles}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}get notheme(){return'true'===this.getAttribute('notheme')}get disabled(){return this.hasAttribute('disabled')}set disabled(t=!1){return t?this.setAttribute('disabled',''):this.removeAttribute('disabled')}get theme(){return this.getAttribute('theme')||'default'}static get activeTheme(){return new URLSearchParams(location.hash.slice(1)).get('theme')||'default'}static#c(t){const e=GSCSS.activeTheme;Array.from(document.querySelectorAll('gs-css')).filter((t=>0==t.notheme)).forEach((t=>t.disabled=t.theme!==e))}static{Object.freeze(GSCSS),customElements.define('gs-css',GSCSS),window.addEventListener('hashchange',GSCSS.#c,!1)}}class GSScript extends GSBase{render(){const t=this,e=document.createElement('script');return e.src=t.url,t.getAttributeNames().filter((t=>'url'!==t)).forEach((r=>e.setAttribute(r,t.getAttribute(r)))),e}static{customElements.define('gs-script',GSScript),Object.freeze(GSScript)}}class GSLink extends GSBase{render(){const t=this,e=document.createElement('link');return e.href=t.url,t.getAttributeNames().filter((t=>'url'!==t)).forEach((r=>e.setAttribute(r,t.getAttribute(r)))),t.shadow&&'stylesheet'===e.rel&&e.setAttribute('is','gs-ext-link'),e}get rel(){const t=this;let e=t.getAttribute('rel')||'';return e||t.url.includes('.css')&&(e='stylesheet'),e}get shadow(){return this.hasAttribute('shadow')}static{customElements.define('gs-link',GSLink),Object.freeze(GSLink)}}class GSID{static#e=0;static reset(){this.#e=0}static next(t='GSId-'){return`${t}${this.#e++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let r=0,n=0;if(0===e)return r;for(;n<e;)r=(r<<5)-r+t.charCodeAt(n++)|0;return r}static setIf(t){t&&(t.id='string'!=typeof t.id?GSID.id:t.id||GSID.id)}static{Object.freeze(GSID)}}class GSUtil{static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static#u=/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asNum=(t=0,e=0)=>GSUtil.isNumber(t)?parseFloat(t):e;static asBool=(t=!1)=>'true'===t?.toString().trim().toLowerCase();static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,r)=>e[r]));static capitalize=(t='')=>t?t[0].toUpperCase()+t.slice(1).toLowerCase():'';static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isInstance=t=>t instanceof t.constructor;static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.trim().startsWith('<')&&t.trim().endsWith('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return!GSUtil.isNull(t)&&(Array.isArray(t)||'object'==typeof t)}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t='',e={},r=!0){return GSUtil.isJsonString(t)?JSON.parse(r?GSUtil.normalizeJson(t):t):GSUtil.isJsonType(t)?t:(t&&GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),e)}static normalizeJson(t=''){return t?.replace(GSUtil.#u,'"$2": ')}static normalize(t,e=''){return(t??e).toString().trim()}static textTransform(t='',e=''){switch(t){case'lowercase':e=e.toLowerCase();break;case'uppercase':e=e.toUpperCase();break;case'capitalize':e=GSUtil.capitalizeAll(e)}return e}static sanitize(t=''){const e={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#x27;','/':'&#x2F;'};return t.replace(/[&<>"'/]/gi,(t=>e[t]))}static fromTemplateLiteral(t,e){const r=Object.keys(e),n=Object.values(e);return new Function(...r,`return \`${t}\`;`)(...n)}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,r=null;return t.trim().split('.').forEach(((t,n,s)=>{if(e)return n<s.length-1?e=e[t]:void(r=e[t])})),r}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return 0===GSUtil.normalize(t).trim().length}static isStringMatch(t,e){const r=GSUtil.isStringNonEmpty(t),n=GSUtil.isStringNonEmpty(e);return r&&n?t.trim().toLowerCase()==e.trim().toLowerCase():r===n}static async timeout(t=0,e){return e=GSUtil.isNumber(e)?AbortSignal.timeout(e):e,new Promise(((r,n)=>{const s=setTimeout(r.bind(null,!0),t);e instanceof AbortSignal&&e.addEventListener('abort',(()=>{clearTimeout(s),n(new Error('aborted timeout'))}))}))}static async export(t,e,r='octet/stream'){const n=new Blob(t,{type:r}),s=URL.createObjectURL(n);try{const t=document.createElement('a');t.href=s,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(s)}}static register(t,e,r,n=!0,s=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:r?.toLowerCase()}),n&&!Object.isSealed(e)&&Object.seal(e),s&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),r=URL.createObjectURL(e);try{return await import(r)}finally{URL.revokeObjectURL(r)}}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}}let t=class GSFunction{static isFunction=t=>'function'==typeof t;static isFunctionNative(t){return GSFunction.isFunction(t)&&t.toString().includes('native code')}static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static isFunctionDefined(t,e,r){const n=!!t&&Reflect.getOwnPropertyDescriptor(t.__proto__,e);return n&&'function'==typeof n[r]}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){const r=arguments?Array.from(arguments).slice(2):[];return await t.apply(e||null,r)}static callFunctionSync(t,e){const r=arguments?Array.from(arguments).slice(2):[];return t.apply(e||null,r)}static async callFunction(t,e,r=!0){if(t=GSUtil.isString(t)?GSFunction.parseFunction(t):t,!GSFunction.isFunction(t))return;if(!r&&GSFunction.isFunctionNative(t))return;const n=arguments?Array.from(arguments).slice(3):[];return GSFunction.isFunctionAsync(t)?await GSFunction.callFunctionAsync(t,e,...n):GSFunction.callFunctionSync(t,e,...n)}static parseFunction(t){const e=GSUtil.parseValue(t);return GSFunction.isFunction(e)?e:null}static async#d(t,e,r){if(!GSFunction.isFunction(t))return;return GSFunction.isFunctionAsync(t)?await t.apply(e,r):t.apply(e,r)}static callOnceFifo(t,e){let r=!1;return async(...n)=>{if(r)return;r=!0;const s=e||this;return await GSFunction.#d(t,s,n)}}static callOnceLifo(t,e){let r=0;return(...n)=>{if(r<0)return;r++;const s=e||this;return new Promise(((e,i)=>{queueMicrotask((async()=>{if(!(r<=0)&&(r--,0===r))try{const r=await GSFunction.#d(t,s,n);e(r)}catch(t){i(t)}finally{r=-1}}))}))}}static{Object.seal(GSFunction),globalThis.GSFunction=GSFunction}},e=class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,r=!1){GSAttr.isHTMLElement(t)&&(r?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,e,r){GSAttr.isHTMLElement(t)&&(GSUtil.normalize(r)?t.setAttribute(e,r):t.removeAttribute(e))}static get(t,e='',r=''){if(!GSAttr.isHTMLElement(t))return r;if(!GSUtil.isInstance(t))return;const n=t.getAttribute(e)||r;return GSUtil.normalize(n)}static getAsBool(t,e='',r='false'){const n=GSAttr.get(t,e,r);return GSUtil.asBool(n,r)}static getAsNum(t,e='',r='0'){const n=GSAttr.get(t,e,r);return GSUtil.asNum(n,r)}static getAsJson(t,e='',r='0'){const n=GSAttr.get(t,e,r,{});return GSUtil.toJson(n)}static setAsBool(t,e='',r='false'){GSAttr.set(t,e,GSUtil.asBool(r),!1)}static setAsNum(t,e='',r='0'){GSAttr.set(t,e,GSUtil.asNum(r),NaN)}static setAsJson(t,e='',r='0'){GSAttr.set(t,e,JSON.stringify(r),'{}')}static flattenJson(t){return Object.entries(t||{}).map((t=>`${t[0]}=${t[1]}`)).join(' ')}static jsonToAttr(t,e){GSAttr.isHTMLElement(e)&&Object.entries(t||{}).map((t=>GSAttr.set(e,t[0],t[1])))}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static flatten(t,e=' '){return Array.from(t?.attributes||[]).map((t=>`${t.name}="${t.value}"`)).join(e)}static proxify(t,e={}){return new Proxy(t,{set(t,r,n){if('self'===r)return;if('dataset'===r)return t.dataset=n;const s=e[r]?.type;switch(r=e[r]?.attribute||r,s){case Boolean:GSAttr.toggle(t,r,GSUtil.asBool(n));break;case Number:GSAttr.setAsNum(t,r,n);break;case Object:case Array:GSAttr.set(t,r,JSON.stringify(n));default:GSAttr.set(t,r,n)}return!0},get(t,r){if('dataset'===r)return t.dataset;if('self'===r)return t;const n=e[r]?.type,s=!0===e[r]?.multi;r=e[r]?.attribute||r;let i=GSAttr.get(t,r);switch(n){case Boolean:return t.hasAttribute(r);case Number:return GSUtil.asNum(i,0);case Object:return GSUtil.toJson(i,{});case Array:return GSUtil.toJson(i,[]);default:return i=i||'',s?GSUtil.toStringArray(i):i}}})}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}},r=class GSCSSMap{static#S=!!globalThis.document?.body?.computedStyleMap;#h;constructor(t){this.#h=GSCSSMap.#m(t)}get(t){const e=this;if(e.#h)return GSCSSMap.#S?e.#h.get(t):e.#h[GSUtil.capitalizeAttr(t)]}asText(t){return(this.get(t)||'')?.toString()}asBool(t){const e=this.get(t);return GSUtil.asBool(GSCSSMap.#S?e?.value:e)}asNum(e){let r=this.get(e);return GSCSSMap.#S&&t.isFunction(r?.to)&&'number'!==r.unit&&(r=r.to('px')),GSUtil.asNum(GSCSSMap.#S?r?.value:r.match(/\d*(\.\d*)?/g).filter((t=>GSUtil.isNumber(t))).shift())}matches(t,e){return this.asText(t)==e}static#m(t){return GSCSSMap.#S?t.computedStyleMap():globalThis.window?.getComputedStyle?globalThis.window.getComputedStyle(t):null}static styleValue(t,e){return GSCSSMap.getComputedStyledMap(t).get(e)}static getComputedStyledMap(t){return new GSCSSMap(t)}static#g(t){return t?(t=String(t).replace(/\s*([>~+])\s*/g,' $1 ')).replace(/(\s+)/g,' ').trim():''}static#p(t,e){return t.split(e).map((t=>t.trim())).filter((t=>t))}static#G(t,e){return!!t&&e.some((e=>t.includes(e)))}static findRule(t){const e=GSCSSMap,r=e.#p(e.#g(t),',');return Array.from(globalThis.document.styleSheets).map((t=>Array.from(t.cssRules||[]))).reduce(((t,e)=>t.concat(e)),[]).filter((t=>e.#G(e.#g(t.selectorText),r)))}static{Object.seal(GSCSSMap),globalThis.GSCSSMap=GSCSSMap}};class GSData{static uniqe(t){return Array.from(new Set(t))}static compareArrays=(t,e)=>t.length===e.length&&t.every(((t,r)=>t===e[r]));static arraysEqual(t,e){return!!Array.isArray(t)&&(!!Array.isArray(e)&&(t===e||(t=t.toSorted(),e=e.toSorted(),GSData.compareArrays(t,e))))}static mergeArrays(t=[],e=[]){return[...t,...e].filter(((t,e,r)=>r.indexOf(t)===e))}static filterData(t,e,r){return e=Array.isArray(e)?e:[],0===t.length?e:e.filter((e=>GSData.filterRecord(e,t,r)))}static filterRecord(t,e,r){return'string'==typeof e?GSData.filterSimple(t,e,r):GSData.filterComplex(t,e)}static filterSimple(t,e='',r){e=e.toLowerCase(),r=r||Object.keys(t);let n=null;for(let s of r)if(n=t[s],(''+n).toString().toLowerCase().includes(e))return!0;return!1}static filterComplex(t,e){let r=!0,n=null;for(let s of e)if(n=s?.value?.toString().toLowerCase(),r=r&&(''+t[s.name]).toLocaleLowerCase().includes(n),!r)break;return r}static sortData(t,e){return 0===t.length?e:e.toSorted(((e,r)=>GSData.sortPair(e,r,t)))}static sortPair(t,e,r){const n=Array.isArray(t);let s=0;return r.forEach(((r,i)=>{if(!r)return;const a=GSUtil.isNumber(r)?r:r.ord,o=GSUtil.isNumber(r.col)?r.col:i,l=n?o:r.name,c=t[l],u=e[l];s=GSData.compare(c,u,a,s)})),s}static compare(t,e,r,n){return GSUtil.isNumber(t)&&GSUtil.isNumber(e)?n||GSData.compareNum(t,e,r):GSUtil.isString(t)||GSUtil.isString(e)?n||GSData.compareString(t,e,r):GSUtil.isBool(t)||GSUtil.isBool(e)?n||GSData.compareBool(t,e,r):n}static compareBool(t,e,r){return t=t?1:0,e=e?1:0,GSData.compareNum(t,e,r)}static compareString(t,e,r){const n=(t||'').toString(),s=(e||'').toString();return r<0?s.localeCompare(n):n.localeCompare(s)}static compareNum(t,e,r){return r<0?e-t:t-e}static writeToOject(t,e,r,n=!0){if(n&&GSUtil.isNull(r))return;const s=e.split('.');if(1===s.length)return GSData.#f(t,e,r);const i=s.slice(0,-1),a=s.slice(-1)[0];return i.forEach((e=>{t.hasOwnProperty(e)||(t[e]={}),t=t[e]})),GSData.#f(t,a,r)}static#f(t,e,r){return t.hasOwnProperty(e)?(Array.isArray(t[e])||(t[e]=[t[e]]),Array.isArray(r)?t[e]=t[e].concat(r):t[e].push(r)):t[e]=r,t}static readFromProperty(t,e){if(GSUtil.isNull(t))return;const r=/\[\d+\]$/g;let n=e,s='';return r.test(e)?(n=e.replace(r,''),s=e.match(r).shift().match(/\d+/).shift(),s=GSUtil.asNum(s),t=t.hasOwnProperty(n)?t=t[n][s]:null):t=t.hasOwnProperty(n)?t=t[n]:null,t}static readFromObject(t,e){return e?e.split('.').reduce(((t,e)=>GSData.readFromProperty(t,e)),t):void 0}static objectPathExist(t,e){return void 0!==GSData.readFromObject(t,e)}static{Object.seal(GSData),globalThis.GSData=GSData}}class GSDOM{static QUERY_FOCUSABLE='a[href]:not([tabindex=\'-1\']),area[href]:not([tabindex=\'-1\']),input:not([disabled]):not([tabindex=\'-1\']),select:not([disabled]):not([tabindex=\'-1\']),textarea:not([disabled]):not([tabindex=\'-1\']),button:not([disabled]):not([tabindex=\'-1\']),iframe:not([tabindex=\'-1\']),[tabindex]:not([tabindex=\'-1\']),[contentEditable=true]:not([tabindex=\'-1\'])';static QUERY_INPUT='input:not([type=\'hidden\']):not(disabled):not(readonly),select:not([type=\'hidden\']):not(disabled):not(readonly),textarea:not([type=\'hidden\']):not(disabled):not(readonly)';static#y=['INPUT','SELECT','TEXTAREA','OUTPUT'];static#b=/(?:\n+\t*)+/g;static SPEED=300;static get activeElement(){return GSDOM.active(document.activeElement)}static active(t){return t.shadowRoot?.activeElement?GSDOM.active(t.shadowRoot?.activeElement):t}static isVisible(t){if(!GSDOM.isHTMLElement(t))return!1;const e=r.getComputedStyledMap(t),n=!e.matches('visibility','hidden'),s=!e.matches('display','none'),i=e.asNum('opacity')>0,a=t.getBoundingClientRect();return a.width>0&&a.height>0&&i&&n&&s}static parse(t='',e=!1,r='text/html'){try{const n=(new DOMParser).parseFromString(t,r);return e?n?.head?.firstElementChild||n?.body?.firstElementChild:n}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',r=!1){const n=GSDOM.parse(e),s=[...GSDOM.#E(n.head.children),...GSDOM.#E(n.body.children)],i=r||1!==s.length,a=GSDOM.wrap(t,i?null:s.shift());for(;s.length>0;)a.appendChild(s.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#E(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const e=GSUtil.isString(t)?t:t?.tagName;return GSDOM.#y.includes(e)}static isButtonElement(t){return t instanceof HTMLButtonElement||'GS-BUTTON'===t?.tagName||GSDOM.hasClass(t,'btn')}static isElement(t,e){if(!(e&&t))return!1;if(!GSUtil.isString(e))return t instanceof e;const r=customElements.get(e.toLowerCase());if(r&&t instanceof r)return t;const n=GSDOM.inheritance(t);for(let r of n)if(r?.constructor?.name===e)return t;return e.toUpperCase()===t.tagName&&t}static isSelect(t){return t instanceof HTMLSelectElement}static isSlotElement(t){return t instanceof HTMLSlotElement}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const r=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),n=GSDOM.isHTMLElement(t)&&r,s=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!n||s)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,r){const n=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),s=t===e&&t.parentNode===e;return!(!n||s)&&t.insertAdjacentElement(r,e)}static removeElement(t){return GSDOM.parent(t)?.removeChild(t)}static walk(t,e=!1,r=!1,n=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,r,n)}static*childAll(t,e=!1,r=!0,n=!1){if(!t)return;n&&(yield t),r&&(yield*GSDOM.childAll(t.shadowRoot,e,r,!0));const s=e?t.childNodes:t.children;if(s)for(let t of s)yield*GSDOM.childAll(t,e,r,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static offsetParent(t){let e=t?.offsetParent;if(e)return e;const r=GSDOM.parentAll(t);for(const t of r)if(e=t.offsetParent,e)break;return e}static root(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static getElementIndex(t){if(!GSDOM.isHTMLElement(t))return 0;let e=0;for(;t=t.previousElementSibling;)e++;return e}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.documentElement,t);if(!t||!e)return null;const r=GSDOM.walk(t,!1);for(let t of r)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM.closest(document.documentElement,e);if(!t||!e)return null;const r=GSDOM.walk(t,!0);for(let t of r)if(GSDOM.matches(t,e))return t;return null}static query(t,e,r=!1,n=!0){if('string'==typeof t)return GSDOM.query(document.documentElement,t,r,n);if(!t||!e)return null;if(GSDOM.matches(t,e))return GSDOM.#v(t);const s=GSDOM.walk(t,!1,r,n);for(let t of s)if(GSDOM.matches(t,e))return GSDOM.#v(t);return null}static queryAll(t,e,r=!1,n=!0){if('string'==typeof t)return GSDOM.queryAll(document.documentElement,t,r,n);const s=[];if(!t||!e)return s;const i=GSDOM.walk(t,!1,r,n);for(let t of i)GSDOM.matches(t,e)&&s.push(GSDOM.#v(t));return s}static#v(t){return'FORM'!==t.tagName?t:GSDOM.isHTMLElement(t.id)?new Proxy(t,{get:(t,e,r)=>{if('_owner_'===e)return t;if('id'===e)return t.getAttribute('id');const n=Reflect.get(t,e);return GSFunction.isFunction(n)?n.bind(t):n},set:(t,e,r)=>t[e]=r}):t}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static setHTML(t,e='',r=!1,n){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(r&&t?.setHTML?n?t.setHTML(e,{sanitizer:n}):t.setHTML(e):t.innerHTML=e instanceof Document?e.body.innerHTML:e)}static setText(t,e=''){t&&(t.textContent=e)}static css(t,e){if(GSUtil.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!(Array.isArray(t)&&t.length>0))return!1;requestAnimationFrame((()=>{t.forEach((t=>{Object.entries(e).forEach((e=>{t.style[e[0]]=e[1]}))}))}))}static toggleClass(t,e,r){return GSUtil.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!!(Array.isArray(t)&&t.length>0)&&(!(!e||0==e.trim().length)&&(e=e.split(' ').filter((t=>t&&t.trim().length>0)),GSUtil.isNull(r)?e.forEach((e=>{t.forEach((t=>t.classList.toggle(e)))})):(t.forEach((t=>{r?t.classList.add.apply(t.classList,e):t.classList.remove.apply(t.classList,e)})),!0)))}static toggle(t,e){return GSDOM.toggleClass(t,'d-none',GSUtil.isNull(e)?e:!e)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea, output'){const r=GSDOM.unwrap(t);requestAnimationFrame((()=>{r.querySelectorAll(e).forEach((t=>t.value=''))}))}static getValue(t,e=!1){let r=null;switch(t.type){case'datetime-local':case'number':r=t.value?t.valueAsNumber:t.value;break;case'select-multiple':r=Array.from(t.selectedOptions).map((t=>t.value));break;case'checkbox':r=t.hasAttribute('value')&&t.value?t.checked?t.value:null:t.checked;break;default:r=t.value}return GSUtil.isNull(r)&&e&&(r=t.defaultValue),r}static toValue(t,e=!1){if(!GSDOM.isHTMLElement(t))return;let n=GSDOM.getValue(t,e);if('text'===t.type){const e=r.styleValue(t,'text-transform');e&&(n=GSUtil.textTransform(e.value,n))}return n}static fromValue(t,e,r=!1){if(!GSDOM.isHTMLElement(t))return;const n=Array.isArray(e)?e[0]||'':e;if('checkbox'===t.type)t.hasAttribute('value')?t.checked=n===t.value:t.checked=1==n,r&&(t.defaultValue=t.checked);else t.value=GSUtil.normalize(n),r&&(t.defaultValue=t.value)}static toObject(t,e='input, textarea, select, output',r=!0,n=!1){const s=GSDOM.unwrap(t),i={};return GSDOM.queryAll(s,e).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!r||t.checkValidity())).forEach((t=>GSDOM.fromElement2Object(t,i,n))),i}static fromObject(t,e,r='input, textarea, select, output',n=!1){e=GSUtil.toJson(e);const s=GSDOM.unwrap(t),i=GSDOM.queryAll(s,r);Array.from(i).forEach((t=>GSDOM.fromObject2Element(t,e,n)))}static fromObject2Element(t,e,r=!1){if(!GSData.objectPathExist(e,t?.name))return;const n=GSData.readFromObject(e,t.name);'radio'!==t.type?GSDOM.fromValue(t,n,r):t.value===n&&(t.checked=!0)}static fromElement2Object(t,e,r=!1){('radio'!==t.type||t.checked)&&GSData.writeToOject(e,t.name,GSDOM.toValue(t,r))}static toJson(t,e=!0,r=!1,n){if(Array.isArray(t))return t.map((t=>GSDOM.toJson(t,e,r,n)));const s={};if(!GSDOM.isHTMLElement(t))return s;r||(s['#tagName']=t.tagName.toLowerCase()),s.$text=t.innerText;const i=n||GSDOM.allProperties(t);if(Array.from(t.attributes).forEach((e=>{const r=i[e.name]?.type;switch(r){case Boolean:s[e.name]=t.hasAttribute(e.name);break;case Number:s[e.name]=GSAttr.getAsNum(t,e.name);break;default:s[e.name]=e.value}})),e){const i=Array.from(t.children).map((t=>GSDOM.toJson(t,e,r,n)));i.length>0&&(s.items=i)}return s}static fromJson(t,e='gs-item',r=!1){return r?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,e='gs-item'){if(!t)return null;if(GSUtil.isNumber(t)||GSUtil.isString(t))return GSDOM.fromJsonAsDOM({title:t},e);if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t,e)));const r=t['#tagName']||e,n=document.createElement(r);return Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.setAttribute(e,t[e]))),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsDOM(t,e);n.appendChild(r)})),n}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const r=t['#tagName']||e,n=[];return n.push(`<${r} `),Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.push(` ${e}="${t[e]}" `))),n.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsString(t,e);n.push(r)})),n.push(`</${r}>`),n.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').filter((t=>t.length>1)).forEach((e=>{const r=e.split('=');GSDOM.setValue(`input[name=${r[0]}]`,r[1],t)}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,e='input, select, textarea, .btn',r=!0,n=''){let s=GSDOM.queryAll(t,e);!r&&n&&(s=s.filter((t=>GSUtil.asBool(t.dataset[n])))),s.forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, textarea, .btn',r=!0,n=''){GSDOM.queryAll(t,e).filter((t=>!!r||!t.disabled)).forEach((t=>{t.setAttribute('disabled',!0),n&&(t.dataset[n]=!0)}))}static setValue(t,e,r,n=!1){GSDOM.queryAll(r,t).forEach((t=>GSDOM.fromValue(t,e,n)))}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),r=[];let n;for(;n=e.nextNode();)r.push(n);return r}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(GSDOM.#b,'')))}static validate(t,e,r,n=!1){if(t.tagName!==e){if(n)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),r))return!0;if(n)return!1;const s=GSDOM.toValidationError(t,r);throw new Error(s)}static isAllowed(t,e){return Array.isArray(t)?0===t.filter((t=>GSDOM.isAllowed(t,e))).length:!(t instanceof Text||t instanceof Comment||e.includes(t.tagName))}static toValidationError(t,e){const r=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${r}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let r=!0;try{const r=await fetch(e);if(!r.ok)return;const n=await r.text(),s=new CSSStyleSheet;s.replaceSync(n),t.shadowRoot.adoptedStyleSheets=[s]}catch(t){GSLog.error(null,t),r=!1}return r}static reset(t){if(GSDOM.isFormElement(t)&&!GSDOM.resetSelect(t))return t.dataset.typed=!1,t.value=t.defaultValue,GSDOM.#A(t),!0}static resetSelect(t){if(GSDOM.isSelect(t))return Array.from(t.options).forEach((t=>t.selected=t.hasAttribute('selected'))),GSDOM.#A(t),!0}static#A(t){t.dispatchEvent(new Event('change',{bubbles:!0,composed:!0}))}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM}}class GSEvents{static#w=!1;static#M=new Map;static#O=!1;static#D=0;get altContext(){return GSEvents.#w}set altContext(t){GSEvents.#w=GSUtil.asBool(t,!0)}static protect(){GSEvents.listen(globalThis,null,'contextmenu',GSEvents.#T),GSEvents.listen(globalThis.document,null,'keydown',GSEvents.#C)}static#T(t){!GSEvents.#w&&t.shiftKey||GSEvents.prevent(t)}static#C(t){const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}static async waitPageLoad(e,r='loaded',n,s=100,i=!0){if(!GSEvents.#O)try{await GSEvents.wait(globalThis.window,'load',s,i),GSEvents.#O=!0}catch(t){GSLog.error(null,t)}await t.callFunction(n),GSEvents.sendSuspended(e,r)}static wait(t,e='',r=0,n=!0){if(GSUtil.isStringEmpty(e))throw new Error('Event undefined!');if(!GSUtil.isNumber(r))throw new Error('Invalid timeout value!');return r>0?GSEvents.once(t,null,e,null,r):new Promise((s=>{GSEvents.once(t,null,e,(t=>{n&&GSEvents.prevent(t),s(t)}),r)}))}static async waitAnimationFrame(e,r=!1){if(r){if('function'!=typeof e)return;if(GSEvents.#D>0)return t.callFunction(e);GSEvents.#D++}return new Promise(((n,s)=>{requestAnimationFrame((async()=>{try{const r=await t.callFunction(e);n(r)}catch(t){s(t)}finally{r&&GSEvents.#D>0&&GSEvents.#D--}}))}))}static listen(t,e,r,n,s=!1){return!e&&t?t.addEventListener(r,n,s):GSDOM.queryAll(t,e).map((t=>t.addEventListener(r,n,s)))}static unlisten(t,e,r,n){return!e&&t?t.removeEventListener(r,n):GSDOM.queryAll(t,e).map((t=>t.removeEventListener(r,n)))}static on=GSEvents.listen;static off=GSEvents.unlisten;static once(t,e,r,n,s=0){const i=GSEvents.#L(s);return i&&i.internal?new Promise(((s,a)=>{GSEvents.listen(t,e,r,n||s,{once:!0,signal:i}),i.addEventListener('abort',a)})):GSEvents.listen(t,e,r,n,{once:!0,signal:i})}static prevent(e,r=!0){t.hasFunction(e,'preventDefault')&&e.preventDefault(),t.hasFunction(e,'stopPropagation')&&e.stopPropagation(),r&&t.hasFunction(e,'stopImmediatePropagation')&&e.stopImmediatePropagation()}static send(t=document,e,r='',n=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:r,bubbles:n,composed:s,cancelable:i});return t?.dispatchEvent(a)}static toEvent(t,e){let r=null;switch(t){case'copy':case'cut':case'paste':r=new ClipboardEvent(t,e);break;case'blur':case'focus':case'focusin':case'focusout':r=new FocusEvent(t,e);break;case'input':case'beforeinput':r=new InputEvent(t,e);break;case'keydown':case'keyup':case'keypress':r=new KeyboardEvent(t,e);break;case'dblclick':case'mousedown':case'mouseenter':case'mouseleave':case'mousemove':case'mouseout':case'mouseover':case'mouseup':r=new MouseEvent(t,e);break;case'submit':r=new SubmitEvent(t,e);break;case'touchstart':case'touchend':case'touchmove':case'touchcancel':r=new TouchEvent(t,e);break;case'whell':r=new WheelEvent(t,e);break;case'pointerover':case'pointerenter':case'pointerdown':case'pointermove':case'pointerup':case'pointercancel':case'pointerout':case'pointerleave':case'pointerrawupdate':case'gotpointercapture':case'lostpointercapture':r=new PointerEvent(t,e);break;default:r=new CustomEvent(t,e)}return r}static isMouseOrPointerEvent(t){return t instanceof MouseEvent||t instanceof PointerEvent}static sendSuspended(t=document,e,r='',n=!1,s=!1,i=!1){return requestAnimationFrame((()=>{GSEvents.send(t,e,r,n,s,i)}))}static sendDelayed(t=1,e=document,r,n='',s=!1,i=!1,a=!1){return setTimeout((()=>GSEvents.send(e,r,n,s,i,a)),t)}static attach(e,r,n='',s,i=!1,a=!1){if(!r)return!1;if(!(window instanceof Window||r.isConnected))return!1;if(!t.isFunction(s))return!1;if(!t.hasFunction(r,'addEventListener'))return!1;const o=this,l=o.#x(e,r,n,s),c=o.#k(e);return o.#I(c,l.key).set(l.fnkey,l),l.capture=a,i&&(l.once=t=>{try{l.fn(t)}finally{o.remove(l.own,l.el,l.name,l.once)}},Object.defineProperty(l.once,'gsid',{value:s.gsid,writable:!1})),r.addEventListener(n,i?l.once:l.fn,{once:i,capture:a}),!0}static remove(t,e,r='',n){const s=this,i=s.#x(t,e,r,n),a=s.#k(t),o=s.#I(a,i.key),l=o.get(i.fnkey);if(l)o.delete(l.fnkey),s.#F(l);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),s.#F(t);0===o.size&&a.delete(i.key),0===a.size&&s.#M.delete(t)}static deattachListeners(t){const e=this,r=e.#R(t);if(!r)return;const n=r.values();for(let t of n){for(let r of t.values())e.#F(r);t.clear()}r.clear()}static#x(t,e,r='',n=''){if(!e)return!1;const s=this.#U(e),i=this.#N(n);return{own:t,fn:n,el:e,name:r,key:GSID.hashCode(`${s}${r}`),fnkey:GSID.hashCode(`${s}${r}${i||''}`)}}static#I(t,e){let r=t.get(e);return r||(r=new Map,t.set(e,r)),r}static#N(e){return t.isFunction(e)?(e.gsid||Object.defineProperty(e,'gsid',{value:GSID.next(),writable:!1}),e.gsid):null}static#U(t){const r=t instanceof Window;let n=r?t.gselid:e.get(t,'data-gselid');return n||(n=GSID.id,r?t.gselid=n:e.set(t,'data-gselid',n)),n}static#k(t){return this.#I(this.#M,t)}static#R(t){const e=this.#M.get(t);if(e)return this.#M.delete(t),e}static#F(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static#L(t=0){return GSUtil.isNumber(t)&&t>0?((t=AbortSignal.timeout(t)).internal=!0,t):t instanceof AbortSignal?t:void 0}static monitorAction(t,e){t.on('action',(async r=>{const n=t,s=r.detail,i=s.action||s.data?.action;await GSEvents.onAction(n,i,e,r)}))}static async onAction(e,r,n,s){const i=GSEvents.findAction(e,r,n);if(!i)return;GSEvents.prevent(s);let a=!1;try{a=t.isFunctionAsync(i)?await i(s):i(s)}catch(r){if(a=r,!t.isFunction(e.onError))throw r;e.onError(r)}return a}static findAction(e,r='',n=''){let s=!1;if(!r)return s;const i=e;r=GSUtil.capitalizeAttr(GSUtil.capitalize(r));const a=`on${n=GSUtil.capitalizeAttr(GSUtil.capitalize(n))}${r}`;globalThis.GS_LOG_ACTION&&GSLog.warn(e,`Action : ${a}`);const o=i[a];return s=t.isFunction(o),s=s&&!t.isFunctionNative(o),s?i[a].bind(i):null}static{Object.freeze(GSEvents),globalThis.GSEvents=GSEvents}}let n=class GSAbortController extends AbortController{#j=0;constructor(t=0){if(super(),!GSUtil.isNumber(t))throw new Error('Timeout parameter must be number');const e=this;t&&(e.#j=setTimeout(e.abort.bind(e),t)),e.signal.addEventListener('abort',(()=>clearInterval(e.#j)))}wait(t=0){return GSEvents.wait(this.signal,'abort',t)}};class GSPromise{#H;#o;#P;#$;#B;#z;constructor(t,e){const r=this;r.#o=t,r.#H=e instanceof AbortSignal?e:null,r.#H=GSUtil.isNumber(e)?AbortSignal.timeout(e):r.#H,r.#P={abort:r.#W.bind(r)}}await(){const t=this;return t.#z||(t.#H?.addEventListener('abort',t.#P.abort),t.#z=new Promise(t.#q.bind(t))),t.#z}get aborted(){return!0===this.#H?.aborted}#q(t,e){const r=this;r.#$=t,r.#B=e;try{r.#o(r.#_.bind(r),r.#V.bind(r))}catch(t){r.#J(),e(t)}}#W(){this.#J(),this.#B(new Error('Promise aborted!'))}#_(t){const e=this;return e.#J(),e.aborted?null:e.#$(t)}#V(t){const e=this;return e.#J(),e.aborted?null:e.#B(t)}#J(){this.#H?.removeEventListener('abort',this.#P.abort)}static{globalThis.GSPromise=GSPromise}}class GSEvent extends EventTarget{#Y=new Set;#Q(t='',e){const r=Array.from(this.#Y);return this.#Z(e)?r.filter((r=>r.type===t&&r.listener===e)):r.filter((e=>e.type===t))}#Z(t){return'function'==typeof t}on(t='',e,r=0,n=!1){if(!t)return reject('Event undefined!');let s=null;s=n instanceof AbortController?n:n?new GSAbortController(r):null;const i=s||0==r?s?.signal:AbortSignal.timeout(r);return this.addEventListener(t,e,{signal:i}),s||i}once(t,e,r=0,n=!1){if(!t)return reject('Event undefined!');const s=this,wrap=t=>{e(t),s.#Y.delete(wrap)};return wrap.type=t,wrap.listener=e,wrap.timeout=r,n instanceof AbortController?wrap.controller=n:wrap.controller=n?new GSAbortController(r):null,wrap.signal=wrap.controller||0==r?wrap.controller?.signal:AbortSignal.timeout(r),s.addEventListener(t,wrap,{once:!0,signal:wrap.signal}),wrap.controller||wrap.signal}off(t='',e){this.removeEventListener(t,e)}emit(t='',e,r=0){const n=this;return(r=GSUtil.asNum(r,0))<=0?n.#X(t,e):setTimeout((()=>n.#X(t,e)),r)}#X(t='',e){const r=new CustomEvent(t,{detail:e});return this.dispatchEvent(r)}wait(t='',e){const r=this;return new GSPromise(((e,n)=>{r.once(t,e)}),e).await()}listen(t,e){this.on(t,e)}unlisten(t,e){this.off(t,e)}unbind(){Array.from(this.#Y).forEach((t=>{super.removeEventListener(t.type,t.listener)})),this.#Y.clear()}addEventListener(t,e,r){return!!this.#Z(e)&&(this.#Y.add({type:t,listener:e}),super.addEventListener(t,e,r))}removeEventListener(t,e){const r=this,n=r.#Q(t,e);n.forEach((t=>super.removeEventListener(t.type,t.listener))),n.forEach((t=>r.#Y.delete(t)))}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSEventBus{static#K=new Map;static send(t='',e='',r){return GSEventBus.register(t).emit(e,r)}static exist(t=''){return t&&GSEventBus.#K.has(t)}static register(t=''){return GSEventBus.exist(t)||GSEventBus.#K.set(t,new GSEvent),GSEventBus.#K.get(t)}static unregister(t=''){const e=GSEventBus.#K.get(t);return e?.unbind&&e.unbind(),GSEventBus.#K.delete(t)}static{Object.freeze(GSEventBus),globalThis.GSEventBus=GSEventBus}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().includes(e)&&(t=!0)})),t}const r=navigator.userAgent.toLocaleLowerCase()||'',n=r.includes('edg');return!(!n||!e.startsWith('edg'))||!n&&r.includes(e)}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSDOMObserver extends MutationObserver{static#tt=new Map;static#et=new Map;observe(t,e){const r=e||{childList:!0,subtree:!0};return super.observe(t,r)}static create(t){const e=new GSDOMObserver(GSDOMObserver.#rt);return e.observe(t),e}static#nt(t=!1){return t?GSDOMObserver.#et:GSDOMObserver.#tt}static get#st(){return GSDOMObserver.#it||GSDOMObserver.#at}static get#it(){return GSDOMObserver.#tt.size>0}static get#at(){return GSDOMObserver.#et.size>0}static#rt(t){GSDOMObserver.#st&&t.forEach((t=>{GSDOMObserver.#it&&t.addedNodes.forEach((t=>GSDOMObserver.#ot(t,GSDOMObserver.#tt))),GSDOMObserver.#at&&t.removedNodes.forEach((t=>GSDOMObserver.#ot(t,GSDOMObserver.#et)))}))}static#ot(t,e){return 0!==e.size&&(GSDOMObserver.#lt(t,e),t.childNodes.forEach((t=>GSDOMObserver.#ot(t,e))),!0)}static#lt(t,e){e.forEach(((e,r)=>{try{r(t)&&e(t)}catch(t){GSLog.error(null,t)}}))}static#ct(t,e,r){if(t instanceof HTMLElement==0)return!1;const n=new Map;return n.set(e,r),GSDOMObserver.#ot(t,n)}static#Z(t){return'function'==typeof t}static#ut(t,e){return GSDOMObserver.#Z(t)&&GSDOMObserver.#Z(e)}static registerFilter(t,e,r=!1,n){return!!GSDOMObserver.#ut(t,e)&&(GSDOMObserver.#nt(r).set(t,e),r||GSDOMObserver.#ct(n||document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#Z(t)&&GSDOMObserver.#nt(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver,GSDOMObserver.create(document.documentElement)}}class GSComponents{static#M=new Set;static store(t){GSComponents.#M.add(t)}static remove(t){GSComponents.#M.delete(t)}static get(t=''){if(!t)return null;const e=Array.from(this.#M).filter((e=>e.id===t));return 0===e.length?null:e[0]}static#dt(t='',e=0,r){const fn=e=>{const n=e.detail;if(t.startsWith('gs-')&&n.tagName===t.toUpperCase()||n.id===t)return GSEvents.unlisten(document.body,null,'componentready',fn),r(n)},n={once:!1,capture:!1};e>0&&(n.signal=AbortSignal.timeout(e)),GSEvents.listen(document.body,null,'componentready',fn,n)}static waitFor(t='',e=0){return new Promise(((r,n)=>{let s=GSComponents.find(t)||GSComponents.get(t);return s?r(s):GSComponents.#dt(t,e,r)}))}static notifyFor(e='',r){if(!t.isFunction(r))return!1;const callback=t=>{const n=t.composedPath().shift();return n.id===e||n.tagName===e?r(n,t):void 0},n=GSComponents.find(e)||GSComponents.get(e);return n?r(n):(GSEvents.listen(document.body,null,'componentready',callback),callback)}static findAll(t='',e=!0,r=!0){let n=Array.from(GSComponents.#M);return t&&(n=n.filter((e=>e&&GSDOM.matches(e,t)))),e||(n=n.filter((t=>t.shadowRoot))),r||(n=n.filter((t=>!t.shadowRoot))),n}static find(t='',e=!0,r=!0){return GSComponents.findAll(t,e,r).shift()}static getOwner(t,e){if(!(GSDOM.isGSElement(t)||GSDOM.isHTMLElement(t)))return null;const r=GSDOM.parentAll(t);for(let t of r){if(!t)break;if(t instanceof ShadowRoot){const r=GSDOM.parent(t);return e?GSDOM.isElement(r,e)?r:GSComponents.getOwner(r,e):r}if(GSDOM.isElement(t,e))return t}return e?null:document.body}static hasGetter(e,r){return t.isFunctionDefined(e,r,'get')}static hasSetter(e,r){return t.isFunctionDefined(e,r,'get')}static hasFunc(e,r,n){return t.isFunctionDefined(e,r,n)}static listenStyles(){GSComponents.#St||(document.addEventListener('gs-style',GSComponents.#ht),GSComponents.#St=!0)}static unlistenStyles(){document.removeEventListener('gs-style',GSComponents.#ht),GSComponents.#St=!1}static#St=!1;static#ht(){requestAnimationFrame((()=>{GSComponents.findAll(null,!1,!0).filter((t=>t.shadowRoot&&!0!==t.unstyled)).forEach((t=>t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles))}))}static{Object.freeze(GSComponents),GSComponents.listenStyles(),globalThis.GSComponents=GSComponents}}class GSVersion{get version(){return'1.9.5'}get build(){return 20241227}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static UNIQUE=GSVersion.build;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let r=null;const n=location.pathname.split('/').pop(-1).includes('.'),s=t.includes('extension:/');r=t.startsWith('http')||s?t:t.startsWith('/')?`${location.origin}/${t}`:n?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,r=r.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(r);if(!e){const t=GSLoader.NO_CACHE?Date.now():GSLoader.UNIQUE;i.searchParams.append('_dc',t)}return i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')+'/'}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM.query(document.documentElement,t);return e?e.innerHTML:t}return GSUtil.isHTML(t)?t:(t=GSLoader.#mt(t),GSLoader.loadSafe(t))}static#mt(t=''){return t=t.startsWith('//')?GSLoader.#gt+'/'+t:t,GSLoader.normalizeURL(t)}static get#gt(){return GSLoader.normalizeURL(GSLoader.#pt,!0)}static get#pt(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const r=GSLoader.#mt(t);return await GSLoader.load(r,e)}static async load(t='',e='GET',r,n=!1,s){let i=null;const a='Content-Type';(r={...r})[a]=n?'application/json; utf-8':r[a]||'text/plain',r.Accept='application/json';const o=GSLoader.normalizeURL(t,!0),l={method:e,headers:r};('POST'===e||'PUT'===e&&s)&&(l.body=JSON.stringify(s));const c=await fetch(o,l);return c.ok&&(i=n?await c.json():await c.text()),i}static async loadSafe(t='',e='GET',r,n=!1,s,i){try{if(t)return GSLoader.load(t,e,r,n,i)}catch(t){GSLog.error(null,t)}return s||(n?{}:'')}static async loadData(e=''){const r=GSUtil.isJson(e),n=!r&&t.parseFunction(e),s=n&&t.isFunction(n);if((!s&&GSUtil.parseValue(e)||r)&&(e=GSUtil.toJson(e)),s&&(e=await t.callFunction(n)),GSUtil.isJsonType(e))return e}static{Object.seal(GSLoader),globalThis.GSLoader=GSLoader}}class GSDate extends Date{static DEFAULT_FORMAT='YYYY-MM-DDTHH:mm:ssZ';static REGEX_FORMAT=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;#Gt=navigator.locale;format(t=GSDate.DEFAULT_FORMAT,e){this.locale=e;const r=this.asJSON();return t.replace(GSDate.REGEX_FORMAT,((t,e)=>e||r[t]))}build(){const t=this,e=t.last.getDate(),r=t.first.getDay(),n=t.#ft(),s=0===r?[]:' '.repeat(r+(n?-2:-1)).split(' ');let i=1;for(;i<=e;)s.push(i.toString()),i++;for(;s.length%7!=0;)s.push('');return s}get locale(){return this.#Gt}set locale(t){this.#Gt=t||navigator.language}get year(){return this.getFullYear()}set year(t=0){this.setFullYear(t)}get month(){return this.getMonth()}set month(t=0){this.setMonth(t)}get day(){return this.getDate()}set day(t=0){this.setDate(t)}get first(){return new GSDate(this.getFullYear(),this.getMonth(),1)}get last(){return new GSDate(this.getFullYear(),this.getMonth()+1,0)}get YY(){return String(this.YYYY).slice(-2)}get YYYY(){return this.getFullYear()}get M(){return this.getMonth()+1}get MM(){return this.M.toString().padStart(2,'0')}get MMM(){return this.#yt({month:'short'})}get MMMM(){return this.#yt({month:'long'})}get D(){return this.getDate().toString()}get DD(){return this.D.padStart(2,'0')}get d(){return this.getDay().toString()}get dd(){return this.ddd.slice(0,2)}get ddd(){return this.#yt({weekday:'short'})}get dddd(){return this.#yt({weekday:'long'})}get H(){return this.getHours().toString()}get HH(){return this.H.padStart(2,'0')}get h(){return this.#bt(1)}get hh(){return this.#bt(2)}get a(){return this.#Et(!0)}get A(){return this.#Et(!1)}get m(){return this.getMinutes().toString()}get mm(){return this.m.padStart(2,'0')}get s(){return this.getSeconds().toString()}get ss(){return this.s.padStart(2,'0')}get SSS(){return this.getMilliseconds().toString().padStart(3,'0')}get Z(){return this.#vt()}get ZZ(){return this.Z.replace(':','')}get Q(){return Math.ceil(this.M/3)}get k(){return(this.getHours()+1).toString()}get kk(){return this.k.padStart(2,'0')}get W(){const t=new Date(this.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)}get WW(){return this.W.toString().padStart(2,'0')}get x(){return this.getTime()}get X(){return Math.floor(this.x/1e3)}asJSON(){const t=this;return{YY:t.YY,YYYY:t.YYYY,M:t.M,MM:t.MM,MMM:t.MMM,MMMM:t.MMMM,D:t.D,DD:t.DD,d:t.d,dd:t.dd,ddd:t.ddd,dddd:t.dddd,H:t.H,HH:t.HH,h:t.h,hh:t.hh,a:t.a,A:t.A,m:t.m,mm:t.mm,s:t.s,ss:t.ss,SSS:t.SSS,Z:t.Z,ZZ:t.ZZ,Q:t.Q,k:t.k,kk:t.kk,W:t.W,WW:t.WW,x:t.x,X:t.X}}static monthList(t=!1,e=navigator.locale,r=!0){const n=new GSDate;n.locale=e,n.setDate(1),n.setMonth(0);const s=[];let i=null,a=12;for(;a--;)i=t?n.MMM:n.MMMM,i=r?n.#At(i):i,s.push(i),n.setMonth(n.getMonth()+1);return s}static dayList(t=!1,e=navigator.locale,r=!0){const n=new GSDate;n.locale=e;const s=n.#ft()?1:0;n.setDate(n.getDate()-n.getDay()+s);const i=[];let a=null,o=7;for(;o--;)a=t?n.ddd:n.dddd,a=r?n.#At(a):a,i.push(a),n.setDate(n.getDate()+1);return i}#ft(){return 1===new Intl.Locale(this.#Gt)?.weekInfo?.firstDay}#At(t=''){return t.charAt(0).toUpperCase()+t.slice(1)}#yt(t){return this.toLocaleString(this.#Gt,t)}#bt(t){return(this.getHours()%12||12).toString().padStart(t,'0')}#Et(t){const e=this.#yt({hour:'2-digit',hour12:!0}).split(' ').pop(-1);return t?e.toLowerCase():e}#vt(){const t=-1*this.getTimezoneOffset(),e=Math.abs(t),r=e%60;return`${t<=0?'+':'-'}${Math.floor(e/60).toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}`}}class GSPopper{static getOffset(t){const e=t.getBoundingClientRect(),r=window.scrollX,n=window.scrollY,s={left:e.left+r,right:e.right+r,top:e.top+n,bottom:e.bottom+n,height:e.height,width:e.width,x:e.x+r,y:e.y+n};return s.centerX=s.left+s.width/2,s.centerY=s.top+s.height/2,s}static boundingRect(t,e){const r=t.getBoundingClientRect(),n=GSPopper.elementPadding(e?t:null),s=n.x,i=n.y,a=t.clientWidth-s,o=t.clientHeight-i,l=r.left+n.left,c=r.top+n.top;return{width:a,height:o,top:c,left:l,x:l,y:c,centerX:a/2+l,centerY:c+o/2}}static elementPadding(t){const e={left:0,right:0,top:0,bottom:0,x:0,y:0};if(!(t instanceof HTMLElement))return e;const n=r.getComputedStyledMap(t);return e.left=n.asNum('padding-left'),e.right=n.asNum('padding-right'),e.top=n.asNum('padding-top'),e.bottom=n.asNum('padding-bottom'),e.x=e.left+e.right,e.y=e.top+e.bottom,e}static popupFixed(t='top',e,r,n){if(!e||!r)return!1;const s=GSPopper.#wt(t);if(!GSPopper.#Mt(s))return void GSLog.warn(e,`Invalid popover position: ${t}!`);const i=e.dataset.cssId?{}:e.style;i.position='fixed',i.top='0px',i.left='0px',i.margin='0px',i.padding='0px',i.transform='',GSCacheStyles.setRule(e.dataset.cssId,i,!0);const a=e.clientHeight/2,o=e.clientWidth/2,l=GSPopper.boundingRect(r,n instanceof HTMLElement),c=GSPopper.#Ot(e,n,s),u={x:l.centerX,y:l.centerY,offH:a,offW:o,srcH:e.clientHeight,srcW:e.clientWidth};GSPopper.#Dt(s,u,l,c),i.transform=`translate(${u.x}px, ${u.y}px)`,GSCacheStyles.setRule(e.dataset.cssId,i)}static popupAbsolute(t='top',e,r,n){if(!e||!r)return!1;const s=GSPopper.#wt(t);if(!GSPopper.#Mt(s))return void GSLog.warn(e,`Invalid popover position: ${t}!`);const i=e.dataset.cssId?{}:e.style,a=n.dataset.cssId?{}:n.style;a.position='absolute',i.position='absolute',i.margin='0px',i.transform='',i.inset=GSPopper.#Tt(s),GSCacheStyles.setRule(e.dataset.cssId,i,!0);const o=e.getBoundingClientRect(),l=n.getBoundingClientRect(),c=GSPopper.getOffset(r),u={x:c.centerX,y:c.centerY},d={x:o.width/2-l.width/2,y:o.height/2-l.height/2};GSPopper.#Ct(s,u,d,o,l,c),i.transform=`translate(${u.x}px, ${u.y}px)`,a.transform=`translate(${d.x}px, ${d.y}px)`,a.top=d.top?d.top:'',a.left=d.left?d.left:'',GSCacheStyles.setRule(e.dataset.cssId,i),GSCacheStyles.setRule(n.dataset.cssId,a)}static#Ct(t,e,r,n,s,i){t.isTop?(r.y=0,r.left='0px',e.x=e.x-n.width/2,e.y=-1*(n.bottom-i.top+s.height)):t.isBottom?(r.y=0,r.left='0px',e.x=e.x-n.width/2,e.y=i.bottom+s.height):t.isStart?(r.x=0,r.top='0px',e.x=-1*(n.right-i.left+s.width),e.y=e.y-n.height/2):t.isEnd&&(r.x=0,r.top='0px',e.x=i.right+s.width,e.y=e.y-n.height/2)}static#Dt(t,e,r,n){t.isTop?(e.y=r.top-e.srcH-n.size,e.x=e.x-e.offW):t.isBottom?(e.y=r.top+r.height+n.size,e.x=e.x-e.offW):t.isStart?(e.x=r.left-e.srcW-n.size,e.y=e.y-e.offH+n.size):t.isEnd&&(e.x=r.left+r.width+n.size,e.y=e.y-e.offH+n.size)}static#Tt(t){return t.isTop?'auto auto 0px 0px':t.isBottom?'0px auto auto 0px':t.isStart?'0px 0px auto auto':t.isEnd?'0px auto auto 0px':void 0}static#Mt(t){return t.isStart||t.isEnd||t.isTop||t.isBottom}static#wt(t){return{isStart:'start'==t||'left'==t,isEnd:'end'==t||'right'==t,isTop:'top'==t,isBottom:'bottom'==t}}static#Ot(t,e,r){if(!e)return{x:0,y:0,size:0,width:0,height:0};let n=0;const s=GSPopper.boundingRect(t),i=GSPopper.boundingRect(e),a=r.isStart||r.isEnd?i.width:i.height,o=s.width/2-a/2,l=s.height/2-a/2;i.size=a;const c=e.dataset.cssId?{}:e.style;return c.position='absolute',r.isStart||r.isEnd?(c.left='',c.top='0px',n=r.isStart?a:-1*a,c.transform=`translate(${n}px, ${l/2}px)`):(c.top='',c.left='0px',n=r.isTop?a:-1*a,c.transform=`translate(${o}px, ${n}px)`),GSCacheStyles.setRule(e.dataset.cssId,c),i}static{Object.seal(GSPopper),globalThis.GSPopper=GSPopper}}class GSItem extends HTMLElement{static#Lt='data-bs-dismiss';static#xt='data-bs-target';static#kt='data-bs-toggle';static#It='data-action';static#Ft='data-inject';static#Rt='data-attr';static#Ut='data-selectable';static#Nt=['GS-ITEM','TEMPLATE'];static{customElements.define('gs-item',GSItem),Object.seal(GSItem)}#v;constructor(){super(),GSItem.validate(this)}static validate(t,e='GS-ITEM'){return GSDOM.validate(t,e,GSItem.#Nt)}static getBody(t,r=!1){let n=GSItem.getTemplate(t);const s=GSItem.getFlat(t),i=GSItem.getAnchor(t),a=s||r?`anchor="${i}" flat="true"`:'',o=e.get(t,'css-template','');return n?`<gs-template ${a} href="${n}" class="${o}"></gs-template>`:(n=t.querySelector('template'),n?.innerHTML||'')}static genericItems(t){return GSDOM.isHTMLElement(t)?Array.from(t.children).filter((t=>'GS-ITEM'==t.tagName)):[]}static getAttrs(t){return[GSItem.getDismissAttr(t),GSItem.getTargetAttr(t),GSItem.getToggleAttr(t),GSItem.getActionAttr(t),GSItem.getInjectAttr(t),GSItem.getInjectAttributesAttr(t)].join(' ')}static getDismissAttr(t){const e=GSItem.getDismiss(t);return e?`${GSItem.#Lt}="${e}"`:''}static getTargetAttr(t){const e=GSItem.getTarget(t);return e?`${GSItem.#xt}="${e}"`:''}static getToggleAttr(t){const e=GSItem.getToggle(t);return e?`${GSItem.#kt}="${e}"`:''}static getActionAttr(t){const e=GSItem.getAction(t);return e?`${GSItem.#It}="${e}"`:''}static getInjectAttr(t){const e=GSItem.getInject(t);return e?`${GSItem.#Ft}="${e}"`:''}static getInjectAttributesAttr(t){const e=t?.dataset?.attr;return e?`${GSItem.#Rt}="${e}"`:''}static getSelectableAttr(t){const e=GSItem.getSelectable(t);return e?'':`${GSItem.#Ut}="${e}"`}static getActive(t){return e.getAsBool(t,'active')}static getAction(t){return e.get(t,'action')}static getDismiss(t){return e.get(t,'dismiss')}static getTarget(t){return e.get(t,'target')}static getToggle(t){return e.get(t,'toggle')}static getInject(t){return e.get(t,'inject')}static getIcon(t,r=''){return e.get(t,'icon',r)}static getSelectable(t){return e.getAsBool(t,'selectable',!0)}static getAnchor(t){return e.get(t,'anchor','afterend@self')}static getFlat(t){return e.getAsBool(t,'flat',!1)}static getName(t){return e.get(t,'name','')}static getHref(t){return e.get(t,'href','#')}static getGroup(t){return e.get(t,'group')}static getSelected(t){return t.hasAttribute('selected')}static getCSS(t){return e.get(t,'css','')}static getTemplate(t){return e.get(t,'template','')}static getType(t){return e.get(t,'type')}get proxy(){return this.#v}get dismissAttr(){return GSItem.getDismissAttr(this)}get targetAttr(){return GSItem.getTargetAttr(this)}get toggleAttr(){return GSItem.getToggleAttr(this)}get type(){return GSItem.getType(this)}get actionAttr(){return GSItem.getActionAttr(this)}get injectAttr(){return GSItem.getInjectAttr(this)}get injectAttributesAttr(){return GSItem.getInjectAttributesAttr(this)}get action(){return GSItem.getAction(this)}get dismiss(){return GSItem.getDismiss(this)}get target(){return GSItem.getTarget(this)}get toggle(){return GSItem.getToggle(this)}get inject(){return GSItem.getInject(this)}get injectAttributes(){return this.dataset.attr}get selectable(){return GSItem.getSelectable(this)}get flat(){return GSItem.getFlat(this)}get name(){return GSItem.getName(this)}get css(){return GSItem.getCSS(this)}get active(){return GSItem.getActive(this)}get template(){return GSItem.getTemplate(this)}get body(){return GSItem.getBody(this)}get href(){return GSItem.getHref(this)}get group(){return GSItem.getGroup(this)}get selected(){return GSItem.getSelected(this)}get html(){const t=this;if(GSUtil.isStringEmpty(t.group))return t.name;const e=GSID.id;return`<input id="${e}" ${t.selected?'checked':''} type="radio" name="${t.group}"><label class="ms-2" for="${e}">${t.name}</label>`}asJSON(t=!0){return GSDOM.toJson(this,t)}}class GSBlock extends HTMLElement{constructor(){super()}connectedCallback(){GSID.setIf(this)}disconnectedCallback(){this.owner?.remove()}get proxy(){return e.get(this,'proxy')}get owner(){return GSDOM.query(document.documentElement,this.proxy)}static{customElements.define('gs-block',GSBlock),Object.seal(GSBlock)}}class OrientationController{static#jt=new Set;#Ht;constructor(t){const e=this;e.#Ht=t,e.#Ht.addController(e)}hostConnected(){OrientationController.#jt.add(this)}hostDisconnected(){OrientationController.#jt.delete(this)}attributeCallback(t,e,r){'orientation'===t&&this.handle()}handle(){const t=this.#Ht;t.offline||(t.isValidOrientation?t.show(!0):t.hide(!0))}static#o(t){requestAnimationFrame((()=>{OrientationController.#jt.forEach((t=>t.handle()))}))}static{GSEvents.attach(window,screen.orientation,'change',OrientationController.#o)}}class GSElement extends HTMLElement{#Pt=!1;#$t=!1;#Bt=null;#zt=null;#Wt=!1;#qt=null;#_t;#Vt=[];#jt=null;#Jt=null;constructor(){super(),this.#Jt=new OrientationController(this)}static observeAttributes(t){return GSData.mergeArrays(t,GSElement.observedAttributes)}static get observedAttributes(){return['orientation','id','visible']}get clazzName(){return this.constructor.name}get template(){return e.get(this,'template','')}set template(t){e.set(this,'template',t)}get isWrap(){return!0}get isFlat(){return GSUtil.FLAT||e.getAsBool(this,'flat')}get isProxy(){return this.#Wt}get proxy(){return e.get(this,'proxy')}get environment(){return e.get(this,'environment','')}set environment(t){e.set(this,'environment',t)}get os(){return e.get(this,'os','')}set os(t){e.set(this,'os',t)}get browser(){return e.get(this,'browser','')}set browser(t){e.set(this,'browser',t)}get protocol(){return e.get(this,'protocol','')}set protocol(t){e.set(this,'protocol',t)}get orientation(){return e.get(this,'orientation','')}set orientation(t){e.set(this,'orientation',t)}get onready(){return e.get(this,'onready','')}set onready(t){e.set(this,'onready',t)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get owner(){return GSComponents.getOwner(this)}get offline(){return this.#$t}get online(){return!this.#$t}get ready(){return this.#Pt}get anchor(){const t='beforeend@self';return this.proxy?t:e.get(this,'anchor',t)}get self(){const t=this;return t.isProxy&&t.#Bt instanceof GSElement?t.#Bt.self:t.#Bt}get visible(){return this.hasAttribute('visible')}set visible(t=!0){e.setAsBool(this,'visible',t)}get unstyled(){return this.hasAttribute('unstyled')}updateUI(){const t=this;!t.unstyled&&t.shadowRoot&&(t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles,GSEvents.send(document.body,'i18n',t.shadowRoot))}getStyle(){return e.get(this,'style','')}get styleID(){return`${this.tagName}-${this.id}`.toLocaleLowerCase()}#Yt(){const t=this;GSCacheStyles.deleteRule(t.styleID),GSCacheStyles.setRule(t.styleID,t.getStyle())}getByID(t=''){return GSDOM.getByID(this,t)}closest(t=''){return GSDOM.closest(this,t)}query(t='',e=!1){const r=this,n=GSDOM.query(r.self,t,!1,!0);return r.isProxy||n?n:GSDOM.query(r,t,!1,e)}queryAll(t='',e=!1){const r=this,n=GSDOM.queryAll(r.self,t,!1,!0);return r.isProxy||n.length>0?n:GSDOM.queryAll(r,t,!1,e)}async getTemplate(t=''){if(t)return GSLoader.getTemplate(t);const e=this.query('template');return e?e.innerHTML:''}hide(t=!1){return GSDOM.hide(this,t)}show(t=!1){return GSDOM.show(this,t)}emit(t,e='',r=!1,n=!1,s=!1){return GSEvents.send(this,t,e,r,n,s)}waitEvent(t='',e=0){return GSEvents.wait(this,t,e)}once(t,e){return this.listen(t,e,!0)}on(t,e,r=!1){return this.listen(t,e,r)}off(t,e){return this.unlisten(t,e)}listen(t,e,r=!1){return this.attachEvent(this,t,e,r)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',r,n=!1){return GSEvents.attach(this,t,e,r,n)}removeEvent(t,e='',r){return GSEvents.remove(this,t,e,r)}get isAllowRender(){const t=this;return t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS&&t.isValidProtocol}connectedCallback(){const t=this;if(!t.#Qt()){if(!t.isAllowRender)return t.remove();GSID.setIf(t),t.#qt=t.#Zt(),t.#Wt=t.#qt.ref,GSComponents.store(t),t.#jt?.forEach((t=>t.hostConnected?.())),requestAnimationFrame((()=>t.#Xt()))}}disconnectedCallback(){const t=this;t.#$t=!0,t.#jt?.forEach((t=>t.hostDisconnected?.())),t.#zt?.disconnect(),GSComponents.remove(t),GSEvents.deattachListeners(t),GSCacheStyles.deleteRule(t.styleID),t.#Kt(),t.#zt=null,t.#Bt=null,t.#qt=null,t.#jt=null}addController(t){const e=this;(e.#jt??=new Set).add(t),e.isConnected&&void 0!==e.self&&t.hostConnected?.()}removeController(t){this.#jt?.delete(t)}repaint(){const t=this;t.disconnectedCallback(),t.#$t=!1,t.#Pt=!1,t.connectedCallback()}attributeChangedCallback(t,e,r){const n=this;n.#Vt.push(arguments),n.#_t||(n.#_t=!0,queueMicrotask((()=>{GSEvents.waitAnimationFrame((()=>{for(;n.#Vt.length>0;)try{n.#te(...n.#Vt.shift())}catch(t){GSLog.error(null,t)}n.#_t=!1}))})))}#te(t,e,r){const n=this;'id'===t&&(GSComponents.remove(e),GSComponents.store(n)),'visible'===t&&GSDOM.toggleClass(n,'gs-hide','false'===r),n.attributeCallback(t,e,r),n.#jt?.forEach((t=>t.attributeCallback?.()))}attributeCallback(t,e,r){}onReady(){}async onBeforeReady(){}async#ee(){const e=this;if(!e.#Pt&&!e.offline){e.#Pt=!0,await e.onBeforeReady();try{e.#jt?.forEach((t=>t.onReady?.())),t.callFunction(e.onready,e),e.emit('ready'),GSEvents.send(document.body,'componentready',e)}finally{e.onReady()}}}#Qt(){const t=GSComponents.getOwner(this,GSElement);return t&&t.isProxy}get#re(){const t=this;return t.shadowRoot||(t.attachShadow({mode:'open'}),t.#zt=GSDOMObserver.create(t.#re),t.updateUI()),t.shadowRoot}get#ne(){const t=this;return t.#Wt&&t.isFlat||!t.#Wt}async#se(){const t=this;if(t.offline)return;const e=t.#ne,r=e?await t.getTemplate(t.template):t.outerHTML;await GSEvents.waitAnimationFrame((()=>{if(t.offline)return;t.#Yt();const n=t.#qt;if(t.#Wt)return e?t.#Bt=t.isWrap?GSDOM.parseWrapped(t,r,!0):GSDOM.parse(r,!0):(t.#Bt=GSDOM.parse(r,!0),t.#Bt.id=t.id,t.id=GSID.id),GSDOM.link(t,t.#Bt),void GSDOM.insertAdjacent(n.target,t.#Bt,n.anchor);if(n.target!==t){if(n.target===t.parentElement)return t.#Bt=t.isFlat?t:t.#re,void GSDOM.setHTML(t.#Bt,r);t.#Bt=GSDOM.parseWrapped(t,r,!0),GSDOM.link(t,t.#Bt),GSDOM.insertAdjacent(n.target,t.#Bt,n.anchor)}else if(t.isFlat)if(r){const e=GSDOM.parseWrapped(t,r,!1);t.#Bt=e,GSDOM.insertAdjacent(n.target,e,n.anchor)}else t.#Bt=t;else t.#Bt=t.#re,GSDOM.setHTML(t.#Bt,r)})),t.updateUI()}#Zt(){const t=this,e=t.anchor,r=e.indexOf('@');let n=r>0?e.slice(0,r):e,s=r>0?e.slice(r+1):'self';'self'!==n&&'parent'!==n||(s=s||n,n=null),n=GSUtil.normalize(n,'beforeend'),s=GSUtil.normalize(s,'self');let i=null;switch(s){case'self':i=t;break;case'parent':i=t.parentElement;break;default:i=GSDOM.query(t.owner,s)||GSDOM.query(document.documentElement,s)}if(!i){const e=`Injection point not available!\nElement: ${t.tagName}, Id:${t.id}, tgt:${s}`;throw GSLog.error(t,e),new Error(e)}return{anchor:n,target:i,ref:!(i===t||i===t.parentElement)}}#Kt(){const t=this;t.#Bt&&t.#Bt.remove&&(t.#Bt.remove(),t.#Bt=null)}async#Xt(){const t=this;await t.#se(),GSEvents.waitAnimationFrame((()=>t.#ee()),!0)}static define(t,e,r){if(!customElements.get(t))return customElements.GSDefine?customElements.GSDefine(t,e,r):customElements.define(t,e,r)}static{customElements.define('gs-element',GSElement),customElements.GSDefine||(customElements.GSDefine=customElements.define,customElements.define=GSElement.define,Object.freeze(customElements))}}class GSi18n extends HTMLElement{static#ie=/\{\w+\}/g;static#ae=!1;#oe=new Map;#M=new Set;#le=!1;#ce=0;#ue=!1;#de=this.#Se.bind(this);#o=this.#he.bind(this);static{customElements.define('gs-i18n',GSi18n),Object.seal(GSi18n),document.body.addEventListener('i18n',(t=>{GSi18n.default&&GSi18n.default.translateDOM(t.detail)}))}static get observedAttributes(){return['lang','auto']}static get default(){return GSi18n.#ae}constructor(){super()}connectedCallback(){const t=this;if(GSID.setIf(t),t.#ue=!!GSComponents.find(this.tagName),t.#ue)return GSLog.error(null,`${t.tagName} ID: ${t.id} is ignored, i18n is already in use by another instance!`);GSi18n.#ae=t,GSComponents.store(t),t.#me()}disconnectedCallback(){const t=this;clearInterval(t.#ce),GSDOMObserver.unregisterFilter(t.#de,t.#o),GSComponents.remove(t),t.#oe.clear(),t.#oe=null,t.#o=null,t.#de=null,t.#ue||(GSi18n.#ae=null)}attributeChangedCallback(t='',e='',r=''){this.#ge(t,e,r)}async#ge(t='',e='',r=''){const n=this;'lang'===t&&(n.#oe.has(r)||await n.#pe(r),n.translateDOM(document.documentElement,n.auto)),'auto'===t&&n.#me()}#Ge(t){return!(t instanceof HTMLScriptElement||t instanceof HTMLStyleElement||t instanceof HTMLLinkElement||t instanceof HTMLMetaElement||t instanceof Comment)}#Se(t){const e=t instanceof Text;if(e&&0==t.textContent.trim().length)return!1;const r=e?t.parentElement:t;return this.#Ge(r)&&this.#fe(r)}#fe(t){return'false'!==e.get(t,'translate')}#he(t){this.#M.add(t)}#ye(){const t=this;t.#le||0!==t.#M.size&&requestAnimationFrame((()=>{try{Array.from(t.#M).forEach((e=>{t.#M.delete(e),t.#be(e)}))}catch(e){GSLog.error(t,e)}}))}#be(t){const e=this;if(e.#le>0)return e.#M.add(t);if(t===document.documentElement)e.translateDOM(t,e.auto);else{t instanceof Text?e.#Ee(t):e.#ve(t)}t.shadowRoot&&e.translateDOM(t.shadowRoot,e.auto)}#ve(t){const e=this;e.list.forEach((r=>e.#Ae(t,r)))}#Ae(t,r){const n=`data-gs-i8n-${r}`;let s=e.get(t,n),i=e.get(t,r);s?i=s:i&&e.set(t,n,i),i&&e.set(t,r,this.translate(i))}#Ee(t){t.gsi18n=t.gsi18n||t.textContent,t.textContent=this.translate(t.gsi18n)}async#pe(t=''){const e=this,r={'Cache-Control':'no-cache',Pragma:'no-cache'};let n=null;try{e.#le++;const s=GSLoader.normalizeURL(`${e.url}/${t}.json`);if(n=await GSLoader.load(s,'GET',r,!0),!n&&t.indexOf('_')>0&&(n=await e.#pe(t.split('_')[0])),!n)return!1;e.#i(t,n)}finally{e.#le--}return e.auto||e.#ye(),!0}#i(t,e){if(!e||!t)return!1;const r=this.#we(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0]);r.set(e,t[1])})),!0}#we(t=''){const e=this;return e.#oe.has(t)||(e.#oe.set(t,new Map),e.#pe(t)),e.#oe.get(t)}#me(){const t=this;t.auto?(GSDOMObserver.registerFilter(t.#de,t.#o),t.#ce=setInterval(t.#ye.bind(t),500)):(GSDOMObserver.unregisterFilter(t.#de,t.#o),clearInterval(t.#ce))}translateDOM(t,e=!1){const r=this;t!==document.documentElement&&r.#M.add(t),Array.from(t.childNodes).filter((t=>r.#Se(t))).forEach((t=>0==t.childNodes.length?r.#M.add(t):r.translateDOM(t,!0))),e||r.#ye()}translate(t){if(GSUtil.isStringEmpty(t))return t;const e=this;let r=t,n=null,s=null,i=null;for(GSi18n.#ie.lastIndex=-1;null!==(i=GSi18n.#ie.exec(t));)n=i[0],s=e.find(n.slice(1,-1)),r=r.replace(n,s);return r}find(t){const e=GSID.hashCode(t);return this.#we(this.lang).get(e)||t}get auto(){return e.getAsBool(this,'auto',!0)}set auto(t=''){e.setAsBool(this,'auto',t)}get default(){return e.get(this,'default',document.documentElement.lang||navigator.language)}set default(t=''){e.set(this,'default',t)}get lang(){return e.get(this,'lang',this.default)}set lang(t=''){e.set(this,'lang',t)}get list(){return e.get(this,'list','title,comment, placeholder').split(',')}set list(t=''){t=Array.isArray(t)?t.join(','):t,e.set(this,'list',t)}get url(){return e.get(this,'url',`${location.origin}/i18n/`)}set url(t=''){e.set(this,'url',t)}}class GSQueryCSS{#h=null;constructor(t){if(!GSDOM.isHTMLElement(t))throw new Error('Only HTMLElement type allowed!');this.#h=new GSCSSMap(t)}#Me(e){return t.hasFunction(this.#h,e)}get(t,e,r){return(n,s)=>{const i=this;return GSUtil.isNull(n)?i.#h.get(e):i.#Me(e)?i.#h[e](n,s):(t[e]=n,r)}}static wrap(t){return new Proxy(t.style,new GSQueryCSS(t))}}class GSQuery{#a=null;constructor(t){Array.isArray(t)||(this.#a=GSQueryCSS.wrap(t))}get(t,e){return'css'===e?this.#a:'query'===e?(e,r,n)=>{const s=GSDOM.query(t,e,r,n);return GSQuery.wrap(s)}:'queryAll'===e?(e,r,n)=>{const s=GSDOM.queryAll(t,e,r,n);return GSQuery.wrap(s)}:t[e]}set(t,e,r){if('css'===e)Array.isArray(t)?t.forEach((t=>t[e]=r)):GSDOM.css(t,r);else t[e]=r;return!0}static instance(t){return new Proxy(t,new GSQuery(t))}static wrap(t){return GSDOM.isHTMLElement(t)?GSQuery.instance(t):Array.isArray(t)?(t=t.map((t=>GSQuery.wrap(t))),GSQuery.instance(t)):t}static all(t,e,r,n){return GSQuery.wrap(GSDOM.queryAll(t,e,r,n))}static first(t,e,r,n){return GSQuery.wrap(GSDOM.query(t,e,r,n))}static{Object.freeze(GSQuery),globalThis.GSQuery=GSQuery}}class GSGesture{#Oe=0;#De=0;#Te=null;#Ce=null;#Le=null;#xe=null;#ke=!1;#Ie=!1;#Fe=!1;#Re=0;static timeout=1500;constructor(t,e,r,n){const s=this;s.#ke=e,s.#Ie=r,s.#Fe=n,s.#Te=null,s.#Ce=null,s.#Le='string'==typeof t?document.querySelector(t):t,s.#xe={move:s.#Ue.bind(s),start:s.#Ne.bind(s),end:s.#je.bind(s)},GSEvents.attach(s.#Le,s.#Le,'touchmove',s.#xe.move,!1),GSEvents.attach(s.#Le,s.#Le,'touchstart',s.#xe.start,!1),GSEvents.attach(s.#Le,s.#Le,'touchend',s.#xe.end,!1)}unbind(){const t=this;GSEvents.remove(t.#Le,t.#Le,'touchmove',t.#xe.move),GSEvents.remove(t.#Le,t.#Le,'touchstart',t.#xe.start),GSEvents.remove(t.#Le,t.#Le,'touchend',t.#xe.end)}#Ne(t){const e=this;e.#Te=t.touches[0].clientX,e.#Ce=t.touches[0].clientY,e.#Fe&&setTimeout(e.#He.bind(e),GSGesture.timeout)}#je(t){clearTimeout(this.#Re)}#Ue(t){const e=this;if(!e.#Te||!e.#Ce)return;if(!e.#ke)return;const r=t.touches[0].clientX,n=t.touches[0].clientY;if(e.#Fe){Math.abs(e.#Oe)>10&&Math.abs(e.#De)>10&&clearTimeout(e.#Re)}e.#Oe=e.#Te-r,e.#De=e.#Ce-n;let s='';s=Math.abs(e.#Oe)>Math.abs(e.#De)?e.#Oe>0?'swipe-left':'swipe-right':e.#De>0?'swipe-up':'swipe-down',GSEvents.send(e.#Le,s,t),e.#Te=null,e.#Ce=null}#He(){GSEvents.send(me.#Le,'long-press')}static fingers(t){return t.detail.touches?.length}static attach(t,e=!0,r=!1,n=!1){return new GSGesture(t,e,r,n)}}class GSReadWriteRegistryImpl extends GSEvent{static#Pe=null;static#$e=Symbol();#h=new Map;constructor(t){if(t!=GSReadWriteRegistryImpl.#$e)throw new Error('Creating new instance not allowed.');super()}register(t){const e=this;e.#Be(t);const r=e.find(t.id);if(r!=t){if(r)throw new Error(`Key (${t.id}) already exist in read/write registry!`);e.#h.set(t.id,t),e.emit(`register-${t.id}`,t),e.emit('register',t)}}unregister(t){const e=this;GSUtil.isString(t)&&(t=e.find(t)),e.#Be(t);const r=e.#h.delete(t.id);return r&&(e.emit(`unregister-${t.id}`,t),e.emit('unregister',t)),r}find(t){return this.#h.get(t)}async wait(t='',e,r=!0){if(!t)throw new Error('GSReadWrite ID not valid.');const n=this;if(r){const e=n.find(t);if(e)return e}const s=r?'register':'unregister';return await super.wait(`${s}-${t}`,e),n.find(t)}#Be(t){}static get#ze(){return GSReadWriteRegistryImpl.#Pe||(GSReadWriteRegistryImpl.#Pe=new GSReadWriteRegistryImpl(GSReadWriteRegistryImpl.#$e)),GSReadWriteRegistryImpl.#Pe}static{Object.seal(GSReadWriteRegistryImpl),globalThis.GSReadWriteRegistry=GSReadWriteRegistryImpl.#ze}}const s=globalThis.GSReadWriteRegistry;class GSAbstractReadWrite extends GSEvent{#e=null;constructor(t,e=!0){super();this.#e=t||GSID.next(),e&&this.enable()}get id(){return this.#e}enable(){s.register(this),this.emit('enabled')}disable(){s.unregister(this),this.emit('disabled')}get isRegistered(){return!!s.find(this.id)}async read(t){const e=this;let r=null;try{r=await e.onRead(t),r&&e.emit('read',{owner:t,data:r})}catch(n){throw e.emit('error',{type:'read',error:n,owner:t,data:r}),n}return r}async write(t,e){const r=this;let n=null;try{n=await r.onWrite(t,e),n&&r.emit('write',{owner:t,data:e,result:n})}catch(n){throw r.emit('error',{type:'write',error:n,owner:t,data:e}),n}return n}async onRead(t){throw new Error('Extend base GSAbstractReadWrite to implement read operation')}async onWrite(t,e){throw new Error('Extend base GSAbstractReadWrite to implement write operation')}}class GSReadWrite extends GSAbstractReadWrite{static#We=['','rest','query','quark'];static#qe=['GET','PUT','POST','DELETE'];#_e='';#Ve={};#Je='GET';#Ye='POST';#It='';#Qe='';#Ze=0;#Xe=0;#Ke=[];#de=[];constructor(t,e){super(t,e)}get mode(){return GSUtil.normalize(this.#Qe)}set mode(t){const e=this;t=GSUtil.normalize(t);if(!GSReadWrite.#We.includes(t))throw new Error(null,`Invalid mode, allowed: ${GSReadWrite.#We}`);return'quark'===e.#Qe&&e.#Qe!=t&&(e.#Je='GET',e.#Ye='POST'),this.#Qe=t}get reader(){return this.#Je}set reader(t){if(!(!!this.isQuark||GSReadWrite.#qe.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#qe}`);return this.#Je=t}get writer(){return this.#Ye}set writer(t){if(!(!!this.isQuark||GSReadWrite.#qe.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#qe}`);return this.#Ye=t}get headers(){return{...this.#Ve}}set headers(t={}){t=GSUtil.toJson(t);this.#Ve={...t}}get src(){return this.#_e}set src(t=''){this.#_e=t}get limit(){return this.#Xe}set limit(t=10){this.#Xe=GSUtil.asNum(t,10)}get skip(){return this.#Ze}set skip(t=0){this.#Ze=GSUtil.asNum(t,0)}get filter(){return this.#de}set filter(t){this.#de=GSUtil.isJson(t)?GSUtil.toJson(t):t}get sort(){return this.#Ke}set sort(t){this.#Ke=GSUtil.isString(t)?JSON.parse(t):t}get action(){let t='';switch(this.mode){case'query':t='?limit=${limit}&skip=${skip}&sort=${sort}&filter=${filter}';break;case'rest':t='/${limit}/${skip}?sort=${sort}&filter=${filter}'}return this.#It||t}set action(t=''){this.#It=t}get url(){const t=this;return t.#tr(t.#_e,t.#Ze,t.#Xe,t.#de,t.#Ke)}#tr(t,e,r,n,s){if(GSUtil.isStringEmpty(t))throw new Error('Attribute "src" not set!');s=s?JSON.stringify(s):'',n=n?JSON.stringify(n):'';const i={limit:r,skip:e,sort:encodeURIComponent(s),filter:encodeURIComponent(n)};return t+GSUtil.fromLiteral(this.action,i)}get isOffline(){return''===this.mode}get isQuark(){return'quark'===this.mode}get isRemote(){return['rest','query'].includes(this.mode)}async onRead(e){const r=this;if(r.isOffline)return;if(!r.#Je)return super.onRead(e);if(r.isRemote)return await GSLoader.load(r.url,r.#Je,r.#Ve,!0);if(!r.isQuark)return;const n=t.parseFunction(r.#Je);if(!n)throw new Error('Reader quark function not found!');return n(r.skip,r.limit,r.filter,r.sort)}async onWrite(e,r){const n=this;if(n.isOffline)return;if(!n.#Ye)return super.onWrite(e);if(!n.isRemote)return await GSLoader.load(n.url,n.#Ye,n.#Ve,!0,r);if(!n.isQuark)return;const s=t.parseFunction(n.#Je);if(!s)throw new Error('Writer quark function not found!');return s(r)}static register(t){return new GSReadWrite(t,!0)}}class StyleController{static#jt=new Set;#Ht;constructor(t){const e=this;e.#Ht=t,e.#Ht.addController(e)}hostConnected(){StyleController.#jt.add(this)}hostDisconnected(){StyleController.#jt.delete(this)}attributeCallback(t,e,r){'orientation'===t&&this.handle()}handle(){this.#Ht?.updateUI()}static#o(t){requestAnimationFrame((()=>{StyleController.#jt.forEach((t=>t.handle()))}))}static{GSEvents.attach(window,document,'gs-style',StyleController.#o)}}class GSCacheTemplate{static#i=new Map;static store(t,e){this.#i.set(t,e)}static remove(t){return this.#i.delete(t)}static load(t){return this.#i.get(t)}static getOrCreate(t,e){const r=GSCacheTemplate;let n=r.load(t);return n||(n=r.create(e),r.store(t,n),n)}static create(t){const e=document.createElement('template');return GSDOM.setHTML(e,t),e}static clone(t){return GSDOM.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(e){const r=t.parseFunction(e);return!!t.isFunction(r)&&r}static isHTMLTemplate(t){const e=t?t.trim():'';return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():'';return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e='',r){const n=GSCacheTemplate;return t?n.getOrCreate(e,r):n.create(r)}static loadHTMLTemplate(t=!1,e='',r){const n=GSCacheTemplate,s=n.isHTMLTemplate(r);return s?n.initTemplate(t,e,s):s}static async loadURLTemplate(t=!1,e='',r){const n=GSCacheTemplate;try{let s=null;return t&&(s=n.load(r)),s?s:(s=await GSLoader.loadTemplate(r),n.initTemplate(t,e,s))}catch(t){GSLog.error(null,t)}return!1}static async loadFunctionTemplate(e=!1,r='',n){const s=GSCacheTemplate,i=s.isFunctionTemplate(n);if(!i)return i;try{let n=null;return s.cached&&(n=s.load(o)),n?n:(n=t.isFunctionAsync(i)?await i():i(),s.initTemplate(e,r,n))}catch(t){GSLog.error(null,t)}return i}static async loadTemplate(t=!1,e='',r){if(!e)return!1;if(!r)return!1;const n=GSCacheTemplate;let s=!1;return 0==r.indexOf('#')&&(s=document.getElementById(r.slice(1))),s||(s=n.loadHTMLTemplate(t,e,r)),s||(s=await n.loadFunctionTemplate(t,e,r)),s||(s=await n.loadURLTemplate(t,e,r)),s}}class GSTemplate extends HTMLElement{#er=!1;#Bt=null;#zt=null;static get observedAttributes(){return['href']}constructor(){super()}get id(){return e.get(this,'id')}set id(t){e.set(this,'id',t)}get href(){return e.get(this,'href')}set href(t){e.set(this,'href',t)}get isFlat(){return GSUtil.FLAT||e.getAsBool(this,'flat',!1)}get self(){return this.#Bt||this.shadowRoot}get environment(){return e.get(this,'environment','')}set environment(t){e.set(this,'environment',t)}get os(){return e.get(this,'os','')}set os(t){e.set(this,'os',t)}get browser(){return e.get(this,'browser','')}set browser(t){e.set(this,'browser',t)}attributeChangedCallback(t,e,r){this.#er&&'href'===t&&this.loadTemplate()}connectedCallback(){const t=this,e=t.parentElement;if(!e||'GS-ITEM'!=e.tagName){if(!(t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS))return t.remove();t.id||(t.id=GSID.id),t.#er=!0,GSComponents.store(t),t.loadTemplate()}}disconnectedCallback(){const t=this;t.#er=!1,t.#Kt(),t.#zt&&t.#zt.disconnect(),GSComponents.remove(t),GSCacheTemplate.remove(t.id)}#Kt(){const t=this;t.#Bt&&(t.#Bt.remove(),t.#Bt=null)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get shadow(){const t=this;return!t.shadowRoot&&t.#er&&(t.attachShadow({mode:'open'}),t.#zt=GSDOMObserver.create(t.shadowRoot)),t.shadowRoot}async loadTemplate(){const t=this,e=await GSCacheTemplate.loadTemplate(!0,t.id,t.href);return e?t.parentElement instanceof HTMLHeadElement?(GSEvents.sendSuspended(document,'gs-template',{id:t.id,href:t.href}),e):(await GSEvents.waitAnimationFrame((async()=>{if(t.#er){if(t.isFlat){const r=GSDOM.parseWrapped(t,e.innerHTML);t.#Bt=t.insertAdjacentElement('afterend',r)}else t.shadow.adoptedStyleSheets=GSCacheStyles.styles,GSDOM.setHTML(t.shadow,e.innerHTML);GSEvents.sendSuspended(t,'templateready',{id:t.id,href:t.href},!0,!0)}})),e):(GSLog.error(this,`Template not found for: Id=${t.id}; href=${t.href}`),!1)}waitWhenReady(t=''){return t&&(this.href=t),this.waitEvent('templateready')}waitEvent(t=''){const e=this;return new Promise(((r,n)=>{if(!t)return n('Event undefined!');GSEvents.once(e,null,t,(t=>r(t.detail)),{once:!0})}))}query(t=''){return GSDOM.query(this,t)}queryAll(t='',e=!1){return GSDOM.queryAll(this,t)}static{customElements.define('gs-template',GSTemplate),Object.seal(GSTemplate)}}export{n as GSAbortController,GSAbstractReadWrite,e as GSAttr,GSBase,GSBlock,GSCSS,r as GSCSSMap,GSCacheStyles,GSCacheTemplate,GSComponents,GSDOM,GSDOMObserver,GSData,GSDate,GSDynamicStyle,GSElement,GSEnvironment,GSEvent,GSEventBus,GSEvents,t as GSFunction,GSGesture,GSID,GSItem,GSLink,GSLinkExt,GSLoader,GSLog,GSPopper,GSPromise,GSQuery,GSQueryCSS,GSReadWrite,s as GSReadWriteRegistry,GSScript,GSStyleExt,GSTemplate,GSUtil,GSi18n,OrientationController,StyleController};
//# sourceMappingURL=io.greenscreens.components.core.esm.min.js.map
