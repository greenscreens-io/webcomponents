class GSID{static#t=0;static reset(){this.#t=0}static next(t='GSId-'){return`${t}${this.#t++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let r=0,n=0;if(0===e)return r;for(;n<e;)r=(r<<5)-r+t.charCodeAt(n++)|0;return r}static{Object.freeze(GSID)}}class GSLog{static logging=!0;static info(t,e){this.#e(t,e,!0,'info')}static warn(t,e){this.#e(t,e,!0,'warn')}static error(t,e){this.#e(t,e,!0,'error')}static log(t,e,r){this.#e(t,e,r)}static#e(t,e,r,n){if(!r&&!this.logging)return;let s=console[n||'log'];if(s='function'==typeof s?s:console.log,t)return s(`${t.nodeName} -> ${t.id}: ${e}`);s(e)}static{Object.seal(GSLog)}}class GSUtil{static#r=0;static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asNum=(t=0,e=0)=>GSUtil.isNumber(t)?parseFloat(t):e;static asBool=(t=!1)=>'true'===t.toString().trim().toLowerCase();static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,r)=>e[r]));static capitalize=(t='')=>t[0].toUpperCase()+t.slice(1).toLowerCase();static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.includes('<')&&t.includes('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return Array.isArray(t)||'object'==typeof t}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t=''){return GSUtil.isJsonString(t)?JSON.parse(t):GSUtil.isJsonType(t)?t:(GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),null)}static normalize(t,e=''){return(t??e).toString().trim()}static fromTemplateLiteral(t,e){const r=Object.keys(e),n=Object.values(e);return new Function(...r,`return \`${t}\`;`)(...n)}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,r=null;return t.trim().split('.').forEach(((t,n,s)=>{if(e)return n<s.length-1?e=e[t]:void(r=e[t])})),r}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return!!GSUtil.isString(t)&&0===t.trim().length}static isStringMatch(t,e){const r=GSUtil.isStringNonEmpty(t),n=GSUtil.isStringNonEmpty(e);return r&&n?t.trim().toLowerCase()==e.trim().toLowerCase():r===n}static async timeout(t=0){return new Promise((e=>{setTimeout(e.bind(null,!0),t)}))}static requestAnimationFrame(t){if('function'==typeof t)return GSUtil.#r>0?t():(GSUtil.#r++,globalThis.requestAnimationFrame((()=>{try{t()}catch(t){}finally{GSUtil.#r--}})))}static async export(t,e,r='octet/stream'){const n=new Blob(t,{type:r}),s=URL.createObjectURL(n);try{const t=document.createElement('a');t.href=s,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(s)}}static register(t,e,r,n=!0,s=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:r?.toLowerCase()}),n&&!Object.isSealed(e)&&Object.seal(e),s&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),r=URL.createObjectURL(e);try{return await import(r)}finally{URL.revokeObjectURL(r)}}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}}class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,r=!1){GSAttr.isHTMLElement(t)&&(r?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,e,r){GSAttr.isHTMLElement(t)&&(GSUtil.normalize(r)?t.setAttribute(e,r):t.removeAttribute(e))}static get(t,e='',r=''){if(!GSAttr.isHTMLElement(t))return r;const n=t.getAttribute(e)||r;return GSUtil.normalize(n)}static getAsBool(t,e='',r='false'){const n=GSAttr.get(t,e,r);return GSUtil.asBool(n,r)}static getAsNum(t,e='',r='0'){const n=GSAttr.get(t,e,r);return GSUtil.asNum(n,r)}static getAsJson(t,e='',r='0'){const n=GSAttr.get(t,e,r,{});return JSON.parse(n)}static setAsBool(t,e='',r='false'){return GSAttr.set(t,e,GSUtil.asBool(r),!1)}static setAsNum(t,e='',r='0'){return GSAttr.set(t,e,GSUtil.asNum(r),NaN)}static setAsJson(t,e='',r='0'){return GSAttr.set(t,e,JSON.stringify(r),'{}')}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}}class GSDOM{static SPEED=300;static define(t,e,r){if(!customElements.get(t))return customElements.GSDefine?customElements.GSDefine(t,e,r):customElements.define(t,e,r)}static parse(t='',e=!1,r='text/html'){try{const n=(new DOMParser).parseFromString(t,r);return e?n?.body?.firstElementChild:n}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',r=!1){const n=GSDOM.parse(e),s=GSDOM.#n(n.head.children).concat(GSDOM.#n(n.body.children)),i=r||1!==s.length,a=GSDOM.wrap(t,i?null:s.shift());for(;s.length>0;)a.appendChild(s.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#n(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const e=GSUtil.isString(t)?t:t?.tagName;return['INPUT','SELECT','TEXTAREA','BUTTON'].indexOf(e)>-1}static isElement(t,e){if(!(e&&t))return!1;if(!GSUtil.isString(e))return t instanceof e;const r=customElements.get(e.toLowerCase());if(r&&t instanceof r)return t;const n=GSDOM.inheritance(t);for(let r of n)if(r?.constructor?.name===e)return t;return e.toUpperCase()===t.tagName&&t}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const r=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),n=GSDOM.isHTMLElement(t)&&r,s=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!n||s)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,r){const n=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),s=t===e&&t.parentNode===e;return!(!n||s)&&t.insertAdjacentElement(r,e)}static removeElement(t){return t?.parentNode?.removeChild(t)}static walk(t,e=!1,r=!1,n=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,r,n)}static*childAll(t,e=!1,r=!0,n=!1){if(!t)return;n&&(yield t),r&&(yield*GSDOM.childAll(t.shadowRoot,e,r,!0));const s=e?t.childNodes:t.children;if(s)for(let t of s)yield*GSDOM.childAll(t,e,r,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static getRoot(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.body,e);if(!t||!e)return null;const r=GSDOM.walk(t,!1);for(let t of r)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM.closest(document.body,e);if(!t||!e)return null;const r=GSDOM.walk(t,!0);for(let t of r)if(GSDOM.matches(t,e))return t;return null}static query(t,e,r=!1,n=!0){if('string'==typeof t)return GSDOM.query(document.body,t,r,n);if(!t||!e)return null;if(GSDOM.matches(t,e))return t;const s=GSDOM.walk(t,!1,r,n);for(let t of s)if(GSDOM.matches(t,e))return t;return null}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static queryAll(t,e,r=!1,n=!0){if('string'==typeof t)return GSDOM.queryAll(document.body,t,r,n);const s=[];if(!t||!e)return s;const i=GSDOM.walk(t,!1,r,n);for(let t of i)GSDOM.matches(t,e)&&s.push(t);return s}static setHTML(t,e=''){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(t.innerHTML=e)}static setText(t,e=''){t&&(t.textContent=e)}static toggleClass(t,e,r=!0){return!!GSDOM.isHTMLElement(t)&&(!(!e||0==e.trim().length)&&(e=e.split(' ').filter((t=>t&&t.trim().length>0)),null===r?e.forEach((e=>t.classList.toggle(e))):(r?t.classList.add.apply(t.classList,e):t.classList.remove.apply(t.classList,e),!0)))}static toggle(t,e=!0){return GSDOM.toggleClass(t,'d-none',e)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea'){const r=GSDOM.unwrap(t);requestAnimationFrame((()=>{r.querySelectorAll(e).forEach((t=>t.value=''))}))}static toValue(t){if(!GSDOM.isHTMLElement(t))return;if('checkbox'===t.type)return t.checked;let e=t.value;if('text'===t.type){const r=GSDOM.styleValue(t,'text-transform');r&&('lowercase'==r.value&&(e=t.value.toLowerCase()),'uppercase'==r.value&&(e=t.value.toUpperCase()))}return e}static fromValue(t,e){GSDOM.isHTMLElement(t)&&('checkbox'===t.type?t.checked=1==e:t.value=e)}static styleValue(t,e){const r=GSDOM.getComputedStyledMap(t);return'function'==typeof r.get?r.get(e):r[e]}static getComputedStyledMap(t){return t.computedStyleMap?t.computedStyleMap():window.getComputedStyle?window.getComputedStyle(t):null}static toObject(t,e='input, textarea, select',r=!0){const n=GSDOM.unwrap(t),s={},i=GSDOM.queryAll(n,e);return Array.from(i).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!r||t.checkValidity())).forEach((t=>{s[t.name]=GSDOM.toValue(t)})),s}static fromObject(t,e,r='input, textarea, select'){if(!e)return;const n=GSDOM.unwrap(t),s=GSDOM.queryAll(n,r);Array.from(s).filter((t=>t.name&&t.name in e)).forEach((t=>GSDOM.fromValue(t,e[t.name])))}static toJson(t,e=!0){const r={};if(!GSDOM.isHTMLElement(t))return r;if(r['#tagName']=t.tagName.toLowerCase(),Array.from(t.attributes).forEach((t=>r[t.name]=t.value)),e){const e=Array.from(t.children);e.length>0&&(r.items=[],e.forEach((t=>r.items.push(GSDOM.toJson(t)))))}return r}static fromJson(t,e='gs-item',r=!1){return r?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t)));const r=t['#tagName']||e,n=document.createElement(r);return Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.setAttribute(e,t[e]))),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsDOM(t,e);n.appendChild(r)})),n}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const r=t['#tagName']||e,n=[];return n.push(`<${r} `),Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.push(` ${e}=${t[e]} `))),n.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsString(t,e);n.push(r)})),n.push(`</${r}>`),n.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').every((e=>{if(e.length<2)return!0;const r=e.split('=');return GSDOM.setValue(`input[name=${r[0]}]`,r[1],t),!0}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,e='input, select, .btn'){GSDOM.queryAll(t,e).forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, .btn'){GSDOM.queryAll(el,e).forEach((t=>t.setAttribute('disabled',!0)))}static setValue(t,e,r){const n=GSDOM.query(r,t);GSDOM.fromValue(n,e)}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),r=[];let n;for(;n=e.nextNode();)r.push(n);return r}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(/(\n*\t*)*(?=\n\t*)/g,'')))}static validate(t,e,r,n=!1){if(t.tagName!==e){if(n)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),r))return!0;if(n)return!1;const s=GSDOM.toValidationError(t,r);throw new Error(s)}static isAllowed(t,e){return Array.isArray(t)?0===t.filter((t=>GSDOM.isAllowed(t,e))).length:!(t instanceof Text||t instanceof Comment||e.includes(t.tagName))}static toValidationError(t,e){const r=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${r}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let r=!0;try{const r=await fetch(e);if(!r.ok)return;const n=await r.text(),s=new CSSStyleSheet;s.replaceSync(n),t.shadowRoot.adoptedStyleSheets=[s]}catch(t){r=!1}return r}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM,customElements.GSDefine||(customElements.GSDefine=customElements.define,customElements.define=GSDOM.define,Object.freeze(customElements))}}class GSFunction{static isFunction=t=>'function'==typeof t;static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){try{return await t(e)}catch(t){return t}}static callFunctionSync(t,e){try{return t(e)}catch(t){return t}}static callFunction(t,e){if(GSFunction.isFunction(t))return GSFunction.isFunctionAsync(t)?GSFunction.callFunctionAsync(t,e):GSFunction.callFunctionSync(t,e)}static parseFunction(t){const e=GSUtil.parseValue(t);return GSFunction.isFunction(e)?e:null}static{Object.seal(GSFunction)}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let r=null;const n=location.pathname.split('/').pop(-1).includes('.'),s=t.includes('extension://');r=t.startsWith('http')||s?t:t.startsWith('/')?`${location.origin}/${t}`:n?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,r=r.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(r);return!e&&GSLoader.NO_CACHE&&i.searchParams.append('_dc',Date.now()),i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM.query(document.documentElement,t);return e?e.innerHTML:t}return GSUtil.isHTML(t)?t:(t=GSLoader.#s(t),GSLoader.loadSafe(t))}static#s(t=''){return t=t.startsWith('//')?GSLoader.#i+'/'+t:t,GSLoader.normalizeURL(t)}static get#i(){return GSLoader.normalizeURL(GSLoader.#a,!0)}static get#a(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const r=GSLoader.#s(t);return await GSLoader.load(r,e)}static async load(t='',e='GET',r,n=!1){let s=null;const i='Content-Type';(r=r||{})[i]=n?'application/json':r[i]||'text/plain';const a=GSLoader.normalizeURL(t,!0),o=await fetch(a,{method:e,headers:r});return o.ok&&(s=n?await o.json():await o.text()),s}static async loadSafe(t='',e='GET',r,n=!1,s){try{if(t)return GSLoader.load(t,e,r,n)}catch(t){GSLog.error(this,t)}return s||(n?{}:'')}static async loadData(t=''){const e=GSUtil.isJson(t),r=!e&&GSFunction.parseFunction(t),n=r&&GSFunction.isFunction(r);if((!n&&GSUtil.parseValue(t)||e)&&(t=GSUtil.toJson(t)),n){t=GSFunction.isFunctionAsync(r)?await GSFunction.callFunctionAsync(r,this):GSFunction.callFunction(r)}if(GSUtil.isJsonType(t))return t}static{Object.seal(GSLoader)}}class GSEvent{static#o=new Map;static#c=!1;static protect(){globalThis.addEventListener('contextmenu',(t=>{GSEvent.prevent(t)})),document.addEventListener('keydown',(t=>{const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}))}static async waitPageLoad(t,e='loaded',r,n=100){GSEvent.#c||await GSEvent.wait(window,'load'),GSEvent.#c=!0,await GSUtil.timeout(n),GSFunction.callFunction(r),GSEvent.sendSuspended(t,e)}static async waitAnimationFrame(t){return new Promise(((e,r)=>{requestAnimationFrame((()=>{try{e(),'function'==typeof t&&t()}catch(t){r(t)}}))}))}static listen(t,e,r,n,s=!1){return!e&&t?t.addEventListener(r,n,s):GSDOM.queryAll(t,e).map((t=>t.addEventListener(r,n,s)))}static unlisten(t,e,r,n){return!e&&t?t.removeEventListener(r,n):GSDOM.queryAll(t,e).map((t=>t.removeEventListener(r,n)))}static once(t,e,r,n){return GSEvent.listen(t,e,r,n,{once:!0})}static wait(t,e=''){return new Promise(((r,n)=>{if(!e)return n('Event undefined!');GSEvent.once(t,null,e,(t=>r(t.detail)))}))}static prevent(t){GSFunction.hasFunction(t,'preventDefault')&&t.preventDefault(),GSFunction.hasFunction(t,'stopPropagation')&&t.stopPropagation()}static send(t=document,e,r='',n=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:r,bubbles:n,composed:s,cancelable:i});return t?.dispatchEvent(a)}static sendSuspended(t=document,e,r='',n=!1,s=!1,i=!1){requestAnimationFrame((()=>{GSEvent.send(t,e,r,n,s,i)}))}static sendDelayed(t=1,e=document,r,n='',s=!1,i=!1,a=!1){setTimeout((()=>GSEvent.send(e,r,n,s,i,a)),t)}static attach(t,e,r='',n,s=!1,i=!1){if(!e)return!1;if(e.offline)return!1;if(!GSFunction.isFunction(n))return!1;if(!GSFunction.hasFunction(e,'addEventListener'))return!1;const a=this,o=a.#l(t,e,r,n),c=a.#u(t);return a.#d(c,o.key).set(o.fnkey,o),o.capture=i,s&&(o.once=t=>{try{o.fn(t)}finally{a.remove(o.own,o.el,o.name,o.once)}},Object.defineProperty(o.once,'gsid',{value:n.gsid,writable:!1})),e.addEventListener(r,s?o.once:o.fn,{once:s,capture:i}),!0}static remove(t,e,r='',n){const s=this,i=s.#l(t,e,r,n),a=s.#u(t),o=s.#d(a,i.key),c=o.get(i.fnkey);if(c)o.delete(c.fnkey),s.#h(c);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),s.#h(t);0===o.size&&a.delete(i.key),0===a.size&&s.#o.delete(t)}static deattachListeners(t){const e=this,r=e.#S(t);if(!r)return;const n=r.values();for(let t of n){for(let r of t.values())e.#h(r);t.clear()}r.clear()}static#l(t,e,r='',n=''){if(!e)return!1;const s=this.#g(e),i=this.#m(n);return{own:t,fn:n,el:e,name:r,key:GSID.hashCode(`${s}${r}`),fnkey:GSID.hashCode(`${s}${r}${i||''}`)}}static#d(t,e){let r=t.get(e);return r||(r=new Map,t.set(e,r)),r}static#m(t){return GSFunction.isFunction(t)?(t.gsid||Object.defineProperty(t,'gsid',{value:GSID.next(),writable:!1}),t.gsid):null}static#g(t){let e=GSAttr.get(t,'data-gselid');return e||(e=GSID.next(),GSAttr.set(t,'data-gselid',e)),e}static#u(t){return this.#d(this.#o,t)}static#S(t){const e=this.#o.get(t);if(e)return this.#o.delete(t),e}static#h(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSBase extends HTMLElement{static#t=0;#G='';static get observedAttributes(){return[]}static nextID(){return GSBase.#t++,`GSHID_${GSBase.#t}`}static hashCode(t){let e=0,r=t.length,n=0;if(r>0)for(;n<r;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}static sendEvent(t=document,e,r='',n=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:r,bubbles:n,composed:s,cancelable:i});return t.dispatchEvent(a)}static sendSuspendedEvent(t=document,e,r=''){requestAnimationFrame((()=>{GSBase.sendEvent(t,e,r)}))}connectedCallback(){const t=this;if(t.url&&t.isRenderable()){const e=GSBase.hashCode(t.url);if(document.querySelector(`[data-hash="${e}"]`))return void t.remove();const r=t.render(),n=r instanceof Promise;r&&!n&&(r.dataset.hash=e,t.isHead?document.head.appendChild(r):t.insertAdjacentElement('afterend',r),t.isAuto&&(r.id=r.id?r.id:GSBase.nextID(),t.#G=r.id))}t.isAuto||t.remove()}disconnectedCallback(){const t=this;if(t.isAuto&&t.#G){const e=document.querySelector(`#${t.#G}`);e&&e.remove()}t.dispose()}attributeChangedCallback(t,e,r){const n=this;requestAnimationFrame((()=>{n.attributeCallback(t,e,r)}))}attributeCallback(t,e,r){}render(){}dispose(){}get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}get isProtocol(){const t=this.protocol;if(!t)return!0;const e=location.protocol.replace(':','');return'http'===t&&e===t||'https'===t&&e===t}get isAsset(){return this.isTarget('GreenScreens')}isTarget(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().includes(e)&&(t=!0)})),t}const r=new RegExp(`${t}`,'i');return!!navigator.userAgent.match(r)}isRenderable(){const t=this,e=t.isMobile,r=t.isAsset,n=t.isProtocol,s=t.target,i=t.env;return!!n&&(('assets'!==i||!1!==r)&&(('browser'!==i||!0!==r)&&(('mobile'!==i||!1!==e)&&(('desktop'!==i||!0!==e)&&!!t.isTarget(s)))))}get env(){return this.getAttribute('env')||''}get target(){return this.getAttribute('target')||''}get url(){const t=this;let e=t.getAttribute('url')||'';if('assets'===t.env)return'**'+e;if(t.#f)try{let t=`${location.origin}${location.pathname}`;e.startsWith('/')&&(t=location.origin),e.startsWith('http')&&(t=void 0);const r=new URL(e,t);r.searchParams.append('_dc',Date.now()),e=r.href}catch(t){}return e}get type(){const t=this;let e=t.getAttribute('type')||'';return e||(t.url.indexOf('.js')>0?e='text/javascript':t.url.indexOf('.css')>0&&(e='text/css')),e}get async(){return this.getAttributeBool('async','false')}get defer(){return this.getAttributeBool('defer','false')}get isHead(){return this.getAttributeBool('head')}get isAuto(){return this.getAttributeBool('auto')}get protocol(){return this.getAttribute('protocol')||''}get nonce(){return this.getAttribute('nonce')||''}get crossorigin(){return this.getAttribute('crossorigin')}get fetchpriority(){return this.getAttribute('fetchpriority')||'auto'}get integrity(){return this.getAttribute('integrity')}get referrerpolicy(){return this.getAttribute('referrerpolicy')}getAttributeBool(t='',e='true'){return'true'===(this.getAttribute(t)||e)}get#f(){return'GS_NO_CACHE'in globalThis?globalThis.GS_NO_CACHE:!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static{Object.seal(GSBase)}}class GSCacheStyles{static#p=new Map;static set(t,e){const r=this;if(e instanceof CSSStyleSheet&&r.#p.set(t,e),'string'==typeof e){const n=new CSSStyleSheet;n.replaceSync(e),r.#p.set(t,n)}return r.get(t)}static remove(t){return this.#p.delete(t)}static get(t){return this.#p.get(t)}static getOrSet(t,e){if(e&&0===e.cssRules.length)return;const r=GSCacheStyles,n=r.get(t);return n||r.set(t,e)}static get styles(){return Array.from(new Map([...GSCacheStyles.#p].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static injectStyle(t='',e=0){if(t)try{e=e||GSBase.hashCode(t);const r=new CSSStyleSheet;r.replaceSync(t),GSCacheStyles.getOrSet(e,r),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){}}static{Object.freeze(GSCacheStyles),window.GSCacheStyles=GSCacheStyles;const t='.gs-hide{display:none !important;}.gs-hide-orientation,.gs-render{display:none !important;}gs-item{display:none !important;}';GSCacheStyles.injectStyle(t)}}class GSComponents{static#o=new Set;static store(t){GSComponents.#o.add(t)}static remove(t){GSComponents.#o.delete(t)}static get(t=''){if(!t)return null;const e=Array.from(this.#o).filter((e=>e.id===t));return 0===e.length?null:e[0]}static#y(t='',e=0,r){const fn=e=>{const n=e.detail;if(t.startsWith('gs-')&&n.tagName===t.toUpperCase()||n.id===t)return GSEvent.unlisten(document.body,null,'componentready',fn),r(n)},n={once:!1,capture:!1};e>0&&(n.signal=AbortSignal.timeout(e)),GSEvent.listen(document.body,null,'componentready',fn,n)}static waitFor(t='',e=0){return new Promise(((r,n)=>{let s=GSComponents.find(t)||GSComponents.get(t);return s?r(s):GSComponents.#y(t,e,r)}))}static notifyFor(t='',e){if(!GSFunction.isFunction(e))return!1;const callback=r=>{const n=r.composedPath().shift();return n.id===t||n.tagName===t?e(n,r):void 0},r=GSComponents.find(t)||GSComponents.get(t);return r?e(r):(GSEvent.listen(document.body,null,'componentready',callback),callback)}static findAll(t='',e=!0,r=!0){let n=Array.from(GSComponents.#o);return t&&(n=n.filter((e=>e&&GSDOM.matches(e,t)))),e||(n=n.filter((t=>t.shadowRoot))),r||(n=n.filter((t=>!t.shadowRoot))),n}static find(t='',e=!0,r=!0){return GSComponents.findAll(t,e,r).shift()}static getOwner(t,e){if(!(GSDOM.isGSElement(t)||GSDOM.isHTMLElement(t)))return null;const r=GSDOM.parentAll(t);for(let t of r){if(!t)break;if(t instanceof ShadowRoot){const r=GSDOM.parent(t);return e?GSDOM.isElement(r,e)?r:GSComponents.getOwner(r,e):r}if(GSDOM.isElement(t,e))return t}return e?null:document.body}static hasGetter(t,e){return GSComponents.hasFunc(t,e,'get')}static hasSetter(t,e){return GSComponents.hasFunc(t,e,'set')}static hasFunc(t,e,r){const n=Reflect.getOwnPropertyDescriptor(t.__proto__,e);return n&&'function'==typeof n[r]}static listenStyles(){GSComponents.#b||(document.addEventListener('gs-style',GSComponents.#A),GSComponents.#b=!0)}static unlistenStyles(){document.removeEventListener('gs-style',GSComponents.#A),GSComponents.#b=!1}static#b=!1;static#A(){requestAnimationFrame((()=>{GSComponents.findAll(null,!1,!0).filter((t=>t.shadowRoot)).forEach((t=>t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles))}))}static{Object.freeze(GSComponents),GSComponents.listenStyles(),globalThis.GSComponents=GSComponents}}class GSData{static uniqe(t){return Array.from(new Set(t))}static arraysEqual(t,e){if(t===e)return!0;if(!Array.isArray(t))return!1;if(!Array.isArray(e))return!1;t.sort(),e.sort();for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}static mergeArrays(t=[],e=[]){return t.concat(e).filter(((t,e,r)=>r.indexOf(t)===e))}static filterData(t,e,r){return 0===t.length?e:e.filter((e=>GSData.filterRecord(e,t,r)))}static filterRecord(t,e,r){return'string'==typeof e?GSData.filterSimple(t,e,r):GSData.filterComplex(t,e)}static filterSimple(t,e='',r){e=e.toLowerCase(),r=r||Object.keys(t);let n=null;for(let s of r)if(n=t[s],(''+n).toString().toLowerCase().includes(e))return!0;return!1}static filterComplex(t,e){let r=!0,n=null;for(let s of e)if(n=s?.value?.toLowerCase(),r=r&&(''+t[s.name]).toLocaleLowerCase().includes(n),!r)break;return r}static sortData(t,e){return 0===t.length?e:e.sort(((e,r)=>GSData.sortPair(e,r,t)))}static sortPair(t,e,r){const n=Array.isArray(t);let s=0;return r.forEach(((r,i)=>{if(!r)return;const a=r.col||i,o=n?a:r.name,c=t[o],l=e[o];s=GSData.compare(c,l,r.ord,s)})),s}static compare(t,e,r,n){return GSUtil.isNumber(t)&&GSUtil.isNumber(e)?n||GSData.compareNum(t,e,r):GSUtil.isString(t)||GSUtil.isString(e)?n||GSData.compareString(t,e,r):n}static compareString(t,e,r){const n=(t||'').toString(),s=(e||'').toString();return r<0?s.localeCompare(n):n.localeCompare(s)}static compareNum(t,e,r){return r<0?e-t:t-e}static{Object.seal(GSData)}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().includes(e)&&(t=!0)})),t}const r=navigator.userAgent.toLocaleLowerCase(),n=r.indexOf('edg')>0;return!(!n||!e.startsWith('edg'))||!n&&r.indexOf(e)>0}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSDOMObserver extends MutationObserver{static#v=new Map;static#O=new Map;observe(t,e){const r=e||{childList:!0,subtree:!0};return super.observe(t,r)}static create(t){const e=new GSDOMObserver(GSDOMObserver.#M);return e.observe(t),e}static#E(t=!1){return t?GSDOMObserver.#O:GSDOMObserver.#v}static get#L(){return GSDOMObserver.#w||GSDOMObserver.#D}static get#w(){return GSDOMObserver.#v.size>0}static get#D(){return GSDOMObserver.#O.size>0}static#M(t){GSDOMObserver.#L&&t.forEach((t=>{GSDOMObserver.#w&&t.addedNodes.forEach((t=>GSDOMObserver.#C(t,GSDOMObserver.#v))),GSDOMObserver.#D&&t.removedNodes.forEach((t=>GSDOMObserver.#C(t,GSDOMObserver.#O)))}))}static#C(t,e){return 0!==e.size&&(GSDOMObserver.#T(t,e),t.childNodes.forEach((t=>GSDOMObserver.#C(t,e))),!0)}static#T(t,e){e.forEach(((e,r)=>{try{r(t)&&e(t)}catch(t){}}))}static#F(t,e,r){if(t instanceof HTMLElement==0)return!1;const n=new Map;return n.set(e,r),GSDOMObserver.#C(t,n)}static#U(t){return'function'==typeof t}static#x(t,e){return GSDOMObserver.#U(t)&&GSDOMObserver.#U(e)}static registerFilter(t,e,r=!1){return!!GSDOMObserver.#x(t,e)&&(GSDOMObserver.#E(r).set(t,e),r||GSDOMObserver.#F(document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#U(t)&&GSDOMObserver.#E(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver;const t=GSDOMObserver.create(document.documentElement);globalThis.addEventListener('unload',(()=>{t.disconnect()}))}}class GSElement extends HTMLElement{#R=!1;#k=!1;#j=null;#N=null;#H=!1;#$=null;static{customElements.define('gs-element',GSElement)}constructor(){super()}static observeAttributes(t){return GSData.mergeArrays(t,GSElement.observedAttributes)}static get observedAttributes(){return['orientation','id']}get clazzName(){return this.constructor.name}get template(){return GSAttr.get(this,'template','')}set template(t){GSAttr.set(this,'template',t)}get isFlat(){return GSUtil.FLAT||GSAttr.getAsBool(this,'flat')}get isProxy(){return this.#H}get proxy(){return GSAttr.get(this,'proxy')}get environment(){return GSAttr.get(this,'environment','')}set environment(t){GSAttr.set(this,'environment',t)}get os(){return GSAttr.get(this,'os','')}set os(t){GSAttr.set(this,'os',t)}get browser(){return GSAttr.get(this,'browser','')}set browser(t){GSAttr.set(this,'browser',t)}get protocol(){return GSAttr.get(this,'protocol','')}set protocol(t){GSAttr.set(this,'protocol',t)}get orientation(){return GSAttr.get(this,'orientation','')}set orientation(t){GSAttr.set(this,'orientation',t)}get onready(){return GSAttr.get(this,'onready','')}set onready(t){GSAttr.set(this,'onready',t)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get owner(){return GSComponents.getOwner(this)}get offline(){return this.#k}get online(){return!this.#k}get ready(){return this.#R}get anchor(){const t='beforeend@self';return this.proxy?t:GSAttr.get(this,'anchor',t)}get self(){const t=this;return t.isProxy&&t.#j instanceof GSElement?t.#j.self:t.#j}updateUI(){const t=this;t.shadowRoot&&(t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles,GSEvent.send(document.body,'i18n',t.shadowRoot))}getStyle(){return GSAttr.get(this,'style','')}getByID(t=''){return GSDOM.getByID(this,t)}closest(t=''){return GSDOM.closest(this,t)}query(t='',e=!1){const r=this,n=GSDOM.query(r.self,t,e,!0);return r.isProxy||n?n:GSDOM.query(r,t,e,!1)}queryAll(t='',e=!1){const r=this,n=GSDOM.queryAll(r.self,t,e,!0);return r.isProxy||n.length>0?n:GSDOM.queryAll(r,t,e,!1)}async getTemplate(t=''){if(t)return GSLoader.getTemplate(t);const e=this.query('template');return e?e.innerHTML:''}hide(t=!1){GSDOM.hide(this,t)}show(t=!1){GSDOM.show(this,t)}async waitEvent(t=''){if(!t)throw new Error('Event undefined!');const e=this;return new Promise(((r,n)=>{e.once(t,(t=>r(t.detail)))}))}once(t,e){return this.listen(t,e,!0)}on(t,e,r=!1){return this.listen(t,e,r)}off(t,e){return this.unlisten(t,e)}listen(t,e,r=!1){return this.attachEvent(this,t,e,r)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',r,n=!1){return GSEvent.attach(this,t,e,r,n)}removeEvent(t,e='',r){return GSEvent.remove(this,t,e,r)}get isAllowRender(){const t=this;return t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS&&t.isValidProtocol}connectedCallback(){const t=this;if(!t.#_()){if(!t.isAllowRender)return t.remove();t.id||(t.id=GSID.id),t.#$=t.#I(),t.#H=t.#$.ref,GSComponents.store(t),requestAnimationFrame((()=>t.#B()))}}disconnectedCallback(){const t=this;t.#k=!0,t.#N?.disconnect(),GSComponents.remove(t),GSEvent.deattachListeners(t),t.#q(),t.#N=null,t.#j=null,t.#$=null}attributeChangedCallback(t,e,r){const n=this;'orientation'===t&&n.#P(),'id'===t&&(GSComponents.remove(e),GSComponents.store(n)),n.#R&&GSUtil.requestAnimationFrame((()=>{n.attributeCallback(t,e,r)}))}attributeCallback(t,e,r){}onReady(){const t=this;if(t.offline)return;t.#R=!0;const e=GSFunction.parseFunction(t.onready);GSFunction.callFunction(e),GSEvent.send(t,'ready',{}),GSEvent.send(document.body,'componentready',t)}#P(t){const e=this;GSUtil.requestAnimationFrame((()=>{e.offline||(e.isValidOrientation?e.show(!0):e.hide(!0))}))}#_(){const t=GSComponents.getOwner(this,GSElement);return t&&t.isProxy}#z(){const t=this;GSUtil.requestAnimationFrame((()=>{t.updateUI()}))}get#V(){const t=this;return t.shadowRoot||(t.attachShadow({mode:'open'}),t.#N=GSDOMObserver.create(t.#V),t.updateUI()),t.shadowRoot}get#J(){const t=this;return t.#H&&t.isFlat||!t.#H}async#W(){const t=this;if(t.offline)return;const e=t.#J,r=e?await t.getTemplate(t.template):t.outerHTML;await GSEvent.waitAnimationFrame((()=>{if(t.offline)return;const n=t.#$;if(t.#H)return e?t.#j=GSDOM.parseWrapped(t,r,!0):(t.#j=GSDOM.parse(r,!0),t.#j.id=t.id,t.id=GSID.id),GSDOM.link(t,t.#j),void GSDOM.insertAdjacent(n.target,t.#j,n.anchor);if(n.target!==t){if(n.target===t.parentElement)return t.#j=t.isFlat?t:t.#V,void GSDOM.setHTML(t.#j,r);t.#j=GSDOM.parseWrapped(t,r,!0),GSDOM.link(t,t.#j),GSDOM.insertAdjacent(n.target,t.#j,n.anchor)}else if(t.isFlat)if(r){const e=GSDOM.parseWrapped(t,r,!1);t.#j=e,GSDOM.insertAdjacent(n.target,e,n.anchor)}else t.#j=t;else t.#j=t.#V,GSDOM.setHTML(t.#j,r)})),t.updateUI()}#I(){const t=this,e=t.anchor,r=e.indexOf('@');let n=r>0?e.slice(0,r):e,s=r>0?e.slice(r+1):'self';'self'!==n&&'parent'!==n||(s=s||n,n=null),n=GSUtil.normalize(n,'beforeend'),s=GSUtil.normalize(s,'self');let i=null;switch(s){case'self':i=t;break;case'parent':i=t.parentElement;break;default:i=GSDOM.query(document.documentElement,s)}if(!i){const e=`Injection point not available!\nElement: ${t.tagName}, Id:${t.id}, tgt:${s}`;throw GSLog.error(t,e),new Error(e)}return{anchor:n,target:i,ref:!(i===t||i===t.parentElement)}}#q(){const t=this;t.#j&&t.#j.remove&&(t.#j.remove(),t.#j=null)}async#B(){const t=this;await t.#W();try{if(t.offline)return;if(!t.#J)return;t.isFlat||t.attachEvent(document,'gs-style',t.#z.bind(t)),t.attachEvent(screen.orientation,'change',t.#P.bind(t))}finally{GSUtil.requestAnimationFrame((()=>t.onReady()))}}}const t=`${globalThis.CHART_URL||globalThis.location?.origin||'/webcomponents'}/assets/chart/chart.mjs`,{Chart:e,registerables:r}=await import(t);e.register(...r);class GSChart extends GSElement{#K=null;static async#X(){}static{customElements.define('gs-chart',GSChart),Object.seal(GSChart),GSChart.#X()}static get observedAttributes(){return GSElement.observeAttributes(['width','height'])}constructor(){super()}attributeCallback(t='',e='',r=''){const n=this;n.resize(n.width,n.height)}disconnectedCallback(){super.disconnectedCallback();const t=this;t.#K&&t.#K.destroy(),t.#K=null}async getTemplate(t=''){const e=this;return e.width&&e.height?`<canvas width="${e.width}" height="${e.height}" class="${e.css}"></canvas>`:`<canvas class="${e.css}"></canvas>`}onReady(){super.onReady(),this.#B()}get css(){return GSAttr.get(this,'css','')}set css(t=''){return GSAttr.set(this,'css',t)}get width(){return GSAttr.getAsNum(this,'width',0)}set width(t=''){return GSAttr.setAsNum(this,'width',t)}get height(){return GSAttr.getAsNum(this,'height',0)}set height(t=''){return GSAttr.setAsNum(this,'height',t)}get data(){return GSAttr.get(this,'data')}set data(t=''){return GSAttr.get(this,'data',t)}get options(){return GSAttr.get(this,'options')}set options(t=''){return GSAttr.get(this,'options',t)}get canvas(){return this.query('canvas')}reset(){this.#K&&this.#K.reset()}render(){this.#K&&this.#K.render()}update(t){this.#K&&this.#K.update(t)}stop(){this.#K&&this.#K.stop()}clear(){this.#K&&this.#K.clear()}resize(t,e){const r=this;r.#K&&requestAnimationFrame((()=>{const n=r.query('div');n&&(n.style.width=`${t}px`,n.style.height=`${e}px`),r.#K.resize(t,e)}))}toBase64Image(t='image/png',e=1){if(this.#K)return this.#K.toBase64Image(t,e)}async#B(){const t=this,r=await GSLoader.loadSafe(t.options,'GET',null,!0,{}),n=await GSLoader.loadSafe(t.data,'GET',null,!0,[]),s=t.querySelector('gs-item[group="options"]'),i=Object.assign(r,GSChart.toJson(s)),a=i.data.datasets;a.forEach(((t,e)=>{t.data=1===a.length?n:n[e]||[]}));const o=t.canvas.getContext('2d');t.#K=new e(o,i)}static toJson(t,e='name',r='value',n='type'){if(!(t instanceof HTMLElement))return{};const s=t.getAttribute(e),i=t.getAttribute(r),a=t.getAttribute(n);let o=null;switch(a){case'array':o=[];break;case'object':o={};break;default:return GSChart.#Z(i,a)}const c=Array.from(t.children),l='array'===a,u='object'===a;return c.forEach((t=>{const i=t.getAttribute(e);if(l)o.push(GSChart.toJson(t,e,r,n));else if(u){const s=GSChart.toJson(t,e,r,n);o[i]=s}else{const e=t.getAttribute(r),a=t.getAttribute(n);o[s][i]=GSChart.#Z(e,a)}})),o}static#Z(t,e){switch(e){case'boolean':return'true'===t;case'number':return parseFloat(t);default:return t}}}class GSHighlight extends GSElement{static URL_LIB=globalThis.GS_URL_HLJS||'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0';static{customElements.define('gs-highlight',GSHighlight),Object.seal(GSHighlight)}static get observedAttributes(){return GSElement.observeAttributes(['theme','url','target','language'])}constructor(){super()}attributeCallback(t='',e='',r=''){const n=this;switch(t){case'language':n.#Q(e,r);break;case'theme':n.#Y();break;case'target':n.#tt();break;case'url':n.#et()}}async getTemplate(t=''){return'<pre><code><code/><pre/>'}highlight(t=''){this.#rt(t)}onReady(){super.onReady();const t=this;return t.theme&&t.#Y(),t.url?t.#et():t.target?t.#tt():void 0}get url(){return GSAttr.get(this,'url')}set url(t=''){return GSAttr.set(this,'url',t)}get target(){return GSAttr.get(this,'target')}set target(t=''){return GSAttr.set(this,'target',t)}get theme(){return GSAttr.get(this,'theme','default')}set theme(t=''){return GSAttr.set(this,'theme',t)}get language(){return GSAttr.get(this,'language','')}set language(t=''){return GSAttr.set(this,'language',t)}#Q(t,e){t&&this.#nt.remove(`language-${t}`),e&&this.#nt.add(`language-${e}`)}async#Y(){const t=`${GSHighlight.URL_LIB}/styles/${this.theme}.min.css`;GSDOM.injectCSS(this,t)}#tt(){const t=this,e=t.target?GSDOM.query(t.target):null;if(!e)return GSDOM.setHTML(t.#nt,`Element with id ${t.target} not found!`);t.#rt(e.innerHTML)}async#et(){const t=this,e=await GSLoader.load(t.url);if(!e)return GSDOM.setHTML(t.#nt,`Code URL ${t.url} unreachable!`);t.#rt(e)}get#nt(){return this.query('code')}#st(t){URL.revokeObjectURL(t.data.url),GSDOM.setHTML(this.#nt,t.data.data)}#rt(t=''){const e=this;if(!t)return GSDOM.setHTML(e.#nt,'No data!');const r=e.#it,n=new Blob([r],{type:'application/javascript'}),s=URL.createObjectURL(n),i=new Worker(s);i.onmessage=e.#st.bind(e),i.postMessage({data:t,url:s})}get#it(){const t=this.language?this.language.split(',').map((t=>`importScripts('${GSHighlight.URL_LIB}$/languages/{v.trim}.min.js');`)).join(''):'';return`globalThis.onmessage = (event) => {\n                importScripts('${GSHighlight.URL_LIB}/highlight.min.js');\n                ${t}\n                const result = globalThis.hljs.highlightAuto(event.data.data);\n                postMessage({data:result.value, url:event.data.url});};`}}class GSMonaco extends GSElement{static URL_LIB=globalThis.GS_URL_MONACO||'https://unpkg.com/monaco-editor@latest/min/';static#at=!1;#ot=null;static{customElements.define('gs-monaco',GSMonaco),Object.seal(GSMonaco),GSMonaco.#ct(),GSMonaco.#lt(),GSMonaco.#ut()}static#ct(){const t=document.createElement('script');t.type='text/javascript',t.src=`${GSMonaco.URL_LIB}vs/loader.js`,GSDOM.appendChild(document.head,t)}static#lt(){window.MonacoEnvironment={baseUrl:`${GSMonaco.URL_LIB}`,getWorkerUrl:(t,e)=>`data:text/javascript;charset=utf-8,${encodeURIComponent(`\n                globalThis.MonacoEnvironment = {baseUrl: '${GSMonaco.URL_LIB}'};\n                importScripts('${GSMonaco.URL_LIB}vs/base/worker/workerMain.js');`)}`}}static#ut(t){if(GSMonaco.#at)return void(t&&GSEvent.send(t,'monaco-ready'));const e=setInterval((()=>{'function'==typeof globalThis.require&&(require.config({paths:{vs:`${GSMonaco.URL_LIB}/vs`}}),require(['vs/editor/editor.main'],(()=>{clearInterval(e),GSMonaco.#at=!0,GSMonaco.#ut(t)})))}),100)}static get observedAttributes(){return GSElement.observeAttributes(['theme','url','target','language'])}static get disabledFeatures(){return['shadow','internals']}constructor(){super()}attributeCallback(t='',e='',r=''){const n=this;switch(t){case'language':n.#Q(r);break;case'theme':n.#Y(r);break;case'target':n.#tt(r);break;case'url':n.#et(r)}}async getTemplate(t=''){return`<div class="${this.css}"><div/>`}get code(){return this.#ot?this.#ot.getValue():''}set code(t=''){this.#ot&&this.#ot.setValue(t)}get isFlat(){return!0}onReady(){this.once('monaco-ready',this.#dt.bind(this)),GSMonaco.#ut(this)}get url(){return GSAttr.get(this,'url')}set url(t=''){return GSAttr.set(this,'url',t)}get target(){return GSAttr.get(this,'target')}set target(t=''){return GSAttr.set(this,'target',t)}get theme(){return GSAttr.get(this,'theme','vs-dark')}set theme(t=''){return GSAttr.set(this,'theme',t)}get language(){const t=this,e=t.url?t.url.split('.').pop(-1):'';return GSAttr.get(t,'language',e)}set language(t=''){return GSAttr.set(this,'language',t)}get css(){return GSAttr.get(this,'css','')}set css(t=''){return GSAttr.set(this,'css',t)}#Q(t){if(monaco&&t){const e=monaco.editor.getModels();monaco.editor.setModelLanguage(e[0],t)}}async#Y(t){monaco&&t&&monaco.editor.setTheme(t)}#tt(t){const e=t?GSDOM.query(t):null;if(!e)return this.code=`Element with id ${t} not found!`;this.code=e.innerHTML}async#et(t){const e=this,r=t?await GSLoader.load(t):null;if(!r)return e.code=`Code URL ${t} unreachable!`;e.code='',e.#Q(e.language),e.code=r}get#ht(){return this.query('div')}#dt(){const t=this,e={value:'',language:t.language,theme:t.theme,automaticLayout:!0};return t.#ot=monaco.editor.create(t.#ht,e),t.attachEvent(self,'resize',t.#St.bind(t)),super.onReady(),t.url?t.#et(t.url):t.target?t.#tt(t.target):void 0}#St(t){const e=this;e.#ot.layout({width:0,height:0}),window.requestAnimationFrame((()=>{const t=e.owner.getBoundingClientRect();e.#ot.layout({width:t.width,height:t.height})}))}}export{GSChart,GSHighlight,GSMonaco};
//# sourceMappingURL=io.greenscreens.extra.esm.min.js.map
