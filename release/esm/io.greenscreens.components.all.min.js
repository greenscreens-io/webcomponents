class GSVersion{static get version(){return'2.0.0'}static get build(){return 2026.0128}}const t='.z-10k{z-index:10000 !important;}\n.gs-hide,gs-item{display:none !important;}\ngs-popover,gs-tooltip{position:fixed;top:0px;left:0px;},\n.d-contents{display:contents;}\';\ngs-button-group::part(.btn-group){box-shadow:rgba(72, 72, 72, 0.4) 0px 0.125rem 0.25rem;}\ngs-group>gs-button::part(button) {box-shadow: none;}\ngs-group>gs-button:not(:last-child)::part(button) {border-top-right-radius: 0;border-bottom-right-radius: 0;}\ngs-group>gs-button:not(:first-child)::part(button) {margin-left: calc(var(--bs-border-width) * -5);border-top-left-radius: 0;border-bottom-left-radius: 0;}\ngs-layout {width: 100%;height: 100%;}\ngs-split-panel{flex: 1 1 auto !important;}\ninput[is="gs-ext-input"][type="date"]:before {content: attr(data-value);display: inline-block;position: absolute;}\ninput[is="gs-ext-input"][type="date"]::-webkit-datetime-edit, input::-webkit-inner-spin-button, input::-webkit-clear-button {visibility: hidden;display: inline-block;}\ninput[is="gs-ext-input"][type="date"]::-webkit-calendar-picker-indicator {position: relative;top: 0px;right: 0;color: black;opacity: 0.5;}\n',e=Symbol.for('gs-element'),r=Symbol.for('gs-owner'),s=Symbol.for('gs-parent'),n=Symbol.for('gs-handler'),i=Symbol.for('gs-group'),a=Symbol.for('gs-event-id'),l=Symbol.for('gs-next'),c=Symbol.for('gs-prev'),d=Symbol.for('GS-TEMPLATE-RENDER'),u=Symbol.for('#def');class GSLog{static logging=!0;static tracing=!1;static info(t,e){this.#t(t,e,!0,'info')}static warn(t,e){this.#t(t,e,!0,'warn')}static error(t,e){this.#t(t,e,!0,'error')}static trace(t,e){GSLog.tracing&&this.#t(t,e,!1,'error')}static log(t,e,r){this.#t(t,e,r)}static#t(t,e,r,s){if(!r&&!this.logging)return;const n=t?`${t.nodeName} -> ${t.id}: ${e}`:e;let i=console[s||'log'];i='function'==typeof i?i:console.log,i(n),e instanceof Error&&i(e)}static{Object.seal(GSLog)}}let h=class GSUtil{static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static#e=/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g;static#r=/^(\{.*\}$|\[.*\]$)/g;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isDate=t=>t instanceof Date;static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asBool=(t=!1)=>{const e=GSUtil.normalize(t).toLowerCase();return'true'===e||'1'===e};static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,r)=>e[r]));static reverse=t=>(t||'').split('').reverse().join('');static capitalize=(t='')=>t?t[0].toUpperCase()+t.slice(1).toLowerCase():'';static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isInstance=t=>t instanceof t.constructor;static isPrimitive=t=>!Array.isArray(t)&&(this.isBool(t)||this.isDate(t)||this.isNumber(t)||this.isString(t));static range=(t=0,e=0,r=100)=>Math.max(Math.min(r,t),e);static extractNumber=(t='')=>t.match(/[\d,\.]*\d/)?.[0];static nonNull=t=>!GSUtil.isNull(t);static asArray(t){return Array.isArray(t)?t:[t]}static asNum(t,e=0,r){if(r=r||GSUtil.language,GSUtil.isString(t)){const e=GSUtil.numberSeparator(r);t=GSUtil.extractNumber(t)?.replaceAll(e,'')||t}return GSUtil.isNumber(t)?parseFloat(t):e}static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.trim().startsWith('<')&&t.trim().endsWith('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get language(){return navigator.language?navigator.language:navigator.languages[0]}static toRegex(t,e){return t instanceof RegExp?t:GSUtil.isStringEmpty(t)?void 0:new RegExp(t,e)}static decimalSeparator(t){return Intl.NumberFormat(t).format(1.1)[1]}static numberSeparator(t){return Intl.NumberFormat(t).format(1e3)[1]}static inRange(t=0,e=0,r=0){return t>=e&&t<=r}static getDateFormat(t=void 0){return new Intl.DateTimeFormat(t).format(new Date(2e3,0,2)).replace('2000','YYYY').replace('01','MM').replace('1','M').replace('02','DD').replace('2','D')}static sanitize(t=''){const e={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#x27;','/':'&#x2F;','\n':'<br>','\r':'<br>','\t':'&nbsp;&nbsp;&nbsp;&nbsp;',' ':'&nbsp;','\\':'&#x5C;','`':'&#x60;'},r=new RegExp(`[${Object.keys(e).join('')}]`,'ig');return t.replace(r,(t=>e[t]))}static isJsonString(t=''){return GSUtil.#r.lastIndex=0,'string'==typeof t&&GSUtil.#r.test(t)}static isJsonType(t=''){return!GSUtil.isNull(t)&&(Array.isArray(t)||'object'==typeof t)}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t='',e={},r=!0){return GSUtil.isJsonString(t)?JSON.parse(r?GSUtil.normalizeJson(t):t):GSUtil.isJsonType(t)?t:(t&&GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),e)}static normalizeJson(t=''){return t?.replace(GSUtil.#e,'"$2": ')}static normalize(t,e=''){return(t??e).toString().trim()}static toStringArray(t='',e=' '){return t.split(e).map((t=>t.trim())).filter((t=>t.length>0))}static textTransform(t='',e=''){switch(t){case'lowercase':e=e.toLowerCase();break;case'uppercase':e=e.toUpperCase();break;case'capitalize':e=GSUtil.capitalizeAll(e)}return e}static fromTemplateLiteral(t,e){const r=Object.keys(e),s=Object.values(e);return new Function(...r,`return \`${t}\`;`)(...s)}static decodeHTMLEntities(t){const e=document.createElement('textarea');return e.innerHTML=t,e.value}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,r=null;return t.trim().split('.').forEach(((t,s,n)=>{if(e)return s<n.length-1?e=e[t]:void(r=e[t])})),r}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return 0===GSUtil.normalize(t).trim().length}static isStringMatch(t,e){const r=GSUtil.isStringNonEmpty(t),s=GSUtil.isStringNonEmpty(e);return r&&s?t.trim().toLowerCase()===e.trim().toLowerCase():r===s}static async timeout(t=0,e){if(!(t<=0))return e=GSUtil.isNumber(e)?AbortSignal.timeout(e):e,new Promise(((r,s)=>{const n=setTimeout(r.bind(null,!0),t);e instanceof AbortSignal&&e.addEventListener('abort',(()=>{clearTimeout(n),s(new Error('aborted timeout'))}))}))}static async export(t,e,r='octet/stream'){const s=new Blob(t,{type:r}),n=URL.createObjectURL(s);try{const t=document.createElement('a');t.href=n,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(n)}}static register(t,e,r,s=!0,n=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:r?.toLowerCase()}),s&&!Object.isSealed(e)&&Object.seal(e),n&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),r=URL.createObjectURL(e);try{return await import(r)}finally{URL.revokeObjectURL(r)}}static async writeToClipboard(t=''){const e=await navigator.permissions.query({name:'clipboard-write'});return'granted'===e.state||'prompt'===e.state?navigator.clipboard.writeText(t):''}static async readFromClipboard(){const t=await navigator.permissions.query({name:'clipboard-read'});return'granted'===t.state||'prompt'===t.state?navigator.clipboard.readText():''}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}},p=class GSFunction{static isFunction=t=>'function'==typeof t;static isFunctionNative(t){return GSFunction.isFunction(t)&&t.toString().includes('native code')}static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static hasGetter(t,e){return GSFunction.isFunctionDefined(t,e,'get')}static hasSetter(t,e){return GSFunction.isFunctionDefined(t,e,'set')}static isFunctionDefined(t,e,r){const s=!!t&&Reflect.getOwnPropertyDescriptor(t.__proto__,e);return s&&'function'==typeof s[r]}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static isFunctionGenerator(t){if(!GSFunction.isFunction(t))return!1;return t instanceof function*(){}.constructor}static async callFunctionAsync(t,e){const r=arguments?Array.from(arguments).slice(2):[];return await t.apply(e||null,r)}static callFunctionSync(t,e){const r=arguments?Array.from(arguments).slice(2):[];return t.apply(e||null,r)}static async callFunction(t,e,r=!0){if(t=h.isString(t)?GSFunction.parseFunction(t):t,!GSFunction.isFunction(t))return;if(!r&&GSFunction.isFunctionNative(t))return;const s=arguments?Array.from(arguments).slice(3):[];return GSFunction.isFunctionAsync(t)?await GSFunction.callFunctionAsync(t,e,...s):GSFunction.callFunctionSync(t,e,...s)}static parseFunction(t){const e=h.parseValue(t);return GSFunction.isFunction(e)?e:null}static async#s(t,e,r){if(!GSFunction.isFunction(t))return;return GSFunction.isFunctionAsync(t)?await t.apply(e,r):t.apply(e,r)}static callOnceFifo(t,e){let r=!1;return async(...s)=>{if(r)return;r=!0;const n=e||this;return await GSFunction.#s(t,n,s)}}static callOnceLifo(t,e){let r=0;return(...s)=>{if(r<0)return;r++;const n=e||this;return new Promise(((e,i)=>{queueMicrotask((async()=>{if(!(r<=0)&&(r--,0===r))try{const r=await GSFunction.#s(t,n,s);e(r)}catch(t){i(t)}finally{r=-1}}))}))}}static debounce(t,e=300,r=!1){return r?GSFunction.#n(t,e):GSFunction.#i(t,e)}static#n(t,e=300){let r;return(...s)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(this,s)}),e)}}static#i(t,e=300){let r;return(...s)=>{r||t.apply(this,s),clearTimeout(r),r=setTimeout((()=>{r=void 0}),e)}}static{Object.seal(GSFunction),globalThis.GSFunction=GSFunction}};class GSID{static#a=0;static reset(){this.#a=0}static next(t='GSId-'){return`${t}${++this.#a}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let r=0,s=0;if(0===e)return r;for(;s<e;)r=(r<<5)-r+t.charCodeAt(s++)|0;return r}static setIf(t){t&&(t.id='string'!=typeof t.id?GSID.id:t.id||GSID.id)}static{Object.freeze(GSID)}}const m=Symbol('isProxy');class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,r=!1){GSAttr.isHTMLElement(t)&&(h.asBool(r)?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,e,r){GSAttr.isHTMLElement(t)&&(h.normalize(r)?t.setAttribute(e,r):t.removeAttribute(e))}static get(t,e='',r=''){if(!GSAttr.isHTMLElement(t))return r;if(!h.isInstance(t))return r;const s=t.getAttribute(e)??r;return h.normalize(s)}static getAsBool(t,e='',r='false'){const s=GSAttr.get(t,e,r);return h.asBool(s,r)}static getAsNum(t,e='',r='0'){const s=GSAttr.get(t,e,r);return h.asNum(s,r)}static getAsJson(t,e='',r='{}'){const s=GSAttr.get(t,e,r);return h.toJson(s,r)}static setAsBool(t,e='',r='false'){GSAttr.set(t,e,h.asBool(r),!1)}static setAsNum(t,e='',r='0'){GSAttr.set(t,e,h.asNum(r),NaN)}static setAsJson(t,e='',r='{}'){GSAttr.set(t,e,JSON.stringify(r),r)}static flattenJson(t){return Object.entries(t||{}).map((t=>`${t[0]}=${t[1]}`)).join(' ')}static jsonToAttr(t,e){GSAttr.isHTMLElement(e)&&Object.entries(t||{}).filter((t=>'items'!=t[0])).filter((t=>'#'!=t[0][0])).filter((t=>'$'!=t[0][0])).map((t=>GSAttr.set(e,t[0],t[1])))}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static flatten(t,e=' '){return Array.from(t?.attributes||[]).map((t=>`${t.name}="${t.value}"`)).join(e)}static proxify(t,e={},r='items'){return new Proxy(t,{set(t,r,s){if('self'===r)return;if('dataset'===r)return t.dataset=s;if('symbol'==typeof r)return t[r]=s;const n=e[r]?.type;switch(r=e[r]?.attribute||r,n){case Boolean:GSAttr.toggle(t,r,h.asBool(s));break;case Number:GSAttr.setAsNum(t,r,s);break;case Object:case Array:GSAttr.set(t,r,JSON.stringify(s));default:GSAttr.set(t,r,s)}return!0},get(t,s){if('self'===s)return t;if('dataset'===s)return t.dataset;if('symbol'==typeof s)return t[s];if('isProxy'===s)return m;if(s===r)return Array.from(t.children).map((t=>GSAttr.proxify(t,e,r)));const n=e,i=n[s]?.type,a=!!n[s]?.unsafe,o=n[s]?.default,l=!0===n[s]?.multi;s=n[s]?.attribute||s;let c=t.hasAttribute(s)?GSAttr.get(t,s):t[s];if(p.isFunction(c))return c.bind(t);switch(i){case Boolean:return t.hasAttribute(s);case Number:return h.asNum(c,0);case Object:return h.toJson(c,{});case Array:return h.toJson(c,[]);default:return c=a?c||o||'':c||o||void 0,l?h.toStringArray(c):c}}})}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}}class GSCSSMap{static#o=!!globalThis.document?.body?.computedStyleMap;#l;constructor(t){this.#l=GSCSSMap.#c(t)}get(t){const e=this;if(e.#l)return GSCSSMap.#o?e.#l.get(t):e.#l[h.capitalizeAttr(t)]}asText(t){return(this.get(t)||'')?.toString()}asBool(t){const e=this.get(t);return h.asBool(GSCSSMap.#o?e?.value:e)}asNum(t){let e=this.get(t);if(GSCSSMap.#o&&p.isFunction(e?.to)&&'number'!==e.unit&&(e=e.to('px')),GSCSSMap.#o)return h.asNum(e?.value);const r=e?.match(/\d*(\.\d*)?/g).filter((t=>h.isNumber(t))).shift();return h.asNum(r)}matches(t,e){return this.asText(t)==e}static#c(t){return GSCSSMap.#o?t.computedStyleMap():globalThis.window?.getComputedStyle?globalThis.window.getComputedStyle(t):null}static styleValue(t,e){return GSCSSMap.getComputedStyledMap(t).get(e)}static getComputedStyledMap(t){return new GSCSSMap(t)}static#d(t){return t?(t=String(t).replace(/\s*([>~+])\s*/g,' $1 ')).replace(/(\s+)/g,' ').trim():''}static#u(t,e){return t.split(e).map((t=>t.trim())).filter((t=>t))}static#h(t,e){return!!t&&e.some((e=>t.includes(e)))}static findRule(t){const e=GSCSSMap,r=e.#u(e.#d(t),',');return Array.from(globalThis.document.styleSheets).map((t=>Array.from(t.cssRules||[]))).reduce(((t,e)=>t.concat(e)),[]).filter((t=>e.#h(e.#d(t.selectorText),r)))}static{Object.seal(GSCSSMap),globalThis.GSCSSMap=GSCSSMap}}class GSDate extends Date{static DEFAULT_FORMAT='YYYY-MM-DDTHH:mm:ssZ';static REGEX_FORMAT=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;#p=navigator.language;format(t=GSDate.DEFAULT_FORMAT,e){e&&(this.language=e);const r=this.asJSON();return t.replace(GSDate.REGEX_FORMAT,((t,e)=>e||r[t]))}build(){const t=this,e=t.last.getDate(),r=t.first.getDay(),s=t.#m(),n=Array(s?(r+6)%7:r).fill('');let i=1;for(;i<=e;)n.push(i.toString()),i++;for(;n.length%7!=0;)n.push('');return n}get language(){return this.#p}set language(t){this.#p=t||navigator.language}get year(){return this.getFullYear()}set year(t=0){this.setFullYear(t)}get month(){return this.getMonth()}set month(t=0){this.setMonth(t)}get day(){return this.getDate()}set day(t=0){this.setDate(t)}get first(){return new GSDate(this.getFullYear(),this.getMonth(),1)}get last(){return new GSDate(this.getFullYear(),this.getMonth()+1,0)}get YY(){return String(this.YYYY).slice(-2)}get YYYY(){return this.getFullYear()}get M(){return this.getMonth()+1}get MM(){return this.M.toString().padStart(2,'0')}get MMM(){return this.#g({month:'short'})}get MMMM(){return this.#g({month:'long'})}get D(){return this.getDate().toString()}get DD(){return this.D.padStart(2,'0')}get d(){return this.getDay().toString()}get dd(){return this.ddd.slice(0,2)}get ddd(){return this.#g({weekday:'short'})}get dddd(){return this.#g({weekday:'long'})}get H(){return this.getHours().toString()}get HH(){return this.H.padStart(2,'0')}get h(){return this.#f(1)}get hh(){return this.#f(2)}get a(){return this.#S(!0)}get A(){return this.#S(!1)}get m(){return this.getMinutes().toString()}get mm(){return this.m.padStart(2,'0')}get s(){return this.getSeconds().toString()}get ss(){return this.s.padStart(2,'0')}get SSS(){return this.getMilliseconds().toString().padStart(3,'0')}get Z(){return this.#y()}get ZZ(){return this.Z.replace(':','')}get Q(){return Math.ceil(this.M/3)}get k(){return(this.getHours()+1).toString()}get kk(){return this.k.padStart(2,'0')}get W(){const t=new Date(this.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)}get WW(){return this.W.toString().padStart(2,'0')}get x(){return this.getTime()}get X(){return Math.floor(this.x/1e3)}asJSON(){const t=this;return{YY:t.YY,YYYY:t.YYYY,M:t.M,MM:t.MM,MMM:t.MMM,MMMM:t.MMMM,D:t.D,DD:t.DD,d:t.d,dd:t.dd,ddd:t.ddd,dddd:t.dddd,H:t.H,HH:t.HH,h:t.h,hh:t.hh,a:t.a,A:t.A,m:t.m,mm:t.mm,s:t.s,ss:t.ss,SSS:t.SSS,Z:t.Z,ZZ:t.ZZ,Q:t.Q,k:t.k,kk:t.kk,W:t.W,WW:t.WW,x:t.x,X:t.X}}static monthList(t=!1,e=navigator.language,r=!0){const s=new GSDate;s.language=e,s.setDate(1),s.setMonth(0);const n=[];let i=null,a=12;for(;a--;)i=t?s.MMM:s.MMMM,i=r?s.#b(i):i,n.push(i),s.setMonth(s.getMonth()+1);return n}static dayList(t=!1,e=navigator.language,r=!0){const s=new GSDate;s.language=e;const n=s.#m()?1:0;s.setDate(s.getDate()-s.getDay()+n);const i=[];let a=null,o=7;for(;o--;)a=t?s.ddd:s.dddd,a=r?s.#b(a):a,i.push(a),s.setDate(s.getDate()+1);return i}#m(){return 1===new Intl.Locale(this.#p)?.getWeekInfo()?.firstDay}#b(t=''){return t.charAt(0).toUpperCase()+t.slice(1)}#g(t){return this.toLocaleString(this.#p,t)}#f(t){return(this.getHours()%12||12).toString().padStart(t,'0')}#S(t){const e=this.#g({hour:'2-digit',hour12:!0}).split(' ').pop(-1);return t?e.toLowerCase():e}#y(){const t=-1*this.getTimezoneOffset(),e=Math.abs(t),r=e%60;return`${t<=0?'+':'-'}${Math.floor(e/60).toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}`}static parse(t,e,r){e=e||h.getDateFormat(r);const s=GSDate.#v(e);return GSDate.#G(t,s)}static#v(t){return new RegExp('^\\s*'+t.toUpperCase().replaceAll(/([MDY])\1*/g,'(?<$1>\\d+)')+'\\s*$')}static#G(t,e){const{groups:r}=t.match(e)??{};if(!r)return null;const s=Number(r.Y),n=Number(r.M),i=Number(r.D);if(s<1e3||s>2999)return null;if(n<1||n>12)return null;const a=new Date(s,n-1,i);return i!==a.getDate()||isNaN(a.valueOf())?null:a}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static{globalThis.GSDate=GSDate}}class GSData{static PROPERTIES={name:{},type:{},format:{},currency:{},language:{},extract:{},key:{type:Boolean}};static unique(t){return Array.from(new Set(t))}static compareArrays=(t,e)=>t.length===e.length&&t.every(((t,r)=>t===e[r]));static arraysEqual(t,e){return!!Array.isArray(t)&&(!!Array.isArray(e)&&(t===e||(t=t.toSorted(),e=e.toSorted(),GSData.compareArrays(t,e))))}static mergeArrays(t=[],e=[],r=!1){return r?[...new Set([...t,...e].map(JSON.stringify))].map(JSON.parse):[...t,...e].filter(((t,e,r)=>r.indexOf(t)===e))}static mergeObjects(t=[]){let e={};return t.filter((t=>t)).forEach((t=>e={...e,...t})),e}static format(t,e){const r=GSData.#C(t,e),s=t.language||h.language,n=h.toRegex(t.extract,'g');if(e=n?e.match(n)[0]:e,t.childElementCount>0){const r=t.querySelector(`gs-item[value="${e}"]`);return GSAttr.get(r,'map',e)}switch(r){case'timestamp':return e instanceof Date?e:h.isNumber(e)?new GSDate(e).format(t.format,s):t.format?GSDate.parse(e,t.format,s):Date.parse(e);case'date':if(e instanceof Date)return e;const r=h.asBool(t.format)?void 0:t.format;return h.isString(e)?GSDate.parse(e,r,s):e&&0!=e?new GSDate(e).format(r,s):e;case'string':case'text':if(e instanceof Date){const r=t.format||h.getDateFormat(s);return new GSDate(e).format(r,s)}break;case'boolean':return h.asBool(e,!1);case'number':return h.asNum(e,e,s);case'currency':h.isString(e)&&(e=h.asNum(e));const n={style:'currency',currency:t.currency};return new Intl.NumberFormat(s,n).format(e)}return e}static#C(t,e){return t.type?t.type:e instanceof Date?'date':e instanceof Number?'number':e instanceof Boolean?'boolean':typeof e}static*filter(t=[],e=[],r,s=0){let n=0,i=!1;for(let a of t)if(i=GSData.filterRecord(a,e,r),i&&(n++,yield a),s>0&&n>=s)break}static filterData(t=[],e=[],r,s=0){return t=Array.isArray(t)?t:[t],0===(e=Array.isArray(e)?e:[e]).length?t:[...GSData.filter(t,e,r,s)]}static filterRecord(t,e,r){return h.isPrimitive(e)?GSData.filterSimple(t,e,r):GSData.filterComplex(t,e,r)}static filterSimple(t,e='',r){e=e.toLowerCase(),r=r||Object.keys(t);let s=null;for(let n of r)if(s=t[n],GSData.filterValue(s,e))return!0;return!1}static filterComplex(t,e,r){let s=!1,n=!0,i=null;for(let a of e)if(s=h.isPrimitive(a),s?n=n&&GSData.filterSimple(t,a,r):(i=t[a.name],n=a.name?n&&GSData.filterValue(i,a):n&&GSData.filterSimple(t,a.value,r)),!n)break;return n}static filterValue(t,e){const r=h.isPrimitive(e)?e:e.value;return h.isDate(t)?GSData.matchDate(t,e):h.isNumber(t)?GSData.matchNumber(t,h.asNum(r,null),e.op):h.normalize(t).toLocaleLowerCase().includes(h.normalize(r).toLocaleLowerCase())}static matchDate(t,e,r){if('string'==typeof e){const s=''+e,n=t.toLocaleDateString(r),i=t.toISOString();return n.includes(s)||i.includes(s)}if(!e.value)return!1;switch(e.value instanceof Date?'date':typeof e.value){case'number':return GSData.matchNumber(t.getTime(),e.value,e.op);case'date':return GSData.matchNumber(t.getTime(),e.value.getTime(),e.op)}return GSData.matchDate(t,''+e.value,e.language)}static matchNumber(t=0,e=0,r='eq'){switch(r){case'gt':return e>t;case'lt':return e<t;case'ge':return e>=t;case'le':return e<=t}return t===e}static sortData(t,e){return 0===e.length?t:t.toSorted(((t,r)=>GSData.sortPair(t,r,e)))}static sortPair(t,e,r){const s=Array.isArray(t);let n=0;return r.forEach(((r,i)=>{if(!r)return;const a=h.isNumber(r)?r:r.ord,o=h.isNumber(r.col)?r.col:i,l=s?o:r.name,c=t[l],d=e[l];n=GSData.compare(c,d,a,n)})),n}static compare(t,e,r,s){return h.isNumber(t)&&h.isNumber(e)?s||GSData.compareNum(t,e,r):h.isString(t)||h.isString(e)?s||GSData.compareString(t,e,r):h.isBool(t)||h.isBool(e)?s||GSData.compareBool(t,e,r):h.isDate(t)||h.isDate(e)?s||GSData.compareNum(Number(t),Number(e),r):s}static compareBool(t,e,r){return t=t?1:0,e=e?1:0,GSData.compareNum(t,e,r)}static compareString(t,e,r){const s=(t||'').toString(),n=(e||'').toString();return r<0?n.localeCompare(s):s.localeCompare(n)}static compareNum(t,e,r){return r<0?e-t:t-e}static writeToObject(t,e,r,s=!0){if(s&&h.isNull(r))return;const n=e.split('.');if(1===n.length)return GSData.#E(t,e,r);const i=n.slice(0,-1),a=n.slice(-1)[0];return i.forEach((e=>{t.hasOwnProperty(e)||(t[e]={}),t=t[e]})),GSData.#E(t,a,r)}static#E(t,e,r){return t.hasOwnProperty(e)?(Array.isArray(t[e])||(t[e]=[t[e]]),Array.isArray(r)?t[e]=t[e].concat(r):t[e].push(r)):t[e]=r,t}static readFromProperty(t,e,r=!1){if(h.isNull(t))return;const s=/\[\d+\]$/g;let n=e,i='';return s.test(e)?(n=e.replace(s,''),i=e.match(s).shift().match(/\d+/).shift(),i=h.asNum(i),t=t.hasOwnProperty(n)?t[n][i]:null):t=t.hasOwnProperty(n)?r?t[n]||t:t[n]:null,t}static readFromObject(t,e){return t?.hasOwnProperty(e)?GSData.readFromProperty(t,e):e?e.split('.').reduce(((t,e)=>GSData.readFromProperty(t,e)),t):void 0}static objectPathExist(t,e){return void 0!==GSData.readFromObject(t,e)}static deepClone(t){return JSON.parse(JSON.stringify(t))}static{Object.seal(GSData),globalThis.GSData=GSData}}class GSDOM{static QUERY_FOCUSABLE='a[href]:not([tabindex=\'-1\']),area[href]:not([tabindex=\'-1\']),input:not([disabled]):not([tabindex=\'-1\']),select:not([disabled]):not([tabindex=\'-1\']),textarea:not([disabled]):not([tabindex=\'-1\']),button:not([disabled]):not([tabindex=\'-1\']),iframe:not([tabindex=\'-1\']),[tabindex]:not([tabindex=\'-1\']),[contentEditable=true]:not([tabindex=\'-1\'])';static QUERY_INPUT='input:not([type=\'hidden\']):not(disabled):not(readonly),select:not([type=\'hidden\']):not(disabled):not(readonly),textarea:not([type=\'hidden\']):not(disabled):not(readonly)';static#w=['INPUT','SELECT','TEXTAREA','OUTPUT'];static#$=/(?:\n+\t*)+/g;static SPEED=300;static cleanup(t){Array.from(GSDOM.walk(t,!1,!0,!1)).forEach((t=>{GSDOM.isTemplateElement(t)&&GSDOM.cleanup(t.content),t.parentElement?.removeChild?.(t),t.innerHTML='',t.nodeValue=void 0}))}static get activeElement(){return GSDOM.active(document.activeElement)}static active(t){return t.shadowRoot?.activeElement?GSDOM.active(t.shadowRoot?.activeElement):t}static isVisible(t){if(!GSDOM.isHTMLElement(t))return!1;const e=GSCSSMap.getComputedStyledMap(t),r=!e.matches('visibility','hidden'),s=!e.matches('display','none'),n=e.asNum('opacity')>0,i=t.getBoundingClientRect();return i.width>0&&i.height>0&&n&&r&&s}static parse(t='',e=!1,r='text/html'){try{const s=(new DOMParser).parseFromString(t,r);return e?s?.head?.firstElementChild||s?.body?.firstElementChild:s}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',r=!1){const s=GSDOM.parse(e),n=[...GSDOM.#x(s.head.children),...GSDOM.#x(s.body.children)],i=r||1!==n.length,a=GSDOM.wrap(t,i?null:n.shift());for(;n.length>0;)a.appendChild(n.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#x(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const e=h.isString(t)?t:t?.tagName;return GSDOM.#w.includes(e)}static formElements(t,e=!1){return GSDOM.queryAll(t,GSDOM.#w.map((t=>t.toLowerCase())),e)}static isButtonElement(t){return t instanceof HTMLButtonElement||'GS-BUTTON'===t?.tagName||GSDOM.hasClass(t,'btn')}static isElement(t,e){if(!(e&&t))return!1;if(!h.isString(e))return t instanceof e;const r=customElements.get(e.toLowerCase());if(r&&t instanceof r)return t;const s=GSDOM.inheritance(t);for(let r of s)if(r?.constructor?.name===e)return t;return e.toUpperCase()===t.tagName&&t}static isSelect(t){return t instanceof HTMLSelectElement}static isSlotElement(t){return t instanceof HTMLSlotElement}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static isShadowed(t){return GSDOM.parentAll(t).filter((t=>t instanceof ShadowRoot)).next()?.value}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const r=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),s=GSDOM.isHTMLElement(t)&&r,n=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!s||n)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,r){const s=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),n=t===e&&t.parentNode===e;return!(!s||n)&&t.insertAdjacentElement(r,e)}static removeElement(t){return GSDOM.parent(t)?.removeChild(t)}static walk(t,e=!1,r=!1,s=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,r,s)}static*childAll(t,e=!1,r=!0,s=!1){if(!t)return;s&&(yield t),r&&(yield*GSDOM.childAll(t.shadowRoot,e,r,!0));const n=e?t.childNodes:t.children;if(n)for(let t of n)yield*GSDOM.childAll(t,e,r,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static offsetParent(t){let e=t?.offsetParent;if(e)return e;const r=GSDOM.parentAll(t);for(const t of r)if(e=t.offsetParent,e)break;return e}static root(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static component(t){return GSDOM.parent(GSDOM.root(t))}static getElementIndex(t){return GSDOM.isHTMLElement(t)?[...t.parentElement.children].indexOf(t):0}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.documentElement,t);if(!t||!e)return null;const r=GSDOM.walk(t,!1);for(let t of r)if(t.id===e)return t;return null}static closest(t,e,r=0){if('string'==typeof t)return GSDOM.closest(document.documentElement,e);if(!t||!e)return null;const s=(r=h.asNum(r,0))>0,n=GSDOM.walk(t,!0);for(let t of n){if(GSDOM.matches(t,e))return t;if(s&&0==--r)return null}return null}static query(t,e,r=!1,s=!0){if('string'==typeof t)return GSDOM.query(document.documentElement,t,r,s);if(!t||!e)return null;if(GSDOM.matches(t,e))return GSDOM.#D(t);const n=GSDOM.walk(t,!1,r,s);for(let t of n)if(GSDOM.matches(t,e))return GSDOM.#D(t);return null}static queryAll(t,e,r=!1,s=!0){if('string'==typeof t){if(!e)return GSDOM.queryAll(document.documentElement,t,r,s);t=GSDOM.query(t)}const n=[];if(!t||!e)return n;const i=GSDOM.walk(t,!1,r,s);for(let t of i)GSDOM.matches(t,e)&&n.push(GSDOM.#D(t));return n}static#D(t){return'FORM'!==t.tagName?t:GSDOM.isHTMLElement(t.id)?new Proxy(t,{get:(t,e,r)=>{if('_owner_'===e)return t;if('id'===e)return t.getAttribute('id');const s=Reflect.get(t,e);return GSFunction.isFunction(s)?s.bind(t):s},set:(t,e,r)=>t[e]=r}):t}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static setHTML(t,e='',r=!1,s){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(r&&t?.setHTML?s?t.setHTML(e,{sanitizer:s}):t.setHTML(e):t.innerHTML=e instanceof Document?e.body.innerHTML:e)}static setText(t,e=''){t&&(t.textContent=e)}static css(t,e){if(h.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!(Array.isArray(t)&&t.length>0))return!1;requestAnimationFrame((()=>{t.forEach((t=>Object.assign(t.style,e)))}))}static toggleClass(t,e,r){return h.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!!(Array.isArray(t)&&t.length>0)&&(!(!e||0==e.trim().length)&&(e=e.split(' ').filter((t=>t&&t.trim().length>0)),h.isNull(r)?e.forEach((e=>{t.forEach((t=>t.classList.toggle(e)))})):(t.forEach((t=>{r?t.classList.add.apply(t.classList,e):t.classList.remove.apply(t.classList,e)})),!0)))}static toggle(t,e){return GSDOM.toggleClass(t,'d-none',h.isNull(e)?e:!e)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea, output'){const r=GSDOM.unwrap(t);requestAnimationFrame((()=>{r.querySelectorAll(e).forEach((t=>t.value=''))}))}static getValue(t,e=!1){let r=null;switch(t.type){case'datetime-local':r=t.value?t.valueAsNumber:t.value;break;case'number':r=t.value?t.valueAsNumber:0;break;case'select-multiple':r=Array.from(t.selectedOptions).map((t=>t.value));break;case'checkbox':r=h.isStringNonEmpty(t.value)?t.checked?t.value:null:t.checked;break;default:r=t.value}return h.isNull(r)&&e&&(r=t.defaultValue),r}static toValue(t,e=!1){if(!GSDOM.isHTMLElement(t))return;let r=GSDOM.getValue(t,e);if('text'===t.type){const e=GSCSSMap.styleValue(t,'text-transform');e&&(r=h.textTransform(e.value,r))}return r}static fromValue(t,e,r=!1){if(!GSDOM.isHTMLElement(t))return;const s=Array.isArray(e)?e[0]||'':e;if('checkbox'===t.type)h.isStringNonEmpty(t.value)?t.checked=s===t.value:t.checked=1==s,r&&(t.defaultValue=t.checked);else t.value=h.normalize(s),r&&(t.defaultValue=t.value)}static toObject(t,e='input, textarea, select, output',r=!0,s=!1){const n=GSDOM.unwrap(t),i={};return GSDOM.queryAll(n,e).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!r||t.checkValidity())).forEach((t=>GSDOM.fromElement2Object(t,i,s))),i}static fromObject(t,e,r='input, textarea, select, output',s=!1){e=h.toJson(e);const n=GSDOM.unwrap(t),i=GSDOM.queryAll(n,r);return Array.from(i).forEach((t=>GSDOM.fromObject2Element(t,e,s))),e}static fromObject2Element(t,e,r=!1){if(!GSData.objectPathExist(e,t?.name))return;const s=GSData.readFromObject(e,t.name);'radio'!==t.type?GSDOM.fromValue(t,s,r):t.value===s&&(t.checked=!0)}static fromElement2Object(t,e,r=!1,s=!1){if(t?.name){if(s&&h.isStringEmpty(t.value))return e;('radio'!==t.type||t.checked)&&GSData.writeToObject(e,t.name,GSDOM.toValue(t,r))}return e}static toJson(t,e=!0,r=!1,s){if(Array.isArray(t))return t.map((t=>GSDOM.toJson(t,e,r,s)));const n={};if(!GSDOM.isHTMLElement(t))return n;r||(n['#tagName']=t.tagName.toLowerCase()),n.$text=t.innerText;const i=s||GSDOM.allProperties(t);if(Array.from(t.attributes).forEach((e=>{const r=i[e.name]?.type;switch(r){case Boolean:n[e.name]=t.hasAttribute(e.name);break;case Number:n[e.name]=GSAttr.getAsNum(t,e.name);break;default:n[e.name]=e.value}})),e){const i=Array.from(t.children).map((t=>GSDOM.toJson(t,e,r,s)));i.length>0&&(n.items=i)}return n}static fromJson(t,e='gs-item',r=!1){return r?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,e='gs-item'){if(!t)return null;if(h.isNumber(t)||h.isString(t))return GSDOM.fromJsonAsDOM({title:t},e);if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t,e)));const r=t['#tagName']||e,s=document.createElement(r);return Object.keys(t).filter((t=>'items'!=t)).filter((t=>'#'!=t[0])).filter((t=>'$'!=t[0])).forEach((e=>s.setAttribute(e,t[e]))),t['#def']&&(s[u]=t['#def']),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsDOM(t,e);s.appendChild(r)})),s}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const r=t['#tagName']||e,s=[];return s.push(`<${r} `),Object.keys(t).filter((t=>'items'!=t)).filter((t=>'#'!=t[0])).filter((t=>'$'!=t[0])).forEach((e=>s.push(` ${e}="${t[e]}" `))),s.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsString(t,e);s.push(r)})),s.push(`</${r}>`),s.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').filter((t=>t.length>1)).forEach((e=>{const r=e.split('=');GSDOM.setValue(`input[name=${r[0]}]`,r[1],t)}))}static unwrap(t){return t?t.self||t:document}static#T(t,e='',r=''){return r=h.capitalizeAttr(r),GSDOM.queryAll(t,e).filter((t=>!r||h.asBool(t.dataset[r])))}static enableInput(t,e='input, select, textarea, button, .btn',r){GSDOM.#T(t,e,r).forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, textarea, button, .btn',r){GSDOM.#T(t,e,r).forEach((t=>t.setAttribute('disabled','')))}static setValue(t,e,r,s=!1){GSDOM.queryAll(r,t).forEach((t=>GSDOM.fromValue(t,e,s)))}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),r=[];let s;for(;s=e.nextNode();)r.push(s);return r}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(GSDOM.#$,'')))}static validate(t,e,r,s=!1){if(t.tagName!==e){if(s)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),r))return!0;if(s)return!1;const n=GSDOM.toValidationError(t,r);throw new Error(n)}static isAllowed(t,e){if(Array.isArray(t))return 0===t.filter((t=>GSDOM.isAllowed(t,e))).length;const r=!(t instanceof Text||t instanceof Comment),s=!e.includes(t.tagName);return r&&s}static toValidationError(t,e){const r=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${r}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let r=!0;try{const r=await fetch(e);if(!r.ok)return;const s=await r.text(),n=new CSSStyleSheet;n.replaceSync(s),t.shadowRoot.adoptedStyleSheets=[n]}catch(t){GSLog.error(null,t),r=!1}return r}static reset(t){if(GSDOM.isFormElement(t)&&!GSDOM.resetSelect(t))return t.dataset.typed=!1,t.value=t.defaultValue,!0}static resetSelect(t){if(GSDOM.isSelect(t))return Array.from(t.options).forEach((t=>t.selected=t.hasAttribute('selected'))),!0}static#A(t){t.dispatchEvent(new Event('change',{bubbles:!0,composed:!0}))}static allProperties(t){const e=[...GSDOM.inheritance(t)].map((t=>t.properties)).filter((t=>t));return e.push(t.constructor?.properties||t.properties),GSData.mergeObjects(e)}static templateRef(t){if(t)return'GS-TEMPLATE'===t.tagName?t.src:t.template||t.query?.('template',!1)}static#k(t,e){queueMicrotask((()=>{globalThis.dispatchEvent?.(new CustomEvent(t,e))}))}static define(t,e,r){customElements.get(t)||(customElements.define(t,e,r),GSDOM.#k(t,{detail:{customElements:!0}}))}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM,GSDOM.#k('gs-base-ready',{detail:{message:'GS Base is ready',time:new Date}})}}class GSEvents{static#M=0;static#O=!1;static#L=new Map;static#I=!1;static#N=0;get altContext(){return GSEvents.#O}set altContext(t){GSEvents.#O=h.asBool(t,!0)}static protect(){GSEvents.listen(globalThis,null,'contextmenu',GSEvents.#R),GSEvents.listen(globalThis.document,null,'keydown',GSEvents.#U)}static#R(t){!GSEvents.#O&&t.shiftKey||GSEvents.prevent(t)}static#U(t){const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}static async waitPageLoad(t,e='loaded',r,s=0,n=!0){if(!GSEvents.#I)try{await GSEvents.wait(globalThis.window,'load',s,n),GSEvents.#I=!0}catch(t){}GSEvents.#I&&(await p.callFunction(r),GSEvents.sendSuspended(t,e))}static wait(t,e='',r=0,s=!0){if(h.isStringEmpty(e))throw new Error('Event undefined!');if(!h.isNumber(r))throw new Error('Invalid timeout value!');return r>0?GSEvents.once(t,null,e,null,r):new Promise((n=>{GSEvents.once(t,null,e,(t=>{s&&GSEvents.prevent(t),n(t)}),r)}))}static async waitAnimationFrame(t,e=!1){if(e){if('function'!=typeof t)return;if(GSEvents.#N>0)return p.callFunction(t);GSEvents.#N++}return new Promise(((r,s)=>{requestAnimationFrame((async()=>{try{const e=await p.callFunction(t);r(e)}catch(t){s(t)}finally{e&&GSEvents.#N>0&&GSEvents.#N--}}))}))}static listen(t,e,r,s,n=!1){return!e&&t?t.addEventListener(r,s,n):GSDOM.queryAll(t,e).map((t=>t.addEventListener(r,s,n)))}static unlisten(t,e,r,s){return!e&&t?t.removeEventListener(r,s):GSDOM.queryAll(t,e).map((t=>t.removeEventListener(r,s)))}static on=GSEvents.listen;static off=GSEvents.unlisten;static once(t,e,r,s,n=0){const i=GSEvents.#F(n);return i&&i.internal?new Promise(((n,a)=>{GSEvents.listen(t,e,r,(t=>{i.removeEventListener('abort',a),s?.(t),n(t)}),{once:!0,signal:i}),i.addEventListener('abort',a)})):GSEvents.listen(t,e,r,s,{once:!0,signal:i})}static prevent(t,e=!0,r=!0,s=!0){t&&(e&&t.preventDefault?.(),r&&t.stopPropagation?.(),s&&t.stopImmediatePropagation?.())}static send(t=document,e,r='',s=!1,n=!1,i=!1){if(!h.isString(e)||0===e.length)return!1;const a=new CustomEvent(e,{detail:r,bubbles:s,composed:n,cancelable:i});return t?.dispatchEvent(a)}static redispatch(t,e){GSEvents.prevent(e,!0,!0,!0),GSEvents.send(t,e.type,e.detail,e.bubbles,e.composed,e.cancelable)}static toEvent(t,e){let r=null;switch(t){case'copy':case'cut':case'paste':r=new ClipboardEvent(t,e);break;case'blur':case'focus':case'focusin':case'focusout':r=new FocusEvent(t,e);break;case'input':case'beforeinput':r=new InputEvent(t,e);break;case'keydown':case'keyup':case'keypress':r=new KeyboardEvent(t,e);break;case'dblclick':case'mousedown':case'mouseenter':case'mouseleave':case'mousemove':case'mouseout':case'mouseover':case'mouseup':r=new MouseEvent(t,e);break;case'submit':r=new SubmitEvent(t,e);break;case'touchstart':case'touchend':case'touchmove':case'touchcancel':r=new TouchEvent(t,e);break;case'whell':r=new WheelEvent(t,e);break;case'pointerover':case'pointerenter':case'pointerdown':case'pointermove':case'pointerup':case'pointercancel':case'pointerout':case'pointerleave':case'pointerrawupdate':case'gotpointercapture':case'lostpointercapture':r=new PointerEvent(t,e);break;default:r=new CustomEvent(t,e)}return r}static isMouseOrPointerEvent(t){return t instanceof MouseEvent||t instanceof PointerEvent}static sendSuspended(t=document,e,r='',s=!1,n=!1,i=!1){return requestAnimationFrame((()=>{GSEvents.send(t,e,r,s,n,i)}))}static sendDelayed(t=1,e=document,r,s='',n=!1,i=!1,a=!1){return setTimeout((()=>GSEvents.send(e,r,s,n,i,a)),t)}static attach(t,e,r='',s,n=!1,i=!1){if(!e)return!1;if(!(window instanceof Window||e.isConnected))return!1;if(!p.isFunction(s))return!1;if(!p.hasFunction(e,'addEventListener'))return!1;const a=this,o=a.#B(t,e,r,s),l=a.#H(t);return a.#P(l,o.key).set(o.fnkey,o),o.capture=i,n&&(o.once=t=>{try{o.fn(t)}finally{a.remove(o.own,o.el,o.name,o.once)}},Object.defineProperty(o.once,'gsid',{value:s.gsid,writable:!1})),e.addEventListener(r,n?o.once:o.fn,{once:n,capture:i}),!0}static remove(t,e,r='',s){const n=this,i=n.#B(t,e,r,s),a=n.#H(t),o=n.#P(a,i.key),l=o.get(i.fnkey);if(l)o.delete(l.fnkey),n.#z(l);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),n.#z(t);0===o.size&&a.delete(i.key),0===a.size&&n.#L.delete(t)}static detachListeners(t){const e=this,r=e.#j(t);if(!r)return;const s=r.values();for(let t of s){for(let r of t.values())e.#z(r);t.clear()}r.clear()}static#B(t,e,r='',s=''){if(!e)return!1;const n=this.#q(e),i=this.#V(s);return{own:t,fn:s,el:e,name:r,key:GSID.hashCode(`${n}${r}`),fnkey:GSID.hashCode(`${n}${r}${i||''}`)}}static#P(t,e){let r=t.get(e);return r||(r=new Map,t.set(e,r)),r}static#V(t){return p.isFunction(t)?(t.gsid||Object.defineProperty(t,'gsid',{value:GSID.next(),writable:!1}),t.gsid):null}static#q(t){let e=t[a];return e||(e=GSID.id,t[a]=e),e}static#H(t){return this.#P(this.#L,t)}static#j(t){const e=this.#L.get(t);if(e)return this.#L.delete(t),e}static#z(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static#F(t=0){return h.isNumber(t)&&t>0?((t=AbortSignal.timeout(t)).internal=!0,t):t instanceof AbortSignal?t:void 0}static monitorAction(t,e){t.on('action',(r=>{const s=t,n=r.detail,i=h.isString(n)?n:n.action||n.data?.action;GSEvents.onAction(s,i,e,r)}))}static async onAction(t,e,r,s){const n=GSEvents.findAction(t,e,r);if(!n)return;GSEvents.prevent(s);let i=!1;try{i=p.isFunctionAsync(n)?await n(s):n(s)}catch(e){if(i=e,!p.isFunction(t.onError))throw e;t.onError(e)}return i}static findAction(t,e='',r=''){let s=!1;if(!e)return s;const n=t;e=h.capitalizeAttr(h.capitalize(e));const i=`on${r=h.capitalizeAttr(h.capitalize(r))}${e}`;globalThis.GS_LOG_ACTION&&GSLog.warn(t,`Action : ${i}`);const a=n[i];return s=p.isFunction(a),s=s&&!p.isFunctionNative(a),s?n[i].bind(n):null}static#_(){clearTimeout(GSEvents.#M),GSEvents.#M=setTimeout((async()=>{await GSEvents.waitAnimationFrame(),GSEvents.send(window,'resized')}),100)}static resizeMonitor(){const t=GSEvents,e=document.documentElement,r=t.#B(e,window,'resize',t.#_),s=t.#H(e),n=s.get(r.key)?.get(r.fnkey);n||t.attach(e,window,'resize',t.#_)}static{Object.freeze(GSEvents),globalThis.GSEvents=GSEvents,GSEvents.waitPageLoad()}}let g=class GSAbortController extends AbortController{#W=0;constructor(t=0){if(super(),!h.isNumber(t))throw new Error('Timeout parameter must be number');const e=this;t&&(e.#W=setTimeout(e.abort.bind(e),t)),e.signal.addEventListener('abort',(()=>clearInterval(e.#W)))}wait(t=0){return GSEvents.wait(this.signal,'abort',t)}};class GSDOMObserver extends MutationObserver{static#Y=new Map;static#J=new Map;observe(t,e){const r=e||{childList:!0,subtree:!0};return super.observe(t,r)}static create(t,e){const r=new GSDOMObserver(GSDOMObserver.#K);return r.observe(t,e),r}static#X(t=!1){return t?GSDOMObserver.#J:GSDOMObserver.#Y}static get#Q(){return GSDOMObserver.#Z||GSDOMObserver.#tt}static get#Z(){return GSDOMObserver.#Y.size>0}static get#tt(){return GSDOMObserver.#J.size>0}static#K(t){GSDOMObserver.#Q&&t.forEach((t=>{GSDOMObserver.#Z&&t.addedNodes.forEach((t=>GSDOMObserver.#et(t,GSDOMObserver.#Y))),GSDOMObserver.#tt&&t.removedNodes.forEach((t=>GSDOMObserver.#et(t,GSDOMObserver.#J)))}))}static#et(t,e){return 0!==e.size&&(GSDOMObserver.#rt(t,e),t.childNodes.forEach((t=>GSDOMObserver.#et(t,e))),!0)}static#rt(t,e){e.forEach(((e,r)=>{try{r(t)&&e(t)}catch(t){GSLog.error(null,t)}}))}static#st(t,e,r){if(t instanceof HTMLElement==0)return!1;const s=new Map;return s.set(e,r),GSDOMObserver.#et(t,s)}static#nt(t){return'function'==typeof t}static#it(t,e){return GSDOMObserver.#nt(t)&&GSDOMObserver.#nt(e)}static registerFilter(t,e,r=!1,s){return!!GSDOMObserver.#it(t,e)&&(GSDOMObserver.#X(r).set(t,e),r||GSDOMObserver.#st(s||document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#nt(t)&&GSDOMObserver.#X(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver,GSDOMObserver.create(document.documentElement)}}class GSDynamicStyle extends CSSStyleSheet{constructor(t='dynamic'){super(),this.id=t||GSID.id}#at(t='',e=!1){return e?t:`.${t}`}deleteRule(t='',e=!1){const r=this.#at(t,e);Array.from(this.cssRules).map(((t,e)=>t.selectorText===r?e:-1)).filter((t=>t>-1)).forEach((t=>super.deleteRule(t)))}getRule(t='',e=!1){const r=this.#at(t,e);return Array.from(this.cssRules).filter((t=>t.selectorText===r)).pop()}setRule(t,e='',r=!1,s=!1){const n=this;if(!t)return;let i=n.getRule(t,s);if(!i){const i=n.#at(t,s);return n.insertRule(`${i} {}`),n.setRule(t,e,r,s)}if(!e)return i;let a=[];return a='string'==typeof e?e.replaceAll('\n','').split(';').map((t=>t.trim().split(':'))).filter((t=>2===t.length)):Object.entries(e),r?a.forEach((t=>n.#ot(i,t[0],t[1]))):requestAnimationFrame((()=>{a.forEach((t=>n.#ot(i,t[0],t[1])))})),i}#ot(t,e='',r=''){const s=(r=(r||'').toString()).includes('!important');r=r.replace('!important',''),e=e.trim(),t.style.setProperty(e,r,s?'important':'')}static dynamicStyleSheet(t){const e=GSDOM.root(t),r=t.dataset.sheet||'dynamic';return GSDynamicStyle.dynamicStyleSheetByID(e,r)}static dynamicStyleSheetByID(t,e){return t?.adoptedStyleSheets?Array.from(t?.adoptedStyleSheets).filter((t=>t.id===e)).pop():null}static dynamicRule(t,e=!1){const r=GSDynamicStyle.dynamicStyleSheet(t);return r?.getRule(t.dataset.gsClass,e)}static dynamicRuleByID(t,e,r=!1){const s=GSDynamicStyle.dynamicStyleSheetByID(t,'dynamic');return s?.getRule(e,r)}static dynamicStyle(t,e=!1){const r=GSDynamicStyle.dynamicRule(t,e);return r?.style}static dynamicStyleByID(t,e,r=!1){const s=GSDynamicStyle.dynamicRuleByID(t,e,r);return s?.style}static applyDynamicStyle(t,e,r=!1){queueMicrotask((()=>{const s=GSDynamicStyle.dynamicStyle(t,r);return Object.assign(s,e)}))}static applyDynamicStyleByID(t,e,r,s=!1){queueMicrotask((()=>{const n=GSDynamicStyle.dynamicStyleByID(t,e,s);return Object.assign(n,r)}))}}class GSCacheStyles{static#lt=new Map;static create(t){const e=new GSDynamicStyle(t);return this.#lt.set(t,e),e}static set(t,e){const r=this;if(e instanceof CSSStyleSheet&&r.#lt.set(t,e),e&&'string'==typeof e){GSCacheStyles.create(t).replaceSync(e)}return r.get(t)}static remove(t){return this.#lt.delete(t)}static get(t){return this.#lt.get(t)}static get dynamic(){const t='gs-dynamic';let e=GSCacheStyles.get(t);return e||(e=GSCacheStyles.create(t),document.adoptedStyleSheets=GSCacheStyles.styles),e}static getRule(t='',e=!1){return GSCacheStyles.dynamic.getRule(t,e)}static setRule(t='',e='',r=!1,s=!1){return GSCacheStyles.dynamic.setRule(t,e,r,s)}static deleteRule(t='',e=!1){GSCacheStyles.dynamic.deleteRule(t,e)}static get styles(){return Array.from(new Map([...GSCacheStyles.#lt].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static adopt(t='',e=0){if(t)try{e=e||GSID.hashCode(t),GSCacheStyles.set(e,t),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){GSLog.error(null,t)}}static{Object.freeze(GSCacheStyles),globalThis.GSCacheStyles=GSCacheStyles,GSCacheStyles.adopt(t)}}const f=Symbol(),S=Symbol();class GSAdoptedEngine{static timeout=1e3;static#ct=0;static#dt=Date.now();static#ut=!1;static#ht(){const t=GSAdoptedEngine;t.observe(document.head),t.#pt(),t.#ct=setInterval((()=>t.#mt()),t.timeout)}static#gt(){const t=GSAdoptedEngine;clearInterval(t.#ct),t.#ct=void 0}static#mt(){const t=GSAdoptedEngine,e=t.#ft;if(0==e.length)return t.#gt();e.map((e=>t.#St(e))),t.update()}static update(){const t=GSAdoptedEngine;t.#ut||(t.#ut=!0,queueMicrotask((()=>{requestAnimationFrame((()=>{try{document.adoptedStyleSheets=t.#yt,document.adoptedStyleSheets.id=++t.#dt}finally{t.#ut=!1,globalThis.dispatchEvent(new CustomEvent('gs-adopted'))}}))})))}static#bt(t){return Object.values(t.cssRules).map((t=>t.cssText)).join('')}static#vt(t){const e=GSAdoptedEngine;GSAdoptedEngine.#Gt(t),Array.from(document.styleSheets).filter((e=>e.ownerNode===t)).map((t=>e.#St(t)))}static#St(t){const e=GSAdoptedEngine,r=e.#bt(t);return e.#Ct(t.ownerNode,r)}static#Ct(t,e){const r=GSAdoptedEngine,s=new CSSStyleSheet;return s.replaceSync(e),s.id=++r.#dt,t[f]=s.id,r.#lt(t,s),s}static#lt(t,e){GSCacheStyles.set(e.id,e)}static#Et(t,e){GSCacheStyles.remove(e.id),t[S]?.disconnect?.(),t[S]=void 0}static get#yt(){return GSCacheStyles.styles}static get#ft(){return Object.values(document.styleSheets).filter((t=>t.ownerNode)).filter((t=>t.ownerNode.dataset.adoptable)).filter((t=>!t.ownerNode[f]))}static#pt(){GSDOM.queryAll(document.head,'link[rel="preload"][as="style"]').forEach((t=>{t.remove(),document.head.appendChild(t)}))}static#wt(t){t.forEach((t=>{const e=t.target[f],r=GSCacheStyles.get(e);r&&(r.disabled=t.target.hasAttribute('disabled'))})),GSAdoptedEngine.update()}static#Gt(t){const e=GSAdoptedEngine,r=e.#wt.bind(e),s=new MutationObserver(r);return s.observe(t,{attributeFilter:['disabled'],attributeOldValue:!0,subtree:!1}),s}static#$t(t){return Boolean(t.dataset?.adoptable)&&(t instanceof HTMLLinkElement&&('stylesheet'===t.rel||'style'===t.as)||t instanceof HTMLStyleElement)}static#xt(t){const e=GSAdoptedEngine;t instanceof HTMLStyleElement?(e.#Ct(t,t.innerText),e.update()):t instanceof HTMLLinkElement&&GSEvents.wait(t,'load',0,!1).then((r=>{if('preload'===t.rel)return t.rel='stylesheet';e.#vt(r.target),e.update()}))}static#Dt(t){const e=GSAdoptedEngine;e.#yt.filter((e=>e.id===t[f])).forEach((r=>e.#Et(t,r))),e.update()}static observe(t){const e=GSAdoptedEngine;GSDOMObserver.registerFilter(e.#$t,e.#xt,!1,t),GSDOMObserver.registerFilter(e.#$t,e.#Dt,!0,t)}static{this.#ht()}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static ROUTER_URL=globalThis.GS_ROUTER_URL||location.origin;static NO_CACHE=!1;static UNIQUE=GSVersion.build;static{const t=GSLoader.#Tt;globalThis.GS_TEMPLATE_URL||(GSLoader.TEMPLATE_URL=t,globalThis.GS_TEMPLATE_URL=t),globalThis.GS_ROUTER_URL||(GSLoader.ROUTER_URL=t,globalThis.GS_ROUTER_URL=t);const e='GS_NO_CACHE'in self;e&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static get#Tt(){const t=location.href.split('?').pop(),e=t.split('/');return t.endsWith('/')?t:e.slice(0,-1).join('/')}static normalizeURL(t='',e=!1){t=t||'';let r=null;const s=location.pathname.split('/').pop(-1).includes('.'),n=t.includes('extension:/');r=t.startsWith('http')||n?t:t.startsWith('/')?`${location.origin}/${t}`:s?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,r=r.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(r);if(!e){const t=GSLoader.NO_CACHE?Date.now():GSLoader.UNIQUE;i.searchParams.append('_dc',t)}return i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')+'/'}static async getRouter(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM.query(document.documentElement,t);return e?h.toJson(e.innerHTML):{}}return h.isHTML(t)?t:(t=GSLoader.#At(t),GSLoader.loadSafe(t,'GET',null,!0))}static#At(t=''){return t=t.startsWith('//')?GSLoader.#kt+'/'+t:t,GSLoader.normalizeURL(t)}static get#kt(){return GSLoader.normalizeURL(GSLoader.#Mt,!0)}static get#Mt(){return GSLoader.ROUTER_URL?GSLoader.ROUTER_URL.replace('//','/'):''}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM.query(document.documentElement,t);return e?e.innerHTML:t}return h.isHTML(t)?t:(t=GSLoader.#Ot(t),GSLoader.loadSafe(t))}static#Ot(t=''){return t=t.startsWith('//')?GSLoader.#Lt+'/'+t:t,GSLoader.normalizeURL(t)}static get#Lt(){return GSLoader.normalizeURL(GSLoader.#It,!0)}static get#It(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const r=GSLoader.#Ot(t);return await GSLoader.load(r,e)}static async load(t='',e='GET',r,s=!1,n){let i=null;const a='Content-Type';(r={...r})[a]=s?'application/json; utf-8':r[a]||'text/plain',r.Accept='application/json';const o=GSLoader.normalizeURL(t,!0),l={method:e,headers:r};('POST'===e||'PUT'===e&&n)&&(l.body=JSON.stringify(n));const c=await fetch(o,l);return c.ok&&(i=s?await c.json():await c.text()),i}static async loadSafe(t='',e='GET',r,s=!1,n,i){try{if(t)return GSLoader.load(t,e,r,s,i)}catch(t){GSLog.error(null,t)}return n||(s?{}:'')}static async loadData(t=''){const e=h.isJson(t),r=!e&&p.parseFunction(t),s=r&&p.isFunction(r);if((!s&&h.parseValue(t)||e)&&(t=h.toJson(t)),s&&(t=await p.callFunction(r)),h.isJsonType(t))return t}static{Object.seal(GSLoader),globalThis.GSLoader=GSLoader}}class GSTemplateCache{static#lt=new Map;static clear(){GSTemplateCache.#lt.clear()}static store(t,e){this.#lt.set(t,e)}static remove(t){return this.#lt.delete(t)}static load(t){return this.#lt.get(t)}static getOrCreate(t,e){const r=GSTemplateCache;let s=r.load(t);return s||(s=r.create(e),r.store(t,s),s)}static create(t){const e=document.createElement('template');return GSDOM.setHTML(e,t),e}static clone(t){return GSDOM.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(t){const e=p.parseFunction(t);return!!p.isFunction(e)&&e}static isHTMLTemplate(t){const e=t?t.trim():'';return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():'';return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e='',r){const s=GSTemplateCache;return t?s.getOrCreate(e,r):s.create(r)}static loadHTMLTemplate(t=!1,e='',r){const s=GSTemplateCache,n=s.isHTMLTemplate(r);return n?s.initTemplate(t,e,n):n}static async loadURLTemplate(t=!1,e='',r){const s=GSTemplateCache;try{let n=null;return t&&(n=s.load(r)),n?n:(n=await GSLoader.loadTemplate(r),s.initTemplate(t,e,n))}catch(t){GSLog.error(s,t)}return!1}static async loadFunctionTemplate(t=!1,e='',r){const s=GSTemplateCache,n=s.isFunctionTemplate(r);if(!n)return n;try{let r=null;return s.cached&&(r=s.load(o)),r?r:(r=p.isFunctionAsync(n)?await n():n(),s.initTemplate(t,e,r))}catch(t){GSLog.error(null,t)}return n}static async loadTemplate(t=!1,e='',r){if(!e)return!1;if(!r)return!1;const s=GSTemplateCache;let n=!1;return 0==r.indexOf('#')?GSDOM.query(`template[id="${r.slice(1)}"]`,!0):(n||(n=s.loadHTMLTemplate(t,e,r)),n||(n=await s.loadFunctionTemplate(t,e,r)),n||(n=await s.loadURLTemplate(t,e,r)),n)}}class GSAttributeHandler{static#Nt=Symbol();static#Rt=Symbol();static DEFINITION={action:{attribute:'data-gs-action'},anchor:{attribute:'data-gs-anchor'},attribute:{attribute:'data-gs-attribute'},call:{attribute:'data-gs-call'},event:{attribute:'data-gs-event'},bubbles:{attribute:'data-gs-bubbles',type:Boolean},composed:{attribute:'data-gs-composed',type:Boolean},exec:{attribute:'data-gs-exec'},inject:{attribute:'data-gs-inject'},property:{attribute:'data-gs-property'},swap:{attribute:'data-gs-swap'},base:{attribute:'data-gs-base'},target:{attribute:'data-gs-target'},template:{attribute:'data-gs-template'},toggle:{attribute:'data-gs-toggle'},trigger:{attribute:'data-gs-trigger'},value:{attribute:'data-gs-value'},hashed:{attribute:'data-gs-hashed',type:Boolean},calls:{attribute:'data-gs-call',multi:!0},toggles:{attribute:'data-gs-toggle',multi:!0},timeout:{attribute:'data-gs-timeout',type:Number},triggers:{attribute:'data-gs-trigger',multi:!0}};#Ut;#D;#Ft=null;#Bt=!1;#Ht;constructor(t,e){const r=this;r.#Ut=t.isProxy?t.self:t,r.#Ht=r.handle.bind(r),r.#D=t.isProxy?t:GSAttributeHandler.proxify(r.#Ut),e&&(r.#Ft=Array.isArray(e)?e:[e])}handle(t){const e=this;e.targets.forEach((r=>e.#Pt(e.#Ut,r,t)))}#Pt(t,e,r){const s=this;s.#zt(e,r),s.#jt(e),s.#qt(t,e),s.#Vt(t,e),s.#_t(e),s.#Wt(e),s.#Yt(e),s.#Jt(e,r),s.#Kt(t,r),s.#Xt(t,e,r),s.#Qt(t,e,r),s.#Zt(t,e)}#zt(t,e){const r=e?.target?.field||e?.target?.form||e?.target,s=r instanceof HTMLFormElement,n=GSDOM.isFormElement(r);(n||s)&&(n?t[r.name]=GSDOM.getValue(r):Object.assign(t,GSDOM.toObject(r)))}#jt(t){this.action&&GSEvents.send(t,'action',this.action,!0,!0)}#_t(t){const e=this;if(h.isNull(e.attribute)&&0===e.attributes.length)return;if(e.inject&&(t=GSDOM.query(t,e.inject)),e.swap&&(t=GSDOM.query(t,e.swap)),e.isAttributeJSON){const r=h.toJson(e.attribute);return GSAttr.jsonToAttr(t,r)}e.attributes.forEach((r=>e.#te(t,r[0],e.value||r[1])))}#Wt(t){const e=this;if(h.isNull(e.property)&&0===e.properties.length)return;if(e.inject&&(t=GSDOM.query(t,e.inject)),e.swap&&(t=GSDOM.query(t,e.swap)),e.isPropertyJSON){const r=h.toJson(e.property);return Object.assign(t,r)}e.properties.forEach((r=>e.#ee(t,r[0],e.value||r[1])))}#te(t,e,r){const s=this;if(h.isBool(t[e])){const r=s.isToggling?s.isActive:!t[e];return GSAttr.toggle(t,e,r)}h.isNumber(t[e])&&(r=h.asNum(r)),GSAttr.set(t,e,r)}#ee(t,e,r){h.isBool(t[e])?h.isStringEmpty(r)?t[e]=!t[e]:t[e]=h.asBool(r):h.isNumber(t[e])?t[e]=h.asNum(r):t[e]=r}async#Yt(t){const e=this,r=1e3*e.timeout;let s=e.toggles;if(0===r)s.forEach((e=>GSDOM.toggleClass(t,e)));else{t[e.#re]&&(s=s.slice().reverse());for(const e of s)await h.timeout(r),GSDOM.toggleClass(t,e);t[e.#re]=!t[e.#re]}}#Xt(t,e,r){const s=h.isJsonString(t.value)?h.toJson(t.value):t.value;this.calls.forEach((t=>p.callFunction(e[t],e,!0,s||r)))}#Qt(t,e,r){if(this.exec)try{new Function(this.exec).bind(e)(r)}catch(t){GSLog.error(e,t)}}#Jt(t,e){this.triggers.forEach((r=>GSEvents.send(t,r,e)))}#Kt(t,e){GSEvents.send(t,this.event,e,this.bubbles,this.composed,!0)}#se(t,e,r,s=!1){const n=this;if(r){let i='';const a=h.asBool(r);i=a?GSDOM.fromJsonAsString(n.definition):n.#ne(r);const o=GSDOM.parse(i,!0);a||GSAttr.jsonToAttr(n.definition,o),s&&GSDOM.cleanup(e),o.dataset.gsHashed=n.hashed,n.#ie(t,e,o)}}#Vt(t,e){this.#se(t,e,this.inject,!1)}#qt(t,e){this.#se(t,e,this.swap,!0)}#ne(t=''){return t.indexOf('/')<0?`<${t}></${t}>`:`<gs-template flat src="${t}"></gs-template>`}async#Zt(t,e){const r=await GSTemplateCache.loadTemplate(!0,this.template,this.template);this.#ae(t,e,r)}#ae(t,e,r){const s=GSTemplateCache.clone(r);this.#ie(t,e,s)}#ie(t,e,r){t?.anchor?GSDOM.insertAdjacent(e,r,t.anchor):GSDOM.appendChild(e,r)}attach(t='click'){const e=this;e.#Bt||(GSEvents.on(e.#Ut,null,t,e.#Ht),e.#Bt=!0)}detach(t='click'){const e=this;GSEvents.off(e.#Ut,null,t,e.#Ht),e.#Bt=!1}get#re(){return GSAttributeHandler.#Nt}get targets(){const t=this;if(!t.target&&t.#Ft)return t.#Ft;switch(t.target){case'this':case'self':return[t.#Ut];case'owner':return[t.#Ut.parentComponent];case'parent':return[t.#Ut.parentElement]}const e=t.base?GSDOM.query(t.base):document.body,r=GSDOM.queryAll(e,t.target,!1,!0).filter((t=>'GS-ITEM'!==t.tagName));return 0===r.length&&r.push(t.#Ut),r}get host(){return this.#Ut}get isActive(){return this.#Ut.active||!1}get isToggling(){return this.#Ut.toggling||!1}get definition(){return this.#D[u]}get action(){return this.#D.action}get anchor(){return this.#D.anchor}get attribute(){return this.#D.attribute}get exec(){return this.#D.exec}get event(){return this.#D.event}get bubbles(){return this.#D.bubbles}get composed(){return this.#D.composed}get call(){return this.#D.call}get inject(){return this.#D.inject}get property(){return this.#D.property}get swap(){return this.#D.swap}get target(){return this.#D.target}get base(){return this.#D.base}get toggle(){return this.#D.toggle}get trigger(){return this.#D.trigger}get timeout(){return this.#D.timeout}get template(){return this.#D.template}get value(){return this.#D.value}get hashed(){return this.#D.hashed}get calls(){return this.#D.calls}get toggles(){return this.#D.toggles}get triggers(){return this.#D.triggers}get attributes(){return(this.#D.attribute||'').split(/[,;]/g).map((t=>t.split('='))).filter((t=>h.isStringNonEmpty(t[0])))}get properties(){return(this.#D.property||'').split(/[,;]/g).map((t=>t.split('='))).filter((t=>h.isStringNonEmpty(t[0])))}get isPropertyJSON(){return h.isJson(this.property)}get isAttributeJSON(){return h.isJson(this.attribute)}static proxify(t){return GSAttr.proxify(t,GSAttributeHandler.DEFINITION)}static process(t,e){if(!t?.dataset?.gsTarget)return;let r=t[GSAttributeHandler.#Rt];r instanceof GSAttributeHandler||(r=new GSAttributeHandler(t),t[GSAttributeHandler.#Rt]=r),r.handle(e)}static create(t){const e=new GSAttributeHandler(t);return e.attach(),e}static clone(t,e,r=!0){const s=GSAttributeHandler.DEFINITION;Object.values(s).filter((e=>t.hasAttribute(e.attribute))).filter((t=>r||!e.hasAttribute(t.attribute))).forEach((r=>e.setAttribute(r.attribute,t.getAttribute(r.attribute))))}static isBindable(t){const e=GSAttributeHandler.DEFINITION;return Object.values(e).filter((e=>t.hasAttribute(e.attribute))).length>0}static{const t=GSAttributeHandler.DEFINITION;Object.values(t).forEach((t=>Object.freeze(t))),Object.freeze(t)}}class GSBeep{static audioCtx=globalThis.AudioContext||globalThis.webkitAudioContext||globalThis.audioContext;static beep(t=200,e=440,r=1,s='sine'){return new Promise(((n,i)=>{try{if(!GSBeep.isAvailable)return n();const i=new GSBeep.audioCtx,a=i.createOscillator(),o=i.createGain();a.connect(o),a.frequency.value=e,a.type=s,o.connect(i.destination),o.gain.value=.01*r,a.start(i.currentTime),a.stop(i.currentTime+.001*t),a.onended=()=>n()}catch(t){i(t)}}))}static get isAvailable(){const{isActive:t,hasBeenActive:e}=navigator.userActivation;return t||e}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().includes(e)&&(t=!0)})),t}const r=navigator.userAgent.toLocaleLowerCase()||'',s=r.includes('edg');return!(!s||!e.startsWith('edg'))||!s&&r.includes(e)}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSPromise{#oe;#Ht;#le;#ce;#de;#ue;constructor(t,e){const r=this;r.#Ht=t,r.#oe=e instanceof AbortSignal?e:null,r.#oe=h.isNumber(e)?AbortSignal.timeout(e):r.#oe,r.#le={abort:r.#he.bind(r)}}await(){const t=this;return t.#ue||(t.#oe?.addEventListener('abort',t.#le.abort),t.#ue=new Promise(t.#pe.bind(t))),t.#ue}get aborted(){return!0===this.#oe?.aborted}#pe(t,e){const r=this;r.#ce=t,r.#de=e;try{r.#Ht(r.#me.bind(r),r.#ge.bind(r))}catch(t){r.#gt(),e(t)}}#he(){this.#gt(),this.#de(new Error('Promise aborted!'))}#me(t){const e=this;return e.#gt(),e.aborted?null:e.#ce(t)}#ge(t){const e=this;return e.#gt(),e.aborted?null:e.#de(t)}#gt(){this.#oe?.removeEventListener('abort',this.#le.abort)}static sequential(t){return Array.isArray(t)||(t=[]),t.reduce(((t,e)=>t.then(e)),Promise.resolve())}static{globalThis.GSPromise=GSPromise}}class GSEvent extends EventTarget{#fe=new Set;#Se(t='',e){const r=Array.from(this.#fe);return this.#nt(e)?r.filter((r=>r.type===t&&r.listener===e)):r.filter((e=>e.type===t))}#nt(t){return'function'==typeof t}on(t='',e,r=0,s=!1){if(!t)return reject('Event undefined!');const n=s instanceof AbortController?s:s?new GSAbortController(r):null,i=n||0==r?n?.signal:AbortSignal.timeout(r);return this.addEventListener(t,e,{signal:i}),n||i}once(t,e,r=0,s=!1){if(!t)return reject('Event undefined!');const n=this,wrap=t=>{e(t),n.#fe.delete(wrap)};return wrap.type=t,wrap.listener=e,wrap.timeout=r,wrap.controller=s instanceof AbortController?s:s?new GSAbortController(r):null,wrap.signal=wrap.controller||0==r?wrap.controller?.signal:AbortSignal.timeout(r),n.addEventListener(t,wrap,{once:!0,signal:wrap.signal}),wrap.controller||wrap.signal}off(t='',e){this.removeEventListener(t,e)}emit(t='',e,r=0){const s=this;return!0===r?queueMicrotask((()=>s.#ye(t,e))):(r=h.asNum(r,0))<=0?s.#ye(t,e):setTimeout((()=>s.#ye(t,e)),r)}#ye(t='',e){const r=new CustomEvent(t,{detail:e});return this.dispatchEvent(r)}wait(t='',e){const r=this;return new GSPromise(((e,s)=>{r.once(t,e)}),e).await()}listen(t,e){this.on(t,e)}unlisten(t,e){this.off(t,e)}unbind(){Array.from(this.#fe).forEach((t=>{super.removeEventListener(t.type,t.listener)})),this.#fe.clear()}addEventListener(t,e,r){return!!this.#nt(e)&&(this.#fe.add({type:t,listener:e}),super.addEventListener(t,e,r))}removeEventListener(t,e){const r=this;r.#Se(t,e).forEach((t=>{super.removeEventListener(t.type,t.listener),r.#fe.delete(t)}))}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSEventBus{static#be=new Map;static send(t='',e='',r){return GSEventBus.register(t).emit(e,r)}static exist(t=''){return t&&GSEventBus.#be.has(t)}static register(t=''){return GSEventBus.exist(t)||GSEventBus.#be.set(t,new GSEvent),GSEventBus.#be.get(t)}static unregister(t=''){const e=GSEventBus.#be.get(t);return e?.unbind&&e.unbind(),GSEventBus.#be.delete(t)}static{Object.freeze(GSEventBus),globalThis.GSEventBus=GSEventBus}}class GSGesture{#ve=0;#Ge=0;#Ce=null;#Ee=null;#we=null;#$e=null;#xe=!1;#De=!1;#Te=!1;#Ae=0;static timeout=1500;constructor(t,e,r,s){const n=this;n.#xe=e,n.#De=r,n.#Te=s,n.#Ce=null,n.#Ee=null,n.#we='string'==typeof t?document.querySelector(t):t,n.#$e={move:n.#ke.bind(n),start:n.#Me.bind(n),end:n.#Oe.bind(n)},GSEvents.attach(n.#we,n.#we,'touchmove',n.#$e.move,!1),GSEvents.attach(n.#we,n.#we,'touchstart',n.#$e.start,!1),GSEvents.attach(n.#we,n.#we,'touchend',n.#$e.end,!1)}unbind(){const t=this;GSEvents.remove(t.#we,t.#we,'touchmove',t.#$e.move),GSEvents.remove(t.#we,t.#we,'touchstart',t.#$e.start),GSEvents.remove(t.#we,t.#we,'touchend',t.#$e.end)}#Me(t){const e=this;e.#Ce=t.touches[0].clientX,e.#Ee=t.touches[0].clientY,e.#Te&&setTimeout(e.#Le.bind(e),GSGesture.timeout)}#Oe(t){clearTimeout(this.#Ae)}#ke(t){const e=this;if(!e.#Ce||!e.#Ee)return;if(!e.#xe)return;const r=t.touches[0].clientX,s=t.touches[0].clientY;if(e.#Te){Math.abs(e.#ve)>10&&Math.abs(e.#Ge)>10&&clearTimeout(e.#Ae)}e.#ve=e.#Ce-r,e.#Ge=e.#Ee-s;let n='';n=Math.abs(e.#ve)>Math.abs(e.#Ge)?e.#ve>0?'swipe-left':'swipe-right':e.#Ge>0?'swipe-up':'swipe-down',GSEvents.send(e.#we,n,t),e.#Ce=null,e.#Ee=null}#Le(){GSEvents.send(me.#we,'long-press')}static fingers(t){return t.detail.touches?.length}static attach(t,e=!0,r=!1,s=!1){return new GSGesture(t,e,r,s)}}class GSItem extends HTMLElement{static#Ie=['GS-ITEM','TEMPLATE'];static properties={active:{type:Boolean},disabled:{type:Boolean},selected:{type:Boolean},autofocus:{type:Boolean}};constructor(){super(),GSItem.validate(this)}get body(){let t=GSAttr.get(this,'template');return t?`<gs-template flat src="${t}"></gs-template>`:(t=this.querySelector('template'),t?.innerHTML||'')}get items(){return Array.from(this.children).filter((t=>'GS-ITEM'==t.tagName))}get name(){return GSAttr.get(this,'name','')}get parentComponent(){return GSDOM.parentAll(this).filter((t=>t instanceof GSElement)).next()?.value}asJSON(t=!0){return GSDOM.toJson(this,t)}static validate(t,e='GS-ITEM'){return GSDOM.validate(t,e,GSItem.#Ie)}static collect(t){return GSDOM.isHTMLElement(t)?Array.from(t.children).filter((t=>'GS-ITEM'==t.tagName)):[]}static toJSON(t){return GSItem.collect(t).map((t=>t.asJSON(!0)))}static proxify(t,e){return GSItem.collect(t).map((t=>GSAttr.proxify(t,e)))}static{customElements.define('gs-item',GSItem),Object.seal(GSItem)}}const y=globalThis.GS_LOCALIZATION_LANGUAGE||document.documentElement.lang||navigator.language;const b=new class GSLocalizationImpl{#Ne=new Map;#Re=new Set;#Ue=!1;#Fe=globalThis.GS_LOCALIZATION_URL;#Be=y;#p;constructor(){this.load()}get default(){return this.#Be}set default(t=''){this.#Be=t||y}get lang(){return this.#p||this.default}set lang(t=''){this.#p=t}get url(){return this.#Fe}set url(t=''){this.#Fe=t||globalThis.GS_LOCALIZATION_URL}translate(t='',e=''){const r=this;if(h.isStringEmpty(t))return e;if(!r.#Ne.has(t))return r.load(t),e;const s=r.#He('default'),n=r.#He(t),i=s.get(GSID.hashCode(e));return i&&n.get(i)||e}reset(){const t=this;t.#Be=y,t.#p=void 0,t.load()}load(t='default'){const e=this;h.isStringEmpty(t)||h.isStringEmpty(e.url)||e.#Ne.has(t)||(e.#Re.add(t),e.#Ue||(e.#Ue=!0,queueMicrotask((async()=>{const t=Array.from(e.#Re.values()).map((t=>e.loadWait(t)));await GSPromise.sequential(t),e.#Ue=!1}))))}async loadWait(t){const e=this;if(h.isStringEmpty(t))return;if(h.isStringEmpty(e.url))return;const r=GSLoader.normalizeURL(`${e.url}/${t}.json`);let s=await GSLoader.loadSafe(r,'GET',{'Cache-Control':'no-cache',Pragma:'no-cache'},!0);if(!s&&t.indexOf('-')>0&&(s=await e.loadWait(t.split('-')[0])),!s)return!1;e.#Re.delete(t),e.#lt(t,s)}#lt(t,e){if(!e||!t)return!1;const r='default'===t,s=this.#He(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0].trim());s.set(e,r?GSID.hashCode(t[1]):t[1])})),GSEvents.send(window,'gs-language',{details:t}),!0}#He(t=''){const e=this;return e.#Ne.has(t)||e.#Ne.set(t,new Map),e.#Ne.get(t)}};class GSPopper{static asRect(t){return t.getBoundingClientRect()}static getOffset(t){const e=GSPopper.asRect(t),r=window.scrollX,s=window.scrollY,n={left:e.left+r,right:e.right+r,top:e.top+s,bottom:e.bottom+s,height:e.height,width:e.width,x:e.x+r,y:e.y+s};return n.centerX=n.left+n.width/2,n.centerY=n.top+n.height/2,n}static boundingRect(t,e){const r=GSPopper.asRect(t),s=GSPopper.elementPadding(e?t:null),n=s.x,i=s.y,a=t.clientWidth-n,o=t.clientHeight-i,l=r.left+s.left,c=r.top+s.top;return{width:a,height:o,top:c,left:l,x:l,y:c,centerX:a/2+l,centerY:c+o/2}}static elementPadding(t){const e={left:0,right:0,top:0,bottom:0,x:0,y:0};if(!(t instanceof HTMLElement))return e;const r=GSCSSMap.getComputedStyledMap(t);return e.left=r.asNum('padding-left'),e.right=r.asNum('padding-right'),e.top=r.asNum('padding-top'),e.bottom=r.asNum('padding-bottom'),e.x=e.left+e.right,e.y=e.top+e.bottom,e}static popupFixed(t='top',e,r,s){if(!e||!r)return!1;const n=GSPopper.#Pe(t);if(!GSPopper.#ze(n))return void GSLog.warn(e,`Invalid popover position: ${t}!`);const i=GSDynamicStyle.dynamicStyle(e);if(!i)return;Object.assign(i,{position:'fixed',top:'0px',left:'0px',margin:'0px',padding:'0px',transform:'',translate:''});const a=e.clientHeight/2,o=e.clientWidth/2,l=GSPopper.boundingRect(r,s instanceof HTMLElement),c=GSPopper.#je(e,s,n),d={x:l.centerX,y:l.centerY,offH:a,offW:o,srcH:e.clientHeight,srcW:e.clientWidth};GSPopper.#qe(n,d,l,c),i.translate=`${d.x}px ${d.y}px`}static popupAbsolute(t='top',e,r,s){if(!e||!r)return!1;const n=GSPopper.#Pe(t);if(!GSPopper.#ze(n))return void GSLog.warn(e,`Invalid popover position: ${t}!`);const i=GSDynamicStyle.dynamicStyle(e),a=GSDynamicStyle.dynamicStyle(s);if(!i)return;const o={inset:GSPopper.#Ve(n),position:'absolute',margin:'0px',top:'0px',left:'0px',width:'max-content',height:'max-content',transform:'',translate:''};Object.assign(i,o),a.position='absolute';const l=GSPopper.asRect(e),c=GSPopper.asRect(s),d=GSPopper.getOffset(r),u={x:d.centerX,y:d.centerY},h={x:l.width/2-c.width/2,y:l.height/2-c.height/2};GSPopper.#_e(n,u,h,l,c,d);const p={translate:`${h.x}px ${h.y}px`,top:h.top?h.top:'',left:h.left?h.left:''},m={translate:`${u.x}px ${u.y}px`};Object.assign(i,m),Object.assign(a,p)}static#_e(t,e,r,s,n,i){t.isTop?(r.y=0,r.left='0px',e.x=e.x-s.width/2,e.y=-1*(s.bottom-i.top+n.height)):t.isBottom?(r.y=0,r.left='0px',e.x=e.x-s.width/2,e.y=i.bottom+n.height):t.isStart?(r.x=0,r.top='0px',e.x=-1*(s.right-i.left+n.width),e.y=e.y-s.height/2):t.isEnd&&(r.x=0,r.top='0px',e.x=i.right+n.width,e.y=e.y-s.height/2)}static#qe(t,e,r,s){t.isTop?(e.y=r.top-e.srcH-s.size,e.x=e.x-e.offW):t.isBottom?(e.y=r.top+r.height+s.size,e.x=e.x-e.offW):t.isStart?(e.x=r.left-e.srcW-s.size,e.y=e.y-e.offH+s.size):t.isEnd&&(e.x=r.left+r.width+s.size,e.y=e.y-e.offH+s.size)}static#Ve(t){return t.isTop?'auto auto 0px 0px':t.isBottom?'0px auto auto 0px':t.isStart?'0px 0px auto auto':t.isEnd?'0px auto auto 0px':void 0}static#ze(t){return t.isStart||t.isEnd||t.isTop||t.isBottom}static#Pe(t){return{isStart:'start'==t||'left'==t,isEnd:'end'==t||'right'==t,isTop:'top'==t,isBottom:'bottom'==t}}static#je(t,e,r){if(!e)return{x:0,y:0,size:0,width:0,height:0};let s=0;const n=GSPopper.boundingRect(t),i=GSPopper.boundingRect(e),a=r.isStart||r.isEnd?i.width:i.height,o=n.width/2-a/2,l=n.height/2-a/2;i.size=a;const c={position:'absolute'};return r.isStart||r.isEnd?(c.left='',c.top='0px',s=0,c.translate=`${s}px ${l/2}px`):(c.top='',c.left='0px',s=0,c.translate=`${o}px ${s}px`),GSDynamicStyle.applyDynamicStyle(e,c),i}static{Object.seal(GSPopper),globalThis.GSPopper=GSPopper}}class GSQueryCSS{#l=null;constructor(t){if(!GSDOM.isHTMLElement(t))throw new Error('Only HTMLElement type allowed!');this.#l=new GSCSSMap(t)}#We(t){return p.hasFunction(this.#l,t)}get(t,e,r){return(s,n)=>{const i=this;return h.isNull(s)?i.#l.get(e):i.#We(e)?i.#l[e](s,n):(t[e]=s,r)}}static wrap(t){return new Proxy(t.style,new GSQueryCSS(t))}}class GSQuery{#Ye=null;constructor(t){Array.isArray(t)||(this.#Ye=GSQueryCSS.wrap(t))}get(t,e){return'css'===e?this.#Ye:'query'===e?(e,r,s)=>{const n=GSDOM.query(t,e,r,s);return GSQuery.wrap(n)}:'queryAll'===e?(e,r,s)=>{const n=GSDOM.queryAll(t,e,r,s);return GSQuery.wrap(n)}:t[e]}set(t,e,r){if('css'===e)Array.isArray(t)?t.forEach((t=>t[e]=r)):GSDOM.css(t,r);else t[e]=r;return!0}static instance(t){return new Proxy(t,new GSQuery(t))}static wrap(t){return GSDOM.isHTMLElement(t)?GSQuery.instance(t):Array.isArray(t)?(t=t.map((t=>GSQuery.wrap(t))),GSQuery.instance(t)):t}static all(t,e,r,s){return GSQuery.wrap(GSDOM.queryAll(t,e,r,s))}static first(t,e,r,s){return GSQuery.wrap(GSDOM.query(t,e,r,s))}static{Object.freeze(GSQuery),globalThis.GSQuery=GSQuery}}class GSRouter{#Je=null;#Ke=!0;#Xe=!1;#Qe=null;#L=null;#Ze={};constructor(t){const e=this;e.#Je=t,e.#L??=new Map,e.#Qe=e.#tr.bind(e)}async loadDefinition(t){return GSLoader.getRouter(t)}async initialize(t,e=0){const r=this;r.#L.clear(),h.isStringNonEmpty(t)&&(r.#Ze=await r.loadDefinition(t)),e>0&&await GSEvents.waitPageLoad(null,null,null,e),r.enable(),r.#tr()}enable(){this.#Xe||(GSEvents.on(globalThis,null,'hashchange',this.#Qe),this.#Xe=!0)}disable(){GSEvents.off(globalThis,null,'hashchange',this.#Qe),this.#Xe=!1}register(t,e){this.#Ze[t]=e}unregister(t){delete this.#Ze[t]}get hash(){return location.hash.slice(1)}get definition(){return GSData.deepClone(this.#Ze)}get log(){return this.#Ke}set log(t){this.#Ke=h.asBool(t)}#tr(t){const e=this,r=e.hash;let s=e.#L.get(r);s||(s=e.#er(),s&&e.#L.set(r,s)),s?.handle(t)}#er(){let t;const e=this,r=e.hash,s=e.#Ze['#def']||{},n=e.#Ze['#defaults']||{},i=e.#Ze[r];if(i){const r=GSDOM.fromJson(Object.assign({},i,s,n));r.dataset.gsHashed=!0,t=new GSAttributeHandler(r,e.#Je)}else e.#Ke&&GSLog.warn(null,`No routing definition found for: ${r}`);return t}static{globalThis.GS_DEFINITION_URL&&(new GSRouter).initialize(globalThis.GS_DEFINITION_URL,globalThis.GS_ROUTER_WAIT)}}class GSTheme{static#rr='gs-theme-mode';static darkMode(t){GSTheme.#sr(t,'light','dark')}static lightMode(t){GSTheme.#sr(t,'dark','light')}static#sr(t,e='light',r='dark'){GSTheme.theme=r}static get theme(){return localStorage.getItem(GSTheme.#rr)}static set theme(t){localStorage.setItem(GSTheme.#rr,t),window.dispatchEvent(new CustomEvent('gs-theme',{detail:t}));const e=document.head.parentElement;t?e.dataset.bsTheme=t:delete e.dataset.bsTheme}static getSystemDefaultTheme(){return window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light'}static#nr(t){const e=new URLSearchParams(location.hash.slice(1));GSTheme.theme=e.get('theme')}static#ir(){window.addEventListener('hashchange',GSTheme.#nr);let t=localStorage.getItem(GSTheme.#rr);return null==t&&(t=GSTheme.getSystemDefaultTheme()),'dark'==t?GSTheme.darkMode():'light'==t?GSTheme.lightMode():void 0}static{GSTheme.#ir(),globalThis.GSTheme=GSTheme}}class BinaryTreeNode{constructor(t,e=t,r=null){this.key=t,this.value=e,this.parent=r,this.left=null,this.right=null}get isLeaf(){return null===this.left&&null===this.right}get hasChildren(){return!this.isLeaf}get isRoot(){return!this.parent}get root(){return this.parent?.root||this}}class BinaryTree extends BinaryTreeNode{constructor(t,e=t){super(t,e)}*inOrderTraversal(t=this){t.left&&(yield*this.inOrderTraversal(t.left)),yield t,t.right&&(yield*this.inOrderTraversal(t.right))}*postOrderTraversal(t=this){t.left&&(yield*this.postOrderTraversal(t.left)),t.right&&(yield*this.postOrderTraversal(t.right)),yield t}*preOrderTraversal(t=this){yield t,t.left&&(yield*this.preOrderTraversal(t.left)),t.right&&(yield*this.preOrderTraversal(t.right))}insert(t,e,r=e,{left:s,right:n}={left:!0,right:!0}){for(let i of this.preOrderTraversal())if(i.key===t){const t=s&&null===i.left,a=n&&null===i.right;if(!t&&!a)return!1;if(t)return i.left=new BinaryTreeNode(e,r,i),!0;if(a)return i.right=new BinaryTreeNode(e,r,i),!0}return!1}remove(t){for(let e of this.preOrderTraversal()){if(e.left.key===t)return e.left=null,!0;if(e.right.key===t)return e.right=null,!0}return!1}find(t){for(let e of this.preOrderTraversal())if(e.key===t)return e}}class Node{value=null;next=null;previous=null;constructor(t,e=null,r=null){this.value=t,this.next=e,this.previous=r}release(){this.value=void 0,this.next=void 0,this.previous=void 0}toJSON(){return this.value}}class DoublyLinkedList{#ar=[];get size(){return this.#ar.length}get head(){return this.size?this.#ar[0]:null}get tail(){return this.size?this.#ar[this.size-1]:null}create(t,e,r){return new Node(t,e,r)}insertAt(t,e,r){if(!this.#or(t,r))return!1;const s=this.#ar[t-1]||null,n=this.#ar[t]||null,i=this.create(e,n,s);s&&(s.next=i),n&&(n.previous=i),this.#ar.splice(t,0,i)}insertFirst(t){this.insertAt(0,t)}insertLast(t){this.insertAt(this.size,t)}getAt(t){return this.#ar[t]}indexOf(t){return this.#ar.indexOf(t)}removeAt(t,e){if(!this.#or(t,e))return!1;const r=this.#ar[t-1]||null,s=this.#ar[t+1]||null;return r&&(r.next=s),s&&(s.previous=r),this.#ar.splice(t,1)}clear(t=!0){t&&this.#ar.forEach((t=>t.release())),this.#ar=[]}reverse(){this.#ar=this.#ar.reduce(((t,{value:e})=>{const r=t[0]||null,s=new Node(e,r,null);return r&&(r.previous=s),[s,...t]}),[])}toArray(){return this.#ar.map((t=>t.value))}toJSON(){return this.#ar}*[Symbol.iterator](){yield*this.#ar}#or(t,e=!1){const r=this.#lr(t);if(r&&!e)throw new Error(this.#cr());return!r}#lr(t){return!Number.isInteger(t)||t<0||t>this.size}#cr(){return`Invalid index. Current length is ${this.size}.`}static from(t){const e=new DoublyLinkedList;return Array.isArray(t)&&t.forEach((t=>e.insertLast(t))),e}}class LinkedList{#dr=null;#ur=null;#hr=null;constructor(t){this.#dr=t}[l](t){this.#ur=t}[c](t){this.#hr=t}remove(){const t=this;return t.#hr?.[l](t.#ur),t.#ur?.[c](t.#hr),t.#pr()}delete(){return this.remove()}append(t){return(t=LinkedList.wrap(t)).#ur=this.#ur,t.#hr=this,this.#ur=t,t}add(t){return this.append(t)}insert(t){return(t=LinkedList.wrap(t)).#hr=this.#hr,t.#ur=this,this.#hr=t,t}update(t){return this.#dr=t,this}find(t){return this.iterator.find(t)}filter(t){return this.iterator.filter(t)}map(t){return this.iterator.map(t)}forEach(t){for(let e of this.iterator)t(e,-1,this)}every(t){let e;for(let r of this.iterator)if(e=t(r,-1,this),e)break;return e}toArray(t=!0){return t?this.asValues:this.asNodes}toJSON(){return this.value}#pr(){return this.#dr=void 0,this.#ur=void 0,this.#hr=void 0,this}get head(){return this.previous?.head||this}get tail(){return this.next?.tail||this}get next(){return this.#ur}get previous(){return this.#hr}get value(){return this.#dr}set value(t){this.#dr=t}get asValues(){return[...this].map((t=>t.value))}get asNodes(){return[...this]}get iterator(){return this[Symbol.iterator]()}*[Symbol.iterator](){yield this,this.#ur&&(yield*this.#ur.iterator)}static wrap(t){return t instanceof LinkedList?t:new LinkedList(t)}}class Stack extends Array{push(t){this.unshift(t)}pop(){return this.shift()}peek(){return this[0]}isEmpty(){return 0===this.length}}class Queue extends Array{enqueue(t){this.push(t)}dequeue(){return this.shift()}peek(){return this[0]}isEmpty(){return 0===this.length}}class Tree{value;#mr=null;#gr=null;#fr;#Sr=!1;#yr=0;constructor(t,e=t,r=null,s=0){this.#mr=t,this.#gr=r,this.#Sr=!1===e?.leaf,this.#yr=r?r.level+1:s,this.#fr=this.#Sr?[]:void 0,this.value=e}get subtree(){return Array.from(this.up(void 0,!1,!0,!0))}get levelID(){return this.subtree.map((t=>t.level)).join('.')}get nodeID(){return this.subtree.map((t=>t.index)).join('.')}get path(){return this.subtree.map((t=>t.key)).join('/')}get index(){return this.parent?.nodes.indexOf(this)||0}get size(){return this.#fr?.length||-1}get level(){return this.#yr}get isRoot(){return!this.parent}get isLeaf(){return!this.#Sr}get isFolder(){return this.#Sr}get hasChildren(){return this.#Sr&&this.size>0}get key(){return this.#mr??=this.nodeID,this.#mr}get nodes(){return this.#fr}get parent(){return this.#gr}get root(){return this.parent?.root||this}get hasMore(){return this.#gr?.size>this.index+1}get firstChild(){return this.hasMore?this.#fr[0]:void 0}get lastChild(){return this.hasMore?this.#fr[this.#fr.length-1]:void 0}get next(){return this.down(this,!1,!1).next().value||this.nextSibling||this.parent?.nextSibling}get previous(){const t=this.previousSibling;return t?.hasChildren?t.lastChild:t||this.up(this,!1,!1).next().value}get nextSibling(){return this.hasMore?this.#gr.#fr[this.index+1]:void 0}get previousSibling(){return this.index>0?this.#gr.#fr[this.index-1]:void 0}clear(){this.#fr&&(this.#fr.forEach((t=>t.release?.())),this.#fr=[])}release(){this.clear(),this.#mr=null,this.value=null,this.#gr=null}*down(t=this,e=!1,r=!0,s=!1,n=!1){const i=e?t.value:t;if(r&&!s&&t.level>-1&&(yield i),t.#fr?.length)for(let r of t.#fr)yield*this.down(r,e,!0,s,n);if(n){const r=t.nextSibling||t.parent.nextSibling;r&&(yield*this.down(r,e,!0,s,n))}r&&s&&t.level>-1&&(yield i)}*up(t=this,e=!1,r=!0,s=!1,n=!1){const i=e?t.value:t;if(r&&!s&&t.level>-1&&(yield i),n){let r=t.previousSibling;r=r?.isFolder?r.lastChild:r,r&&(yield*this.up(r,e,!0,s,n))}t.parent&&(yield*this.up(t.parent,e,!0,s,n)),r&&s&&t.level>-1&&(yield i)}walk=this.down;forEach(t,e=!1,r=!1){this.every(((e,r)=>(t(e,r),!0)),e,r)}every(t,e=!1,r=!1){const s=this.iterate(e,r);let n=!0,i=0;for(let e of s)if(n=t(e,i++),!n)break;return n}find(t,e=!1,r=!1){const s=this.iterate(e,r);let n=0;for(let e of s)if(t(e,n++))return e}filter(t,e,r){return[...this.#br(t,e,r)]}*#br(t,e,r){const s=this.iterate(e,r);for(let e of s){t(e)&&(yield e)}}*iterate(t,e){e?yield*this.up(this,!1,!1,!1,t):yield*this.down(this,!1,!1,!1,t)}append(t,e=t){let r;return t instanceof Tree?(t.#gr=this,t.#yr=this.#yr+1,r=t):r=new Tree(t,e,this),this.#Sr=!0,this.#fr??=[],this.#fr.push(r),r}insert(t,e,r=e){for(let s of this.walk())if(s.key===t){const t=new Tree(e,r,s);return this.#Sr=!0,this.#fr??=[],s.#fr.push(t),t}return!1}remove(t){const e=this;if(t){const r=e.findByKey(t);return r?.remove(),r}if(e.isRoot)throw new Error('Root node can\'t be removed!');const r=e.parent,s=r.#fr.filter((t=>t!==e));return s.length!==r.#fr.length&&(r.#fr=s,e)}findByKey(t){for(let e of this.walk())if(e.key===t)return e}flatten(t,e,r){return[...this.down(this,t,e,r)]}fromJSON(t){return t&&Tree.from(this,t),this}toJSON(){return this.level<0?this.#fr?.map((t=>t.toJSON()))||{}:this.isLeaf?{key:this.key,value:this.value}:{key:this.key,value:this.value,items:this.#fr.map((t=>t.toJSON()))}}*[Symbol.iterator](){yield*this.down()}static from(t,e){const r=e||t,s=t instanceof Tree;if(Array.isArray(r)){if(!s)throw new Error('Parent required when data is array');return r.forEach((e=>Tree.from(t,e))),t}const{items:n,...i}=r,a=new Tree(i.key,i,e?t:void 0);return s&&t.append(a),n&&Tree.from(a,n),a}}class DataSelector{static#vr=Symbol('select');static addSelected(t){return!!t&&(Array.isArray(t)?t[DataSelector.#vr]=!0:h.asArray(t).forEach((t=>t[DataSelector.#vr]=!0)),t)}static removeSelected(t){return!!t&&(delete t[DataSelector.#vr],t)}static clearSelected(t){const e=this;h.asArray(t).forEach((t=>e.removeSelected(t)))}static getSelected(t=[]){const e=this;return e.isSelected(t)||h.asArray(t).filter((t=>e.isSelected(t)))}static isSelected(t){return!!t&&!0===t[DataSelector.#vr]}}class GSReadWriteRegistryImpl extends GSEvent{static#Gr=null;static#Cr=Symbol();#Er=new Map;#l=new Map;constructor(t){if(t!=GSReadWriteRegistryImpl.#Cr)throw new Error('Creating new instance not allowed.');super()}addHandler(t,e){this.#Er.set(t,e)}removeHandler(t){this.#Er.delete(t)}getHandler(t){return this.#Er.get(t)}newHandler(t,e,r){const s=this.getHandler(t);return s?new s(e,r):void 0}register(t){const e=this;e.#wr(t);const r=e.find(t.id);if(r!=t){if(r)throw new Error(`Key (${t.id}) already exist in read/write registry!`);e.#l.set(t.id,t),e.emit(`register-${t.id}`,t),e.emit('register',t)}}unregister(t){const e=this;h.isString(t)&&(t=e.find(t)),e.#wr(t);const r=e.#l.delete(t.id);return r&&(e.emit(`unregister-${t.id}`,t),e.emit('unregister',t)),r}find(t){return this.#l.get(t)}async wait(t='',e,r=!0){if(!t)throw new Error('GSReadWrite ID not valid.');const s=this;if(r){const e=s.find(t);if(e)return e}const n=r?'register':'unregister';return await super.wait(`${n}-${t}`,e),s.find(t)}resetRegistry(){this.#Er.clear(),this.#l.clear()}#wr(t){}static get#$r(){return GSReadWriteRegistryImpl.#Gr||(GSReadWriteRegistryImpl.#Gr=new GSReadWriteRegistryImpl(GSReadWriteRegistryImpl.#Cr)),GSReadWriteRegistryImpl.#Gr}static{Object.seal(GSReadWriteRegistryImpl),globalThis.GSReadWriteRegistry=GSReadWriteRegistryImpl.#$r}}const v=globalThis.GSReadWriteRegistry;class GSAbstractReadWrite extends GSEvent{static#vr=Symbol('select');#a=null;#xr=null;constructor(t,e=!0){super();this.#a=t||GSID.next(),e&&this.enable()}addProcessor(t){t&&(this.#xr??=new Set,this.#xr.add(t))}removeProcessor(t){t&&this.#xr?.delete(t)}get id(){return this.#a}enable(){v.register(this),this.emit('enabled')}disable(){v.unregister(this),this.emit('disabled')}get isRegistered(){return!!v.find(this.id)}notify(t,e,r,s){this.emit(s?'error':e,{type:e,error:s,owner:t,data:r},!0)}async read(t){const e=this;let r=null;try{r=await e.onRead(t),e.#xr?.forEach((t=>t.postRead?.(r))),r&&e.notify(t,'read',r)}catch(s){throw e.notify(t,'read',r,s),s}return r}async write(t,e){const r=this;let s=null;try{s=await r.onWrite(t,e),r.#xr?.forEach((t=>t.postWrite?.(e))),s&&r.notify(t,'write',e)}catch(s){throw r.notify(t,'write',e,s),s}return s}async onRead(t){throw new Error('Extend base GSAbstractReadWrite to implement read operation')}addSelected(t){if(!t)return!1;DataSelector.addSelected(t);return this.emit('selection-add',t),this.emit('select'),t}removeSelected(t){if(!t)return!1;DataSelector.removeSelected(t);return this.emit('selection-remove',t),this.emit('select'),t}clearSelected(t){DataSelector.clearSelected(t);this.emit('selection-clear'),this.emit('select')}getSelected(t=[]){return DataSelector.getSelected(t)}isSelected(t){return DataSelector.isSelected(t)}get selected(){return[]}async onWrite(t,e){throw new Error('Extend base GSAbstractReadWrite to implement write operation')}reset(){this.#xr=null}}class GSReadWrite extends GSAbstractReadWrite{static#Dr='remote';static#Tr=['','rest','query','quark'];static#Ar=['GET','PUT','POST','DELETE'];#kr='';#Mr={};#Or='GET';#Lr='POST';#Ir='';#Nr='';#mr=null;#Rr=0;#Ur=0;#Fr=[];#T=[];constructor(t,e){super(t,e)}get type(){return GSReadWrite.#Dr}get mode(){return h.normalize(this.#Nr)}set mode(t){const e=this;t=h.normalize(t);if(!GSReadWrite.#Tr.includes(t))throw new Error(null,`Invalid mode, allowed: ${GSReadWrite.#Tr}`);return'quark'===e.#Nr&&e.#Nr!=t&&(e.#Or='GET',e.#Lr='POST'),this.#Nr=t}get reader(){return this.#Or}set reader(t){if(!(!!this.isQuark||GSReadWrite.#Ar.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#Ar}`);return this.#Or=t}get writer(){return this.#Lr}set writer(t){if(!(!!this.isQuark||GSReadWrite.#Ar.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#Ar}`);return this.#Lr=t}get headers(){return{...this.#Mr}}set headers(t={}){t=h.toJson(t);this.#Mr={...t}}get key(){return this.#mr}set key(t){this.#mr=t}get src(){return this.#kr}set src(t=''){this.#kr=t}get limit(){return this.#Ur}set limit(t=10){this.#Ur=h.asNum(t,10)}get skip(){return this.#Rr}set skip(t=0){this.#Rr=h.asNum(t,0)}get filter(){return this.#T}set filter(t){t=t||[],t=h.isJson(t)?h.toJson(t):t,this.#T=Array.isArray(t)?t:[t]}get sort(){return this.#Fr}set sort(t){t=t||[],t=h.isJson(t)?h.toJson(t):t,this.#Fr=Array.isArray(t)?t:[t]}get action(){let t='';switch(this.mode){case'query':t='?limit=${limit}&skip=${skip}&sort=${sort}&filter=${filter}';break;case'rest':t='/${limit}/${skip}?sort=${sort}&filter=${filter}'}return this.#Ir||t}set action(t=''){this.#Ir=t}get url(){const t=this;return t.#Br(t.#kr,t.#Rr,t.#Ur,t.#T,t.#Fr)}#Br(t,e,r,s,n){if(h.isStringEmpty(t))throw new Error('Attribute "src" not set!');n=n?JSON.stringify(n):'',s=s?JSON.stringify(s):'';const i={limit:r,skip:e,sort:encodeURIComponent(n),filter:encodeURIComponent(s)};return t+h.fromLiteral(this.action,i)}get isOffline(){return''===this.mode}get isQuark(){return'quark'===this.mode}get isRemote(){return['rest','query'].includes(this.mode)}async onRead(t){const e=this;if(e.isOffline)return;if(!e.#Or)return super.onRead(t);if(e.isRemote)return await GSLoader.load(e.url,e.#Or,e.#Mr,!0);if(!e.isQuark)return;const r=p.parseFunction(e.#Or);if(!r)throw new Error('Reader quark function not found!');return r(e.skip,e.limit,e.filter,e.sort)}async onWrite(t,e){const r=this;if(r.isOffline)return;if(!r.#Lr)return super.onWrite(t);if(!r.isRemote)return await GSLoader.load(r.url,r.#Lr,r.#Mr,!0,e);if(!r.isQuark)return;const s=p.parseFunction(r.#Lr);if(!s)throw new Error('Writer quark function not found!');return s(e)}reset(){this.#kr='',this.#Mr={},this.#Or='GET',this.#Lr='POST',this.#Ir='',this.#Nr='',this.#mr=null,this.#Rr=0,this.#Ur=0,this.#Fr=[],this.#T=[]}static register(t){return new GSReadWrite(t,!0)}static{v.addHandler(GSReadWrite.#Dr,GSReadWrite)}}class GSCachedReadWrite extends GSReadWrite{static#Dr='cached';#Hr=[];#Pr(t=[]){let e=[];return e=Array.isArray(t)?t:Array.isArray(t.data)?t.data:[t],e}#zr(t){const e=this;t=GSData.sortData(t,e.sort);let r=0===e.limit?t.length:e.limit;return t=t.slice(e.skip,e.skip+r)}clear(){this.clearSelected(this.#Hr),this.#Hr=[]}append(t){if(!t)return!1;const e=this;return t=e.#Pr(t),e.#Hr=e.#Hr.concat(t),e.#Hr}remove(t){const e=this;return e.removeSelected(t),e.#Hr=e.#Hr.filter((e=>!t)),e.#Hr}async onRead(t){const e=this;if(0===e.#Hr.length){const t=await super.onRead();e.#Hr=e.#Pr(t)}let r=GSData.filterData(e.#Hr,e.filter,e.fields,e.limit);return r=e.#zr(r),r}async onWrite(t,e){return this.append(e)}disable(){this.#Hr=[],super.disable()}set search(t){this.filter=t?[{value:t}]:[],this.read()}clearSelected(){return super.clearSelected(this.#Hr)}get selected(){return super.getSelected(this.#Hr)}get type(){return GSCachedReadWrite.#Dr}reset(){this.clear(),super.reset()}static register(t){return new GSCachedReadWrite(t,!0)}static{v.addHandler(GSCachedReadWrite.#Dr,GSCachedReadWrite)}}class TreeNode extends Tree{#jr=!1;#qr=!1;#Vr=!1;#_r=!1;#Wr=void 0;#Yr=void 0;#Jr=void 0;constructor(t,e=t,r=null,s=0){super(t,e,r,s),(!0===e?.select||this.multi&&r?.selected)&&(this.selected=!0),!0===e?.focus&&(this.focused=!0),!0===e?.open&&(this.opened=!0)}addController(t){const e=this.root;(e.#Jr??=new Set).add(t)}removeController(t){this.root.#Jr?.delete(t)}get multi(){return!0===this.root.#jr}set multi(t){this.root.#jr=!0===t}get visible(){return this.level<0||this.parent?.opened}get opened(){return this.level<0||(this.isLeaf?this.parent?.opened:this.#qr)}set opened(t){(t=!0===t)?this.expand():this.collapse()}get focused(){return this.#Vr}set focused(t){t=!0===t;const e=this.root,r=this.#Vr!=t,s=e.focusedNode();e.#Wr=void 0,this.#Vr=t,s&&s!==this&&(s.focused=!1),t&&(e.#Wr=this),r&&e.#Jr?.forEach((t=>t.onFocusChanged?.(this)))}get selected(){return this.#_r}set selected(t){t=!0===t;const e=this.root,r=e.selectedNode(),s=this.#_r!=t;this.#_r=t,t&&(r&&r!==this&&!e.multi&&(r.selected=!1),e.#Yr=this),s&&(e.#Jr?.forEach((t=>t.onSelectionChanged?.(this,r))),e.multi&&e.#Jr?.forEach((t=>t.onSelectionChanged?.(this.parent,r))))}get isPartialySelected(){return this.selected&&this.hasChildren&&this.nodes.length>this.nodes.filter((t=>t.selected)).length}selectAll(){const t=this.root;if(!t.multi)return this.deselectAll(),void(this.selected=!0);this.#Kr(!0),t.#Yr=this,t.#Jr?.forEach((e=>e.onSelectAll?.(t)))}deselectAll(){const t=this.root;this.#Kr(!1),t.#Yr=void 0,t.#Jr?.forEach((e=>e.onDeselectAll?.(t)))}focusedNode(){const t=this.root.#Wr;return t?.focused?t:void 0}selectedNode(){const t=this.root.#Yr;return t?.selected?t:void 0}selectedNodes(){const t=this.root;if(!t.multi){const e=t.selectedNode();return e?.selected?[e]:[]}return Array.from(t.walk().filter((t=>t.selected)))}refresh(t){t=t||this.root,t.#Jr?.forEach((t=>t.onRefresh?.(this)))}loading(t){t=t||this.root,t.#Jr?.forEach((t=>t.onLoad?.(this)))}expandAll(t){t=t||this.root;for(let e of this.walk())e.isLeaf||e.expand(t)}collapseAll(t){t=t||this.root;for(let e of this.walk())e.isLeaf||e.collapse(t)}expand(t){const e=this;t=t||e.root,e.parent?.opened||e.parent?.expand(t);const r=!e.opened;e.#qr=!0,r&&e.#Xr(t),e.nodes?.forEach((e=>e.refresh(t)))}collapse(t){const e=this;t=t||e.root;const r=e.#qr||e.parent.#qr;e.nodes?.filter((t=>t.opened||t.parent.opened)).forEach((e=>e.collapse(t))),e.#qr=!1,r&&e.#Qr(t)}select(t=!0){this.selected=!0===t}#Xr(t){t.#Jr?.forEach((t=>t.onExpand?.(this)))}#Qr(t){t.#Jr?.forEach((t=>t.onCollapse?.(this)))}release(){this.#_r&&(this.selected=!1),super.release()}append(t,e=t){const r=this,s=super.append(t,e);return s&&r.root.#Jr?.forEach((t=>t.onAppend?.(r,s))),s}insert(t,e,r=e){const s=this,n=super.insert(t,e,r);return n&&s.root.#Jr?.forEach((t=>t.onInsert?.(s,n))),n}remove(){const t=super.remove();return t&&this.root.#Jr?.forEach((e=>e.onInsert?.(t))),t}#Kr(t=!1){t=!0===t;for(let e of this.walk())e.selected=t}fromJSON(t){return t&&TreeNode.from(this,t),this}toJSON(){if(this.level<0)return this.nodes?.map((t=>t.toJSON()))||{};const t=Object.assign({key:this.key,opened:this.#qr,focused:this.#Vr,selected:this.#_r,items:void 0},this.value);return t.items=this.nodes?.map((t=>t.toJSON())),t}reset(){this.#jr=!1,this.#qr=!1,this.#Vr=!1,this.#_r=!1,this.#Wr=void 0,this.#Yr=void 0,this.#Jr=void 0}static get root(){return new TreeNode(null,null,null,-1)}static from(t,e){const r=e||t,s=t instanceof TreeNode;if(Array.isArray(r))return s?(r.forEach((e=>TreeNode.from(t,e))),t):TreeNode.from(TreeNode.root,r);const{items:n,...i}=r;i.leaf=!Array.isArray(n);const a=new TreeNode(i.key,i,e?t:void 0);return n&&TreeNode.from(a,n),s&&t.append(a),a}}class GSTreeReader extends GSReadWrite{#Hr=TreeNode.root;constructor(t,e){super(t,e)}async write(t){throw new Error('Writer not available for TreeReader')}async read(t){const e=this;let r;const s=await super.read(t);if(this.#Hr){const t=e.filter?.length>0?e.#Hr.findByKey(e.filter[0]):e.#Hr;t.clear(),r=t.fromJSON(s)}else r=TreeNode.from(s),this.#Hr=r;return e.filter=void 0,e.notify(t,'read',r),r}disable(){super.disable(),this.#Hr?.release()}notify(t,e,r,s){(s||r instanceof TreeNode||'read'!==e)&&super.notify(t,e,r,s)}async onExpand(t){if(!t.hasChildren)return t.loading(),this.filter=t.key,await this.read()}get data(){return this.#Hr}resetData(){this.#Hr=TreeNode.root}static register(t){return new GSTreeReader(t,!0)}static{v.addHandler('tree',GSTreeReader)}}const G=globalThis.GS_LIT_URL||'/bootstrap-lit/assets/lib/lit-all.min.js',C=await import(G);C.ReactiveController,C.ReactiveElement,C.AsyncDirective,C.AsyncReplaceDirective,C.CSSResult;const E=C.Directive,w=C.LitElement,$=C.PartType;C.TemplateResultType,C.UnsafeHTMLDirective,C.UntilDirective,C._$LE,C._$LH,C.adoptStyles,C.asyncAppend,C.asyncReplace,C.cache,C.choose;const x=C.classMap;C.clearPart;const D=C.createRef,T=C.css;C.defaultConverter;const A=C.directive;C.getCommittedValue,C.getCompatibleStyle,C.getDirectiveClass,C.guard;const k=C.html,M=C.ifDefined;C.insertPart,C.isCompiledTemplateResult,C.isDirectiveResult,C.isPrimitive,C.isServer,C.isSingleExpression,C.isTemplateResult,C.join,C.keyed,C.literal,C.live;const O=C.map,L=C.noChange;C.notEqual;const I=C.nothing,N=C.range,R=C.ref;C.removePart;const U=C.render,F=C.repeat;C.setChildPartValue,C.setCommittedValue,C.staticHtml,C.staticSvg,C.styleMap,C.supportsAdoptingStyleSheets;const B=C.svg,H=C.templateContent;C.unsafeCSS;const P=C.unsafeHTML;C.unsafeSVG,C.unsafeStatic,C.until,C.when,C.withStatic;const z={action:'gsAction',anchor:'gsAnchor',attribute:'gsAttribute',call:'gsCall',exec:'gsExec',inject:'gsInject',property:'gsProperty',swap:'gsSwap',target:'gsTarget',template:'gsTemplate',toggle:'gsToggle',trigger:'gsTrigger',value:'gsValue',calls:'gsCall',toggles:'gsToggle',timeout:'gsTimeout',triggers:'gsTrigger'},j={gsAction:void 0,gsAnchor:void 0,gsAttribute:void 0,gsCall:void 0,gsExec:void 0,gsInject:void 0,gsProperty:void 0,gsSwap:void 0,gsTarget:void 0,gsTemplate:void 0,gsToggle:void 0,gsTrigger:void 0,gsValue:void 0,gsCall:void 0,gsToggle:void 0,gsTimeout:void 0,gsTrigger:void 0};const q=A(class DatasetDirective extends E{render(t){return I}update(t,[e,r=!0]){if(!e)return I;const s=t.element.dataset,n=e.dataset||e;return n instanceof DOMStringMap&&Object.assign(s,n),r&&this.#Zr(s,e),I}#Zr(t,e){const r=Object.assign({},j),s=Object.entries(e).filter((t=>Object.hasOwn(z,t[0])));s.length>0&&(s.forEach((t=>r[z[t[0]]]=t[1])),Object.keys(r).filter((t=>void 0!==r[t])).forEach((e=>t[e]=r[e])))}});function descriptors(t){return Object.entries(Object.getOwnPropertyDescriptors(t))}function listProperties(t){return descriptors(t).filter((t=>'function'!=typeof t[1].value)).map((t=>t[0]))}function listGetters(t){return descriptors(Reflect.getPrototypeOf(t)).filter((t=>'function'==typeof t[1].get&&'__proto__'!==t[0])).map((t=>t[0]))}function literalTemplate(t,e){const r=Array.from(function listGettable(t){return new Set([...listGetters(t),...listProperties(t)])}(e)),s=r.map((t=>e[t]));return r.push('html'),s.push(k),new Function(...r,`return html\`${t}\`;`)(...s)}const V=A(class CssMapDirective extends E{constructor(t){if(super(t),t.type!==$.ATTRIBUTE||'css'!==t.name||t.strings?.length>2)throw new Error('`classMap()` can only be used in the `css` attribute and must be the only part in the attribute.')}render(t){return' '+Object.keys(t).filter((e=>t[e])).join(' ')+' '}update(t,[e]){if(void 0===this._previousClasses){this._previousClasses=new Set,void 0!==t.strings&&(this._staticClasses=new Set(t.strings.join(' ').split(/\s/).filter((t=>''!==t))));for(const t in e)e[t]&&!this._staticClasses?.has(t)&&this._previousClasses.add(t);return this.render(e)}const r=t.element.classList;for(const t of this._previousClasses)t in e||(r.remove(t),this._previousClasses.delete(t));for(const t in e){const s=!!e[t];s===this._previousClasses.has(t)||this._staticClasses?.has(t)||(s?(r.add(t),this._previousClasses.add(t)):(r.remove(t),this._previousClasses.delete(t)))}return L}}),notEmpty=(t,e)=>t!==e&&t,numGT0=(t,e)=>t!==e&&Number(t)>0,numGE0=(t,e)=>t!==e&&Number(t)>=0,numLT0=(t,e)=>t!==e&&Number(t)<0,numLE0=(t,e)=>t!==e&&Number(t)<=0,_=['','none','off','on','sentences','words','characters'],W={hasChanged:(t,e)=>t!==e&&_.includes(t)},Y=['','off','on'],J={hasChanged:(t,e)=>t!==e&&Y.includes(t)},K=['','on','off'],X={hasChanged:(t,e)=>t!==e&&K.includes(t)};class ButtonTypes{static values=['button','reset','submit'];static is(t){return ButtonTypes.values.includes(t)}static isReset(t){return ButtonTypes.isType(t,'reset')}static isSubmit(t){return ButtonTypes.isType(t,'submit')}static isType(t,e){return ButtonTypes.#d(t)===e}static#d(t){return h.normalize(t,'submit').toLowerCase()}}const Q={hasChanged:(t,e)=>t!==e&&ButtonTypes.is(t)},Z=['','primary','secondary','dark','light','info','warning','danger','alert','link','success'],tt={hasChanged:(t,e)=>t!==e&&Z.includes(t)},et=['','desktop','mobile','tablet','android','linux','windows','macos','ios'],rt={hasChanged:(t,e)=>t!==e&&et.includes(t)},st=[{type:'checkbox',ignore:!0},{type:'radio',ignore:!0},{type:'switch',ignore:!0},{type:'range',ignore:!0},{type:'number',native:!0},{type:'email',native:!0},{type:'url',native:!0},{type:'file',native:!0},{type:'text'},{type:'password'}],nt={hasChanged:(t,e)=>t!==e&&1===st.filter((e=>e.type===t)).length},it=['','pills','tabs','underline'],at={hasChanged:(t,e)=>t!==e&&it.includes(t)};class OrientationTypes{static values=['','horizontal','vertical','portrait','landscape'];static includes(t){return OrientationTypes.values.includes(t)}static isVertical(t){const e=OrientationTypes.values.indexOf(t);return 2===e||3===e}static isHorizontal(t){const e=OrientationTypes.values.indexOf(t);return 1===e||4===e}}const ot={hasChanged:(t,e)=>t!==e&&OrientationTypes.includes(t)};class PlacementTypes{static values=['center','left','right','start','end','top','bottom'];static includes(t){return PlacementTypes.values.includes(t)}static isVertical(t){return PlacementTypes.values.indexOf(t)>4}static isHorizontal(t){const e=PlacementTypes.values.indexOf(t);return e>0&&e<5}static isCenter(t){return 0===PlacementTypes.values.indexOf(t)}static isBefore(t){return['left','start','top'].includes(t)}static isAfter(t){return['right','end','bottom'].includes(t)}}const lt={hasChanged:(t,e)=>t!==e&&PlacementTypes.includes(t)};class PositionTypes{static values=['absolute','fixed','relative','sticky','static'];static includes(t){return PositionTypes.values.includes(t)}}const ct={hasChanged:(t,e)=>t!==e&&PositionTypes.includes(t)},dt=['','http','https'],ut={hasChanged:(t,e)=>t!==e&&dt.includes(t)},ht={default:'',normal:'',medium:'',small:'sm',large:'lg',big:'lg',extra:'xl'},pt={hasChanged:(t,e)=>t!==e&&Object.hasOwn(ht,t)},mt={fromAttribute:(t,e)=>(t||'').split(','),toAttribute:(t,e)=>(t||[]).join(',')};class AdoptedController{#Ut;#ts;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){AdoptedController.#Jr.add(this),this.#mt()}hostDisconnected(){const t=this;AdoptedController.#Jr.delete(t),t.#Ut.removeController(t),t.#Ut=null,t.#ts=null}style(t,e,r=!1){const s=this;let n=null;return r?n=GSCacheStyles.dynamic:(s.#ts=s.#ts??new GSDynamicStyle('dynamic'),n=s.#ts),null===e&&n.cssRules.length>0?n.removeRule(t):n.setRule(t,e,!0)}#mt(t=!1){const e=this;if(e.#es&&(t||e.#rs)){const t=[...document.adoptedStyleSheets],r=e.#ss;e.#ns&&r.push(e.#ts),e.#is.adoptedStyleSheets=[...t,...r].filter((t=>t.cssRules.length>0)),e.#is.adoptedStyleSheets.id=document.adoptedStyleSheets.id}}get#ss(){return this.#es?.filter((t=>h.isNull(t.id)))||[]}get#ns(){return this.#ts?.cssRules.length>0||!1}get#rs(){return document.adoptedStyleSheets.id!==this.#es?.id}get#is(){return this.#Ut?.renderRoot}get#es(){return this.#is?.adoptedStyleSheets}static#Jr=new Set;static#as(t){requestAnimationFrame((()=>{AdoptedController.#Jr.forEach((t=>t.#mt()))}))}static#ht(){const t=AdoptedController;GSEvents.on(window,null,'gs-adopted',t.#as)}static{this.#ht()}}class AttributeController extends GSAttributeHandler{constructor(t){super(t);t.addController(this)}hostConnected(){this.attach(this.#os)}hostDisconnected(){const t=this;t.host.removeController(t),t.detach(t.#os)}onNotify(t){this.handle(t)}get#os(){const t=this.host?.tagName.toLowerCase(),e=this.host?.clazzName,r=GSDOM.isFormElement(this.host),s=['gs-form','gs form-group'].includes(t),n=['GSFormGroupElement'].includes(e);return s||n||r?'change':'click'}}class ContentController{#Ut;#ls;#cs=new Set;constructor(t){this.#Ut=t,t.addController(this)}hostDisconnected(){const t=this;t.#Ut.removeController(t),t.#ds(),t.#Ut=null,t.#cs=null,t.#ls=null}hostUpdated(){const t=this;!t.#us()&&t.#hs&&t.#cs.add(t.#hs)}get contentRef(){return this.#ls}get#ps(){return this.#Ut?.renderOptions}get#hs(){return this.#ps?.renderBefore?.previousElementSibling}#us(){const t=this,e=t.#hs,r=t.#Ut?.renderRoot,s=t.#Ut?.shadowRoot;return e===s||e==r}#ds(){const t=this;t.#Ut?.keep||Array.from(t.#cs).filter((t=>!!t)).forEach((t=>GSDOM.cleanup(t))),t.#cs?.clear()}}class DataController{#Ut;#ms;#gs;#fs;#Ss;constructor(t){const e=this;e.#Ut=t,e.#ms=e.#ys.bind(e),e.#gs=e.#bs.bind(e),e.#fs=e.#vs.bind(e),e.#Ss=e.#Gs.bind(e),e.#Ut.addController(e)}hostConnected(){this.#Cs(!1)}hostDisconnected(){const t=this;t.#Es(),t.#Ut.removeController(t)}async read(t){return this.store?.read(this.#Ut)}async write(t){return this.store?.write(this.#Ut,t)}async storage(){return v.wait(this.storeID)}sort(t){if(this.store)return this.store.sort=t,this.store.read()}filter(t){if(this.store)return this.store.filter=t,this.store.read()}search(t){this.store&&(this.store.search=t)}firstPage(){this.page=1}lastPage(){this.nextPage()}nextPage(){this.page=this.page+1}prevPage(){this.page=this.page-1}get selected(){return this.store?.selected}isSelected(t){return this.#ws.isSelected(t)}addSelected(t){return this.#ws.addSelected(t)}removeSelected(t){return this.#ws.removeSelected(t)}clearSelected(t){return this.#ws.clearSelected(t)}getSelected(t){return h.asArray(t).filter((t=>DataSelector.isSelected(t)))}get#ws(){return this.store||DataSelector}get store(){return v.find(this.storeID)}get storeID(){return this.#Ut?.storage}get page(){const t=this.store;return t?Math.floor(t.skip/Math.max(t.limit,1))+1:1}set page(t){t=Math.max(1,h.asNum(t,1));const e=this.store;e&&(e.skip=t>0?e.limit*t-e.limit:0,e.read(this.#Ut))}async#Cs(t=!0){const e=this,r=await e.storage();r&&(r.on('read',e.#ms),r.on('write',e.#gs),r.on('error',e.#fs),r.on('select',e.#Ss),t&&r.read(e.#Ut))}#Es(){const t=this,e=t.store;e&&(e.off('read',t.#ms),e.off('write',t.#gs),e.off('error',t.#fs),e.off('select',t.#Ss))}#Gs(t){this.#Ut.requestUpdate?.()}#ys(t){this.#Ut.onDataRead?.(t.detail.data),this.#$s('data-read',t.detail.data)}#bs(t){this.#Ut.onDataWrite?.(t.detail.data),this.#$s('data-write',t.detail.data)}#vs(t){const e=this;GSLog.error(e.#Ut,t),e.#Ut.onDataError?.(t),e.#$s('data-error',t.detail.data)}#$s(t,e){this.#Ut.emit(t,e,!0,!1,!0)}}class ElementMoveController{#Ut;#we;#xs=!1;#Ds=0;#Ts=0;#As;#ks;#Ms;constructor(t){const e=this;e.#Ut=t,t.addController(e),e.#As=e.#Os.bind(e),e.#ks=e.#Ls.bind(e),e.#Ms=e.#Is.bind(e)}hostDisconnected(){const t=this;t.#Ut.removeController(t),t.#Ut=null}attach(t){const e=this;e.#xs||(e.#we=t,e.#xs=!0,e.#Ut.attachEvent(e.#we,'mousedown',e.#ks))}reset(){const t=this;t.#Ds=0,t.#Ts=0,t.#Ut.removeEvent(document,'mouseup',t.#As),t.#Ut.removeEvent(document,'mousemove',t.#Ms)}#Ls(t){const e=this;e.#Ut.prevent(t),e.#Ds=t.clientX,e.#Ts=t.clientY,e.#Ut.onStartMove?.(t,e.#Ds,e.#Ts),e.#Ut.attachEvent(document,'mouseup',e.#As,!0),e.#Ut.attachEvent(document,'mousemove',e.#Ms)}#Os(t){const e=this;return e.#Ut.prevent(t),e.#Ut.removeEvent(document,'mousemove',e.#Ms),e.#Ut.onEndMove?.(t,e.#Ds,e.#Ts)}#Is(t){const e=this;e.#Ut.prevent(t),e.#Ut.onMouseMove?.(t,e.#Ds,e.#Ts),e.#Ds<t.clientX?e.#Ut.onCursorRight?.(t,e.#Ds,e.#Ts):e.#Ds>t.clientX&&e.#Ut.onCursorLeft?.(t,e.#Ds,e.#Ts),e.#Ts<t.clientY?e.#Ut.onCursorUp?.(t,e.#Ds,e.#Ts):e.#Ts>t.clientY&&e.#Ut.onCursorDown?.(t,e.#Ds,e.#Ts),e.#Ds=t.clientX,e.#Ts=t.clientY}}class LocalizationController{#Ut;#p;constructor(t){const e=this;e.#Ut=t,e.#p=t.language,t.addController(e)}hostConnected(){LocalizationController.#Jr.add(this)}hostDisconnected(){const t=this;LocalizationController.#Jr.delete(t),t.#Ut.removeController(t),t.#Ut=null,t.#p=null}hostUpdate(){const t=this;t.#p!==t.#Ut?.language&&(t.#p,t.#Ut?.language,t.updateLanguage(t.#p))}updateLanguageExt(t){this.#p||this.updateLanguage(t)}updateLanguage(t){t&&this.#Ut.requestUpdate()}static#Jr=new Set;static#Ns(t){LocalizationController.#Jr.forEach((e=>e.updateLanguageExt(t.detail)))}static#ht(){GSEvents.on(window,null,'gs-language',LocalizationController.#Ns)}static{LocalizationController.#ht()}}class OrientationController{static#Rs=new Set;#Ut;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){OrientationController.#Rs.add(this),this.update()}hostDisconnected(){const t=this;OrientationController.#Rs.delete(t),t.#Ut.removeController(t),t.#Ut=null}update(){this.#Ut.requestUpdate()}static#Us(t){Array.from(OrientationController.#Rs).forEach((t=>t.update()))}static{screen.orientation.addEventListener('change',OrientationController.#Us)}}class TemplateController{#Ut;#Fs;#Bs;#Hs;static#ut=!1;static#Ps=new Set;static#L=new Map;static#cs=new Set;static get isPrefetch(){return globalThis.GS_TEMPLATE_PREFETCH||!1}constructor(t){this.#Ut=t,this.#Hs=!0,t[d]=!1,t.addController(this)}hostConnected(){}hostDisconnected(){const t=this;t.#Ut.removeController(t),delete t.#Ut[d],t.#Ut=null,t.#Bs=null,t.#Fs=null}hostUpdate(){const t=this;if(t.#Fs)return;const e=t.templateRef;if(t.#Bs!==e){const r=TemplateController.#L.get(t.#zs(e));h.isJsonType(r)&&t.#ae(r),t.#Bs=e,e&&!t.#Fs&&TemplateController.#js(t)}}hostUpdated(){const t=this,e=t.#Ut;t.#Fs&&e.hasUpdated&&(e.removeController(t),e.templateInjected?.(),queueMicrotask((()=>t.hostDisconnected())))}#zs(t){return h.isString(t)?`${t}@${this.#Ut?.tagName||''}`:t}#qs(t){return TemplateController.#cs.has(t)||TemplateController.#L.has(t)}#ae({simple:t,slots:e}){const r=this;if(!r.#Ut)return;const s=GSDOM.isTemplateElement(e),n=GSDOM.isTemplateElement(t);let i=!0;if(s&&!1===r.#Ut[d]){r.#Ut[d]=!0;const t=e.cloneNode(!0);Array.from(t.content.children).forEach((t=>r.#Ut.appendChild(t)))}n&&t.content.childElementCount>0&&(i=!1,r.#Fs=t.cloneNode(!0),r.#Ut.requestUpdate()),i&&r.#Ut.templateInjected?.()}#Vs(t){let e=null,r=null;const s=Array.from(t.content.children).filter((t=>t.hasAttribute('slot'))),n=s.length>0,i=t.content.childElementCount>s.length;return n&&(i?(r=document.createElement('template'),s.forEach((t=>r.content.appendChild(t)))):r=t),e=i&&t?.content.childElementCount>0?t:null,r=n&&r?.content.childElementCount>0?r:null,e=e?.isConnected?e.cloneNode(!0):e,{simple:e,slots:r}}async#_s(){const t=this,e=t.templateRef;if(!e)return;const r=t.#zs(e);if(TemplateController.#L.has(r))return void t.#ae(TemplateController.#L.get(r));if(t.#qs(r))return;TemplateController.#cs.add(r);let s=null;const n=GSDOM.isTemplateElement(e),i=h.isString(e);if(i&&(s=TemplateController.#L.get(r)),!s){try{const r=n?e:await GSTemplateCache.loadTemplate(!0,e,e);s=t.#Vs(r)}catch(t){throw TemplateController.#cs.delete(r),t}i&&(s.simple&&(s.simple.dataset.gsCache=!0),TemplateController.#L.set(r,s))}TemplateController.#cs.delete(r),t.#ae(s)}get isTemplateElement(){return'GS-TEMPLATE'===this.#Ut?.tagName}get template(){return this.#Fs}get templateRef(){return GSDOM.templateRef(this.#Ut)}static async#Ws(t){const e=Array.from(t);for(let r of e)await r.#_s(),t.delete(r)}static#js(t){const e=TemplateController;e.#Ps.add(t),e.#ut||(e.#ut=!0,queueMicrotask((()=>e.#Ws(e.#Ps).finally(e.#ut=!1))))}static clear(){GSTemplateCache.clear(),TemplateController.#Ps.clear(),TemplateController.#L.clear(),TemplateController.#cs.clear()}}class ThemeController{#Ut;#Ys;constructor(t){const e=this;e.#Ut=t,e.#Ys=t.theme,t.addController(e)}hostConnected(){ThemeController.#Jr.add(this)}hostDisconnected(){const t=this;ThemeController.#Jr.delete(t),t.#Ut.removeController(t),t.#Ut=null,t.#Ys=null}hostUpdate(){const t=this;t.#Ys!==t.#Ut?.theme&&(t.#Ys,t.#Ut?.theme,t.updateTheme(t.#Ys))}updateThemeExt(t){this.#Ys||this.updateTheme(t)}updateTheme(t){if(!t)return;GSAttr.set(this.#Ut,'data-bs-theme',t);const e=this.#Ut?.renderRoot?.children||[];Array.from(e).forEach((e=>GSAttr.set(e,'data-bs-theme',t)))}static#Jr=new Set;static#nr(t){ThemeController.#Jr.forEach((e=>e.updateThemeExt(t.detail)))}static#ht(){GSEvents.on(window,null,'gs-theme',ThemeController.#nr)}static{ThemeController.#ht()}}class SlotController{#Ut;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){const t=this,e=t.#Ut.renderRoot||t.#Ut;t.#Ut.attachEvent(e,'slotchange',t.#Js.bind(t))}hostDisconnected(){const t=this;t.#Ut.removeController(t),t.#Ut=null}#Js(t){'function'==typeof t.target.assignedElements&&t.target.assignedElements().forEach((e=>{e.onSlotInjected?.(t.target)}))}}let gt=class GSElement extends w{static properties={flat:{type:Boolean},rtl:{type:Boolean,reflect:!0},hide:{type:Boolean,reflect:!0},padding:{type:Number},margin:{type:Number},rounded:{type:Boolean},bordered:{type:Boolean},shadow:{type:Boolean},keep:{type:Boolean},onready:{},css:{},theme:{},os:{},browser:{},language:{reflect:!0,hasChanged:notEmpty},environment:rt,orientation:ot,protocol:ut,template:{}};#Ks=void 0;#Xs=void 0;#Qs=void 0;#Zs=void 0;#tn=void 0;#en=void 0;#rn=void 0;#Fs=void 0;#sn=void 0;#ls=void 0;#cs=void 0;#nn=void 0;constructor(){super();const t=this;t.css='',t.language='',t.#Ks=new AdoptedController(t),t.#sn=new ContentController(t),t.#Zs=new LocalizationController(t),t.#Qs=new OrientationController(t),t.#rn=new ThemeController(t),t.#en=new SlotController(t)}attributeChangedCallback(t,e,r){super.attributeChangedCallback(t,e,r)}connectedCallback(){super.connectedCallback();const t=this;GSDOM.templateRef(t)&&(t.#Fs=new TemplateController(t)),t.isBindable&&t.binded()}disconnectedCallback(){const t=this;GSEvents.detachListeners(this),super.disconnectedCallback(),t.#ls?.clear(),t.#cs?.clear(),t.#nn?.clear(),t.#ls=null,t.#cs=null,t.#nn=null,t.#Ks=null,t.#Xs=null,t.#Qs=null,t.#Zs=null,t.#tn=null,t.#en=null,t.#rn=null,t.#Fs=null,t.#sn=null,t.adoptedStyleSheets=[],GSCacheStyles.deleteRule(t.#in,!0);const e=t.shadowRoot;e&&(e.adoptedStyleSheets=[],queueMicrotask((()=>GSDOM.cleanup(e)))),queueMicrotask((()=>GSDOM.cleanup(t)))}addController(t){const e=this;t.templateInjected&&(e.#Jr??=new Set).add(t),super.addController?.(t)}removeController(t){this.#Jr?.delete(t),super.removeController?.(t)}get#Jr(){return this[n]??=new Set,this[n]}shouldUpdate(t){return this.isConnected}createRenderRoot(){return this.flat?this:super.createRenderRoot()}firstUpdated(){super.firstUpdated();const t=this;if(t.onready){const e=t.onready.startsWith('this')?this:window;p.callFunction(t.onready,e)}}willUpdate(t){const e=this;t.has('hide')&&e.#an(),t.has('storage')&&e.#on()}get#in(){const t=this;return t.id=t.id?t.id:GSID.id,`${t.tagName.toLowerCase()}#${t.id}`}#an(){const t=this.hide?'none':'';GSCacheStyles.setRule(this.#in,{display:t},!1,!0)}#on(){const t=this;t.#tn?.hostDisconnected(),t.#tn=void 0,t.storage&&(t.#tn=new DataController(t))}onSlotInjected(t){}render(){return this.isAllowRender?this.renderUI():''}renderUI(){return this.renderTemplate()}renderTemplate(){return this.templateRef?H(this.templateRef):L}renderClass(){const t=this,e={border:t.bordered,'shadow-sm':t.shadow,rounded:t.rounded,[`p-${t.padding}`]:t.padding>=0,[`m-${t.margin}`]:t.margin>=0};return t.mapCSS(t.css,e)}templateInjected(){const t=this;t.#Jr?.forEach((e=>e.templateInjected?.(t)))}binded(){this.#Xs??=new AttributeController(this)}handle(t){this.#Xs?.handle(t)}mapCSS(t,e,r=!0){return e=e||{},(t||'').split(' ').map((t=>t.trim())).filter((t=>t.length>0)).forEach((t=>e[t.trim()]=r)),e}dynamicStyle(t,e,r=!1){return this.#Ks?.style(t,e,r)}getByID(t=''){return GSDOM.getByID(this,t)}closest(t='',e=-1,r=!1){const s=this;let n=s.#nn?.get(t);return n&&!n.isConnected&&(n=void 0,s.#nn?.delete(t)),n??=GSDOM.closest(this,t,e),n&&r&&!s.#ls?.has(t)&&(s.#nn??=new Map,s.#nn.set(t,n)),n}query(t='',e=!1,r=!1){const s=this;let n=s.#cs?.get(t);return n&&!n.isConnected&&(n=void 0,s.#cs?.delete(t)),n??=GSDOM.query(this,t,!1,e),n&&r&&!s.#ls?.has(t)&&(s.#ls??=new Map,s.#ls.set(t,n)),n}queryAll(t='',e=!1,r=!1){const s=this;let n=s.#cs?.get(t);return n&&!n.isConnected&&(n=void 0,s.#cs?.delete(t)),n??=GSDOM.queryAll(this,t,!1,e),n&&r&&!s.#cs?.has(t)&&(s.#cs??=new Map,s.#cs.set(t,n)),n}notify(t=!0,e=!1,r){this.emit('notify',r,t,e,!0)}emit(t,e='',r=!1,s=!1,n=!1){return GSEvents.send(this,t,e,r,s,n)}waitEvent(t='',e=0){return GSEvents.wait(this,t,e)}once(t,e,r=!1){return this.listen(t,e,!0,r)}on(t,e,r=!1,s=!1){return this.listen(t,e,r,s)}off(t,e){return this.unlisten(t,e)}prevent(t,e,r,s){return GSEvents.prevent(t,e,r,s)}listen(t,e,r=!1,s=!1){return this.attachEvent(this,t,e,r,s)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',r,s=!1,n=!1){return GSEvents.attach(this,t,e,r,s,n)}removeEvent(t,e='',r){return GSEvents.remove(this,t,e,r)}toggle(){this.hide=!this.hide}translate(t){return b.translate(this.language,t)}get direction(){if(!h.isNull(this.rtl))return this.rtl?'rtl':'ltr'}get isBindable(){return GSAttributeHandler.isBindable(this)}get isFocused(){return this===document.activeElement}get tag(){return this.tagName.toLowerCase()}get templateRef(){return this.#Fs?.template}get contentRef(){return this.#sn?.contentRef}get dataController(){return this.#tn}get isAllowRender(){return this.isValidEnvironment&&this.isValidBrowser&&this.isValidOS&&this.isValidProtocol&&this.isValidOrientation}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment??'')}get isValidOS(){return GSEnvironment.isDevice(this.os??'')}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation??'')}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser??'')}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol??'')}get isGenerated(){return this.hasAttribute('generated')}get parentComponent(){return GSDOM.parentAll(this).filter((t=>t instanceof GSElement)).next()?.value}get clazzName(){return this.constructor.name}get definitions(){const t=[...GSDOM.inheritance(this)].map((t=>t.constructor?.properties)).filter((t=>t));return t.push(this.constructor?.properties),GSData.mergeObjects(t)}get elementStyles(){return this.constructor.elementStyles.filter((t=>t instanceof CSSStyleSheet||t.styleSheet instanceof CSSStyleSheet)).map((t=>t.styleSheet||t)).pop()}cssRule(t){return Array.from(this.elementStyles?.rules??[]).filter((e=>e.selectorText===t)).pop()}setCSSProperty(t,e,r){this.cssRule(t)?.style?.setProperty(e,r)}static allProperties(t){return GSDOM.allProperties(t)}static define(t,e,r){return GSDOM.define(t,e||this,r)}static{GSElement.define('gs-element',GSElement),GSDOMObserver.registerFilter((t=>!0),(t=>{GSDOM.cleanup(t)}),!0,document.body)}};class ElementNavigationController{#Ut;#Vr;#ln=!1;#cn=void 0;#dn=void 0;#un=void 0;#hn=void 0;#pn=void 0;#mn=void 0;constructor(t){const e=this;e.#Ut=t,e.#cn=e.#gn,e.#dn=e.onClick.bind(e),e.#un=e.onKeyUp.bind(e),e.#hn=e.onKeyDown.bind(e),e.#pn=e.onFocusIn.bind(e),e.#mn=e.onFocusOut.bind(e),t.addController(e)}hostConnected(){}hostDisconnected(){const t=this,e=t.#hs;e&&(t.#Ut.removeEvent(e,'keydown',t.#hn),t.#Ut.removeEvent(e,'keyup',t.#un),t.#Ut.removeEvent(e,'click',t.#dn),t.#Ut.removeEvent(e,'focusin',t.#pn),t.#Ut.removeEvent(e,'focusout',t.#mn)),t.#Ut.removeController(t),t.#Ut=null}hostUpdated(){const t=this;t.#ln||(t.#ln=!0,t.firstUpdate())}firstUpdate(){const t=this;t.#cn=t.first?.tagName||'';const e=t.#hs;e&&(t.#Ut.attachEvent(e,'keydown',t.#hn),t.#Ut.attachEvent(e,'keyup',t.#un),t.#Ut.attachEvent(e,'click',t.#dn),t.#Ut.attachEvent(e,'focusin',t.#pn),t.#Ut.attachEvent(e,'focusout',t.#mn))}get circular(){return!0===this.#Ut?.circular}get multiple(){return!0===this.#Ut?.multiple}get focused(){return this.#Vr}get selected(){const t=this.items.filter((t=>t.active));return this.multiple?t:t.pop()}get items(){const t=this;return Array.from(t.#Ut.children).filter((t=>'GS-ITEM'!==t.tagName)).filter((e=>!t.#cn||e.tagName===t.#cn))}get first(){return this.items.shift()}get last(){return this.items.pop()}get#hs(){return this.#Ut[u]||this.#Ut.shadowRoot.firstElementChild}get#gn(){return(this.#Ut.dataset.gsChildTagName||this.#Ut[i]||'').toUpperCase()}previous(){const t=this;let e=t.#Vr?.previousElementSibling;for(;e?.disabled;)e=e.previousElementSibling;t.circular&&!e&&(e=t.last),e?.focus()}next(){const t=this;let e=t.#Vr?.nextElementSibling;for(;e?.disabled;)e=e.nextElementSibling;t.circular&&!e&&(e=t.first),e?.focus()}reset(){const t=this,e=t.selected;t.multiple?e.forEach((t=>{t.active=!1,t.blur()})):e&&(e.active=!1,e.blur()),t.#Vr=void 0,t.#Ut?.onReset?.(el),t.#Ut?.emit('group-reset',void 0,!0)}#fn(t){this.#Ut?.onSelected?.(t),this.#Ut?.emit('group-selected',t,!0)}#Sn(t){this.#Ut?.onDeselected?.(t),this.#Ut?.emit('group-deselected',t,!0)}#yn(t){this.#Ut?.onFocused?.(t),this.#Ut?.emit('group-focused',t,!0)}#bn(t){return t?.tagName===this.#cn||t?.isNav||!1}#vn(t){const e=this;e.#Vr=t,t&&e.#yn(e.#Vr)}#Gn(t){const e=this;t.active?e.#fn(t):e.#Sn(t)}#Cn(t){const e=this,r=e.selected;r&&!e.multiple&&(r.active=!1,e.#Gn(r)),e.multiple?t.active=!t.active:t.active=!0,e.#Gn(t)}onFocusOut(t){}onFocusIn(t){const e=this;e.#bn(t.target)&&(e.#bn(t.relatedTarget)?e.#vn(t.target):e.multiple?e.selected?.pop?.()?.focus?.():e.selected?.focus())}onClick(t){const e=this,r=t.composedPath().filter((t=>t instanceof gt)).filter((t=>t.parentComponent===e.#Ut)).pop();e.#bn(t.target)&&(t.ctrlKey&&e.reset(),e.#Sn(e.selected),e.#Cn(r))}onKeyDown(t){const e=this;if(e.#bn(t.target))switch(t.code){case'ArrowUp':case'ArrowLeft':e.previous();break;case'ArrowDown':case'ArrowRight':e.next();break;case'Space':case'Enter':GSEvents.prevent(t)}}onKeyUp(t){if(this.#bn(t.target))switch(t.code){case'Space':case'Enter':t.target.click()}}}class GroupController{#Ut;#En;#wn;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){const t=this;t.#Ut.group&&(t.#wn=t.#$n.bind(t),t.#En=GSEventBus.register(t.#Ut.clazzName),t.#En.on(t.#Ut.group,t.#wn))}hostDisconnected(){const t=this;t.#En?.off(t.#Ut.group,t.#wn),t.#Ut.removeController(t),t.#Ut=null}#$n(t){this.#Ut.onBusEvent?.(t)}notify(t){const e=this;e.#En?.emit(e.#Ut.group,{owner:e.#Ut,item:t})}}class GSRouterElement extends gt{#xn=null;static properties={url:{},disabled:{type:Boolean},logging:{type:Boolean}};constructor(){super();const t=this;t.id=GSID.next(),t.logging=!1,t.#xn=new GSRouter(t),t.#xn.log=!1}renderUI(){return k`<slot><slot/>`}updated(t){const e=this;e.#xn.log=e.logging,t.has('url')&&e.#xn.initialize(e.url)}disconnectedCallback(){this.#xn?.disable(),this.#xn=null}static{this.define('gs-router')}}class GSAccordionElement extends gt{static properties={storage:{},autoclose:{type:Boolean},cssItem:{reflect:!0,attribute:'css-item'},cssHeader:{reflect:!0,attribute:'css-header'},cssBody:{reflect:!0,attribute:'css-body'},data:{type:Array}};constructor(){super(),this.data=this.settings}renderUI(){const t=this;return k`<div  dir="${M(t.direction)}"
       @notify="${t.#Dn.bind(t)}"
       @click="${t.#Tn}" 
       @keyup="${t.#An}" 
       class="accordion ${x(t.renderClass())}">
       ${this.#kn()}
       <slot></slot></div>`}get items(){return this.queryAll('gs-accordion-item',!1,!0)}get settings(){const t=this.constructor.properties;return GSItem.collect(this).map((e=>GSAttr.proxify(e,t)))}close(){this.#Mn(!1)}open(){this.#Mn(!0)}onDataRead(t){this.data=t}#kn(){return this.data.map((t=>k`<gs-accordion-item generated
        .opened="${M(!0===t.disabled)}" 
        message="${M(t.message)}" 
        template="${M(t.template)}" 
        title="${M(t.title)}"></gs-accordion-item>`))}#Mn(t=!1){this.items.forEach((e=>e.opened=t)),this.notify()}#Dn(t){const e=this;e.autoclose&&t.target.opened&&e.items.filter((e=>e!=t.target)).forEach((t=>t.opened=!1))}#Tn(t){const e=t?.composedPath()[0]?.matches('.accordion-button');e&&t.target.toggle?.()}#An(t){switch(t.code){case'ArrowLeft':t.target.close?.();break;case'ArrowRight':t.target.open?.()}}static{this.define('gs-accordion')}}class GSAccordionItemElement extends gt{static properties={cssHeader:{reflect:!0,attribute:'css-header'},cssBody:{reflect:!0,attribute:'css-body'},message:{reflect:!0},title:{reflect:!0},opened:{type:Boolean,reflect:!0}};constructor(){super()}shouldUpdate(t){return'GS-ACCORDION'===this.owner?.tagName}renderUI(){const t=this,e=t.owner,r=t.cssHeader||e?.cssHeader,s=t.cssBody||e?.cssBody;return k`<div class="accordion-item ${t.css}">
             <h2 class="accordion-header">
               <button type="button" 
                class="accordion-button  ${r} ${t.opened?'':'collapsed'}"> 
                 ${t.translate(t.title)}
               </button>
             </h2>
             <div class="accordion-collapse collapse  ${s} ${t.opened?'show':''}">
               <div class="accordion-body">
                   ${t.translate(t.message)}
                   ${t.renderTemplate()}
                   <slot></slot>
               </div>
             </div>      
     </div>`}open(){this.notify(!0)}close(){this.notify(!1)}toggle(){this.notify(!this.opened)}notify(t=!1){this.opened=t,super.notify()}get owner(){return this.closest('gs-accordion')||GSDOM.component(this)}static{this.define('gs-accordion-item')}}class GSAlertElement extends gt{static properties={message:{reflect:!0},color:{...tt},closed:{reflect:!0,type:Boolean},closable:{reflect:!0,type:Boolean},delay:{reflect:!0,type:Number}};#ls;#On=!1;#Ln=0;#In=0;#Hr;constructor(){super(),this.delay=1,this.#ls=D(),this.#Hr=this.#er(this)}disconnectedCallback(){clearInterval(this.#Ln),super.disconnectedCallback()}renderUI(){const t=this;return k`<div role="alert" dir="${M(t.direction)}" ${R(t.#ls)} 
            @mouseover="${()=>t.#On=!0}"
            @mouseout="${()=>t.#On=!1}"
            class="alert fade ${x(t.renderClass())}" >
            ${t.#Nn}
            ${t.renderTemplate()}
            <slot></slot>
            ${t.#Rn}
        </div>`}firstUpdated(t){this.#Un(),super.firstUpdated(t)}updated(t){t.has('opened')&&this.#Un()}renderClass(){const t=this;return{...super.renderClass(),show:!t.closed,'alert-dismissible':t.closable,[`alert-${t.color}`]:t.color}}open(){this.notify(!1)}close(){this.notify(!0)}toggle(){this.notify(!this.closed)}notify(t=!1){const e=this;e.closed=t,e.closed&&setTimeout((()=>{e.#ls.value.classList.toggle('d-none',!0)}),250),super.notify()}get isBillboard(){return this.#Hr?.length>0}get#Fn(){return this.translate(this.message)}get#Nn(){return this.rtl?this.#Bn:this.#Fn}get#Rn(){return this.rtl?this.#Fn:this.#Bn}get#Bn(){return this.closable?k`<button type="button" class="btn-close" aria-label="Close" @click="${this.close}"></button>`:''}#er(t){return GSItem.collect(t).map((t=>GSAttr.proxify(t,{message:{}})))}#Un(){const t=this;t.closed?(clearInterval(t.#Ln),t.#Ln=0):t.#Hn()}#Hn(){const t=this;if(!t.isBillboard)return;const e=t.#Hr;t.message?t.#In=-1:t.message=e[0].message,t.#Ln=setInterval((()=>{t.#On||(t.#In++,t.#In>=e.length&&(t.#In=0),t.message=e[t.#In].message)}),1e3*t.delay)}static{this.define('gs-alert')}}class GSButtonElement extends gt{static properties={type:{...Q},size:{...pt},color:{...tt},clickCss:{attribute:'click-css'},hoverCss:{attribute:'hover-css'},toggleColor:{...tt,attribute:'toggle-color'},autofocus:{type:Boolean},disabled:{type:Boolean,reflect:!0},outline:{type:Boolean,reflect:!0},active:{type:Boolean,reflect:!0},toggling:{type:Boolean},icon:{},title:{},tooltip:{},text:{},url:{}};#Pn=D();#zn=D();constructor(){super(),this.type='button'}firstUpdated(t){super.firstUpdated(t),this.autofocus&&!this.disabled&&this.focus()}renderUI(){const t=this;return k`<button is="gs-ext-button" part="button" role="button"
        data-gs-type="${t.dataset.gsType||''}" 
        ${R(t.#Pn)}
        dir="${M(t.direction)}"
        type="${M(t.type)}" 
        class="btn ${x(t.renderClass())}" 
        title="${M(t.#jn)}"
        ?disabled=${t.disabled}
        @mouseover="${t.#qn}"
        @mouseout="${t.#Vn}"
        @disabled="${t.#_n}"
        @click="${t.#Tn}">
          ${t.#Nn} ${t.#Rn}</button>`}renderClass(){const t=this,e=ht[t.size];return{...super.renderClass(),active:t.active,'focus-ring':document.activeElement===t,[`text-${t.text}`]:t.text,[`btn-${e}`]:e,[`btn-outline-${t.color}`]:t.outline,[`btn-${t.color}`]:!t.outline&&t.color,[`btn-${t.toggleColor}`]:t.active&&t.toggleColor}}click(){this.#Pn.value?.click()}focus(){requestAnimationFrame((()=>this.#Pn.value?.focus()))}toggle(){this.active=!this.active}#Tn(t){const e=this;return e.toggling&&e.toggle(),e.iconEl?.animate?.(),e.#Wn(t),e.dataset.event?e.emit(e.dataset.event,null,e.dataset.bubbles,e.dataset.composed,!0):e.isReset?e.form?.reset():e.isSubmit?e.form?.submit():void e.notify()}#_n(t){this.disabled=this.buttonEl.disabled}#Wn(t){const e=this;e.url&&(e.url.startsWith('#')?location.hash=e.url:location.href=e.url)}#qn(){this.iconEl?.hover?.(!0)}#Vn(){this.iconEl?.hover?.(!1)}get isReset(){return ButtonTypes.isReset(this.type)}get isSubmit(){return ButtonTypes.isSubmit(this.type)}get iconEl(){return this.#zn.value}get buttonEl(){return this.#Pn.value}get form(){return this.closest('gs-form, form')}get#Yn(){return this.translate(this.title)}get#jn(){return this.translate(this.tooltip)}get#Nn(){return this.rtl?this.#Yn:this.#Jn}get#Rn(){return this.rtl?this.#Jn:this.#Yn}get#Jn(){return this.icon?this.#Kn:k`<slot name="icon"></slot>`}get#Kn(){return k`
    <gs-icon ${R(this.#zn)} 
    name="${this.icon}" 
    click-css="${M(this.clickCss)}" 
    hover-css="${M(this.hoverCss)}" 
    data-delay="1"></gs-icon>`}static{this.define('gs-button')}}class GSCalendarElement extends gt{static styles=T`.year::-webkit-outer-spin-button,.year::-webkit-inner-spin-button {-webkit-appearance: none;margin: 0;} .year {-moz-appearance: textfield;} .day:focus{font-weight: bold;}`;static properties={date:{},target:{},format:{hasChanged:notEmpty},editable:{type:Boolean},range:{type:Number},year:{type:Number},month:{type:Number,hasChanged:numGE0},day:{type:Number,hasChanged:numGE0},minYear:{attribute:'year-min',type:Number},maxYear:{attribute:'year-max',type:Number},arrovPrev:{attribute:'arrow-prev'},arrowNext:{attribute:'arrow-next'},cssDays:{attribute:'css-days'},cssToday:{attribute:'css-today'},cssWeeks:{attribute:'css-weeks'},cssMonth:{attribute:'css-month'},cssYear:{attribute:'css-year'},cssNav:{attribute:'css-nav'},cssHeader:{attribute:'css-header'},cssSelected:{attribute:'css-selected'}};#Xn;#_r;constructor(){super();const t=this;t.#Xn=new GSDate,t.#Xn.day=1,t.#_r=new GSDate,t.#Xn.language=h.language,t.#_r.language=h.language,t.language=h.language,t.day=t.#_r.day,t.month=t.#_r.month,t.year=t.#_r.year,t.editable=!1,t.range=5,t.minYear=1900,t.maxYear=2100,t.arrowPrev='&#10094;',t.arrowNext='&#10095;',t.cssNav='btn-light',t.cssToday='btn-secondary',t.cssSelected='btn-primary',t.cssWeeks='fw-bold text-bg-dark',t.cssYear='form-control fs-5 fw-bold border-0 text-center m-1 p-0',t.cssMonth='form-control fs-3 fw-bold border-0 text-center m-1 p-0'}get date(){const t=this;return new Proxy(this.#Xn,{set:(e,r,s)=>('function'!=typeof e[r]&&(e[r]=s,t.#Qn()),!0),get(e,r,s){const n=e[r];return n instanceof Function?function(...r){try{return n.apply(this===s?e:this,r)}finally{t.#Qn()}}:n}})}previousMonth(){const t=this;0==t.month?(t.month=11,t.year--):t.month--}nextMonth(){const t=this;11==t.month?(t.month=0,t.year++):t.month++}previousYear(){this.year--}nextYear(){this.year++}formatted(t){const e=this;return(t||e.#Xn).format(e.format,e.language)}updated(){const t=this,e=new GSDate(t.#Xn);t.#Zn(e),t.emit('date',{type:'calendar',date:e,val:t.formatted(e)},!0,!0)}renderUI(){const t=this;t.#Xn.day=1,t.#Xn.month=t.month,t.#Xn.year=t.year,t.#Xn.day=t.day,t.#Xn.language=t.language;const e=GSDate.dayList(!0,t.language).map((t=>k`<div class="col">${t}</div>`)),r=t.#ti(),s=t.#ei();return k`
          <div class="container-fluid text-center ${x(t.renderClass())}"
          dir="${M(t.direction)}"
          @keydown="${t.#ri}"
          @click="${t.#si}">
          <div class="row align-items-center ${t.cssHeader} header">
              <div class="col-auto">
                  <a href="#" @click="${t.previousMonth}" class="btn ${t.cssNav} arrow prev">${P(t.arrowPrev)}</a>
              </div>
              <div class="col"></div>
              <div class="col-auto">
                  ${r}
                  ${s}
              </div>
              <div class="col"></div>
              <div class="col-auto">
                  <a href="#" @click="${t.nextMonth}" class="btn ${t.cssNav} arrow next">${P(t.arrowNext)}</a>
              </div>
          </div>
          <div class="row weeks ${t.cssWeeks}">${e}</div>
          ${P(t.#ni())}
      </div>`}#Zn(t){const e=this;if(!e.target)return;const r=GSDOM.query(document.documentElement,e.target);return r?r instanceof HTMLInputElement?'date'===r.type?r.valueAsDate=t:r.value=e.formatted(t):void GSDOM.setHTML(r,e.formatted(t)):void 0}#Qn(){const t=this;t.#_r.day=1,t.#_r.month=t.#Xn.month,t.#_r.year=t.#Xn.year,t.#_r.day=t.#Xn.day,t.#_r.language=t.#Xn.language,t.day=t.#Xn.day,t.month=t.#Xn.month,t.year=t.#Xn.year,t.language=t.#Xn.language}#ii(t,e){return t&&h.asNum(t)===e.day&&e.month===this.#Xn.month&&this.#Xn.year===e.year}#ni(){const t=this,e=new GSDate;e.language=t.language;const r=t.#Xn.build(t.language).map((r=>{const s=t.#ii(r,e)?t.cssToday:'',n=t.#ii(r,t.#_r)?t.cssSelected:'';return`<div class="col p-0">${r?`<a tabindex="0" href="#" class="btn shadow-none ${n} ${s} day" data-day="${r}">${r}</a>`:''}</div>`})).map(((t,e)=>{if(0===e)return`<div class="row days">${t}`;return e%7==0?`</div><div class="row days">${t}`:t}));return r.push('</div>'),r.join('')}#ti(){const t=this,e=t.#Xn.MMMM.toLowerCase(),r=GSDate.monthList(!1,t.language),s=r.map(((t,r)=>k`<option value="${r}" selected=${M(e==t.toLowerCase()||void 0)}>${t}</option>`));return k`<select @change="${t.#ai}" name="month" class="month ${t.cssMonth}" value="${r.indexOf(e)}">${s}</select>`}#ei(){const t=this,e=[];let r=t.minYear,s=t.maxYear;if(t.range>0){const n=(new GSDate).year;r=n-t.range,s=n+t.range,t.#oi(e,r,s)}if(!t.editable)return k`<select @change="${t.#li}" name="year" class="year ${t.cssYear}" data-gs-min="${r}" data-gs-max="${s}">${e}</select>`;const n=t.editable&&t.range&&e.length>0,i=n?GSID.next:null,a=n?k`<datalist id="${i}">${e}</datalist>`:'';return k`<input name="year" 
      type="number" 
      list="${M(i)}"
      class="year ${t.cssYear}" 
      @change="${t.#li}" 
      min="${r}" 
      max="${s}"
      value="${t.#Xn.getFullYear()}">
      ${a}`}#oi(t,e=0,r=0){const s=this;let n=e;for(;n<=r;)s.editable?t.push(k`<option value="${n}" selected=${M(n==s.year||void 0)}>`):t.push(k`<option value="${n}" selected=${M(n==s.year||void 0)}>${n}</option>`),n++;return t}#si(t){if(GSEvents.prevent(t),!t.target.classList.contains('day'))return;const e=this,r=h.asNum(t.target.dataset.day,e.day);e.#_r.day=1,e.#_r.month=e.month,e.#_r.year=e.year,e.#_r.day=r,e.day=r}#ai(t){this.month=t.target.selectedIndex}#li(t){const e=t?.target;e?.validity.valid&&(this.year=e.value)}#ri(t){}static{this.define('gs-calendar')}}class GSCardElement extends gt{static styles=T`.card-header, .card-footer{ background-color: inherit; color: inherit;}`;static properties={imageStyle:{type:Object,attribute:'image-style',reflect:!0},overlay:{type:Boolean},placement:{...lt},align:{...lt},image:{},title:{},subtitle:{},text:{},footer:{},header:{},colorText:{attribute:'color-text'},colorBack:{attribute:'color-back'},colorBorder:{attribute:'color-border'},cssTitle:{attribute:'css-title'},cssSubtitle:{attribute:'css-subtitle'},cssText:{attribute:'css-text'},cssFooter:{attribute:'css-footer'},cssHeader:{attribute:'css-header'},cssBody:{attribute:'css-body'},cssImage:{attribute:'css-image'}};#ci=GSID.id;constructor(){super(),this.border=!1,this.shadow=!1,this.align='start',this.placement='top',this.imageStyle=this.imageStyle||{},this.dynamicStyle(this.#ci)}renderUI(){const t=this,e=t.isVertical?t.#di():t.#ui();return k`<div  dir="${M(t.direction)}" class="card ${x(t.renderClass())}">${e}</div>`}#di(){const t=this;return[t.#hi,t.#pi,t.#mi,t.#gi,t.#fi]}#ui(){const t=this,e=PlacementTypes.isBefore(t.placement),r=e?'col-4':'col-8',s=e?'col-8':'col-4',n=e?t.#Si:t.#mi,i=e?t.#mi:t.#Si;return k`<div class="row g-0">
        <div class="${r}">
            ${n}
        </div>
        <div class="${s}">
          ${i}
        </div>
      </div>`}renderClass(){const t=this;return{...super.renderClass(),border:t.border||t.colorBorder,[`text-${t.align}`]:t.align,[`text-${t.colorText}`]:t.colorText,[`bg-${t.colorBack}`]:t.colorBack,[`border-${t.colorBorder}`]:t.colorBorder}}get isVertical(){return PlacementTypes.isVertical(this.placement)}get isHorizontal(){return PlacementTypes.isHorizontal(this.placement)}get#mi(){const t=this;return k`<div class="${t.overlay?'card-img-overlay':'card-body'} ${t.cssBody}">
      <h5 class="card-title  ${t.cssTitle}"><slot name="title">${t.translate(t.title)}</slot></h5>
      <h6 class="card-subtitle  ${t.cssSubtitle}"><slot name="subtitle">${t.translate(t.subtitle)}</slot></h6>
      <p class="card-text ${t.cssText}"><slot name="text">${t.translate(t.text)}</slot></p>
      <slot name="body"></slot>
    </div>    
    `}get#pi(){return this.overlay?'':k`<div class="card-header  ${this.cssHeader}"><slot name="header">${this.header}</slot></div>`}get#gi(){return this.overlay?'':k`<div class="card-footer ${this.cssFooter}"><slot name="footer">${this.footer}</slot></div>`}get#yi(){return k`<slot name="image"></slot>`}get#bi(){const t=this,e=t.isHorizontal?'img-fluid':'card-img';return t.dynamicStyle(t.#ci,t.imageStyle),k`<img src="${t.image}" class="rounded-${t.placement} ${e} ${t.cssImage} ${t.#ci}" alt="...">`}get#Si(){return this.image?this.#bi:this.#yi}get#hi(){return'top'===this.placement?this.#Si:''}get#fi(){return'bottom'===this.placement?this.#Si:''}static{this.define('gs-card')}}class GSCenterElement extends gt{constructor(){super()}renderUI(){const t=this;return k`<div  dir="${M(t.direction)}"
      class="position-absolute top-50 start-50 translate-middle ${x(t.renderClass())}">
    ${t.renderTemplate()}<slot></slot></div>`}static{this.define('gs-center')}}class GSMenuElement extends gt{static properties={storage:{},auto:{type:Boolean,reflect:!0},opened:{type:Boolean,reflect:!0},dark:{type:Boolean},reverse:{type:Boolean},offset:{type:Number},data:{type:Array}};static options={name:{},title:{},header:{},color:{},icon:{},url:{default:'#'}};#vi=D();#ci=GSID.id;#Gi=null;constructor(){super();const t=this;t.offset=0,t.dynamicStyle(t.#ci),t.data=t.#er(t),t.#Gi=new GroupController(this)}onBusEvent(t){t.detail.owner!=this&&(this.opened=!1)}willUpdate(t){super.willUpdate(t),t.has('opened')&&!this.opened&&this.#Ci()}updated(){this.#Ei(),this.opened&&this.#Gi.notify()}renderUI(){const t=this;return k`<ul 
            ${R(t.#vi)}
            dir="${M(t.direction)}"
            class="dropdown-menu ${x(t.renderClass())}"
            data-gs-class="${t.#ci}"
            data-menu="true"
            @mouseover="${t.#qn}"
            @mouseleave="${t.#wi}"
            @keydown="${t.#U}"
            @click="${t.#Tn}">
            ${t.#$i(t.data)}
        </ul>`}renderClass(){const t=this;return{...super.renderClass(),submenu:t.dataset.submenu,'dropdown-menu-dark':t.dark,[t.#ci]:!0,show:t.opened,dropend:!t.reverse,dropstart:t.reverse}}close(){this.opened=!1}open(){this.opened=!0}toggle(){this.opened=!this.opened}popup(t=0,e=0,r){const s=this,n=h.asNum(s.offset,0);if(GSEvents.isMouseOrPointerEvent(t)){const r=t;r.target,e=r.clientY,t=r.clientX;let n=GSDOM.offsetParent(s);n=n?n.getBoundingClientRect():null,t-=n?.left||0,e-=n?.top||0}const i=t-n,a=e-n;requestAnimationFrame((()=>{const t={position:'fixed',top:'0px',left:'0px',translate:`${i}px ${a}px`},e=s.dynamicStyle(s.#ci);Object.assign(e.style,t)})),s.open()}onDataRead(t){this.data=t}#$i(t){const e=this;return t.map((t=>e.#xi(t)))}#xi(t){const e=this;return t.items?.length>0?e.#Di(t):t.header||t.name?t.header?e.#Ti(t):e.#Ai(t):e.#ki()}#Ti(t){return k`<li data-inert="true"><h6 class="dropdown-header">${this.#Kn(t)}${t.header}</h6></li>`}#ki(){return k`<li data-inert="true"><hr class="dropdown-divider"></li>`}#Di(t){const e=this;return k`<li>
            <a class="dropdown-item dropdown-toggle" data-toggle="true" href="#">
                <div class="d-inline-block w-100">${e.#Kn(t)}${t.name}</div>
            </a>
            <gs-menu auto 
                .data=${t.items} 
                ?dark=${e.dark} 
                ?reverse="${e.reverse}" 
                language="${M(e.language)}" 
                data-submenu="true">
            </gs-menu>
        </li>`}#Kn(t){return t.icon?k`<gs-icon css="mx-1" name="${t.icon}"></gs-icon>`:''}#Ai(t){return k`<li>
                <gs-button css="dropdown-item shadow-none" 
                    ${q(t,!1)}
                    url="${t.url}"
                    title="${t.name}" 
                    language="${M(this.language)}" 
                    icon="${M(t.icon)}" 
                    text="${M(t.color)}"
                    data-gs-target="${M(t.target||'self')}"
                    data-gs-action="${M(t.action)}">
                </gs-button></li>`}#er(t){return GSItem.collect(t).map((t=>GSAttr.proxify(t,GSMenuElement.options)))}#Ci(t){GSDOM.queryAll(this.renderRoot,'gs-menu',!1,!1).filter((e=>e!=t)).forEach((t=>t.close()))}#U(t){const e=this;if('Escape'===t.key)e.close()}#Tn(t){GSEvents.prevent(t);const e=this,r=e.#Mi(t);r?.close(),e.auto&&e.close()}#wi(t){GSEvents.prevent(t),this.auto&&this.close()}#qn(t){GSEvents.prevent(t);const e=this.#Mi(t);this.#Ci(e),e?.open()}#Mi(t){const e=t.target.closest('li');return e?.querySelector('gs-menu')}#Ei(){const t=this;if(!t.opened)return;const e=t.dynamicStyle(t.#ci);if(t.isSubmenu){const r={translate:'0px -25px'};t.reverse?(r.left='inherited',r.right='100%'):(r.right='inherited',r.left='100%'),Object.assign(e.style,r)}else{e.style.translate=null;const r=t.#Oi.getBoundingClientRect(),s=window.innerWidth-r.right;t.reverse=s-5<0,t.reverse&&(e.style.translate=s-2+'px')}}get isSubmenu(){return this.dataset.submenu}get#Oi(){return this.#vi.value}static{this.define('gs-menu')}}class GSContextElement extends GSMenuElement{static properties={target:{},filter:{},altContext:{type:Boolean,attribute:'altcontext'},disabled:{type:Boolean}};constructor(){super();const t=this;t.auto=!0,t.#Li&&(t.slot='extra',t.target='tbody',t.filter='[selected]',t.offset='4')}connectedCallback(){super.connectedCallback();const t=this;t.attachEvent(window,'resize',t.close.bind(t)),t.slot||t.#Ii()}onSlotInjected(t){this.#Ii()}#Ii(){const t=this,e=GSDOM.parent(t.assignedSlot||t);let r=t.target?GSDOM.queryAll(e,t.target):[e];r.length||(r=GSDOM.queryAll(document.documentElement,t.target)),r.forEach((e=>t.attachEvent(e,'contextmenu',t.#Ni.bind(t))))}#Ri(t){const e=this;return t.composedPath().filter((t=>t.matches)).filter((t=>t.matches(e.filter?e.filter:e.target)))}#Ni(t){const e=this;if(t.shiftKey&&e.altContext)return;return 0!==e.#Ri(t).length?(GSEvents.prevent(t),e.popup(t),!0):void 0}get#Li(){return'GS-TABLE'===this.parentComponent?.tagName}popup(t=0,e=0,r){return!this.disabled&&super.popup(t,e,r)}static{this.define('gs-context')}}class GSCompareElement extends gt{static styles=T`.slider {
         --gs-position : 50%;
          left : var(--gs-position);
          width: 8px;
          height: 100%;
          border-width: 1px;
          cursor: w-resize;
          border-color: darkgray;
          border-style: solid;
          background-color: lightgray;
      }
      .clipper {
        --gs-position : 50%;
        clip-path: inset(0px var(--gs-position) 0px 0px);
      }
    `;static properties={background:{...tt},width:{type:Number},height:{type:Number},before:{hasChanged:notEmpty},after:{hasChanged:notEmpty}};#ci=GSID.id;#Ui=D();#Fi=D();#Bi=D();#Hi;#Pi;constructor(){super();const t=this;t.width=0,t.height=0,t.dynamicStyle(t.#ci),t.#Hi=new ElementMoveController(t)}firstUpdated(t){this.#Hi.attach(this.#zi),super.firstUpdated(t)}willUpdate(t){super.willUpdate(t);const e=this,r=e.#ts;r.width=e.width>0?`${e.width}px`:'',r.height=e.height>0?`${e.height}px`:''}renderUI(){const t=this;return k`<div ${R(t.#Ui)} 
         dir="${M(t.direction)}"
         @loaded="${t.#ji}" 
         @dblclick="${t.#qi}"
         data-gs-class="${t.#ci}"
         class="${x(t.renderClass())}">
      <div class="overflow-hidden position-absolute top-0 start-0 overflow-hidden"><slot name="before">${t.#Vi}</slot></div>
      <div ${R(t.#Fi)} class="overflow-hidden position-absolute top-0 start-0 overflow-hidden clipper"><slot name="after">${t.#_i}</slot></div>
      <div ${R(t.#Bi)} class="slider position-absolute top-0><slot name="control"></slot></div>
    </div>`}renderClass(){const t=this;return{...super.renderClass(),'position-relative':!0,'user-select-none':!0,'d-contents':t.isAuto,'h-100':t.isAuto,'w-100':t.isAuto,'overflow-hidden':!0,[`bg-${t.background}`]:t.background,[`${t.#ci}`]:!0}}onStartMove(t){this.#Pi=this.#zi.getBoundingClientRect()}onMouseMove(t){const e=this,r=e.#Pi.left,s=e.#Pi.width,n=h.range(t.clientX-r,0,s)/s*100;e.#Qn(n)}get isAuto(){return 0==this.width||0==this.height}get isFixed(){return!this.isAuto}get#ts(){return this.dynamicStyle(this.#ci).style}get#Vi(){return this.before?k`<img @load="${this.#ji}" src="${me.before}"></img>`:''}get#_i(){return this.after?k`<img @load="${this.#ji}" src="${me.after}"></img>`:''}get#Wi(){return 0===this.width||0===this.height}get#zi(){return this.#Ui.value}get#Yi(){return this.#Bi.value}get#Ji(){return this.#Fi.value}#ji(t){const e=this;if(e.#Wi){const r=t.target;e.height=e.height||r.height,e.width=e.width||r.width}}#qi(t){const e=this;e.prevent(t),e.#Qn(),e.#Hi.reset()}#Qn(t=50){this.#Ji.style.setProperty('--gs-position',100-t+'%'),this.#Yi.style.setProperty('--gs-position',`${t}%`)}static{this.define('gs-compare')}}class GSControllerElement extends gt{static properties={module:{},controller:{}};#Ki=!1;constructor(){super()}updated(t){super.updated(t);const e=this;e.isConnected&&e.isValid&&e.#Xi()}get isValid(){return this.parentElement instanceof gt}async#Xi(){const t=this,e=t.parentElement;if(t.#Ki)return;let r=globalThis[t.controller];if(!r&&t.module){const e=GSLoader.normalizeURL(t.module);r=(await import(e))[t.controller]}r&&(new r(e),t.#Ki=r,globalThis[t.controller]=r)}static{this.define('gs-controller')}}class GSCopyrightElement extends gt{static properties={year:{reflect:!0,type:Number},company:{reflect:!0},url:{reflect:!0}};constructor(){super(),this.flat=!0,this.css='fixed-bottom d-flex justify-content-center align-items-center mt-1 p-2 text-muted'}renderUI(){const t=this;if(!t.isCompany||!t.isYear)return'';const e=(new Date).getFullYear();return k`<div  dir="${M(t.direction)}" class="${x(t.renderClass())}"><a target="_blank" href="${t.url?t.url:'#'}"><small>&copy; ${t.company} ${t.year}. - ${e}.</small></a></div>`}get isCompany(){return h.isStringNonEmpty(this.company)}get isYear(){return h.isStringNonEmpty(this.year)}static{this.define('gs-copyright')}}class GSDataHandler extends gt{static properties={storage:{state:!0},src:{reflect:!0},action:{reflect:!0},mode:{reflect:!0},reader:{reflect:!0},writer:{reflect:!0},limit:{type:Number,reflect:!0},skip:{type:Number,reflect:!0},filter:{type:Array,reflect:!0},sort:{type:Array,reflect:!0},type:{},autoload:{type:Boolean},autorefresh:{type:Number,reflect:!0,hasChanged:numGT0}};#W=0;#Qi=null;#Zi=null;#ta=null;#ea=null;constructor(){super();const t=this;if(t.storage=t.storage||t.id,t.autorefresh=0,t.autoload=!1,t.flat=!0,t.filter=[],t.sort=[],t.limit=0,t.skip=0,t.src='',t.type='remote',t.mode='query',t.reader='GET',t.writer='POST',t.#Li&&(t.slot='extra'),!t.isGenerated&&!t.id)throw new Error('Element ID is required attribute!');GSItem.validate(t,t.tagName)}connectedCallback(){super.connectedCallback();const t=this;t.storage=t.storage||t.id;const e=t.isGenerated&&0===t.childElementCount?t.parentComponent:t;t.#Qi=GSItem.proxify(e,GSData.PROPERTIES),t.#ra(!0),t.#ra(!1)}disconnectedCallback(){super.disconnectedCallback();const t=this;t.#Zi?.disable(),t.#Zi?.removeProcessor(t),t.#ta=null,t.#ea=null,clearTimeout(t.#W)}firstUpdated(){const t=this;t.#Zi=v.newHandler(t.type,t.storage,!1),t.#Qi?.length>0&&t.#Zi?.addProcessor(t),t.#sa(!0)}willUpdate(t){super.willUpdate(t);const e=this;e.#sa(),t.has('autorefresh')&&e.schedule(e.autorefresh)}#sa(t=!1){const e=this;e.#Zi&&(e.#Zi.src=e.src,e.#Zi.key=e.key,e.#Zi.mode=e.mode,e.#Zi.action=e.action,e.#Zi.reader=e.reader,e.#Zi.writer=e.writer,e.#Zi.limit=e.limit,e.#Zi.skip=e.skip,e.#Zi.sort=e.formatSort(e.sort),e.#Zi.filter=e.formatFilter(e.filter),e.autoload&&e.read(),t&&(e.#Zi.enable(),e.autoload&&e.dataController?.read()))}get isDebug(){return this.dataset.gsDebug}get handler(){return this.#Zi}get isRegistered(){return!0===this.#Zi?.isRegistered}get isOffline(){return this.#Zi?.isOffline}get isCached(){return'cached'==this.#Zi?.type}set search(t){this.#Zi&&(this.#Zi.search=t)}get key(){return this.#Qi.filter((t=>t.key)).map((t=>t.name)).pop()||null}formatFilter(t){return t=this.#na(t),Array.isArray(t)?t:[]}formatSort(t){let e;if('string'==typeof(t=this.#na(t)))e=[{col:t}];else if(Array.isArray(t))e=t;else if(h.isNumber(t)){const r=Math.abs(t);e=new Array(r),e[r-1]={ord:t}}return e||[]}schedule(t=0){const e=this;t=1e3*h.asNum(t),clearInterval(e.#W),t>0&&(e.#W=setInterval((()=>{e.read(e)}),t))}read(){return this.#ta()}write(t,e=!1){return this.#ea(t,e)}load(){return this.read()}save(t){return this.write(t)}get selected(){return this.#Zi?.selected}addSelected(t){return this.#Zi?.addSelected(t)}removeSelected(t){return this.#Zi?.removeSelected(t)}clearSelected(t){return this.#Zi?.clearSelected()}onDataRead(t){this.isDebug&&GSLog.log(this,'Data Read: '+JSON.stringify(t))}onDataWrite(t){this.isDebug&&GSLog.log(this,'Data write: '+JSON.stringify(t))}postRead(t){const e=this;Array.isArray(t)||(t=[t]),t.forEach((t=>{e.#Qi.forEach((e=>{let r=t[e.name];h.isNull(r)||(r=GSData.format(e,r),t[e.name]=r)}))}))}onDataError(t){this.isDebug&&GSLog.log(this,'Data error: '+JSON.stringify(t))}#ia(){if(!this.isOffline&&!this.isRegistered)throw new Error('Data handler not initialized!')}#ra(t=!0){const e=this;t?e.#ta=p.callOnceLifo(e.#aa,e):e.#ea=p.callOnceLifo(e.#oa,e)}#aa(){return this.#ra(!0),this.#la(!0)}#oa(t,e){return this.#ra(!1),this.#la(!1,t,e)}#la(t=!0,e,r){const s=this;return s.#ia(),t?s.#Zi?.read(s):(r||s.#Zi.clear(),s.#Zi?.write(s,e))}#na(t){return h.isJsonString(t)?JSON.parse(t):t}get#Li(){return'GS-TABLE'===this.parentComponent?.tagName}static{this.define('gs-data-handler')}}class GSDialogElement extends gt{static CSS='rounded shadow-sm';static HEADER_CSS='p-3';static TITLE_CSS='fs-5 fw-bold text-muted';static ALIGN='end';static CANCEL='Cancel';static CONFIRM='Ok';static#ca=[];static styles=T`dialog {
      --bs-modal-width: 500px;
      width:var(--bs-modal-width);
      outline:none;
    }
    dialog::backdrop {
      backdrop-filter: blur(4px);
      backdrop-filter: blur(var(--gs-backdrop-blur));      
      background-color: var(--gs-backdrop-color);
      display: var(--gs-backdrop-display);
    }`;static properties={standard:{reflect:!0,type:Boolean},opened:{reflect:!0,type:Boolean},cancelable:{reflect:!0,type:Boolean},closable:{reflect:!0,type:Boolean},escapable:{reflect:!0,type:Boolean},disabled:{reflect:!0,type:Boolean},size:pt,title:{reflect:!0},message:{reflect:!0},cancelText:{reflect:!0,attribute:'text-cancel'},confirmText:{reflect:!0,attribute:'text-confirm'},minWidth:{reflect:!0,type:Number,attribute:'min-width'},buttonAlign:{reflect:!0,attribute:'button-align'},iconCancel:{reflect:!0,attribute:'icon-cancel'},iconConfirm:{reflect:!0,attribute:'icon-confirm'},colorCancel:{attribute:'color-cancel'},colorConfirm:{attribute:'color-confirm'},cssCancel:{attribute:'css-cancel'},cssConfirm:{attribute:'css-confirm'},cssTitle:{attribute:'css-title'},cssHeader:{attribute:'css-header'},cssFooter:{attribute:'css-footer'},cssBody:{attribute:'css-body'},cssContent:{attribute:'css-content'}};#da=!1;#ci=GSID.id;#ua=D();#ha=D();#pa=D();constructor(){super();const t=this,e=GSDialogElement;t.opened=!1,t.standard=!1,t.cancelable=!1,t.closable=!1,t.escapable=!1,t.disabled=!1,t.shadow=!1,t.rounded=!1,t.minWidth=0,t.css=e.CSS,t.cssTitle=e.TITLE_CSS,t.cssHeader=e.HEADER_CSS,t.buttonAlign=e.ALIGN,t.cancelText=e.CANCEL,t.confirmText=e.CONFIRM,t.colorCancel='secondary',t.colorConfirm='primary',t.dynamicStyle(t.#ci)}disconnectedCallback(){super.disconnectedCallback(),GSDialogElement.#ma()}firstUpdated(){super.firstUpdated(),this.#da=!0}shouldUpdate(t){const e=this,r=!0===e.opened||e.#da;return r||h.timeout(1e3).then((()=>{queueMicrotask((()=>{!0===e.opened||e.#da||(e.#da=!0,e.isConnected&&e.requestUpdate())}))})),r}updated(t){super.updated(t),t.has('opened')&&this.#ga()}#ga(){const t=this;let e=null;t.opened?(GSDialogElement.#ca.push(t),e='opening',t.standard?t.#fa?.open():t.#fa?.showModal(),t.#Sa()?.focus()):(e='closing',t.isHashed&&(location.hash=''),GSDialogElement.#ca.pop(),t.#fa?.close());!1!==(t.opened?t.afterOpen():t.afterClose())&&t.notify(!0,!1,e)}addController(t){t.isDialog&&this[n]?.add(t),super.addController?.(t)}afterOpen(){const t=this;return t[n]?.forEach((e=>e.afterOpen?.(t))),t.emit('open',null,!1,!1,!0)}afterClose(){const t=this;return t[n]?.forEach((e=>e.afterClose?.(t))),t.emit('close',null,!1,!1,!0)}#ya(){const t=this;return t.closable?k`<gs-button type="button"
      ${R(t.#ha)} 
      @click="${t.#ba.bind(t)}" 
      icon="${M(t.iconConfirm)}"
      language="${M(t.language)}"
      .disabled="${t.disabled}"  
      css="${M(t.cssConfirm)}" 
      color="${M(t.colorConfirm)}" 
      title="${t.confirmText}">
      </gs-button>`:''}#va(){const t=this;return t.cancelable?k`<gs-button type="button"
      ${R(t.#pa)}      
      @click="${t.#Ga.bind(t)}" 
      icon="${M(t.iconCancel)}"
      language="${M(t.language)}"
      css="${M(t.cssCancel)}" 
      color="${M(t.colorCancel)}" 
      title="${t.cancelText}">
      </gs-button>`:''}#Ca(){const t=this;return t.cancelable||t.closable?k`<div class="card-footer d-flex user-select-none justify-content-${t.buttonAlign} ${t.cssFooter}">
       <slot name="actions"></slot>
      ${t.#va()} &nbsp;${t.#ya()}
      </div>`:''}#Ea(){const t=this,e={card:!0,[`p-${t.padding}`]:t.padding>=0,[`m-${t.margin}`]:t.margin>=0};return t.cssContent?.match(/[^ ]+/g).forEach((t=>e[t]=!0)),e}renderClass(){const t=this,e=ht[t.size];return{dialog:!0,'p-0':!0,border:t.bordered,'border-0':!t.bordered,'shadow-sm':t.shadow,rounded:t.rounded,[t.#ci]:!0,[`modal-${e}`]:!!e}}renderUI(){const t=this,e={'min-width':t.minWidth>0?`${t.minWidth}px`:void 0};return t.dynamicStyle(t.#ci,e),k`
        <dialog closedby="none" tabindex="-1" ${R(t.#ua)} 
            dir="${M(t.direction)}"
            @close="${t.#wa.bind(t)}"
            @cancel="${t.#$a.bind(t)}"
            @keydown="${t.#U.bind(t)}"
            @formsubmit="${t.#ba.bind(t)}"
            @submit="${t.#ba.bind(t)}"
            @validation="${t.#xa.bind(t)}"
            class="${x(t.renderClass())}">
            <div class="${x(t.#Ea())}">
                <div class="card-header user-select-none ${t.cssHeader}">
                  <div class="card-title ${t.cssTitle}">
                    <slot name="title">${t.translate(t.title)}</slot>
                  </div>
                </div>
                <div class="card-body ${t.cssBody}">
                  <slot name="body">
                  ${t.translate(t.message)}
                  ${t.renderTemplate()}
                  </slot>
                  </div>
                  ${t.#Ca()}
                  </div>
                  <slot name="extra"></slot>
                  <div class="toast-container position-fixed"></slot></div>
                  </dialog>
                  `}info(t='',e='',r=!1,s=!1){const n=this;if(n.title=t,n.message=e,n.closable=r,n.cancelable=s,n.escapable=s,n.open(),r||s)return n.waitEvent('close')}confirm(t='',e=''){return this.info(t,e,!0,!1)}prompt(t='',e=''){return this.info(t,e,!0,!0)}reset(t,e=0){e=h.asNum(e,0);this.forms?.forEach?.((e=>{e.data=t}));const r=this.tab;r&&e>-1&&(r.index=e)}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}async waitClose(){return this.waitEvent('close')}get isHashed(){return h.asBool(this.dataset.gsHashed)}get form(){return this.query('gs-form',!0,!0)}get forms(){return this.queryAll('gs-form',!0,!0)}get tab(){return this.query('gs-tab-group',!0,!0)}get#fa(){return this.#ua.value}get#Da(){return this.#ha.value}get#Ta(){return this.#pa.value}#Sa(){const t=this,e=t.queryAll(GSDOM.QUERY_INPUT,!0).filter((t=>GSDOM.isVisible(t))).shift();return e||(t.cancelable?t.#Ta:t.closable?t.#Da:t)}#wa(t){this.close()}#$a(t){const e=this.forms;if(e){if(e.map((t=>t.isValid)).filter((t=>!1===t)).length>0)return GSEvents.prevent(t)}this.close()}#ba(t){this.disabled||this.#fa?.requestClose()}#Ga(t){this.close()}#U(t){const e=this;'Escape'===t.key&&(GSEvents.prevent(t),(e.cancelable||e.escapable)&&e.close())}#xa(t){this.#Da.disabled=!1===t.detail.valid}static#ma(){GSDialogElement.#ca=GSDialogElement.#ca.filter((t=>t.isConnected))}static get size(){return GSDialogElement.#ca.length}static get top(){GSDialogElement.#ma();const t=GSDialogElement.size;return 0===t?null:GSDialogElement.#ca[t-1]}static get opened(){return GSDialogElement.#ma(),Array.from(GSDialogElement.#ca)}static{this.define('gs-dialog')}}class GSDrawerElement extends gt{static properties={autoclose:{reflect:!0,type:Boolean},closable:{reflect:!0,type:Boolean},backdrop:{reflect:!0,type:Boolean},expanded:{reflect:!0,type:Boolean},scroll:{reflect:!0,type:Boolean},min:{reflect:!0,type:Number},max:{reflect:!0},fingers:{reflect:!0,type:Number},placement:{...lt},transition:{reflect:!0},duration:{reflect:!0,type:Number},title:{reflect:!0},cssTitle:{reflect:!0,attribute:'css-title'},cssHead:{reflect:!0,attribute:'css-head'},cssBody:{reflect:!0,attribute:'css-body'}};constructor(){super();const t=this;t.placement='start',t.cssTitle='fs-5',t.transition='linear',t.duration=.2,t.min=0,t.max='auto',t.fingers=2,t.on('mouseleave',t.#Aa.bind(t)),t.on('mouseenter',t.#ka.bind(t))}renderUI(){const t=this;return k`${P(t.#Ma)}
    <div tabindex="-1" dir="${M(t.direction)}"
     class="offcanvas overflow-hidden anime ${x(t.renderClass())}">
      ${t.#pi}
      <div class="offcanvas-body  ${t.cssBody}">
        ${t.renderTemplate()}
        <slot name="body"></slot>
      </div>
    </div>${t.#Oa}`}renderClass(){const t=this;return{...super.renderClass(),show:!0,'anime-open':t.expanded,'anime-close':!t.expanded,[`offcanvas-${t.placement}`]:t.placement}}get#Ma(){const t=this,e=t.isHorizontal?'width':'height';return`<style>\n    .anime {\n      transition-property: ${e} !important;\n      transition-duration: ${t.duration}s  !important;\n      transition-timing-function: ${t.transition} !important;\n    }\n    .anime-open {\n        ${e} : ${t.max}${h.isNumber(t.max)?'px':''} !important;\n    }\n    .anime-close {\n      ${e} : ${t.min}${h.isNumber(t.min)?'px':''} !important;\n    }    \n    </style>`}get#Oa(){const t=this;return t.backdrop?k`<div class="offcanvas-backdrop fade ${t.expanded?'show':'invisible'}" @click="${t.close}"></div>`:''}get#Bn(){return this.closable?k`<button type="button" class="btn-close text-reset" @click="${this.close}"></button>`:''}get#Yn(){const t=this;return t.title?k`<div class="offcanvas-title ${t.cssTitle}">${t.translate(t.title)}</div>`:''}get#pi(){const t=this;return t.#La?k`<div class="offcanvas-header ${t.cssHead}"><slot name="header">${t.#Yn}${t.#Bn}</slot></div>`:''}get#Ia(){return this.querySelector('[slot="header"]',!1,!0)}get#La(){return this.title||this.closable||this.#Ia}#$s(t){this.expanded=1==t,this.notify()}#Aa(){this.autoclose&&this.close()}#ka(){this.min>0&&this.open()}open(){this.#$s(!0)}close(){this.#$s(!1)}toggle(){this.#$s(!this.expanded)}get isHorizontal(){return!this.isVertical}get isVertical(){return PlacementTypes.isVertical(this.placement)}static{this.define('gs-drawer')}}class GSDropdownElement extends GSMenuElement{static properties={icon:{},text:{...tt},color:{...tt},size:{},title:{},tooltip:{},group:{},simple:{type:Boolean}};constructor(){super(),this.auto=!0}renderUI(){return k`<div class="dropdown"  dir="${M(this.direction)}">
                ${this.#Na()}
                ${super.renderUI()}
            </div>`}#Ra(){const t=this;return{...super.renderClass(),btn:!0,[`btn-${t.color}`]:!!t.color,'dropdown-toggle':!t.simple,'shadow-none':!0}}#Na(){const t=this;return k`<gs-link css="${V(t.#Ra())}"
            url="#"         
            icon="${M(t.icon)}"
            text="${M(t.text)}"
            size="${M(t.size)}"
            title="${M(t.title)}"
            tooltip="${M(t.tooltip)}"
            @notify="${t.toggle}">
            </gs-link>`}static{this.define('gs-dropdown')}}class GSEmailElement extends gt{static shadowRootOptions={mode:'closed'};static style=T`.e-mail:before {
    content: attr(data-website) "\0040" attr(data-user);
    unicode-bidi: bidi-override;
    direction: rtl;
    }`;static properties={user:{reflect:!0},domain:{reflect:!0},dev:{type:Boolean}};#Ua;#Fa;constructor(){super()}willUpdate(t){super.willUpdate(t),this.#Ba(),this.#Ha()}renderUI(){return k`${P(this.#Ma)}<a @click="${this.#Tn}" class="e-mail" data-user="${this.#Ua}" data-website="${this.#Fa}"  href="mailto://"></a>`}get#Ma(){return'<style>.e-mail:before { content: attr(data-website) "@" attr(data-user); unicode-bidi: bidi-override; direction: rtl; }</style>'}get#Fe(){return`mailto://${h.reverse(this.dataset.user)}@${h.reverse(this.dataset.domain)}`}#Ba(){const t=this,e=t.dataset;t.user&&(t.#Ua=e.user||h.reverse(t.user),t.dev&&(e.user=t.#Ua),t.user='')}#Ha(){const t=this,e=t.dataset;t.domain&&(t.#Fa=e.domain||h.reverse(t.domain),t.dev&&(e.domain=t.#Fa),t.domain='')}#Tn(t){this.prevent(t),window.location.href=this.#Fe}static{this.define('gs-email')}}class GSFormElement extends gt{static properties={storage:{},data:{type:Object},disabled:{reflect:!0,type:Boolean},url:{reflect:!0},name:{reflect:!0},rel:{reflect:!0},acceptCharset:{reflect:!0,attribute:'accept-charset'},autocapitalize:{reflect:!0},autocomplete:{reflect:!0},autocopy:{reflect:!0,type:Boolean},autoselect:{reflect:!0,type:Boolean},autovalidate:{reflect:!0,type:Boolean},autoreport:{reflect:!0,type:Boolean},autosubmit:{reflect:!0,type:Boolean},action:{reflect:!0},enctype:{reflect:!0},method:{reflect:!0},novalidate:{reflect:!0,type:Boolean},target:{reflect:!0},block:{reflect:!0,type:Boolean},beep:{reflect:!0,type:Boolean},timeout:{reflect:!0,type:Number}};#Pa=D();#za=void 0;constructor(){super();const t=this;t.data={},t.disabled=!1,t.autocopy=!1,t.autoselect=!1,t.autovalidate=!1,t.autoreport=!1,t.autosubmit=!1,t.block=!1,t.beep=!1,t.timeout=0,t.method='dialog'}renderUI(){const t=this;return k`<form is="gs-ext-form"
      ${R(t.#Pa)}
      id="${M(t.name)}"
      name="${M(t.name)}"
      dir="${M(t.direction)}"
      class="${x(t.renderClass())}"
      
      @submit="${t.submit}"
      @reset="${t.reset}"
      @change="${t.formChange}"
      @validation="${t.formValidation}"
      @enabled="${t.formEnabled}"
      @disabled="${t.formDisabled}"
      
      method="${t.method}"      
      url="${M(t.url)}"
      
      rel="${M(t.rel)}"
      acceptCharset="${M(t.acceptCharset)}"
      autocapitalize="${M(t.autocapitalize)}"
      autocomplete="${M(t.autocomplete)}"
      action="${M(t.action)}"
      enctype="${M(t.enctype)}"
      target="${M(t.target)}"

      .beep="${t.beep}"
      .block="${t.block}"
      .disabled="${t.disabled}"
      .autocopy="${t.autocopy}"
      .autoselect="${t.autoselect}"
      .autovalidate="${t.autovalidate}"
      .autoreport="${t.autoreport}"
      .autosubmit="${t.autosubmit}"

      ?novalidate="${t.novalidate}">
      ${H(t.#ja)}
      <slot></slot>
    </form>`}firstUpdated(t){super.firstUpdated(t);this.dataController?.read()}updated(t){const e=this;t.has('data')&&(h.isNull(e.data)?e.form?.reset():e.asJSON=Object.assign(e.asJSON,e.data))}templateInjected(){}async reset(t){const e=this;return e.data={},await(e.dataController?.read(e.asJSON)),e.formReset(t)}async submit(t){GSEvents.prevent(t,!0,!1,!1);const e=this;if(!e.disabled&&e.isValid)return await(e.dataController?.write(e.asJSON)),e.formSubmit(t)}formValidation(t){const e=this;e[n]?.forEach((t=>t.formValidation?.(e))),e.emit('validation',t?.detail,!0,!0)}formEnabled(t){const e=this;e[n]?.forEach((t=>t.formEnabled?.(e))),e.emit('enabled',t?.detail,!0,!0)}formDisabled(t){const e=this;e[n]?.forEach((t=>t.formDisabled?.(e))),e.emit('disabled',t?.detail,!0,!0)}formChange(t){const e=this;e[n]?.forEach((t=>t.formChange?.(e))),e.emit('formchange',t?.detail,!0,!0)}formSubmit(t){const e=this;return e[n]?.forEach((t=>t.formSubmit?.(e))),e.emit('formsubmit',t?.detail,!0,!0,!0)}formReset(t){const e=this;e[n]?.forEach((t=>t.formReset?.(e))),e.emit('formreset',t?.detail,!0,!0)}addController(t){t.isForm&&this[n]?.add(t),super.addController?.(t)}removeController(t){this[n]?.delete(t),super.removeController?.(t)}get submitButton(){return this.form?.submitButton}get resetButton(){return this.form?.resetButton}get form(){return this.#Pa.value}get elements(){return this.form?.elements||[]}get fields(){return this.form?.fields||[]}get inputs(){return this.form?.inputs||[]}get invalid(){return this.form?.invalid}get isValid(){return this.form?.isValid}get asJSON(){return this.form?.asJSON||{}}set asJSON(t){const e=this;e.form&&(e.form.asJSON=t)}field(t){return this.form?.field(t)}checkValidity(){return this.form?.checkValidity()}reportValidity(){return this.form?.reportValidity()}onDataRead(t){const e=this;Array.isArray(t)?t.forEach((t=>e.asJSON=t)):e.asJSON=t}onDataWrite(t){}onDataError(t){GSLog.error(this,t)}get#ja(){const t=this.firstElementChild;return GSDOM.isTemplateElement(t)?t:this.templateRef}static{this.define('gs-form')}}class GSFormGroupElement extends gt{static CSS_LABEL_CELL='col-md-4 col-sm-4 col-xs-2';static CSS_LABEL='user-select-none fw-small fw-light text-secondary';static CSS_ICON='text-primary me-2 fs-5';static ICON='info-circle-fill';static formAssociated=!0;static#qa={name:{},value:{},selected:{type:Boolean}};static properties={icon:{reflect:!0},layout:{reflect:!0},placement:{reflect:!0},label:{reflect:!0},description:{reflect:!0},placeholder:{reflect:!0},pattern:{reflect:!0},mask:{reflect:!0},form:{reflect:!0},wrap:{reflect:!0},spellcheck:{reflect:!0},type:{reflect:!0,...nt},name:{reflect:!0},list:{reflect:!0},accept:{reflect:!0},value:{noAccessor:!0},values:{},lang:{reflect:!0},title:{reflect:!0},rows:{type:Number,reflect:!0,hasChanged:numGT0},cols:{type:Number,reflect:!0,hasChanged:numGT0},step:{type:Number,reflect:!0,hasChanged:numGT0},min:{type:Number,reflect:!0,hasChanged:numGE0},max:{type:Number,reflect:!0,hasChanged:numGT0},minLength:{type:Number,reflect:!0,hasChanged:numGE0},maxLength:{type:Number,reflect:!0,hasChanged:numGT0},reverse:{reflect:!0,type:Boolean},selectable:{reflect:!0,type:Boolean},toggling:{reflect:!0,type:Boolean},autoid:{type:Boolean,reflect:!0},autocopy:{type:Boolean,reflect:!0},autoselect:{type:Boolean,reflect:!0},autocapitalize:{...W,reflect:!0},autocorrect:{...X,reflect:!0},autocomplete:{reflect:!0},autofocus:{type:Boolean,reflect:!0},autoselect:{type:Boolean,reflect:!0},autovalidate:{type:Boolean,reflect:!0},autoreport:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},checked:{type:Boolean,reflect:!0},multiple:{type:Boolean,reflect:!0},reveal:{type:Boolean,reflect:!0},readonly:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},invalidMessage:{reflect:!0,attribute:'invalid-message'},cellField:{reflect:!0,attribute:'cell-field'},cellLabel:{reflect:!0,attribute:'cell-label'},cssLabel:{reflect:!0,attribute:'css-label'},cssField:{reflect:!0,attribute:'css-field'},block:{reflect:!0,type:Boolean},beep:{reflect:!0,type:Boolean},timeout:{reflect:!0,type:Number}};#ci=GSID.id;#Va=D();#_a=D();#Wa=[];#ps=[];#Ya=null;constructor(){super(),this.#Ya=this.attachInternals(),this.#Ja(),this.dynamicStyle(this.#ci),this.rows=0,this.cols=0,this.type='text',this.placement='top',this.layout='horizontal',this.invalidMessage='Invalid input',this.icon=GSFormGroupElement.ICON,this.cssLabel=GSFormGroupElement.CSS_LABEL,this.cellLabel=GSFormGroupElement.CSS_LABEL_CELL}connectedCallback(){const t=this,e=t.formComponent;t.layout=GSAttr.get(e,'layout',t.layout),!t.form&&e&&(t.form=e.name),t.selectable?t.#ps=GSItem.proxify(t,GSFormGroupElement.#qa):t.#Wa=GSItem.collect(t).filter((t=>t.dataset.pattern)).map((t=>new RegExp(t.dataset.pattern))),super.connectedCallback()}updated(t){this.emit('input')}renderUI(){const t=this;switch(t.layout){case'floating':return t.#Ka();case'vertical':return t.#di();default:return t.#ui()}}#Ka(){const t=this;return k`
    <div  dir="${M(t.direction)}" class="row ${x(t.renderClass())}">
       <div class="form-floating ${t.#Xa} ${t.#Qa}">
          ${t.#Za()}
          ${t.#to()}
          ${t.#eo()}
       </div>
       ${t.#ro()}
    </div>
    <slot></slot>`}#di(){const t=this;return k`
    <div  dir="${M(t.direction)}" class="row ${x(t.renderClass())}">
      <div class="col-12 text-md-start ${t.cellLabel}">
          ${t.#eo()}
      </div>
       <div class="${t.#Xa} ${t.#Qa}">
          ${t.#Za()}
          ${t.#to()}
       </div>
       ${t.#ro()}   
    </div>      
    <slot></slot>`}#ui(){const t=this;return k`
    <div  dir="${M(t.direction)}" class="row form-group ${x(t.renderClass())}">    
       <slot name="header"></slot>
       ${t.#so()}
       ${t.#no()}
       ${t.#ro()}
       <slot name="footer"></slot>
    </div>
    <slot></slot>`}#eo(){const t=this;return k`<label class="${t.#io} ${t.cssLabel} user-select-none" for="${t.name}">${t.translate(t.label)}</label>`}#so(){return k`<div class=" text-md-end ${this.cellLabel}">${this.#eo()}</div>`}#Kn(){return this.#ao?k`<gs-icon size="5" css="${GSFormGroupElement.CSS_ICON}}" name="${this.icon}"></gs-icon>`:k`<slot name="icon"></slot>`}#oo(){const t=this,e=t.#ao?'@parent':`[name='${t.name}']`;return t.description?k`<gs-tooltip local language="${M(t.language)}" placement="${t.placement}" title="${t.description}" target=${M(e)}></gs-tooltip>`:''}#ro(){const t=this,e=t.#oo();return e&&t.#ao?k`
    <div class="col-auto">
       ${e}
       ${t.#Kn()}
    </div>`:e}#no(){const t=this;return k`
    <div class="${t.#Xa} ${t.#Qa}">
       <slot name="body">${t.#Za()}${t.#to()}</slot>
    </div>`}#to(){const t=this;return t.isRange?k`<span ${R(t.#_a)} class="position-absolute px-1">${t.value}</span>`:''}#Za(){const t=this,e=t.autoid?t.name:void 0,r=t.isFieldset?t.values.split(','):t.value;if(Array.isArray(r)){const e='vertical'===t.dataset.radioLayout;return r.map(((e,r)=>({v:e,id:`${t.name}_${r}`}))).map(((r,s)=>t.#lo(t.name+s,r.v,t.#co(r.id,t.name,r.v),e)))}return t.selectable?t.#do(e,t.name,t.value):t.#uo?t.#ho(e,t.name,t.value):t.#co(e,t.name,t.value)}#lo(t,e,r,s=!1){return s?k`<div class="me-3">${r}<label for="${t}" class="ms-1">${this.translate(e)}</label></div>`:k`<span class="me-3">${r}<label for="${t}" class="ms-1">${this.translate(e)}</label></span>`}#po(){const t=this,e={transform:t.reverse&&t.isRange?'rotateY(180deg)':''};t.dynamicStyle(t.#ci,e)}#mo(t){const e=t.name||t.innerText||t.value;return k`<option ${q(t,!1)} value="${t.value}" ?selected="${t.selected}">${e}</option>`}#go(){const t=this;return t.#ps.map((e=>t.#mo(e)))}#do(t,e,r){const s=this;return s.#po(),k`<select is="gs-ext-select"
            ${R(s.#Va)}
            ${q(s,!1)}

            @change="${s.#fo.bind(s)}"
            @blur="${s.#So.bind(s)}"
        
            name="${e}"             
            form="${M(s.form)}"
            class="${s.#yo} ${s.cssField} ${s.#ci}" 

            ?autofocus="${s.autofocus||s.form?.autofocus}"
            ?autocopy="${s.autocopy||s.form?.autocopy}"
            ?autoselect="${s.autoselect||s.form?.autoselect}"
            ?autovalidate="${s.autovalidate||s.form?.autovalidate}"
            ?autoreport="${s.autoreport||s.form?.autoreport}"

            ?toggling="${s.toggling}"
            ?readonly="${s.readonly}"
            ?required="${s.required}"
            ?disabled="${s.disabled}">
              ${s.#go()}
            </select>`}get#uo(){const t=this;return(t.rows>0||t.cols>0)&&'text'===t.type}get#bo(){const t=this;let e='';if(t.list){const r=t.parentComponent||t.parentElement,s=GSDOM.query(r,`datalist[id="${t.list}"]`,!0,!0);s&&(e=k`${P(s.outerHTML)}`)}return e}get#vo(){return this.block||this.formComponent?.block||!1}get#Go(){return this.beep||this.formComponent?.beep||!1}#Co(){return this.timeout||this.formComponent?.timeout||0}#ho(t,e,r){const s=this;s.#po();const n=s.placeholder?s.translate(s.placeholder,!1):null,i=s.title?s.translate(s.title,!1):null;return k`<textarea is="gs-ext-textarea" 
            ${R(s.#Va)}
            ${q(s,!1)}
            @input="${s.#Eo.bind(s)}"
            @change="${s.#fo.bind(s)}"
            @blur="${s.#So.bind(s)}"
            @invalid="${s.#wo.bind(s)}"
            lang="${M(s.lang)}"
            minlength="${M(s.minLength)}"
            maxlength="${M(s.maxLength)}"
            cols="${s.cols}"
            rows="${s.rows}"

            ?block="${s.#vo}"
            ?beep="${s.#Go}"
            timeout="${s.#Co()}"

            spellcheck="${M(s.spellcheck)}" 
            wrap="${M(s.wrap)}" 
            form="${M(s.form)}" 
            name="${e}" 
            value="${M(r)}"
            placeholder="${M(n)}"
            title="${M(i)}"
    
            class="${s.#yo} ${s.cssField} ${s.#ci}" 

            autocomplete="${M(s.autocomplete)}"
            autocorrect="${M(s.autocorrect)}"
            autocapitalize="${M(s.autocapitalize)}"

            ?autofocus="${s.autofocus||s.form?.autofocus}"
            ?autocopy="${s.autocopy||s.form?.autocopy}"
            ?autoselect="${s.autoselect||s.form?.autoselect}"
            ?autovalidate="${s.autovalidate||s.form?.autovalidate}"
            ?autoreport="${s.autoreport||s.form?.autoreport}"

            ?readonly="${s.readonly}"
            ?required="${s.required}"
            ?disabled="${s.disabled}"      
      ></textarea>`}#co(t,e,r){const s=this,n=s.isSwitch?'checkbox':s.type;let i=s.isRange?s.defaultValue:s.title;i=i?s.translate(s.title,!1):i;const a=s.placeholder?s.translate(s.placeholder,!1):null,o=s.description?s.translate(s.description,!1):null;return s.#po(),k`<input is="gs-ext-input"
            ${R(s.#Va)}
            ${q(s,!1)}

            @input="${s.#Eo.bind(s)}"
            @change="${s.#fo.bind(s)}"
            @blur="${s.#So.bind(s)}"
            @invalid="${s.#wo.bind(s)}"
        
            name="${e}" 
            type="${n}" 
            form="${M(s.form)}"
            value="${M(r)}"
            title="${M(i)}"


            ?block="${s.#vo}"
            ?beep="${s.#Go}"
            timeout="${s.#Co()}"

            class="${s.#yo} ${s.cssField} ${s.mask?'font-monospace':''} ${s.#ci}" 

            placeholder="${M(a)}"
            description="${M(o)}"

            .multipattern="${M(s.#Wa)}"
            mask="${M(s.mask)}"
            pattern="${M(s.pattern)}"
            list="${M(s.list)}"
            accept="${M(s.accept)}"
             
            step="${M(s.step)}"
            min="${M(s.min)}"
            max="${M(s.max)}"
            lang="${M(s.lang)}"

            minlength="${M(s.minLength)}"
            maxlength="${M(s.maxLength)}"

            autocomplete="${M(s.autocomplete)}"
            autocorrect="${M(s.autocorrect)}"
            autocapitalize="${M(s.autocapitalize)}"

            ?autofocus="${s.autofocus||s.form?.autofocus}"
            ?autocopy="${s.autocopy||s.form?.autocopy}"
            ?autoselect="${s.autoselect||s.form?.autoselect}"
            ?autovalidate="${s.autovalidate||s.form?.autovalidate}"
            ?autoreport="${s.autoreport||s.form?.autoreport}"            

            ?multiple="${s.multiple}"
            ?checked="${s.checked}"
            ?readonly="${s.readonly}"
            ?required="${s.required}"
            ?disabled="${s.disabled}"
            ?reveal="${s.reveal}"
            >${s.#bo}`}get#yo(){const t=this;return t.selectable?'form-select ms-0':t.isCheckable?'form-check-input ms-0':t.isRange?'form-range':'form-control'}get#io(){const t=this;return t.isCheckable?'form-check-label':t.isFloating?'ms-2':t.isVertical?'form-label':''}get#Xa(){const t=this;return t.isCheckable?t.isSwitch?'form-check form-switch ps-3 fs-5':t.isFieldset?'':'form-check':''}get#Qa(){const t=this.isHorizontal?'6':'11';return this.cellField||`col-md-${t} col-sm-${t} col-xs-11`}get#ao(){return h.isStringNonEmpty(this.icon)}#Eo(t){t.composed||this.emit(t.type,t)}#So(t){t.composed||this.emit(t.type,t,!0,!0)}#fo(t){const e=this,r=e.field;e.#Ya?.setFormValue(r.value),e.#Ya?.setValidity(r.validity,r.validationMessage,r),t.composed||e.emit(t.type,t,!0,!0),e.requestUpdate()}#wo(t){t.composed||this.emit('invalid',t,!0,!0)}#Ja(){const t=this,e=['header','body','footer'];let r=Array.from(t.children).filter((t=>t.slot&&!e.includes(t.slot)));if(r.length>0)throw new Error(`Custom element injection must contain slot="header|body|footer" attribute! Element: ${t.tagName}, ID: ${t.id}`);r=Array.from(t.children).filter((t=>!t.slot));const s=['GS-ITEM','DATALIST'];if(!GSDOM.isAllowed(r,s))throw new Error(GSDOM.toValidationError(t,s))}translate(t='',e){return t=super.translate(t),e?h.sanitize(t):t}reset(){this.field?.reset?.()}get isFloating(){return'floating'===this.layout}get isHorizontal(){return'horizontal'===this.layout}get isVertical(){return'vertical'===this.layout}get isFieldset(){return'radio'===this.type&&this.values?.includes(',')}get isCheckable(){const t=this;return t.isCheck||t.isRadio||t.isSwitch}get isChecked(){return this.field?.checked}get isCheck(){return'checkbox'===this.type}get isRadio(){return'radio'===this.type}get isSwitch(){return'switch'===this.type}get isNumber(){return'number'===this.type}get isRange(){return'range'===this.type}get isText(){return'text'===this.type}get isPassword(){return'passsword'===this.type}get isEmail(){return'email'===this.type}get isURL(){return'url'===this.type}get isFile(){return'file'===this.type}get isDate(){return'date'===this.type}get field(){return this.#Va.value}get value(){const t=this;return t.field?t.field?.value:t.defaultValue}set value(t){this.field&&(this.field.value=t)}get defaultValue(){const t=this;return t.field?t.field.defaultValue:GSAttr.get(t,'value','')}set defaultValue(t){const e=this;e.field&&(e.field.defaultValue=t),GSAttr.set(e,'value',t)}get validity(){return this.#Ya.validity}get formComponent(){return GSDOM.closest(this,'gs-form')}static{this.define('gs-form-group')}}class GSFormPanelElement extends gt{static properties={storage:{},data:{type:Array}};#Pa=D();constructor(){super(),this.data=this.#er}renderUI(){const t=this,e=t.data||{},r=t.#$o();return k`<gs-form ${R(t.#Pa)}

      storage="${M(e.storage)}" 
      disabled=${M(e.disabled)}.
      data="${M(e.data)}"
      
      name="${M(e.name)}"
      rel="${M(e.rel)}"
      acceptCharset="${M(e.acceptCharset)}"
      autocapitalize="${M(e.autocapitalize)}"
      autocomplete="${M(e.autocomplete)}"

      action="${M(e.action)}"
      enctype="${M(e.enctype)}"
      method="${M(e.method)}"
      novalidate="${M(e.novalidate)}"
      target="${M(e.target)}"

      block="${M(e.block)}"
      beep="${M(e.beep)}"
      timeout="${M(e.timeout)}"

      flat="${M(e.flat)}"
      rtl="${M(e.rtl)}"
      hide="${M(e.hide)}"
      padding="${M(e.padding)}"
      margin="${M(e.margin)}"
      rounded="${M(e.rounded)}"
      bordered="${M(e.bordered)}"
      shadow="${M(e.shadow)}"
      keep="${M(e.keep)}"
      css="${M(e.css)}"
      theme="${M(e.theme)}"
      os="${M(e.os)}"
      browser="${M(e.browser)}"
      language="${M(e.language)}"
      environment="${M(e.environment)}"
      orientation="${M(e.orientation)}"
      protocol="${M(e.protocol)}"
      template="${M(e.template)}"      
      >${r}</gs-form>`}#$o(){const t=document.createElement('template'),e=this.#Ea();return U(e,t.content),t}#Ea(){const t=this,e=t.data?.items||[];return k`${F(e,(e=>t.#xo(t.data,e)))}`}#xo(t,e){return k`<gs-form-group 
      icon="${M(e.icon)}"
      layout="${M(e.layout)}"
      placement="${M(e.placement)}"

      label="${M(e.label)}"
      description="${M(e.description)}"
      placeholder="${M(e.placeholder)}"
      
      pattern="${M(e.pattern)}"
      mask="${M(e.mask)}"

      form="${M(e.form)}"
      formaction="${M(e.formaction)}"
      formenctype="${M(e.formenctype)}"
      formmethod="${M(e.formmethod)}"
      formnovalidate="${M(e.formnovalidate)}"
      formtarget="${M(e.formtarget)}"
      wrap="${M(e.wrap)}"
      spellcheck="${M(e.spellcheck)}"

      type="${M(e.type)}"
      name="${M(e.name)}"
      list="${M(e.list)}"
      accept="${M(e.accept)}"
      value="${M(e.value)}"
      
      lang="${M(e.lang)}"
      title="${M(e.title)}"
      cols="${M(e.cols)}"
      rows="${M(e.rows)}"
      step="${M(e.step)}"
      min="${M(e.min)}"
      max="${M(e.max)}"
      maxlength="${M(e.maxlength)}"
      minlength="${M(e.minlength)}"

      reverse="${M(e.reverse)}"
      selectable="${M(e.selectable)}"

      autoid="${M(e.autoid)}"
      autocopy="${M(e.autocopy)}"
      autoselect="${M(e.autoselect)}"

      autocapitalize="${M(e.autocapitalize)}"
      autocorrect="${M(e.autocorrect)}"
      autocomplete="${M(e.autocomplete)}"

      autofocus="${M(e.autofocus)}"
      autoselect="${M(e.autoselect)}"

      disabled="${M(e.disabled)}"
      checked="${M(e.checked)}"
      multiple="${M(e.multiple)}"
      reveal="${M(e.reveal)}"
      readonly="${M(e.readonly)}"
      required="${M(e.required)}"

      invalidMessage="${M(e.invalidMessage)}"  
      
      block="${M(e.block||t.block)}"
      beep="${M(e.beep||t.beep)}"
      timeout="${M(e.timeout||t.timeout)}"

      flat="${M(e.flat)}"
      rtl="${M(e.rtl)}"
      hide="${M(e.hide)}"
      padding="${M(e.padding)}"
      margin="${M(e.margin)}"
      rounded="${M(e.rounded)}"
      bordered="${M(e.bordered)}"
      shadow="${M(e.shadow)}"
      keep="${M(e.keep)}"
      css="${M(e.css)}"
      theme="${M(e.theme)}"
      os="${M(e.os)}"
      browser="${M(e.browser)}"
      language="${M(e.language||t.language)}"
      environment="${M(e.environment)}"
      orientation="${M(e.orientation)}"
      protocol="${M(e.protocol)}"
      template="${M(e.template)}">
      </gs-form-group>`}get form(){return this.#Pa.value}onDataRead(t){this.data=t}onDataError(t){GSLog.error(this,t)}get#er(){return GSItem.collect(this).map((t=>GSAttr.proxify(t,GSFormGroupElement.properties)))}static{this.define('gs-form-panel')}}class GSGroupElement extends gt{static properties={group:{},storage:{},circular:{type:Boolean},multiple:{type:Boolean},data:{type:Array}};#Ui=D();#Gi;#Do;constructor(){super();const t=this;t.data=t.initData(),t.#Gi=new ElementNavigationController(t),t.#Do=new GroupController(t)}connectedCallback(){super.connectedCallback();const t=this;Array.from(t.children).forEach((e=>{GSAttributeHandler.clone(t,e,!1)}))}#To(){const t=this;if(t.queryAll('[generated]').forEach((t=>t.remove())),t.data.length>0){const e=t.renderItems(),r=document.createElement('template');U(e,r),Array.of(...r.children).forEach((e=>GSDOM.appendChild(t,e)))}}willUpdate(t){const e=this;t.has('data')&&e.#To(),super.willUpdate(t)}renderUI(){const t=this;return k`<div ${R(t.#Ui)} 
      dir="${M(t.direction)}"
      class="${x(t.renderClass())}">
      ${t.renderWrappedUI()}
      </div>`}renderWrappedUI(t){return k`<div 
      class="${x(this.renderWrappedClass())}">
      <slot name="${M(t)}"></slot>
      </div>`}renderWrappedClass(){return{}}renderItems(){return''}initData(){return this.settings(GSItem)}previous(){this.#Gi.previous()}next(){this.#Gi.next()}get[u](){return this.#Ui.value}get first(){return this.#Gi.first}get last(){return this.#Gi.last}get index(){return this.items.indexOf(this.selected)}set index(t=0){const e=this,r=e.items;t>=0&&t<r.length&&(e.reset(),r[t].click())}reset(){this.#Gi.reset()}onDataRead(t){this.data=t}onBusEvent(t){const{owner:e,item:r}=t.detail;e!=this&&(r?.disabled&&!e?.selectable||this.reset())}onSelected(t){this.#Do.notify(t)}get focused(){return this.#Gi.focused}get selected(){return this.#Gi.selected}get items(){return this.#Gi.items}get generated(){return this.items.filter((t=>t.hasAttribute('generated')))}get active(){return this.#Gi.selected}settings(t){const e=customElements.getName(t)?.toUpperCase()||'GS-ITEM',r=gt.allProperties(t),s=Array.from(this.children).filter((t=>t.tagName===e)).map((t=>GSAttr.proxify(t,r))),n=s.filter((t=>t.active));return n.forEach(((t,e)=>t.active=0===e)),s}static{this.define('gs-group')}}class GSIconElement extends gt{static styles=T`
    :host {
      --gs-icon-super-color : cornflowerblue;
      --gs-icon-content : '';
    }
    i::after {
      top: -8px;
      font-size: 0.7em;
      position: relative;
      content: var(--gs-icon-content);
      content: attr(data-super);
      color: var(--gs-icon-super-color);
    }`;static properties={name:{reflect:!0,hasChanged:notEmpty},size:{reflect:!0,type:Number,hasChanged:numGT0},color:{reflect:!0,...tt},superColor:{attribute:'super-color'},super:{reflect:!0},clickCss:{attribute:'click-css'},hoverCss:{attribute:'hover-css'},_clicked:{attribute:!1},_hovered:{attribute:!1}};#ls=D();constructor(){super()}updated(t){t.has('_clicked')&&this._clicked&&this.#Ao()}renderUI(){const t=this;return t.setCSSProperty(':host','--gs-icon-super-color',t.superColor),k`<i  ${R(t.#ls)}
       class="bi ${x(t.renderClass())}"
       data-super="${M(t.super)}"
       @click="${t.animate}"
       @mouseover="${t.#qn}"
       @mouseout="${t.#Vn}"></i>`}renderClass(){const t=this;return{...super.renderClass(),[`text-${t.color}`]:t.color,[`bi-${t.name}`]:t.name,fs:t.size>0,[`fs-${t.size}`]:t.size>0,[t.clickCss]:t._clicked,[t.hoverCss]:t._hovered}}async#Ao(){const t=this,e=h.asNum(t.dataset.delay,1);e>0&&(await h.timeout(1e3*e),t._clicked=!1)}#qn(t){this.hover(!0)}#Vn(t){this.hover(!1)}animate(){this._hovered=!1,this._clicked=!0}hover(t=!1){const e=this;t&&(e._clicked=!1),e._hovered=t}static{this.define('gs-icon')}}class GSIndentElement extends gt{static styles=T`.indent {
      --gs-indent : 10px;
      margin-left: var(--gs-indent);
      margin-right: var(--gs-indent);
    }`;static properties={flat:{type:Boolean},size:{type:Number,hasChanged:numGT0},multiplier:{type:Number,hasChanged:numGT0}};constructor(){super();this.size=1,this.multiplier=10}renderUI(){const t=this.size*this.multiplier;return k`<span class="indent" style="--gs-indent: ${t}px;"></span>`}static{this.define('gs-indent')}}const ft={reflect:!0,type:Number,hasChanged:numGE0};class GSImageElement extends gt{static properties={src:{hasChanged:notEmpty},width:ft,height:ft,opacity:ft,invert:ft,grayscale:ft,brightness:ft,blur:ft,contrast:ft,saturate:ft,hue:ft,sepia:ft,alt:{},loading:{}};#ko=D();#ci=GSID.id;constructor(){super(),this.dynamicStyle(this.#ci)}shouldUpdate(t){return this.#Qn(),this.src}renderUI(){const t=this;return k`<img ${R(t.#ko)} 
            @load="${t.#ji}"
            src="${t.src}" 
            alt="${t.alt}" 
            loading="${M(t.loading)}" 
            class="${t.#ci}" 
            data-gs-class="${t.#ci}">
          </img>`}get complete(){return this.#ko.value?.complete||!1}get#ts(){return this.dynamicStyle(this.#ci).style}#Mo(){const t=this,e=t.#Oo();return{width:t.width>0?t.width:void 0,height:t.height>0?t.height:void 0,filter:e.length>0?e.join(' '):''}}#Oo(){const t=this,e=[];return t.blur>0&&e.push(`blur(${t.blur}px)`),t.invert>0&&e.push(`invert(${t.invert})`),t.opacity>0&&e.push(`opacity(${t.opacity})`),t.contrast>0&&e.push(`contrast(${t.contrast})`),t.grayscale>0&&e.push(`grayscale(${t.grayscale})`),t.brightness>0&&e.push(`brightness(${t.brightness})`),t.hue>0&&e.push(`hue-rotate(${t.hue}deg)`),t.sepia>0&&e.push(`sepia(${t.sepia}%)`),t.saturate>0&&e.push(`saturate(${t.saturate}%)`),e}#Qn(){const t=this,e=t.#ts;e.filter=t.#Oo().join(' ').trim(),e.width=t.width>0?`${t.width}px`:'',e.height=t.height>0?`${t.height}px`:''}#ji(t){const e=t.target,r=this;e&&(r.height=r.height||e.height,r.width=r.width||e.width,r.emit('loaded',{width:e.width,height:e.height,element:e},!0))}static{this.define('gs-image')}}class GSLayoutElement extends gt{static properties={type:{...ot}};static options={id:{},type:{},min:{type:Number},max:{type:Number},size:{type:Number},resizable:{type:Boolean},autofit:{type:Boolean},vPos:{attribute:'h-pos'},hPos:{attribute:'v-pos'}};constructor(){super();const t=this;t.autofit=!0,t.#$i(t).map(((e,r,s)=>t.#Lo(e,r,s,0)))}connectedCallback(){super.connectedCallback(),this.autofit&&GSDOM.root(this)===document.body&&document.body.classList.add('vh-100')}renderUI(){const t=this,e=t.#$i(t).map(((e,r,s)=>t.#Io(e,r,s)));return k`<div  dir="${M(t.direction)}" class="d-flex flex-fill w-100 h-100 ${x(t.renderClass())}">${e}</div>`}renderClass(){const t=OrientationTypes.isHorizontal(this.type);return{...super.renderClass(),'flex-column':t}}#$i(t){return GSItem.collect(t).map((t=>GSAttr.proxify(t,GSLayoutElement.options)))}#No(t){return t.size>0||t.min>0||t.max>0||t.resizable}#Lo(t,e,r,s=0){const n=this;n.#$i(t.self).map(((t,e,r)=>n.#Lo(t,e,r,s+1))),n.#No(t)&&n.dynamicStyle(`gsd-${s}-${e}`)}#Io(t,e,r,s=0){const n=this,i=t.self.parentElement.type||'vertical',a=n.#$i(t.self).map(((t,e,r)=>n.#Io(t,e,r,s+1))),o=t.min,l=t.max,c=t.template,d=n.#ja(t),u=`#${d?.id}`!==c,h=t.type||i,p=OrientationTypes.isHorizontal(h),m=a.length>0&&p?'flex-column':'',g=`gsd-${s}-${e}`,f=n.#Ro(t,m,g),S=n.#Uo(t,p);n.dynamicStyle(g,S);const y=t.name?k`<slot name="${t.name}"></slot>`:'',b=k`<div id="${M(t.id)}" class="d-flex ${x(f)}">
            ${a}
            ${H(d)}
            ${c&&u?k`<gs-template flat src="${c}"></gs-template>`:''}
            ${y}
            </div>`;if(!t.resizable)return b;const v=e===r.length-1?'end':'start',G=n.#zi(o,l,i,v);return e===r.length-1?[G,b]:[b,G]}#ja(t){const e=t.self.firstElementChild;return GSDOM.isTemplateElement(e)?e:void 0}#Ro(t,e,r){const s=this.#No(t),n=s?'':'flex-grow-1';let i=t.vPos,a=t.hPos;a=a?`align-items-${a}`:'',i=i?`justify-content-${i}`:'';return this.mapCSS(t.css,{[r]:s,[e]:e,[n]:n,[a]:a,[i]:i})}#Uo(t,e){const r=t.size||t.min,s=t.max||t.size,n={};return e?(n['min-height']=r>0?`${r}px`:void 0,n['max-height']=s>0?`${s}px`:void 0):(n['min-width']=r>0?`${r}px`:void 0,n['max-width']=s>0?`${s}px`:void 0),n}#zi(t,e,r,s){return k`<gs-splitter split="${r}" resize="${s}" min="${t}" max="${e}"></gs-splitter>`}static{this.define('gs-layout')}}class GSLinklement extends gt{static properties={clickCss:{attribute:'click-css'},hoverCss:{attribute:'hover-css'},autofocus:{type:Boolean},disabled:{type:Boolean,reflect:!0},size:{type:Number},text:{...tt},color:{...tt},url:{},ping:{},icon:{},title:{},tooltip:{},target:{}};#Pn=D();#zn=D();constructor(){super(),this.url='#'}firstUpdated(t){super.firstUpdated(t),this.autofocus&&!this.disabled&&this.focus()}renderUI(){const t=this;return k`
      <a ${R(t.#Pn)}  
        dir="${M(t.direction)}"
        title="${M(t.translate(t.tooltip))}" 
        href="${M(t.url)}" 
        ping="${M(t.ping)}" 
        target="${M(t.target)}"
        class="${x(t.renderClass())}" 
        ?disabled=${t.disabled} 
        @mouseover="${t.#qn}"
        @mouseout="${t.#Vn}"        
        @click="${t.#Tn}">
        ${t.#Nn}${t.#Rn}
        </a>`}renderClass(){const t=this;return{...super.renderClass(),active:t.active,[`fs-${t.size}`]:t.size>0,[`text-${t.text}`]:t.text,[`bg-${t.color}`]:t.color}}click(){this.#Pn.value?.click()}focus(){requestAnimationFrame((()=>this.#Pn.value?.focus()))}get iconEl(){return this.#zn.value}#Tn(t){const e=this;if(e.iconEl?.animate(),e.notify(),'#'===e.url||h.isStringEmpty(e.url))return GSEvents.prevent(t),e.handle(t),!1}#qn(){this.iconEl?.hover(!0)}#Vn(){this.iconEl?.hover(!1)}get#Yn(){return this.translate(this.title)}get#Nn(){return this.rtl?this.#Yn:this.#Jn}get#Rn(){return this.rtl?this.#Jn:this.#Yn}get#Jn(){return this.icon?this.#Kn:k`<slot name="icon"></slot>`}get#Kn(){return k`
    <gs-icon css="mx-1" ${R(this.#zn)} 
    name="${this.icon}" 
    size="${this.size}" 
    click-css="${M(this.clickCss)}" 
    hover-css="${M(this.hoverCss)}" 
    data-delay="1"></gs-icon>`}static generate(t,e,r,s){const n=t;return k`<a class="${x(e)}"
        tabindex="0"    
        ${q(n,!0)}
        part="${M(n.part)}"
        tooltip="${M(n.tooltip)}"
        href="${M(n.url)}">        
        ${r||''}
        ${M(n.title)}
        <slot></slot> 
        ${s||''}
    </a>`}static{this.define('gs-link')}}class GSListElement extends GSGroupElement{static properties={selectable:{reflect:!0,type:Boolean}};constructor(){super(),this.circular=!1,this.multiple=!1,this.selectable=!1,this[i]='GS-LIST-ITEM'}shouldUpdate(t){return this.data.length>0||this.items.length>0}renderClass(){return{...super.renderClass(),'list-group':!0}}renderWrappedUI(){return k`<slot></slot>`}reset(){super.reset(),this.items.forEach((t=>t.reset())),this.notify()}renderItems(){return this.data.map((t=>k`<gs-list-item generated
        .active="${M(!0===t.active)}"
        .autofocus="${M(!0===t.autofocus)}"
        .disabled="${M(!0===t.disabled)}" 
        icon="${M(t.icon)}" 
        href="${M(t.href)}" 
        target="${M(t.target)}" 
        title="${M(t.title)}"></gs-list-item>`))}isNavigable(t){return super.isNavigable(t)&&this.selectable}static{this.define('gs-list')}}class GSListItemElement extends gt{static properties={url:{},target:{},title:{},icon:{},size:{type:Number},autofocus:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},active:{type:Boolean,reflect:!0}};#Fo;#Pn=D();constructor(){super(),this.binded()}connectedCallback(){super.connectedCallback(),this.#Fo=this.active}shouldUpdate(t){return'GS-LIST'===this.parentComponent?.tagName}firstUpdated(t){this.isMatchHashBang&&(this.active=!0)}renderUI(){const t=this;return k`<a  tabindex="0" ${R(t.#Pn)}
       href="${M(t.href)}" 
       target="${M(t.target)}" 
       class="${x(t.renderClass())}">
        ${t.#Bo()} 
        ${t.#Ho()}
        <slot>${t.renderTemplate()}</slot>
      </a>`}renderClass(){const t=this,e={...super.renderClass(),'list-group-item':!0,'list-group-item-action':!0,[`fs-${t.size}`]:t.size>0,[t.#Po]:!0,active:t.isActive};return t.mapCSS(t.#zo,e)}get isActive(){return this.active&&this.isSelectable}get isSelectable(){return!h.asBool(this.disabled)||h.asBool(this.parentComponent.selectable)}get isMatchHashBang(){return h.isStringNonEmpty(this.url)&&this.url===location.hash}#Kn(){const t=this;return t.icon?k`<gs-icon name="${t.icon}" size="${t.size}"></gs-icon>`:k`<slot name="icon"></slot>`}#jo(){return this.title?k`<span>${this.translate(this.title)}</span>`:k`<slot name="title"></slot>`}#Bo(){return this.rtl?this.#jo():this.#Kn()}#Ho(){return this.rtl?this.#Kn():this.#jo()}toggle(){this.active=!this.active}reset(){this.active=this.autofocus||this.#Fo||!1}click(){this.#Pn.value?.click()}focus(){requestAnimationFrame((()=>this.#Pn.value?.focus()))}get href(){return this.url?this.url:'#'}get#qo(){return this.parentComponent.dataset?.cssActive||''}get#Vo(){return this.parentComponent.dataset?.cssInactive||''}get#Po(){return this.parentComponent.dataset?.cssItem||''}get#zo(){return this.isActive?this.#qo:this.#Vo}static{this.define('gs-list-item')}}class GSMouseElement extends gt{static properties={pageX:{type:Number},pageY:{type:Number},screenX:{type:Number},screenY:{type:Number},clientX:{type:Number},clientY:{type:Number},offsetX:{type:Number},offsetY:{type:Number}};constructor(){super()}connectedCallback(){super.connectedCallback(),this.attachEvent(window,'mousemove',this.#_o.bind(this))}renderUI(){const t=this;return k`
    Offset(${t.offsetX}, ${t.offsetY}) 
    Viewport(${t.clientX}, ${t.clientY}) 
    Page(${t.pageX}, ${t.pageY}) 
    Screen(${t.screenX}, ${t.screenY})`}#_o(t){const e=this;e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY}static{this.define('gs-mouse')}}class GSMovableElement extends gt{static styles=T`
  :host {
      --gs-width : inherited;
      --gs-height : inherited;
      --gs-min-width: inherited;
      --gs-max-width: inherited;
      --gs-min-height: inherited;
      --gs-max-height: inherited;
  }
  .gs-movable {
    left: var(--mouse-x) !important;
    top: var(--mouse-y) !important;
   }`;static properties={shadow:{type:Boolean},border:{type:Boolean},color:{reflect:!0,...tt}};#ci=GSID.id;#Pn=D();#Xe=!1;constructor(){super();this.dynamicStyle(this.#ci)}connectedCallback(){super.connectedCallback();const t=this,e=document.documentElement;t.attachEvent(e,'mousemove',t.#Wo.bind(t)),t.attachEvent(e,'mousedown',t.#Ls.bind(t)),t.attachEvent(e,'mouseup',t.#Os.bind(t))}firstUpdated(){super.firstUpdated();const t=this.dynamicStyle(this.#ci);Object.assign(t.style,{cursor:'move'})}renderUI(){const t=this;return k`<div ${R(t.#Pn)} 
      data-gs-class="${t.#ci}"
      class="${x(t.renderClass())}"
      @mousedown="${()=>t.#Xe=!0}"
      @mouseup="${()=>t.#Xe=!1}">
      <slot></slot>
      </div>`}renderClass(){const t=this;return{...super.renderClass(),'gs-movable':!0,[t.#ci]:!0,'position-absolute':!0,border:t.border,'shadow-sm':t.shadow,[`text-${t.color}`]:t.color}}#Yo(t){const e=this.dynamicStyle(this.#ci);Object.assign(e.style,{'user-select':t?'none':''})}#Wo(t){if(this.#Xe){const e=this.#Pn.value.style;e?.setProperty('--mouse-x',t.clientX+'px'),e?.setProperty('--mouse-y',t.clientY+'px')}}#Ls(t){this.#Yo(!0)}#Os(t){this.#Yo(!1)}static{this.define('gs-movable')}}class GSNavElement extends GSGroupElement{static properties={type:at,placement:lt,vertical:{type:Boolean}};constructor(){super(),this.circular=!0,this.multiple=!1,this.type='pills',this.placement='start',this[i]='GS-NAV-ITEM'}shouldUpdate(t){return this.data.length>0||this.items.length>0}renderWrappedClass(){const t=this,e=PlacementTypes.isBefore(t.placement),r='tabs'===t.type;return{nav:!0,[`nav-${t.type}`]:t.type,'flex-column':t.vertical,'border-bottom-0':t.vertical,'border-end':r&&e&&t.vertical,'border-start':r&&!e&&t.vertical,[`justify-content-${t.placement}`]:!t.vertical}}renderItems(){return this.data.map((t=>k`<gs-nav-item generated
        .active="${!0===t.active}"
        .autofocus="${!0===t.autofocus}"
        .disabled="${M(!0===t.disabled)}" 
        icon="${M(t.icon)}" 
        href="${M(t.href)}" 
        target="${M(t.target)}" 
        title="${M(t.title)}">
        </gs-nav-item>`))}static{this.define('gs-nav')}}class GSNavItemElement extends gt{static properties={href:{},target:{},title:{},icon:{},disabled:{type:Boolean},autofocus:{type:Boolean},active:{type:Boolean,reflect:!0},tooltip:{},badge:{type:Boolean},badgeColor:{...tt},badgeValue:{}};#Pn=D();constructor(){super(),this.badgeColor='danger',this.badgeValue='!',this.badge=!1}disconnectedCallback(){delete this[e],super.disconnectedCallback()}shouldUpdate(t){return this.parentComponent?.tagName===this.parentType}firstUpdated(t){super.firstUpdated(t),this.autofocus&&!this.disabled&&this.focus()}renderUI(){const t=this;return k`<div class="nav-item position-relative ${x(t.renderClass())}">${t.#Bn}${t.#Jo}</div>`}renderClass(){return this.mapCSS(this.#Ko,super.renderClass())}reset(){this.active=this.autofocus||!1}click(){this.#Pn.value?.click()}focus(){requestAnimationFrame((()=>this.#Pn.value?.focus()))}get parentType(){return'GS-NAV'}get isNav(){return!0}get vertical(){return this.parentComponent.vertical||!1}get placement(){return this.parentComponent.placement}get url(){return this.href&&this.target?this.href:'#'}get#Yn(){return k`<slot>${this.translate(this.title)}</slot>`}get#Xo(){return this.icon?k`<gs-icon name="${this.icon}"></gs-icon>`:k`<slot name="icon"></slot>`}get#Nn(){return this.rtl?this.#Yn:this.#Xo}get#Rn(){return this.rtl?this.#Xo:this.#Yn}get#Bn(){const t=this;let e=t.mapCSS(t.#Qo,{});return t.active&&(e=t.mapCSS(t.#Zo+' '+t.#qo,e)),k`<a tabindex="0" type="button" role="nav" 
     ${R(t.#Pn)}
     class="nav-link ${x(e)}"
     href="${M(t.url)}" 
     target="${M(t.target)}"
     title="${M(t.tooltip)}"> 
        ${t.#Nn} 
        ${t.#Rn}
      </a>`}get#Jo(){const t=this;if(!t.badge)return'';const e={'top-0':!0,'end-0':!0,'translate-middle-y':!0,[`text-bg-${t.badgeColor}`]:t.badgeColor};return k`<span class="badge rounded-pill position-absolute ${x(e)}">${t.badgeValue}</span>`}get#Ko(){return this.parentComponent.dataset?.cssItem||''}get#Qo(){return this.parentComponent.dataset?.cssButton||''}get#qo(){return this.parentComponent.dataset?.cssActive||''}get#tl(){return it.indexOf(this.parentComponent.type)}get#Zo(){const t=this.vertical,e=PlacementTypes.isBefore(this.placement);switch(this.#tl){case 1:return'rounded text-bg-primary';case 2:return t?e?'shadow-none border border-end-0':'shadow-none border border-start-0':'shadow-none border border-bottom-0';case 3:return'shadow-none border-bottom border-3 fw-medium';default:return''}}static{this.define('gs-nav-item')}}class GSOverlayElement extends gt{static properties={color:{},target:{},autoremove:{type:Boolean},opened:{type:Boolean},opacity:{type:Number},padding:{type:Number},radius:{type:Number}};#ci=GSID.id;#el=GSID.id;constructor(){super(),this.color='#000',this.opacity=.7,this.padding=1,this.radius=6,this.dynamicStyle(this.#ci),this.dynamicStyle(this.#el)}connectedCallback(){super.connectedCallback();const t=this;t.attachEvent(window,'resize',(()=>t.requestUpdate()))}renderUI(){const t=this;if(!t.opened)return'';const e=t.#rl;return e?k`<svg xmlns="http://www.w3.org/2000/svg" xmlns:space="preserve"
            xmlnsXlink="http://www.w3.org/1999/xlink"
            version="1.1" preserveAspectRatio="xMinYMin slice"
            viewBox="0 0 ${window.innerWidth} ${window.innerHeight}"
            class="gs-overlay gs-overlay-animated ${t.#ci}"
            @click="${t.reset.bind(t)}">
            ${e}
        </svg>`:''}async firstUpdated(t){this.dynamicStyle(this.#ci,{fillRule:'evenodd',clipRule:'evenodd',strokeLinejoin:'round',strokeMiterlimit:'2',zIndex:'10000',position:'fixed',top:'0',left:'0',width:'100%',height:'100%'}),super.firstUpdated(t)}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}reset(){this.autoremove&&this.close()}get#rl(){const t=this,e=GSDOM.query(t.target);if(!t.target)return'';const r=t.#sl(e),s={fill:t.color,opacity:t.opacity,pointerEvents:'auto',cursor:'auto'};return t.dynamicStyle(t.#el,s),B`<path class="${t.#el}"  d="${r}"></path>`}#sl(t){const e=window.innerWidth,r=window.innerHeight,s=t.getBoundingClientRect(),n=this.padding,i=this.radius,a=s.width+2*n,o=s.height+2*n,l=Math.min(i,a/2,o/2),c=Math.floor(Math.max(l,0)),d=a-2*c,u=o-2*c;return`M${e},0L0,0L0,${r}L${e},${r}L${e},0Z\n            M${s.x-n+c},${s.y-n} \n            h${d} \n            a${c},${c} 0 0 1 ${c},${c} \n            v${u} \n            a${c},${c} 0 0 1 -${c},${c} \n            h-${d} \n            a${c},${c} 0 0 1 -${c},-${c} \n            v-${u} \n            a${c},${c} 0 0 1 ${c},-${c} z`.replace(/[\t\n]/g,' ')}static{this.define('gs-overlay')}}class GSPagerElement extends gt{static properties={storage:{},size:{...pt},first:{type:Boolean},last:{type:Boolean},next:{type:Boolean},previous:{type:Boolean},pages:{type:Number},labelFirst:{attribute:'label-first'},labelLast:{attribute:'label-last'},labelNext:{attribute:'label-next'},labelPrevious:{attribute:'label-previous'},cssItem:{attribute:'css-item'}};#ls=D();constructor(){super();const t=this;t.pages=5,t.labelFirst='&laquo;',t.labelLast='&raquo;',t.labelNext='&rsaquo;',t.labelPrevious='&lsaquo;',t.#Li&&(t.slot='extra')}renderUI(){const t=this,e=Math.floor((t.pages-1)/2),r=t.dataController?.page||0,s=r-e<1?1:r-e,n=r>0?r+e:t.pages;return k`<nav 
        dir="${M(t.direction)}"
        @click="${t.#Tn}"
        @keyup="${t.#An}"
        @keydown="${t.#U}">
        <ul ${R(t.#ls)} class="${x(t.renderClass())}">
        ${t.#Bo()}
        ${t.#nl()}
        ${O(N(s,n+1),(e=>t.#il(e,'','',e===r)))}
        ${t.#al()}
        ${t.#ol()}
        </ul></nav>`}renderClass(){const t=this,e=t.size?ht[t.size]||t.size:'';return{...super.renderClass(),pagination:!0,'user-select-none':!0,[`pagination-${e}`]:e}}updated(){const t=this.#ls.value;t&&this.isFocused&&t.querySelector('.active > a')?.focus()}onDataRead(){this.requestUpdate()}#Bo(){return this.first?this.#il(this.labelFirst,'first','First page'):''}#ol(){return this.last?this.#il(this.labelLast,'last','Last page'):''}#nl(){return this.previous?this.#il(this.labelPrevious,'previous','Previous page'):''}#al(){return this.next?this.#il(this.labelNext,'next','Next page'):''}#il(t='',e='',r='',s=!1){return t=h.decodeHTMLEntities(t),k`<li class="page-item ${s?'active':''}">
              <a class="page-link ${this.cssItem}" 
                 name="${e}" 
                 title="${this.translate(r)}" 
                 href="#">${this.translate(t)}</a>
            </li>`}#Tn(t){const e=this.#ll(t,'a');if(!e)return;const r=this.dataController;if(!r)return;const s=e.name||e.text;switch(this.emit(s,e),s){case'first':return r.firstPage();case'last':return r.lastPage();case'next':return r.nextPage();case'previous':return r.prevPage()}r.page=s}#U(t){const e=this.#ll(t,'li');let r=null;switch(t.code){case'ArrowLeft':r=e?.previousElementSibling;break;case'ArrowRight':r=e?.nextElementSibling}r=r?.querySelector('a'),r?.focus()}#An(t){'Space'===t.code&&this.#ll(t,'a')?.click()}#ll(t,e){const r=t.target.closest(e)||t.target;return r.tagName===e.toUpperCase()?r:void 0}get#Li(){return'GS-TABLE'===this.parentComponent?.tagName}static{this.define('gs-pagination')}}class GSPopupElement extends gt{static properties={placement:{...lt},position:{...ct},trigger:{},target:{},autoclose:{type:Boolean},autofocus:{type:Boolean},opened:{type:Boolean},hPos:{type:Number,attribute:'h-pos'},vPos:{type:Number,attribute:'v-pos'},wMin:{type:Number,attribute:'w-min'},wMax:{type:Number,attribute:'w-max'},hMin:{type:Number,attribute:'h-min'},hMax:{type:Number,attribute:'h-max'}};#cl=null;#dl=D();#ci=GSID.id;constructor(){super(),this.autofocus=!0,this.autoclose=!0,this.trigger='click',this.position='absolute',this.placement='bottom',this.dynamicStyle(this.#ci)}connectedCallback(){super.connectedCallback();const t=this;t.#Ii(),t.attachEvent(window,'resize',t.close.bind(t)),t.on('mouseleave',t.#ul.bind(t))}firstUpdated(t){const e=this;requestAnimationFrame((()=>{e.#hl(),e.#pl()})),super.firstUpdated()}updated(){const t=this;t.#pl(),t.autofocus&&t.focus(),t.notify(),t.#ml()}willUpdate(t){return t.has('opened')&&this.#ml(),super.willUpdate(t)}renderUI(){const t=this;return k`<div 
      ${R(t.#dl)}
      dir="${M(t.direction)}"
      class="fade ${x(t.renderClass())}"
      data-gs-class="${t.#ci}"
      @keydown="${t.#U}">
      ${t.renderTemplate()}
      <slot></slot>
    </div>`}renderClass(){const t=this;return{...super.renderClass(),show:t.opened,[t.#ci]:!0,[`position-${t.position}`]:t.position}}focus(){this.query('[tabindex], input, select, textarea, button, a',!0)?.focus()}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}popup(t=0,e=0){const r={top:'0px',left:'0px',translate:`${t}px ${e}px`};this.#hl(r)}#U(t){const e=this;if('Escape'===t.key)e.close()}#pl(){const t=this;if(t.vPos||t.hPos){const e={top:'0px',left:'0px',translate:`${t.hPos}px ${t.vPos}px`},r=t.dynamicStyle(t.#ci);Object.assign(r.style,e)}else if(t.target){let e=GSDOM.query(document.documentElement,t.target);e=e.renderRoot?.firstElementChild||e,GSPopper.popupFixed(t.placement,t.#gl,e)}}#hl(t={}){const e=this,r=e.dynamicStyle(e.#ci);e.wMax&&(t['max-width']=`${e.wMax}px`),e.wMin&&(t['min-width']=`${e.wMin}px`),e.hMax&&(t['max-height']=`${e.hMax}px`),e.hMin&&(t['min-height']=`${e.hMin}px`),Object.assign(r.style,t)}#Ni(t){const e=this;if(e.#cl=t,t instanceof Event&&(GSEvents.prevent(t),e.#cl=t.composedPath().filter((t=>!(t instanceof HTMLSlotElement))).shift()),e.placement)return GSPopper.popupFixed(e.placement,e.#gl,e.#cl),void(e.opened=!0);let r=t.clientX,s=t.clientY;const n=e.#gl.getBoundingClientRect(),i=r+n.width>window.innerWidth,a=s+n.height>window.innerHeight;return i&&(r=window.innerWidth-n.width),a&&(s=window.innerHeight-n.height),e.popup(r,s),!0}#ml(){const t=this,e=t.dynamicStyle(t.#ci);Object.assign(e.style,{display:t.opened?'':'none'})}#Ii(){const t=this,e=GSDOM.queryAll(document.documentElement,t.target);t.trigger.split(' ').forEach((r=>{e.forEach((e=>t.attachEvent(e,r,t.#Ni.bind(t))))}))}#ul(t){this.autoclose&&this.close()}get#gl(){return this.#dl.value}static{this.define('gs-popup')}}class GSPopoverElement extends gt{static properties={placement:{...lt},target:{},trigger:{},title:{},content:{},opened:{type:Boolean}};#fl=D();#dl=D();#ci=GSID.id;#Sl=GSID.id;constructor(){super();const t=this;t.placement='top',t.trigger='hover',t.content='',t.dynamicStyle(t.#ci),t.dynamicStyle(t.#Sl)}firstUpdated(t){super.connectedCallback();this.#yl(),this.#pl(),super.firstUpdated(t)}willUpdate(t){super.willUpdate(t),this.#pl()}renderUI(){const t=this,e=t.title?k`<div class="popover-header ${t.cssHead}">${t.translate(t.title)}</div>`:'';return k`
    <div ${R(t.#dl)} 
        dir="${M(t.direction)}"
        data-popper-placement="${t.placement}"
        class="${x(t.renderClass())}" 
        data-gs-class="${t.#ci}" 
        role="tooltip">
        <div ${R(t.#fl)} 
          class="popover-arrow ${t.#Sl}" 
          data-gs-class="${t.#Sl}">
        </div>
        ${e}
        <div class="popover-body">
          ${t.renderTemplate()}
          ${t.content}
          <slot></slot>
        </div>
    </div>            
    `}renderClass(){return{...super.renderClass(),popover:!0,'bs-popover-auto':!0,fade:!0,show:this.opened,[this.#ci]:!0}}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}get isFocusTrigger(){return this.trigger.includes('focus')}get isHoverTrigger(){return this.trigger.includes('hover')}get#ls(){const t=this;switch(t.target){case'@parent':return this.parentElement;case'@previous':return this.previousElementSibling;case'@next':return this.nextElementSibling;default:return GSDOM.query(document.body,t.target)}}#pl(){const t=this,e=t.#gl;e&&(t.opened?GSPopper.popupAbsolute(t.placement,e,t.#ls,t.#bl):t.dynamicStyle(t.#ci,{top:'-1000px',left:'-1000px'}))}#yl(){const t=this,e=t.#ls;t.isHoverTrigger&&(GSEvents.attach(t,e,'mouseover',t.open.bind(t)),GSEvents.attach(t,e,'mouseleave',t.close.bind(t))),t.isFocusTrigger&&(GSEvents.attach(t,e,'click',t.#vl.bind(t)),GSEvents.attach(t,t.#gl,'mouseleave',t.close.bind(t)),GSEvents.attach(t,window,'click',t.close.bind(t)))}#vl(t){GSEvents.prevent(t),this.toggle()}get#bl(){return this.#fl.value}get#gl(){return this.#dl.value}static{this.define('gs-popover')}}class GSProgressElement extends gt{static properties={min:{reflect:!0,type:Number},max:{reflect:!0,type:Number},step:{reflect:!0,type:Number},value:{reflect:!0,type:Number},label:{reflect:!0}};#ci=GSID.id;constructor(){super(),this.min=0,this.step=1,this.max=100,this.value=0,this.styles={width:'0%'},this.dynamicStyle(this.#ci)}renderClass(){return{...super.renderClass(),'progress-bar':!0,[this.#ci]:!0}}renderUI(){const t=this;t.#Gl();const e={min:t.min,max:t.max,step:t.step,value:t.value,percentage:t.percentage};return k`
    <div class="progress" @keydown="${t.#Cl}" dir="${M(t.direction)}">
        <div class="${x(t.renderClass())}" 
             
             role="progressbar"
             tabindex="0">
             ${literalTemplate(t.label,e)}
        </div>
    </div>    
    `}willUpdate(t){super.willUpdate(t);const e=this;if(t.has('value')){let r=e.step+t.get('value');r=e.#Qn(r,r),t.set('value',r)}}updated(t){t.has('value')&&this.notify()}increase(t){const e=this;return t=h.isNumber(t)?t:e.step,e.value=e.#Qn(e.value+t,e.value),!0}decrease(t){const e=this;return t=h.isNumber(t)?t:e.step,e.value=e.#Qn(e.value-t,e.value),!0}get percentage(){return Math.trunc(this.value/this.max*100)}#Gl(){const t=this;t.styles.width=`${t.percentage}%`,t.dynamicStyle(t.#ci,t.styles)}#Qn(t,e=0){const r=this;return(t=h.asNum(t,h.asNum(e)))>r.max&&(t=r.max),t<r.min&&(t=r.min),t}#Cl(t){const e=this;switch(t.code){case'ArrowUp':case'ArrowRight':return e.increase();case'ArrowLeft':case'ArrowDown':return e.decrease()}}static{this.define('gs-progress')}}class GSSpinnerElement extends gt{static styles=T`.spinner-border { border: var(--bs-spinner-border-width) solid currentcolor; border-right-color: transparent; }`;static properties={color:{...tt,reflect:!0},small:{type:Boolean,reflect:!0},pulsar:{type:Boolean}};constructor(){super()}renderUI(){return k`<div class="${x(this.renderClass())}" role="status"></div>`}renderClass(){const t=this;return{...super.renderClass(),'spinner-border':!t.pulsar,'spinner-grow':t.pulsar,[`text-${t.color}`]:t.color,'spinner-border-sm':!t.pulsar&&t.small,'spinner-grow-sm':t.pulsar&&t.small}}static{this.define('gs-spinner')}}class GSSplitterElement extends gt{static properties={split:{reflect:!0},resize:{...lt,hasChanged:notEmpty},size:{type:Number,hasChanged:numGT0}};#El=0;#ci=GSID.id;#wl=GSID.id;#Ui=D();#Hi;constructor(){super();const t=this;t.size=8,t.resize='start',t.dynamicStyle(t.#ci),t.#_s(),t.#Hi=new ElementMoveController(t)}disconnectedCallback(){super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t);this.#Hi.attach(this.#zi)}renderUI(){const t=this;return k`<div ${R(t.#Ui)} 
            @dblclick="${t.#qi}"
            data-gs-class="${t.#ci}" 
            class="${x(t.renderClass())}">
            <slot></slot>
        </div>`}renderClass(){return{...super.renderClass(),splitter:!0,[this.#ci]:!0}}updated(t){this.#$l()}onStartMove(t){const e=this;e.#El=e.isVertical?t.clientX:t.clientY,e.#xl(!0),GSEvents.send(globalThis,'gs-split',{start:!0})}onMouseMove(t){const e=this.isVertical?t.clientX:t.clientY;this.#Dl(e)}onEndMove(t){this.#Tl(),this.#xl(!1),GSEvents.send(globalThis,'gs-split',{stop:!0})}get isVertical(){return'vertical'===this.split}get isHorizontal(){return!this.isVertical}get start(){return this.previousElementSibling}get end(){return this.nextElementSibling}get target(){const t=this;let e=t.#Al?t.start:t.end;return e=e||t.parentElement,e=GSDOM.isGSElement(e)?e.self:e,e instanceof ShadowRoot&&(e=Array.from(e.children).filter((t=>!GSDOM.isStyleValue(t,'display','none'))).pop()),e.classList?.add(t.#wl),e}get#Al(){const t=this.resize;return'start'===t||'top'===t}get#zi(){return this.#Ui.value}get#kl(){return this.target.style}get#Ml(){const t='iframe,embed,portal';return[...GSDOM.queryAll(this.previousElementSibling,t),...GSDOM.queryAll(this.nextElementSibling,t)]}#_s(){const t=this;if(!t.id)return;const e=GSID.hashCode(location.origin+location.pathname);let r=localStorage.getItem(`gs-splitter-${e}-${t.id}`);r=h.asNum(r),t.#Qn(r)}#Tl(){const t=this;if(!t.id)return;const e=GSCSSMap.getComputedStyledMap(t.target),r=t.isVertical?e.get('width'):e.get('height');if(!r)return;const s=GSID.hashCode(location.origin+location.pathname);localStorage.setItem(`gs-splitter-${s}-${t.id}`,r)}#qi(t){const e=this;let r=0,s='';e.isVertical?(s='width',r=e.target.clientWidth):(s='height',r=e.target.clientHeight);let n=GSCSSMap.styleValue(e.target,`min-${s}`),i=GSCSSMap.styleValue(e.target,`max-${s}`);n=h.asNum(n.value),i=h.asNum(i.value),r=(i-n)/2>r?i:n,e.#Qn(r)}#xl(t=!0){const e=this,r='pe-none';t?e.#Ml.filter((t=>!GSDOM.hasClass(t,'pe-none'))).forEach((t=>{GSDOM.toggleClass(t,r,!0),t.dataset.gsSplitter=!0})):e.#Ml.filter((t=>t.dataset.gsSplitter)).forEach((t=>{GSDOM.toggleClass(t,r,!1),delete t.dataset.gsSplitter}))}#Dl(t){const e=this;requestAnimationFrame((()=>{e.isVertical?e.#Ol(t):e.#Ll(t)}))}#Ol(t){const e=this,r=e.target,s=e.#Al?1:-1;let n=(t-e.#El)*s;n+=r.clientWidth,n=n<0?0:n,e.#kl.width=n+'px',e.#El=t}#Ll(t){const e=this,r=e.target,s=e.#Al?1:-1;let n=(t-e.#El)*s;n+=r.clientHeight,n=n<0?0:n,e.#kl.height=n+'px',e.#El=t}#Qn(t=0){if(t<=0)return;const e=this;e.#El=t;const r=e.isVertical?'width':'height';e.#kl[r]=t+'px'}#$l(){const t=this,e=t.isVertical?'width':'height',r=t.isVertical?'height':'width',s=t.isVertical?'w-resize':'n-resize',n={[e]:`${t.size}px`,[r]:'100%','border-width':'1px',cursor:s,'border-color':'darkgray','border-style':'solid','background-color':'lightgray'};t.dynamicStyle(t.#ci,n)}static{this.define('gs-splitter')}}class GSTabItemElement extends GSNavItemElement{static properties={name:{}};constructor(){super(),this.css=this.#Il+this.css}get#Il(){return this.shouldUpdate()?h.normalize(this.parentComponent?.tabCSS):''}get parentType(){return'GS-TAB-GROUP'}get panel(){const t=this;return t[e]||t.owner.panelByName(t.name)}static{this.define('gs-tab-header')}}class GSTabPanelElement extends gt{static properties={name:{},template:{},active:{type:Boolean,reflect:!0}};constructor(){super(),this.active=!1}disconnectedCallback(){delete this[e],super.disconnectedCallback()}shouldUpdate(t){return this.parentComponent?.tagName===this.parentType}renderUI(){return k`<div  
      dir="${M(this.direction)}" 
      class="${x(this.renderClass())}">
      <slot>
      ${this.renderTemplate()}
      </slot></div>`}renderClass(){return{...super.renderClass(),'tab-pane':!0,'d-none':!this.active}}get parentType(){return'GS-TAB-GROUP'}get owner(){return this.closest(this.parentType.toLowerCase(),-1,!0)||GSDOM.component(this)}get form(){return this.closest('form',-1,!0)}get tab(){const t=this;return t[e]||t.owner.tabByName(t.name)}get tabs(){return this.owner.tabs}clear(){this.tab.badge=!1}static{this.define('gs-tab-panel')}}class GSTabGroupElement extends GSNavElement{static properties={panelCSS:{attribute:'css-panel'},tabCSS:{attribute:'css-tab'}};constructor(){super(),this[i]='GS-TAB-HEADER'}firstUpdated(t){super.firstUpdated(t);const e=this;e.items.forEach((t=>e.#Nl(t))),e.onSelected(e.active)}shouldUpdate(t){return this.data.length>0||this.items.length>0}willUpdate(t){const e=this;t.has('data')&&e.items.forEach((t=>e.#Nl(t))),super.willUpdate(t)}renderClass(){return{...super.renderClass(),'d-flex':this.vertical}}renderWrappedUI(){const t=this,e=PlacementTypes.isAfter(t.placement),r=[super.renderWrappedUI('tabs'),k`<div class="tab-content flex-fill ${t.panelCSS}"  dir="${M(t.direction)}">
        <slot name="panels"></slot>
      </div>
      <slot class="d-none"></slot>`];return e?r.reverse():r}renderWrappedClass(){const t=super.renderWrappedClass();return this.mapCSS(this.tabCSS,t)}renderItems(){const t=this.#Rl(),e=this.#Ul();return t.concat(...e)}#Rl(){return this.data.map((t=>(t.name||(t.name=GSID.id),k`<gs-tab-header generated slot="tabs"
        .active="${M(!0===t.active)}"
        .autofocus="${M(!0===t.autofocus)}"
        .disabled="${M(!0===t.disabled)}" 
        icon="${M(t.icon)}"
        title="${M(t.title)}"
        name="${t.name}"></gs-tab-header>`)))}#Ul(){return this.data.map((t=>(t.name||(t.name=GSID.id),k`<gs-tab-panel generated  
        slot="panels" name="${t.name}" 
        .active="${M(t.active)}"
        template="${M(t.template)}"></gs-tab-panel>`)))}#Fl(t,e=!1){const r=this.#Nl(t);r&&(r.active=e)}onSelected(t){this.#Fl(t,!0)}onDeselected(t){this.#Fl(t,!1)}get tabs(){return this.items}get panels(){return this.queryAll('gs-tab-panel',!1,!0)}reset(){this.panels.forEach(((t,e)=>t.active=0===e)),this.tabs.forEach(((t,e)=>t.active=0===e)),super.reset()}clear(){this.tabs.forEach((t=>t.badge=!1))}tabByName(t='',e=!1){return this.query(`gs-tab-header[name="${t}"]`,e,!0)}panelByName(t='',e=!1){return this.query(`gs-tab-panel[name="${t}"]`,e,!0)}#Nl(t){if(!t)return null;const r=this.data?.length>0;let s=t[e]||this.panelByName(t.name,r);return s&&!t[e]&&(t[e]=s,s[e]=t),s}static{this.define('gs-tab-group')}}class GSTableElement extends gt{static#Bl=['sort-up','arrow-down-up','sort-down-alt'];static styles=T`th:hover { opacity: 50% !important; }`;static CELLS={align:{},width:{},width:{},css:{},title:{},colspan:{},storage:{},ref:{},list:{type:Boolean},filter:{type:Boolean},hidden:{type:Boolean},fixed:{type:Boolean},filterType:{attribute:'filter-type'},cssFilter:{attribute:'css-filter'},cssHeader:{attribute:'css-header'},color:{...tt},...GSData.PROPERTIES};static properties={storage:{},color:{...tt},colorFilter:{...tt,attribute:'filter-color'},colorHead:{...tt,attribute:'head-color'},colorSelect:{...tt,attribute:'select-color'},colorSort:{...tt,attribute:'sort-color'},stripedColumn:{type:Boolean,attribute:'striped-column'},cssFilter:{attribute:'css-filter'},cssHeader:{attribute:'css-header'},divider:{type:Boolean},striped:{type:Boolean},hover:{type:Boolean},small:{type:Boolean},grid:{type:Boolean},borderless:{type:Boolean},sort:{type:Array,state:!0},columns:{type:Array,state:!0},key:{type:Number,state:!0},data:{type:Array},datacolumn:{type:Boolean},multisort:{type:Boolean},multiselect:{type:Boolean},protected:{type:Boolean},selectable:{type:Boolean},toggle:{type:Boolean},sortable:{type:Boolean}};#Qi=[];#Hl=[];#Pl=!1;constructor(){super(),this.headColor='secondary',this.colorSelect='info',this.columns=[],this.data=[],this.sort=[],this.key=0}get selected(){return this.dataController?.selected}set search(t){const e=this;if(e.storage&&e.dataController)return e.dataController.search=t}connectedCallback(){const t=this;t.#Qi=GSItem.proxify(t,GSTableElement.CELLS),0===t.columns.length&&(t.columns=t.#Qi.map((t=>t.name))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.dataController?.clearSelected(this.data),this.data=[]}renderClass(){const t=this;return{...super.renderClass(),'user-select-none':t.protected,table:!0,'table-sm':t.small,'table-hover':t.hover,'table-striped':t.striped,'table-bordered':t.grid,'table-borderless':t.borderless,'table-striped-columns':t.stripedColumns,[`table-${t.color}`]:t.color}}firstUpdated(){this.dataController?.read()}willUpdate(t){const e=this;e.columns.length!=e.sort.length&&(e.sort=Array(e.columns.length).fill(0)),e.datacolumn&&e.data.length>0&&(e.columns=e.data[0],e.data=e.data.slice(1)),t.has('multiselect')&&!e.multiselect&&e.dataController?.clearSelected(),t.has('selectable')&&!e.selectable&&e.dataController?.clearSelected(),(t.has('sortable')||t.has('multisort'))&&(e.sort=Array(e.columns.length).fill(0),e.#Hl=[]),super.willUpdate(t)}renderUI(){const t=this,e=t.colorHead?`table-${t.colorHead}`:'';return k`
      <table  
       dir="${M(t.direction)}"
       @keyup="${t.#An}"
       @keydown="${t.#U}"
       class="${x(t.renderClass())}">
        <thead class="${M(e)}">
          ${t.#zl()}
          <tr @click=${t.#jl}>
            ${t.columns.map(((e,r)=>t.#ql(e,r)))}
          </tr>
        </thead>
        <tbody @click=${t.#Gs} @contextmenu=${t.#Gs} class="${t.divider?'table-group-divider':''}" role="button">
          ${t.data.map(((e,r)=>t.#Vl(e,r)))}
          ${t.#_l()}
        </tbody>
      </table>
      <slot name="extra">${t.#Wl()}</slot>
    `}#Wl(){return this.#Pl?k`<gs-data-handler type="cached" mode="" id=${this.#Pl} generated></gs-data-handler>`:''}onDataRead(t){const e=this;e.data=t,t.length>0&&e.#Q&&e.#Qi.forEach(((t,r)=>{t.columnType=e.#Yl(r)}))}clear(){this.#Jl.forEach((t=>t.value='')),this.dataController?.filter([])}valueAt(t,e){return this.data.length>t?this.data[t][e]:void 0}get#Jl(){return this.queryAll('th > input, th > select',!0,!0)}get#Q(){return this.#Qi.filter((t=>t.filter)).length>0}#Yl(t){const e=this,r=e.#Qi[t],s=e.valueAt(0,e.columns[t]);r.type=r.type||'text';const n={string:'text',currency:'number',timestamp:'datetime-local'}[r.type],i=s instanceof Date?'date':typeof s;return s?i:n||r.type}#zl(){const t=this;return t.#Q?k`<tr>${t.columns.map(((e,r)=>t.#Kl(e,r)))}</tr>`:''}#Kl(t,e){const r=this,s=r.#Qi[e];if(!s?.filter)return k`<th></th>`;let n;const i=s.childElementCount>0,a='date'===s.columnType;a&&(n=s.format||h.getDateFormat(s.language||h.language));const o=`${h.normalize(r.cssFilter)} ${h.normalize(t.cssFilter)}`,l=`text-bg-${h.normalize(t.color||r.colorFilter)}`;if((i||s.list)&&s.fixed)return k`<th .index=${e} @change="${r.#Xl}">
          <select is="gs-ext-select" .index=${e}
              class="form-select ${o} ${l}" 
              name="${t}"
              storage="${M(s.list?r.storage:null)}"
              key="${M(s.list?s.name:null)}"> 
              ${r.#mo(s)}
              </select>
          </th>`;let c,d='';return(i||s.list)&&(d=`${r.id}-list-${e}`,c=k`<datalist id="${d}" is="gs-ext-datalist"
              storage="${M(s.list?r.storage:null)}"
              key="${M(s.list?s.name:null)}"> 
              ${r.#mo(s)}</datalist>`),k`<th .index=${e} @change="${r.#Xl}">
    <input is="gs-ext-input" .index=${e}
      class="form-control ${o} ${l}" 
      mask="${M(n)}"
      list="${M(d)}"
      name="${t}" 
      placeholder="${M(s.title)}" 
      type="${s.filterType||s.columnType}"
      data-slots="${M(a?'DMY':void 0)}"/>
    ${c}
    </th>`}#mo(t){if(0==t.childElementCount)return'';return GSItem.proxify(t).map((e=>k`<option value="${e.value}">${t.fixed?e.map:''}</option>`))}#ql(t,e){const r=this,s=r.#Qi[e];if(s?.hidden)return'';const n=`${h.normalize(r.cssHeader)} ${h.normalize(t.cssHeader)}`;return k`
      <th .index=${e} class="${n}" 
        colspan="${M(s?.colspan)}"
        width="${M(s?.width)}">
        <div class="d-flex justify-content-between"> 
          <span>${s?.title||t}</span>
          ${r.#Kn(e)}
        </div>
      </th>
    `}#Kn(t){const e=this;if(!e.sortable)return'';const r=GSTableElement.#Bl,s=e.sort[t],n=e.multisort?e.#Hl.indexOf(t)+1:'';return k`<gs-icon name="${r[s+1]}" super="${n>0?n:''}" color="${M(e.colorSort)}"></gs-icon>`}#Vl(t,e){const r=this,s=r.dataController||DataSelector,n=s?.isSelected(t),i=r.colorSelect&&n?`table-${r.colorSelect}`:'',a=r.#Ql(t);return k`
        <tr .index=${e} class="${i}" tabindex="0" ?selected=${n}>
          ${a.map(((t,e)=>r.#Zl(t,e)))}
        </tr>
      `}#Zl(t,e){const r=this.#Qi[e];return r?.hidden?'':k`<td class="text-${r?.align}" colspan="${M(r?.colspan)}" ><span>${t}</span></td>`}#Ql(t){const e=this;return Array.isArray(t)||(t=e.columns.map((e=>t[e]))),t.map(((t,r)=>e.#Qi[r]?GSData.format(e.#Qi[r],t):t))}#_l(){const t=this;return t.data.length>0?'':k`<tr data-ignore="true"><td colspan="${t.columns.length}" class="text-center fw-bold text-muted">${t.translate('No Data')}</td></tr>`}#tc(t){if(!t.value)return;const e='date'===t.type?t.valueAsDate:t.value,r=this.#Qi[t.index];return{name:t.name,value:e,language:r?.language}}#Xl(t){const e=this,r=e.#Jl.map((t=>e.#tc(t))).filter((t=>t?.value));e.storage&&e.dataController?.filter(r)}#jl(t){const e=this;if(!e.sortable)return;const r='GS-ICON'===t.target.tagName?t.target:t.target.closest('gs-icon'),s=t.target.closest('th');if(!r||!s)return;const n=void 0!==s.index?s.index:GSDOM.getElementIndex(s),i=e.sort[n],a=1===i?-1:i+1;e.multisort?0==a?e.#Hl=e.#Hl.filter((t=>t!=n)):e.#Hl.includes(n)||e.#Hl.push(n):(e.sort=Array(e.columns.length).fill(0),e.#Hl=[n]),e.sort[n]=a;const o=e.#ec(e.sort,e.#Hl);e.storage?e.dataController?.sort(o):e.data=GSData.sortData(e.data,o),e.emit('sort')}#ec(t,e){const r=this;0===t.filter((t=>t)).length&&((t=Array(r.columns.length).fill(0))[r.key]=1);const s=r.data[0]&&!Array.isArray(r.data[0]),n=t.map(((t,n)=>t?{name:s?r.columns[n]:void 0,col:n,ord:t,idx:e.indexOf(n)}:null)).filter((t=>t));return t=GSData.sortData(n,[{name:'idx',ord:1}])}#Gs(t){const e=this;if(!e.selectable)return;const r='TR'===t.target.tagName?t.target:t.target.closest('tr');if(!r)return;if(2===t.button&&!e.query('gs-context',!1,!0))return;const s=e.dataController||DataSelector;if(!s)return;const n=e.data[r.index],i=s.isSelected(n);e.multiselect?i?s.removeSelected(n):s.addSelected(n):e.toggle?(s.clearSelected(e.data),i||s.addSelected(n)):(s.clearSelected(e.data),s.addSelected(n)),e.requestUpdate(),e.emit('select')}#U(t){if(!t.target.matches('tbody tr'))return;let e=null;switch(t.code){case'ArrowUp':e=t.target.previousElementSibling;break;case'ArrowDown':e=t.target.nextElementSibling}e&&(e.focus(),this.emit('focus',e))}#An(t){'Space'===t.code&&this.#Gs(t)}static{this.define('gs-table')}}class GSTagElement extends gt{static#rc=['Enter','NumpadEnter','Comma','Space'];static styles=T`
        .tag-input:focus-visible {
            outline:none;
        }
        .tag .btn-close {
            background: none;
        }            
        .tag .btn-close::after {
            content: 'x';
        }`;static properties={placeholder:{},max:{type:Number},size:{type:Number},name:{},data:{type:Array},values:{type:Array,reflect:!0,converter:mt},appendable:{type:Boolean},color:{...tt},closeColor:{...tt,attribute:'close-color'},cssClose:{attribute:'css-close'},cssTag:{attribute:'css-tag'}};static options={name:{}};#sc=D();#Va=D();constructor(){super(),this.name='',this.data=this.#$i,this.closeColor='light',this.color='primary'}renderUI(){const t=this,e=t.#nc();return k`
        <div  dir="${M(t.direction)}" 
            class="${x(t.renderClass())}"
            @click="${t.#Tn.bind(t)}">
            ${e}
            <input type="text" 
            @keydown="${t.#U.bind(t)}"
            @input="${t.#Eo.bind(t)}"
            ${R(t.#Va)}
            name="${t.name}" 
            list="${t.name}_list"
            class="form-control d-flex w-auto flex-grow-1" 
            placeholder="${t.#ic}">
            <datalist ${R(t.#sc)} id="${t.name}_list">${t.#ac()}</datalist>
        </div>`}renderClass(){return{...super.renderClass(),'d-flex':!0,'flex-wrap':!0,'align-items-center':!0,'gap-1 ':!0}}get#ic(){const t=this,e=t.max>0?`Add max ${t.max} tags...`:'';return t.placeholder?t.placeholder:e}#Eo(t){t.inputType||this.#oc(t)}#U(t){GSTagElement.#rc.includes(t.code)&&this.#oc(t)}#Tn(t){t.srcElement===t.target&&t.target instanceof HTMLButtonElement&&this.#lc(t.target.parentElement)}#oc(t){GSEvents.prevent(t);this.#cc(this.#_r)}get#dc(){const t=this;return t.max>0&&t.data.length>=t.max}get#ps(){return Array.from(this.#uc.children)}get#_r(){const t=this;return t.#ps.filter((e=>e.value.toLowerCase()===t.#Jl.value.toLowerCase())).pop()}#cc(t){const e=this,r=e.#Jl;e.#dc||!t&&0==e.appendable?r.value='':e.values.includes(r.value)||(e.values.push(r.value),r.value='',e.requestUpdate())}#lc(t){if(!t)return;const e=t.dataset.value;this.values=this.values.filter((t=>t!=e))}#nc(){const t=this;return t.values.map((e=>t.#hc(e)))}#hc(t=''){if(!t)return'';const e=this;return e.size>0&&e.size,k`<div class="${x(e.#pc)}" data-value="${t}">${t}<button type="button" class="${x(e.#mc)}"></button></div>`}get#pc(){const t=this,e={badge:!0,tag:!0,[`fs-${t.size}`]:t.size>0,[`text-bg-${t.color}`]:!!t.color};return t.mapCSS(t.cssTag,e)}get#mc(){const t=this,e={'btn-close':!0,'ms-1':!0,[`text-bg-${t.closeColor}`]:!!t.closeColor};return t.mapCSS(t.cssClose,e)}#ac(){return this.data.map((t=>k`<option value="${t}">`))}#er(t){return GSItem.collect(t).map((t=>GSAttr.proxify(t)))}get#$i(){return this.#er(this).map((t=>t.name)).filter((t=>!!t))}get#Jl(){return this.#Va.value}get#uc(){return this.#sc.value}static{this.define('gs-tag')}}class GSTextElement extends gt{#gc='';constructor(){super(),this.flat=!0,this.#gc=this.innerText,this.innerText=''}renderUI(){return this.translate(this.#gc)}static{this.define('gs-text')}}class GSTooltipElement extends gt{static properties={placement:{...lt},title:{},target:{},opened:{type:Boolean},local:{type:Boolean}};#fl=D();#dl=D();#ci=GSID.id;#fc=GSID.id;constructor(){super(),this.placement='top',this.dynamicStyle(this.#ci),this.dynamicStyle(this.#fc)}firstUpdated(t){super.connectedCallback();this.#yl(),this.#pl(),super.firstUpdated(t)}willUpdate(t){super.willUpdate(t),this.#pl()}renderUI(){const t=this;return k`
    <div ${R(t.#dl)} 
      dir="${M(t.direction)}"
      role="tooltip"
      data-popper-placement="${t.placement}"
      data-gs-class="${t.#ci}"
      class="${x(t.renderClass())}">
      <div ${R(t.#fl)} 
          class="tooltip-arrow ${t.#fc}" 
          data-gs-class="${t.#fc}">
      </div>
      <div class="tooltip-inner">${t.translate(t.title)}</div>
    </div>`}renderClass(){return{...super.renderClass(),tooltip:!0,'bs-tooltip-auto':!0,fade:!0,show:this.opened,[this.#ci]:!0}}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}#yl(){const t=this;t.attachEvent(t.#ls,'mouseenter',t.open.bind(t)),t.attachEvent(t.#ls,'mouseleave',t.close.bind(t))}#pl(){const t=this,e=t.#bl,r=t.#gl;r&&(t.opened?GSPopper.popupFixed(t.placement,r,t.#ls,e):t.dynamicStyle(t.#ci,{top:'-1000px',left:'-1000px'}))}get#ls(){const t=this;switch(t.target){case'@parent':return this.parentElement;case'@previous':return this.previousElementSibling;case'@next':return this.nextElementSibling;default:return t.local?t.#Sc:t.#yc}}get#Sc(){const t=GSDOM.root(this);return GSDOM.query(t,this.target)}get#yc(){return GSDOM.query(document.body,this.target)}get#bl(){return this.#fl.value}get#gl(){return this.#dl.value}static{this.define('gs-tooltip')}}class GSTemplateElement extends gt{static properties={src:{reflect:!0,hasChanged:notEmpty}};constructor(){super()}createRenderRoot(){const t=this;return t.flat?(t.renderOptions.renderBefore=t,t.parentElement):super.createRenderRoot()}renderUI(){return k`${this.renderTemplate()}`}templateInjected(){this.emit('template-injected',null,!0,!0)}static{this.define('gs-template')}}class CopySelectController{#Ut;#bc;#vc;constructor(t){const e=this;e.#Ut=t,e.#bc=e.onClick.bind(e),e.#vc=e.onCopy.bind(e),t.addController?.(e)}hostConnected(){const t=this;t.#Ut.on?.('click',t.#bc),t.#Ut.on?.('copy',t.#vc)}hostDisconnected(){const t=this;t.#Ut.removeController?.(t),t.#Ut.off?.('click',t.#bc),t.#Ut.off?.('copy',t.#vc)}onCopy(t){h.writeToClipboard(this.#Ut.value)}onClick(t){const e=this;e.#Ut.isAutocopy&&e.onCopy(t),e.#Ut.isAutoselect&&e.#Ut.select()}}class MaskController{static#Gc='.^$*+?()[]{}|';static#Cc={x:/[0-9a-fA-F]/g,n:/[0-9]/g,y:/[0-9]/g,m:/[0-9]/g,d:/[0-9]/g,h:/[0-9]/g,s:/[0-9]/g,'.':/[0-9]/g,'#':/[a-zA-Z]/g,'*':/[0-9a-zA-Z]/g,_:/./g};#Ec=!1;#wc;#$c;#Nn;#xc;#Dc;#Ut;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){this.initRules()}hostDisconnected(){this.#Ut.removeController(this)}initRules(){const t=this;var e;t.pattern&&(t.#wc=t.#Tc(),t.#$c=(e=0,Array.from(t.pattern,((r,s)=>t.#wc.has(r)?e=s+1:e))),t.#Nn=[...t.pattern].findIndex((e=>t.#wc.has(e))),t.#xc=t.#Ac(),t.#kc())}validate(){const t=this,e=!!t.isEmpty||t.isMatch;return t.setCustomValidity(e?'':'Mask not matched!'),e}setCustomValidity(t){return this.#Ut.setCustomValidity(t)}setSelectionRange(t,e){this.#Ut.setSelectionRange(t,e)}select(){this.#Ut.select()}get isEmpty(){return h.isStringEmpty(this.raw)}get isValid(){return this.#Ut.validity.valid}get disabled(){return this.#Ut.disabled}get required(){return this.#Ut.required}get value(){const[t,e]=this.#Mc();return this.raw.substring(0,e)}set value(t){this.#Ut.value=t}get raw(){return this.#Ut.raw}get required(){return this.#Ut.required}get pattern(){return this.#Ut.mask}get dataset(){return this.#Ut.dataset}get selectionStart(){return this.#Ut.selectionStart}get selectionEnd(){return this.#Ut.selectionEnd}get autoselect(){return this.#Ut.autoselect}get isMatch(){const t=this;let e=!0;return t.#Dc&&(t.#Dc.lastIndex=0,e=t.#Dc.test(t.raw)),e}onInput(t){this.#Oc()}onKeyDown(t){const e=this;e.#Ec='Backspace'===t.key;'Tab'===t.key&&(e.#Oc(),e.validate())}onFocus(t){const e=this;e.#Oc(),e.autoselect&&e.select()}onChange(t){this.#Oc()}onBlur(t){this.validate()}#Tc(){const t=this;let e=t.dataset.slots;if(!e){const r=MaskController.#Cc;e=[...new Set(t.pattern)].filter((t=>r[t.toLowerCase()])).join('')}return new Set(e||'_')}#Ac(){const t=this;let e=t.dataset.accept;if(!e){const r=MaskController.#Cc;if(e=[...new Set(t.pattern)].map((t=>r[t.toLowerCase()])).filter((t=>t)),e.length>0){const t={};return e.forEach((e=>t[e.src]=e)),e=Object.values(t),1===e.length?e.pop():e}}return new RegExp(e||'\\d','g')}#Mc(){const t=this,e=t.raw;return[t.selectionStart,t.selectionEnd].map((r=>(r=t.#Lc(e.slice(0,r)).findIndex((e=>t.#wc.has(e))))<0?t.#$c[t.#$c.length-1]:t.#Ec?t.#$c[r-1]||t.#Nn:r))}#Oc(){const t=this,[e,r]=t.#Mc(),s=t.#Lc(t.#Ut.raw);t.value=s.join``,t.setSelectionRange(e,r),t.#Ec=!1}#Lc(t){const e=this;return t=t.match(e.#xc)||[],Array.from(e.pattern,((r,s)=>(t[s]===r||e.#wc.has(r))&&t.shift()||r))}#kc(){const t=this;if(0===t.pattern.length)return;const e=t.pattern.split(''),r=['^'],s=MaskController.#Cc,n=MaskController.#Gc;let i=0;e.forEach(((a,o)=>{const l=t.#wc.has(a)?s[a.toLowerCase()]:null;return l?(e[o]=new RegExp(l,'g'),0===r.length?r.push(l.source):r[r.length-1]===l.source?i++:(i>0&&r.push(`{${++i}}`),i=0,void r.push(l.source))):(i>0&&r.push(`{${++i}}`),i=0,n.includes(a)&&r.push('\\'),r.push(a))})),i>0&&r.push(`{${++i}}`),r.push('$'),t.#Dc=new RegExp(r.join(''),'g')}}class MultipatternController{#Ut;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){}hostDisconnected(){this.#Ut.removeController(this)}validate(){const t=this,e=!!t.isEmpty||t.isMatch;return t.setCustomValidity(e?'':'Pattern not matched!'),e}setCustomValidity(t){return this.#Ut.setCustomValidity(t)}get isEmpty(){return h.isStringEmpty(this.raw)}get isValid(){return this.#Ut.validity.valid}get value(){return this.#Ut.value}set value(t){this.#Ut.value=t}get raw(){return this.#Ut.raw}get required(){return this.#Ut.required}get disabled(){return this.#Ut.disabled}get dataset(){return this.#Ut.dataset}get patterns(){const t=this.#Ut.multipattern;if(t instanceof RegExp)return[t];if(Array.isArray(t))return t.filter((t=>t instanceof RegExp));throw new Error('Invalid multipattern value. Expected RegExp object or array.')}get isMatch(){const t=this;let e=!0;for(const r of t.patterns)if(e=r.test(t.value),e)break;return e}onKeyDown(t){'Tab'===t.key&&this.validate()}onBlur(t){this.validate()}onChange(t){this.validate()}}class NumberController{#Ut;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){}hostDisconnected(){this.#Ut.removeController(this)}get maxLength(){return h.asNum(this.#Ut.maxLength,0)}get value(){return this.#Ut.value}set value(t){this.#Ut.value=t}get type(){return this.#Ut?.type}onInput(t){const e=this;'number'===e.type&&e.maxLength>0&&e.value.length>e.maxLength&&(e.value=e.value.substring(0,e.maxLength))}}class PasswordController{#Ut;#Ic=!1;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){}hostDisconnected(){this.#Ut.removeController(this)}get reveal(){return this.#Ut.reveal}get type(){return this.#Ut?.type}set type(t){this.#Ut&&(this.#Ut.type=t)}#Nc(t){return this.reveal&&'Shift'===t.key&&t.altKey&&t.ctrlKey&&t.shiftKey&&'password'===this.type}onKeyUp(t){const e=this;'Shift'===t.key&&e.#Ic&&(e.type='password')}onKeyDown(t){const e=this;e.#Nc(t)&&(e.#Ic=!0,e.type='text')}}class TextController{#Ut;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){}hostDisconnected(){this.#Ut.removeController(this)}get raw(){return this.#Ut.raw}get value(){return this.#Ut.value}set value(t){this.#Ut.value=t}get type(){return this.#Ut?.type}onInput(t){const e=t.target,r=e.selectionStart,s=e.selectionEnd;e.value=this.#Rc(),e.setSelectionRange(r,s)}onChange(t){this.value=this.#Rc()}onBlur(t){this.value=this.#Rc()}#Rc(){const t=this;if('text'===t.type){const e=GSCSSMap.styleValue(this.#Ut,'text-transform');if(e)return h.textTransform(e.value,t.raw)}return t.value}}class InteractiveController{#Ut;#Uc;constructor(t){const e=this;e.#Ut=t,e.#Uc=e.#Fc.bind(e),t.addController(e)}hostConnected(){const t=this;t.list&&t.#Ut.attachEvent(t.filter,'change',t.#Uc)}hostDisconnected(){const t=this;t.#Ut.removeController(t),t.#Ut.removeEvent(t.filter,'change',t.#Uc),t.#Ut=void 0}hostUpdated(){this.#Ut.hasUpdated||this.onChange()}get component(){return this.#Ut}get value(){return this.#Ut.value}set value(t){this.#Ut.value=t}get list(){return this.#Ut}get filter(){const t=GSAttr.get(this.#Ut,'data-filter');return GSDOM.getByID(this.owner,t)}get owner(){return this.#Ut.form||GSDOM.closest(this.#Ut,'form')}get formElements(){return GSDOM.formElements(this.owner,!0)}get strict(){return GSAttr.get(this.#Ut,'strict','')}onBlur(t){this.#Bc()||GSEvents.send(this.#Ut,'strict',{ok:!1,source:t})}onChange(t){const e=this,r=e.owner;let s=!1,n=GSDOM.query(e.list,`option[value="${e.value}"]`);n||(n=e.list?.querySelector('option'),s=!0);const i=n?.dataset||{};Object.entries(i).forEach((t=>{const n=s?'':t[1],i=t[0];if('id'===i||'group'===i)return void GSAttr.set(e.#Ut,`data-${i}`,t[1]);const a=`[data-${i}]:not([data-${i}=""]`;Array.from(GSDOM.queryAll(r,a)).filter((t=>'OPTION'!==t.tagName)).filter((t=>'GS-ITEM'!==t.tagName)).filter((t=>t!==e.#Ut)).filter((t=>t!==e.filter)).filter((t=>!GSDOM.closest(t,'gs-form-group'))).forEach((t=>e.#Hc(t,i,n)))}))}#Fc(t){const e=this,r=e.list;e.value='',e.#Ut.disabled=!1;const s=GSAttr.get(e.filter,'data-group'),n=s?`option[data-group="${s}"]`:`option[data-id="${t.target.value}"]`;GSDOM.queryAll(r,'option').forEach((t=>e.#Pc(t,!0))),GSDOM.queryAll(r,n).forEach((t=>e.#Pc(t,!1)))}#Pc(t,e){GSAttr.toggle(t,'disabled',e),GSDOM.toggleClass(t,'d-none',e)}#Hc(t,e='',r=''){const s=GSAttr.get(t,`data-${e}`,'').split(/[,;;]/),n=r.length>0&&s.includes(r);GSDOM.isFormElement(t)||GSDOM.isButtonElement(t)||'GS-FORM-GROUP'===t.tagName?GSAttr.toggle(t,'disabled',!n):n?GSDOM.show(t):GSDOM.hide(t),GSAttr.set(t,'data-ignore',!n||null),GSDOM.queryAll(t,'input,textarea,select').forEach((t=>GSAttr.set(t,'data-ignore',!n||null)))}#Bc(){const t=this,e=t.list;if(!e)return!0;if(!t.strict)return!0;if(!e.querySelector('option'))return!0;return null!=e.querySelector(`option[value="${t.value}"]`)}}class ComboController extends InteractiveController{constructor(t){super(t)}get list(){return this.component}onChange(t){super.onChange?.(t),this.#zc(t)}onBlur(t){super.onBlur?.(t),this.#zc(t)}#zc(t){const e=this;if(!e.component.toggling)return;const r=e.component.dataset.gsfTarget,s=e.component.dataset.gsfValue,n=e.component.dataset.gsfAttribute,i=e.component.value===s;e.formElements.filter((t=>t!=e.component)).filter((t=>!r||t.matches(r))).forEach((t=>GSAttr.toggle(t,n,i)))}}class ListController extends InteractiveController{constructor(t){super(t)}get list(){const t=this;if(t.component.list)return t.component.list;const e=GSAttr.get(t.component,'list');return GSDOM.getByID(t.owner,e)}}class ValidityController{#Ut=void 0;#jc=!1;constructor(t){const e=this;e.#jc=!1,e.#Ut=t,t.addController?.(e)}hostConnected(){}hostDisconnected(){const t=this;t.#Ut.removeController?.(t),t.#Ut=void 0,t.#jc=!1}get isAutoreport(){return this.#Ut.isAutoreport}get isAutovalidate(){return this.#Ut.isAutovalidate}get isValid(){return this.#Ut.validity.valid}get disabled(){return this.#Ut.disabled}get required(){return this.#Ut.required}get value(){return this.#Ut.value}get beep(){return this.#Ut.beep}get block(){return this.#Ut.block}get timeout(){return this.#Ut.timeout}get isVisible(){return GSDOM.isVisible(this.#Ut)}get form(){return this.#Ut.form}validate(){const t=this,e=t.isValid||t.disabled;return t.#qc(e),e}onFocus(t){this.validate()}onKeyDown(t){const e=this,r='Tab'===t.key,s='Enter'===t.key;if(r&&!e.validate()&&(e.#Vc(t),e.#_c()),s){const t=e.#Ut.form;t?.autosubmit&&t.requestSubmit()}}onInvalid(t){this.validate()}onChange(t){this.#Wc(t)}onBlur(t){this.#Vc(t),this.#Wc(t)}#Vc(t){const e=this;e.isValid||e.isVisible&&e.block&&(GSEvents.prevent(t,!1,!0,!1),e.#vn())}#Wc(t){return this.isAutoreport?this.#Yc():this.isAutovalidate?this.#Jc():this.validate()}#vn(){return this.#Ut.focus()}#Jc(){return this.validate(),this.#Ut.checkValidity()}#Yc(){return this.validate(),this.#Ut.reportValidity()}async#_c(){const t=this;if(!t.#jc&&!t.isValid&&t.isVisible){if(t.#jc=!0,t.beep)try{await t.#Kc(),await h.timeout(t.timeout)}catch(t){}t.#jc=!1}}#qc(t){const e=this;requestAnimationFrame((()=>{GSDOM.toggleClass(e.#Ut,'is-invalid',!t)}))}#Kc(){return GSBeep.beep(100,1200,150,'triangle')}}class PropagateController{#Ut=void 0;#Zi=void 0;constructor(t){const e=this;e.#Ut=t,e.#Ut.addController(e)}hostConnected(){this.#Zi=this.#Ut.closest('form')?.handler}hostDisconnected(){const t=this;t.#Ut?.removeController(t),t.#Ut=void 0,t.#Zi=void 0}hostUpdated(){}onInvalid(t){this.handler.onInvalid?.(t)}onChange(t){this.handler.onChange?.(t)}onBlur(t){this.handler.onBlur?.(t)}onFocus(t){this.handler.onFocus?.(t)}get handler(){const t=this;return t.#Zi??=t.#Ut?.closest('form')?.[n],t.#Zi}}const St={[r](){const t=GSDOM.root(this);return GSDOM.unwrap(t)},[s](){return GSDOM.parentAll(this).filter((t=>t instanceof gt)).next()?.value},closest(t=''){return GSDOM.closest(this,t)},query(t='',e=!1){return GSDOM.query(this,t,!1,e)},queryAll(t='',e=!1){return GSDOM.queryAll(this,t,!1,e)},notify(t=!0,e=!1,r){this.emit('notify',r,t,e,!0)},emit(t,e='',r=!1,s=!1,n=!1){return GSEvents.send(this,t,e,r,s,n)},waitEvent(t='',e=0){return GSEvents.wait(this,t,e)},once(t,e,r=!1){return this.listen(t,e,!0,r)},on(t,e,r=!1,s=!1){return this.listen(t,e,r,s)},off(t,e){return this.unlisten(t,e)},prevent(t,e=!0,r=!0,s=!0){GSEvents.prevent(t,e,r,s)},listen(t,e,r=!1,s=!1){return this.attachEvent(this,t,e,r,s)},unlisten(t,e){return this.removeEvent(this,t,e)},attachEvent(t,e='',r,s=!1,n=!1){return GSEvents.attach(this,t,e,r,s,n)},removeEvent(t,e='',r){return GSEvents.remove(this,t,e,r)}},mixin=t=>Object.assign(t.prototype||t,St);class FormController{#Ut=void 0;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){}hostDisconnected(){const t=this;t.#Ut.removeController(t),t.#Ut=void 0}hostUpdated(){}onReset(t){this.#Xc(t)}onSubmit(t){}onFormData(t){}onValidation(t){}onInvalid(t){this.#Xc(t)}onChange(t){this.#Xc(t)}onBlur(t){this.#Xc(t)}onFocus(t){}validate(){this.#Xc()}get form(){return this.#Ut}get inputs(){return this.form?.inputs}#Qc=!1;#Zc=new Set;#Xc(t){const e=this,r=t?.detail?.target||t?.target;GSDOM.isFormElement(r)&&!r.validity.valid&&e.#Zc.add(r),e.#Qc||(e.#Qc=!0,requestAnimationFrame((()=>{if(e.form)try{const t=e.form.checkValidity();e.form.onvalidation?.(t);const r=Array.from(e.#Zc).filter((t=>!t.validity.valid));e.#Zc.clear();const s={valid:t&&0===r.length,fields:r};e.form.emit('validation',s)}catch(t){}finally{e.#Qc=!1}else e.#Qc=!1})))}}class ControllerHandler{#Ut=void 0;#Er=void 0;#Jr=void 0;#td=void 0;#ed=void 0;#rd=void 0;#sd=void 0;#nd=void 0;#id=void 0;#ad=void 0;#tn=void 0;constructor(t){this.#Ut=t}connectedCallback(){const t=this,e=t.#Ut;if(t.isButton)return t.#od((t=>t.hostConnected?.()));t.isForm?(e.on('reset',t.#ld.bind(t)),e.on('submit',t.#cd.bind(t)),e.on('formdata',t.#dd.bind(t)),e.on('validation',t.#ud.bind(t)),e.on('enabled',t.#hd.bind(t)),e.on('disabled',t.#pd.bind(t))):(e.on('keydown',t.#U.bind(t)),e.on('keyup',t.#An.bind(t)),e.on('input',t.#Eo.bind(t)),e.on('change',t.onChange.bind(t)),e.on('focus',t.onFocus.bind(t)),e.on('blur',t.onBlur.bind(t)),e.on('invalid',t.onInvalid.bind(t))),t.#od((t=>t.hostConnected?.()))}disconnectedCallback(){const t=this;GSEvents.detachListeners(t.#Ut),t.#od((t=>t.hostDisconnected?.())),t.#Jr?.clear(),t.#Ut=void 0,t.#Er=void 0,t.#Jr=void 0,t.#sd=void 0,t.#nd=void 0,t.#ad=void 0,t.#tn=void 0,t.#id=void 0,t.#td=void 0,t.#ed=void 0,t.#rd=void 0}hostUpdated(t){const e=this;e.#Ut.hostUpdated||e.isButton||(e.#md(),e.#Ut.checkValidity?.()),e.#od((e=>e.hostUpdated?.(t)))}addController(t){if(!t)return;const e=this;e.#Jr??=new Set,e.#Jr.add(t),e.#gd(),e.#Ut.isConnected&&t.hostConnected?.()}removeController(t){this.#Jr?.delete(t),this.#gd()}#gd(){const t=this;t.#Er=t.#Jr?Array.from(t.#Jr).reverse():[]}#od(t){'function'==typeof t&&this.#Er?.forEach(t)}#pd(t=!1){this.#od((e=>e.onDisable?.(t)))}#hd(t=!1){this.#od((e=>e.onEnable?.(t)))}validate(){this.#od((t=>t.validate?.()))}#U(t){this.#od((e=>e.onKeyDown?.(t)))}#An(t){this.#od((e=>e.onKeyUp?.(t)))}#Eo(t){this.#od((e=>e.onInput?.(t)))}onFocus(t){this.#od((e=>e.onFocus?.(t)))}onInvalid(t){this.#od((e=>e.onInvalid?.(t)))}onChange(t){this.#od((e=>e.onChange?.(t)))}onBlur(t){this.#od((e=>e.onBlur?.(t)))}#ld(t){this.#od((e=>e.onReset?.(t)))}#cd(t){this.#od((e=>e.onSubmit?.(t)))}#dd(t){this.#od((e=>e.onFormData?.(t)))}#ud(t){this.#od((e=>e.onValidation?.(t)))}#md(){const t=this,e=t.#Ut;t.isForm?t.#ad??=new FormController(e):(t.#rd??=new ValidityController(e),t.isInput&&t.#fd(),t.isTextArea&&t.#Sd(),t.isSelect&&(t.#sd??=new ComboController(e)),t.#id??=new PropagateController(e)),e.storage&&(t.isSelect||t.isDataList)&&(t.#tn??=new DataController(e))}#Sd(){const t=this,e=t.#Ut;t.#ed??=new TextController(e),t.#td??=new CopySelectController(e)}#fd(){const t=this,e=t.#Ut;let r=!1;switch(e.type){case'text':r=!0,t.#ed??=new TextController(e);break;case'password':r=!0,t.#ed??=new PasswordController(e);break;case'number':r=!0,t.#ed??=new NumberController(e)}r&&(t.#td??=new CopySelectController(e))}get tagName(){return this.#Ut?.tagName}get isForm(){return'FORM'===this.tagName}get isTextArea(){return'TEXTAREA'===this.tagName}get isInput(){return'INPUT'===this.tagName}get isSelect(){return'SELECT'===this.tagName}get isDataList(){return'DATALIST'===this.tagName}get isButton(){return'BUTTON'===this.tagName}}class ButtonController{#Ut=void 0;#Ht=void 0;constructor(t){const e=this;e.#Ut=t,e.form?.addController?.(e)}hostConnected(){const t=this,e=t.button;t.#Ht=t.onClick.bind(t),t.#Ht=e.rateLimit>0?p.debounce(t.#Ht,e.rateLimit,!0):t.#Ht,e.on('click',t.#Ht)}hostDisconnected(){const t=this,e=t.button;e?.off('click',t.#Ht),e?.removeController(t),t.#Ut=void 0,t.#Ht=void 0}onInvalid(t){this.updateState()}onValid(t){this.updateState()}onChange(t){this.updateState()}onBlur(t){this.updateState()}onClick(t){const e=this.button,r=this.form;return r.disabled?GSEvents.prevent(t):e.isReset?r?.reset():r&&e.isSubmit?(GSEvents.prevent(t),void(r.isValid?r.requestSubmit():e.disabled=!0)):void(r&&e.isManaged&&(r.isValid||(e.disabled=!0,GSEvents.prevent(t))))}updateState(){const t=this.button,e=this.form;(t.isSubmit||t.isManaged)&&!1===e?.disabled&&(t.disabled=!1===e.isValid)}get button(){return this.#Ut}get form(){return this.#Ut?.form}}class GSExtButtonElement extends HTMLButtonElement{static{mixin(GSExtButtonElement),GSDOM.define('gs-ext-button',GSExtButtonElement,{extends:'button'}),Object.seal(GSExtButtonElement)}static get observedAttributes(){return['disabled']}#yd=void 0;#bd=!1;#vd=void 0;#nd=void 0;constructor(){super()}connectedCallback(){const t=this;(t.isSubmit||t.isReset||t.isManaged)&&(t.#nd=new ButtonController(t)),t.#vd?.connectedCallback(),t.#Gd()}disconnectedCallback(){const t=this;GSEvents.detachListeners(t),t.#vd?.disconnectedCallback(),t.#vd=void 0,t.#yd=void 0}attributeChangedCallback(t,e,r){const s=this;s.#Gd(t),s.willUpdate(t,e,r),s.#vd?.hostUpdated(t)}#Gd(t){const e=this;e.#bd||(e.firstUpdated(t),e.#vd?.hostUpdated(t),e.#bd=!0)}firstUpdated(t){}willUpdate(t,e,r){'disabled'===t&&this.emit('disabled',this.disabled,!0,!0,!0)}addController(t){const e=this;e.#vd??=new ControllerHandler(e),e.#vd?.addController(t)}removeController(t){this.#vd?.removeController(t)}get owner(){return this[r]()}get parentComponent(){return this[s]()}get hasUpdated(){return this.#bd}get form(){const t=this;return t.#yd??=super.form||t.owner?.form||t.closest?.('form'),t.#yd}get isValid(){return!this.form||this.form.checkValidity()}get isManaged(){return'submit'===this.dataset.gsType}get isSubmit(){return ButtonTypes.isSubmit(this.type)}get isReset(){return ButtonTypes.isReset(this.type)}get rateLimit(){return GSAttr.getAsNum(this,'rate-limit',0)}}class GSExtInputElement extends HTMLInputElement{static{mixin(GSExtInputElement),GSDOM.define('gs-ext-input',GSExtInputElement,{extends:'input'}),Object.seal(GSExtInputElement)}static get observedAttributes(){return['multipattern','mask','required','disabled']}#vd=void 0;#Cd=void 0;#Ed=void 0;#wd=void 0;#Dc=void 0;#bd=!1;constructor(){super(),this.#vd=new ControllerHandler(this)}connectedCallback(){const t=this;t.#vd?.connectedCallback(),t.#Gd(),t.dataset.value=t.value,t.on('change',(e=>t.dataset.value=t.value))}disconnectedCallback(){const t=this;t.#vd?.disconnectedCallback(),t.#vd=void 0,t.#Cd=void 0,t.#Ed=void 0,t.#wd=void 0,t.#Dc=void 0,GSEvents.detachListeners(t)}attributeChangedCallback(t,e,r){const s=this;if(s.isCheckBox&&'required'===t&&s.required)return s.required=!1;s.#Gd(t),s.willUpdate(t,e,r),s.#vd?.hostUpdated(t)}addController(t){this.#vd?.addController(t)}removeController(t){this.#vd?.removeController(t)}get owner(){return this[r]()}get parentComponent(){return this[s]()}get hasUpdated(){return this.#bd}get autocopy(){return this.hasAttribute('autocopy')}get autofocus(){return this.hasAttribute('autofocus')}get autoselect(){return this.hasAttribute('autoselect')}get autoreport(){return this.hasAttribute('autoreport')}get autovalidate(){return this.hasAttribute('autovalidate')}get beep(){return this.hasAttribute('beep')}get block(){return this.hasAttribute('block')}get mask(){return GSAttr.get(this,'mask')}get multipattern(){return this.#Dc}get reveal(){return this.hasAttribute('reveal')}get timeout(){return GSAttr.getAsNum(this,'timeout',0)}set autocopy(t){GSAttr.toggle(this,'autocopy',t)}set autofocus(t){GSAttr.toggle(this,'autocopy',t)}set autoselect(t){GSAttr.toggle(this,'autocopy',t)}set autoreport(t){GSAttr.toggle(this,'autoreport',t)}set autovalidate(t){GSAttr.toggle(this,'autovalidate',t)}set beep(t){GSAttr.toggle(this,'beep',t)}set block(t){GSAttr.toggle(this,'block',t)}set mask(t){GSAttr.set(this,'mask',t)}set multipattern(t){let e=t;if(h.isJsonType(t)){const r=(Array.isArray(t)?t:[t]).map((t=>t.source||t.toString?.()||t));e=JSON.stringify(r)}GSAttr.set(this,'multipattern',e)}set reveal(t){'password'===this.type&&GSAttr.toggle(this,'reveal',t)}set timeout(t){GSAttr.setAsNum(this,'timeout',t)}get required(){return super.required}set required(t){super.required=!this.isCheckBox&&h.asBool(t)}get raw(){return super.value}get value(){return this.#Cd?this.#Cd.value:super.value}set value(t){super.value=this.mask===t?'':t}get isAutocopy(){return this.autocopy||this.form?.autocopy}get isAutoselect(){return this.autoselect||this.form?.autoselect}get isAutovalidate(){return this.autovalidate||this.form?.autovalidate}get isAutoreport(){return this.autoreport||this.form?.autoreport}get isFocused(){return this===document.activeElement}get isCheckBox(){return'checkbox'===this.type}get form(){return super.form||this.owner?.form||this.closest?.('form')}reset(){const t=this;t.setCustomValidity(''),GSDOM.reset(t),t.#or()}checkValidity(){return this.#or(),super.checkValidity()}reportValidity(){return this.#or(),super.reportValidity()}#or(t){return this.#vd.validate(t)}closest(t=''){return GSDOM.closest(this,t)}firstUpdated(t){const e=this;e.autofocus&&e.focus();const r=e.formComponent?.data;r&&GSDOM.fromObject2Element(e,r)}willUpdate(t,e,r){const s=this;'mask'===t&&s.#$d(),'multipattern'===t&&s.#xd(r),'list'===t&&s.#Dd(),'required'!==t&&'disabled'!==t||s.#or()}#Gd(t){const e=this;e.#bd||(e.#$d(),e.#xd(e.pattern),e.#Dd(),e.firstUpdated(t),e.#vd?.hostUpdated(t),e.#bd=!0,e.#or())}#$d(){const t=this;t.mask&&'text'===t.type?(t.placeholder=t.mask,t.#Cd??=new MaskController(t)):(t.removeController(t.#Cd),t.#Cd=null)}#xd(t){const e=this;if(h.isJsonString(t)){const r=h.toJson(t,[]);e.#Dc=(Array.isArray(r)?r:[]).map((t=>new RegExp(t)))}else e.#Dc=void 0;const r=Array.isArray(e.#Dc)&&e.#Dc.length>0,s=['text','password'].includes(e.type);r&&s?e.#Ed??=new MultipatternController(e):(e.removeController(e.#Ed),e.#Ed=null)}#Dd(){const t=this;t.list?t.#wd??=new ListController(t):(t.removeController(t.#wd),t.#wd=null)}}class GSExtTextAreaElement extends HTMLTextAreaElement{static{mixin(GSExtTextAreaElement),GSDOM.define('gs-ext-textarea',GSExtTextAreaElement,{extends:'textarea'}),Object.seal(GSExtTextAreaElement)}static get observedAttributes(){return['required','disabled']}#bd=!1;#vd=void 0;constructor(){super(),this.#vd=new ControllerHandler(this)}connectedCallback(){this.#vd?.connectedCallback(),this.#Gd()}disconnectedCallback(){const t=this;t.#vd?.disconnectedCallback(),t.#vd=void 0,GSEvents.detachListeners(t)}attributeChangedCallback(t,e,r){const s=this;s.#Gd(t),s.willUpdate(t,e,r),s.#vd?.hostUpdated(t)}#Gd(t){const e=this;e.#bd||(e.firstUpdated(t),e.#vd?.hostUpdated(t),e.#bd=!0,e.#or())}firstUpdated(t){const e=this,r=e.formComponent?.data;r&&GSDOM.fromObject2Element(e,r),e.autofocus&&e.focus()}willUpdate(t,e,r){'required'!==t&&'disabled'!==t||this.#or()}addController(t){this.#vd?.addController(t)}removeController(t){this.#vd?.removeController(t)}reset(){const t=this;t.setCustomValidity(''),GSDOM.reset(t),t.#or()}checkValidity(){return this.#or(),super.checkValidity()}reportValidity(){return this.#or(),super.reportValidity()}#or(t){return this.#vd.validate(t)}get owner(){return this[r]()}get parentComponent(){return this[s]()}get hasUpdated(){return this.#bd}get autoreport(){return this.hasAttribute('autoreport')}get autovalidate(){return this.hasAttribute('autovalidate')}get autoselect(){return this.hasAttribute('autoselect')}get autocopy(){return this.hasAttribute('autocopy')}get block(){return this.hasAttribute('block')}get beep(){return this.hasAttribute('beep')}get timeout(){return GSAttr.getAsNum(this,'timeout',0)}set autoreport(t){GSAttr.toggle(this,'autoreport',t)}set autovalidate(t){GSAttr.toggle(this,'autovalidate',t)}set autoselect(t){GSAttr.toggle(this,'autoselect',t)}set autocopy(t){GSAttr.toggle(this,'autocopy',t)}set block(t=!1){GSAttr.toggle(this,'block',t)}set beep(t=!1){GSAttr.toggle(this,'beep',t)}set timeout(t=0){return GSAttr.setAsNum(this,'timeout',t)}get form(){return super.form||this.owner?.form||this.closest?.('form')}get isAutocopy(){return this.autocopy||this.form?.autocopy}get isAutoselect(){return this.autoselect||this.form?.autoselect}get isAutovalidate(){return this.autovalidate||this.form?.autovalidate}get isAutoreport(){return this.autoreport||this.form?.autoreport}async load(t=''){t&&(this.value=await GSLoader.loadSafe(t,'GET',null,!0))}}class GSExtSelectElement extends HTMLSelectElement{static{mixin(GSExtSelectElement),GSDOM.define('gs-ext-select',GSExtSelectElement,{extends:'select'}),Object.seal(GSExtSelectElement)}#Hr=[];#vd=void 0;#bd=!1;constructor(){super(),this.#vd=new ControllerHandler(this)}static get observedAttributes(){return['url']}connectedCallback(){this.#vd?.connectedCallback(),this.#Gd()}disconnectedCallback(){const t=this;t.#vd?.disconnectedCallback(),t.#vd=void 0,GSEvents.detachListeners(t)}attributeChangedCallback(t,e,r){const s=this;s.#Gd(t),s.willUpdate(t,e,r),s.#vd?.hostUpdated(t)}#Gd(t){const e=this;e.#bd||(e.firstUpdated(t),e.#vd?.hostUpdated(t),e.#bd=!0)}firstUpdated(t){const e=this,r=e.form?.data;r&&GSDOM.fromObject2Element(e,r),e.autofocus&&e.focus(),e.on('reset',e.#ld)}willUpdate(t,e,r){'url'===t&&this.load(r),'required'!==t&&'disabled'!==t||this.#or()}addController(t){this.#vd?.addController(t)}removeController(t){this.#vd?.removeController(t)}get owner(){return this[r]()}get parentComponent(){return this[s]()}get asJSON(){return this.query('option').forEach((t=>GSDOM.fromElement2Object(t,{})))}set asJSON(t){this.apply(t)}get toggling(){return this.hasAttribute('toggling')}set toggling(t){GSAttr.toggle(this,'toggling',t)}get key(){return GSAttr.get(this,'key',0)}get storage(){return GSAttr.get(this,'storage')}get form(){return super.form||this.owner?.form||this.closest?.('form')}get values(){return Array.from(this.selectedOptions).map((t=>t.value))}set values(t){t??=[],h.isString(t)&&(t=t.split(',')),Array.from(el.options).forEach((e=>e.selected=t.indexOf(e.value)>-1))}checkValidity(){return this.#or(),super.checkValidity()}reportValidity(){return this.#or(),super.reportValidity()}#or(t){return this.#vd.validate(t)}reset(){GSDOM.resetSelect(this)}onDataRead(t=[]){const e=this.key;t=(t=Array.isArray(t)?t:[t]).map((t=>h.isString(t)?t:t[e])).filter((t=>t)).map((t=>({text:t,value:t}))),this.apply(t)}async load(t=''){if(t)try{const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}catch(t){GSLog.error(this,t)}}apply(t){if(!Array.isArray(t))return!1;const e=this;return queueMicrotask((()=>{const r=[];t.forEach((t=>{r.push(e.#Td(t))})),GSDOM.setHTML(e,r.join('\n'))})),!0}#Td(t){const e=['<option'];return Object.entries(t).forEach((t=>{const r=t[0],s=t[1];if('text'!==r)return'selected'===r?e.push(r):void e.push(`${r}="${s}"`)})),e.push('>'),e.push(t.text),e.push('</option>'),e.join(' ')}#ld(t){this.reset()}}class GSExtDataListElement extends HTMLDataListElement{static{mixin(GSExtDataListElement),GSDOM.define('gs-ext-datalist',GSExtDataListElement,{extends:'datalist'}),Object.seal(GSExtDataListElement)}#Hr=[];#vd=void 0;#bd=!1;constructor(){super(),this.#vd=new ControllerHandler(this)}static get observedAttributes(){return['url']}connectedCallback(){const t=this;GSID.setIf(t),t.#vd?.connectedCallback(),t.#Gd()}disconnectedCallback(){const t=this;t.#vd?.disconnectedCallback(),t.#vd=void 0,GSEvents.detachListeners(t)}attributeChangedCallback(t,e,r){const s=this;s.#Gd(t),s.willUpdate(t,e,r),s.#vd?.hostUpdated(t)}#Gd(t){const e=this;e.#bd||(e.firstUpdated(t),e.#vd?.hostUpdated(t),e.#bd=!0)}firstUpdated(t){const e=this;e.autofocus&&e.focus();const r=e.form?.data;r&&GSDOM.fromObject2Element(e,r)}willUpdate(t,e,r){'url'===t&&this.load(r),'required'!==t&&'disabled'!==t||this.validate()}addController(t){this.#vd?.addController(t)}removeController(t){this.#vd?.removeController(t)}get owner(){return this[r]()}get parentComponent(){return this[s]()}get asJSON(){return this.query('option').forEach((t=>GSDOM.fromElement2Object(t,{})))}set asJSON(t){this.apply(t)}get storage(){return GSAttr.get(this,'storage')}get key(){return GSAttr.get(this,'key',0)}onDataRead(t=[]){const e=this.key;t=(t=Array.isArray(t)?t:[t]).map((t=>h.isString(t)?t:t[e])).filter((t=>t)).map((t=>({value:t}))),this.apply(t)}async load(t=''){if(t)try{const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}catch(t){GSLog.error(this,t)}}apply(t){if(!Array.isArray(t))return!1;const e=this;return queueMicrotask((()=>{const r=[];t.forEach((t=>{r.push(e.#Td(t))})),GSDOM.setHTML(e,r.join('\n'))})),!0}#Td(t){const e=['<option'];return h.isString(t)&&(t={value:t}),Object.entries(t).forEach((t=>{const r=t[0],s=t[1];if('text'!==r)return'selected'===r?e.push(r):void e.push(`${r}="${s}"`)})),t.text?(e.push('>'),e.push(t.text),e.push('</option>')):e.push('>'),e.join(' ')}}class GSExtFormElement extends HTMLFormElement{static{mixin(GSExtFormElement),GSDOM.define('gs-ext-form',GSExtFormElement,{extends:'form'}),Object.seal(GSExtFormElement)}static get observedAttributes(){return['url','disabled']}#bd=!1;onvalid=void 0;constructor(){super(),this[n]=new ControllerHandler(this)}connectedCallback(){this.#vd?.connectedCallback?.(),this.#Gd()}disconnectedCallback(){const t=this;t.#vd?.disconnectedCallback?.(),t[n]=void 0,GSEvents.detachListeners(t)}attributeChangedCallback(t,e,r){const s=this;s.#Gd(t),s.willUpdate(t,e,r),s.#vd?.hostUpdated?.(t)}#Gd(t){const e=this;e.#bd||(e.firstUpdated(t),e.#vd?.hostUpdated?.(t),e.#bd=!0)}firstUpdated(t){const e=this,r=e.formComponent?.data;r&&GSDOM.fromObject2Element(e,r),e.autofocus&&e.focus()}willUpdate(t,e,r){const s=this;'url'===t&&s.load(r),'disabled'===t&&(s.disabled?s.disable():s.enable())}addController(t){this.#vd?.addController(t)}removeController(t){this.#vd?.removeController(t)}reset(){this.inputs.filter((t=>GSDOM.isShadowed(t))).forEach((t=>GSDOM.reset(t))),super.reset()}checkValidity(){return super.checkValidity()&&this.inputs.filter((t=>!t.disabled)).every((t=>t.checkValidity()))}reportValidity(){return super.reportValidity()&&this.inputs.filter((t=>!t.disabled)).every((t=>t.reportValidity()))}field(t){return t&&this.inputs.filter((e=>e.name===t))}disable(){GSDOM.disableInput(this),this.emit('disabled')}enable(){GSDOM.enableInput(this),this.emit('enabled')}async load(t=''){if(t)try{const e=await GSLoader.loadSafe(t,'GET',null,!0);this.onDataRead(e)}catch(t){GSLog.error(this,t)}}#Bn(t){return this.queryAll(`button[type="${t}"]`,!0)}#Ad(t=!1){return this.queryAll('input,select,output,textarea',t)}get owner(){return this[r]()}get parentComponent(){return this[s]()}get hasUpdated(){return this.#bd}get asJSON(){const t={};return this.inputs.forEach((e=>GSDOM.fromElement2Object(e,t))),t}set asJSON(t){this.inputs.forEach((e=>GSDOM.fromObject2Element(e,t))),this.#vd?.validate()}get autocopy(){return this.hasAttribute('autocopy')}get autoselect(){return this.hasAttribute('autoselect')}get autoreport(){return this.hasAttribute('autoreport')}get autovalidate(){return this.hasAttribute('autovalidate')}get autosubmit(){return this.hasAttribute('autosubmit')}get block(){return this.hasAttribute('block')}get beep(){return this.hasAttribute('beep')}get timeout(){return GSAttr.getAsNum(this,'timeout',0)}get disabled(){return this.hasAttribute('disabled')}set disabled(t){GSAttr.toggle(this,'disabled',h.asBool(t))}set autocopy(t){GSAttr.toggle(this,'autocopy',h.asBool(t))}set autoselect(t){GSAttr.toggle(this,'autoselect',h.asBool(t))}set autoreport(t){GSAttr.toggle(this,'autoreport',h.asBool(t))}set autovalidate(t){GSAttr.toggle(this,'autovalidate',h.asBool(t))}set autosubmit(t){GSAttr.toggle(this,'autosubmit',h.asBool(t))}set block(t=!1){GSAttr.toggle(this,'block',h.asBool(t))}set beep(t=!1){GSAttr.toggle(this,'beep',h.asBool(t))}set timeout(t=0){return GSAttr.setAsNum(this,'timeout',t)}get submitButton(){return this.#Bn('submit')}get resetButton(){return this.#Bn('reset')}get elements(){return super.elements}get fields(){return Array.from(this.elements).map((t=>t.field||t))}get inputs(){return this.#Ad(!0)}get invalid(){return this.inputs.filter((t=>!t.disabled)).filter((t=>!t.validity.valid))}get isValid(){return 0===this.invalid.length}get#vd(){return this[n]}}class GSBreadcrumbElement extends gt{static properties={storage:{},data:{type:Array},color:{...tt},divider:{reflect:!0},spacing:{reflect:!0,type:Number}};constructor(){super();const t=this;t.spacing=1,t.divider='chevron-right',t.#kd()}willUpdate(t){super.willUpdate(t),this.#kd()}renderUI(){const t=this;return k`<nav part="base" class="breadcrumb" @click="${t.#Tn}" dir="${M(t.direction)}"><slot>
      ${F(t.data||[],(t=>t),(e=>k`
        <gs-breadcrumb-item  
        href="${e.href}"
        color="${e.color}"
        .data=${e}     
        .active=${e.active}
        .divider="${e.divider||t.divider}"
        .spacing="${e.spacing||t.spacing}">
          ${e.$text}
        </gs-breadcrumb-item>
      `))}
    </slot></nav>`}onDataRead(t){this.data=t}#kd(){const t=this;t.queryAll('gs-breadcrumb-item').forEach((e=>{e.divider=t.divider,e.spacing=t.spacing,e.color=t.color}))}#Tn(t){const e=t.target.closest('gs-bradcrumb-item');e?.handle(t)}static{this.define('gs-breadcrumb')}}class GSBreadcrumbItemElement extends gt{static properties={href:{},color:{...tt},data:{state:!0,type:Object},active:{reflect:!0,type:Boolean},divider:{state:!0,type:Boolean},spacing:{state:!0,type:Number}};constructor(){super(),this.data={}}renderUI(){const t=this;return k`<div part="base" class="breadcrumb-item ${x(t.renderClass())}"  dir="${M(t.direction)}">
        <span part="prefix"><slot name="prefix"></slot></span>        
        ${t.#Md}
        <span part="suffix"><slot name="suffix"></slot></span>
        <span part="separator"><slot name="separator">${t.#Od}</slot></span>
      </div>`}renderClass(){return{...super.renderClass(),active:this.active}}get#Md(){const t=this;return t.active?k`<slot></slot>`:(t.data.url=t.data.url||t.href,t.data.part='label',GSLinklement.generate(t.data,{}))}get#Od(){const t=this;return t.nextElementSibling&&t.divider?k`<gs-icon size="7" color="${t.color}" css="mx-${t.spacing}" name="${t.divider}"></gs-icon>`:''}handle(t){GSAttributeHandler.process(this.query('a',!0),t)}static{this.define('gs-breadcrumb-item')}}class GSAttachment{#Ld=null;#Id=null;constructor(t,e){this.#Id=t,this.#Ld=e}get file(){return this.#Id}get directory(){return this.#Ld}get fullPath(){const t=this;return t.directory?`${t.directory}/${t.file.name}`:t.file.name}get isImage(){return GSAttachment.isImageType(this.file.type)}get isVideo(){return GSAttachment.isVideoType(this.file.type)}get isText(){return GSAttachment.isTextType(this.file.type)}static isImageType(t){return['image/gif','image/png','image/jpg','image/jpeg','image/svg+xml'].includes(t)}static isVideoType(t){return['video/mp4','video/quicktime'].includes(t)}static isTextType(t){return['application/json','text/plain','text/html','image/svg+xml'].includes(t)}static traverse(t,e){return GSAttachment.#Nd(t,e)}static from(t){return Array.from(t).filter((t=>t instanceof File)).map((t=>new GSAttachment(t)))}static#Nd(t,e){return e&&GSAttachment.#Rd(t)?GSAttachment.#Ud('',GSAttachment.#Fd(t)):Promise.resolve(GSAttachment.#Bd(Array.from(t.files||[])).map((t=>new GSAttachment(t))))}static#Hd(t){return t.name.startsWith('.')}static#Bd(t){return Array.from(t).filter((t=>!GSAttachment.#Hd(t)))}static#Pd(t){return new Promise(((e,r)=>{t.file(e,r)}))}static#zd(t){return new Promise(((e,r)=>{const s=[],n=t.createReader(),read=()=>{n.readEntries((t=>{t.length>0?(s.push(...t),read()):e(s)}),r)};read()}))}static async#Ud(t,e){const r=[];for(const s of GSAttachment.#Bd(e))if(s.isDirectory){const t=await GSAttachment.#zd(s),e=await GSAttachment.#Ud(s.fullPath,t);r.push(...e)}else{const e=await GSAttachment.#Pd(s);r.push(new GSAttachment(e,t))}return r}static#Rd(t){return Array.from(t.items).some((t=>{const e=t.webkitGetAsEntry?.();return e?.isDirectory}))}static#Fd(t){return Array.from(t.items).map((t=>t.webkitGetAsEntry?.())).filter((t=>null!=t))}static async upload(t='*/*',e=!1){const r=document.createElement('input');r.type='file',r.accept=t,r.style.display='none',document.body.appendChild(r),r.click(),await GSEvents.wait(r,'change',0,!1);try{if(0===r.files.length)return null;const t=r.files.item(0),s=!e&&GSAttachment.isTextType(t.type),n=new FileReader;if(s?n.readAsText(t):n.readAsArrayBuffer(t),await GSEvents.wait(n,'loadend',0,!1),n.readyState===FileReader.DONE)return s?n.result:new Uint8Array(n.result)}finally{document.body.removeChild(r)}return null}static download(t,e,r){if(!e)throw new Error('No content to download');r=r||GSAttachment.toMime(e)||'application/octet-stream',t=t||`file-${Date.now()}.${GSAttachment.mimeToExt(r)}`;const s=h.isString(e)?{type:r,encoding:'UTF-8'}:{type:r},n=new Blob([e],s),i=globalThis.URL.createObjectURL(n),a=document.createElement('a');try{a.href=i,a.download=t,document.body.appendChild(a),a.click()}finally{document.body.removeChild(a),globalThis.URL.revokeObjectURL(i)}}static mimeToExt(t){return{'application/octet-stream':'bin','application/json':'json','text/plain':'txt','text/html':'html','image/png':'png','image/jpeg':'jpg','image/gif':'gif','image/webp':'webp','image/svg+xml':'svg','application/pdf':'pdf','video/mp4':'mp4'}[t]||'bin'}static toMime(t){if(h.isString(t))return t=t.trim(),h.isJsonString(t)?'application/json':t.startsWith('<svg')||t.startsWith('<?xml')||t.startsWith('<!DOCTYPE svg')?'image/svg+xml':t.startsWith('<!DOCTYPE html')||t.startsWith('<html')?'text/html':'text/plain';if(t instanceof Uint8Array&&t.length>4){if(137===t[0]&&80===t[1]&&78===t[2]&&71===t[3])return'image/png';if(255===t[0]&&216===t[1]&&255===t[2])return'image/jpeg';if(71===t[0]&&73===t[1]&&70===t[2])return'image/gif';if(82===t[0]&&73===t[1]&&70===t[2]&&70===t[3])return'image/webp';if(37===t[0]&&80===t[1]&&68===t[2]&&70===t[3])return'application/pdf';if(0===t[0]&&0===t[1]&&0===t[2]&&24===t[3])return'video/mp4'}return null}}class GSFileBoxElement extends gt{static TITLE='Drop file/s here or click to select';static CSS='border-2 p-4 d-block text-center dash';static properties={cssList:{attribute:'css-list'},cssLabel:{attribute:'css-label'},cssInput:{attribute:'css-input'},multiple:{reflect:!0,type:Boolean},directory:{reflect:!0,type:Boolean},name:{},title:{},accept:{},filter:{},maxFileSize:{reflect:!0,attribute:'max-file-size',type:Number}};#jd=D();#qd=D();#Vd=null;constructor(){super(),this.css=GSFileBoxElement.CSS,this.cssInput='d-none',this.multiple=!0,this.title=GSFileBoxElement.TITLE,this.filter='^image/(gif|png|jpeg)$',this.directory=!1,this.maxFileSize=0}renderUI(){const t=this;return k`
        <div part="border" class="${x(t.renderClass())}"
            dir="${M(t.direction)}"
            @click="${t.#Tn}"
            @dragenter="${t.#_d}"
            @dragover="${t.#_d}"
            @dragleave="${t.#Wd}"
            @drop="${t.#Yd}"
            @paste="${t.#Jd}"
            @change="${t.#fo}">
            <label part="label" class="${t.cssLabel}" for="${t.name}">${t.translate(t.title)}</label>
            <input ${R(t.#qd)}  part="input" 
                type="file" accept="${t.accept}" 
                class="${t.cssInput}" 
                name="${t.name}" 
                id="${t.name}" 
                ${t.multiple?'multiple':''} 
                ${t.directory?'directory webkitdirectory':''}>
            <pre ${R(t.#jd)} part="list" class="${t.cssList}"></pre>
        </div>
        `}get listEl(){return this.#jd.value}get fileEl(){return this.#qd.value}#Tn(t){this.fileEl.click()}#_d(t){const e=this;e.#Vd&&clearTimeout(e.#Vd),e.#Vd=setTimeout((()=>e.removeAttribute('hover')),200);const r=t.dataTransfer;r&&e.#Kd(r)&&(r.dropEffect='copy',e.setAttribute('hover',''),t.preventDefault())}#Wd(t){t.dataTransfer&&(t.dataTransfer.dropEffect='none'),this.removeAttribute('hover'),GSEvents.prevent(t)}#Yd(t){const e=this;e.removeAttribute('hover');const r=t.dataTransfer;r&&e.#Kd(r)&&(e.#Xd(r),GSEvents.prevent(t))}#Jd(t){if(!t.clipboardData)return;if(!t.clipboardData.items)return;const e=this.#Qd(t.clipboardData.items);if(!e)return;const r=[e];this.#Xd(r),GSEvents.prevent(t)}#fo(t){const e=this.fileEl.files;e&&0!==e.length&&this.#Xd(e)}#Kd(t){return Array.from(t.types).includes('Files')}#Qd(t){const e=this.filter?new RegExp(this.filter):null;for(const r of t)if('file'===r.kind){if(!e)return r.getAsFile();if(e.test(r.type))return r.getAsFile()}return null}#xc(t){const e=new DataTransfer;t.forEach((t=>e.items.add(t.file))),this.fileEl.files=e.files,this.listEl.textContent=t.map((t=>t.file.name)).join('\n')}async#Xd(t){const e=this,r=t instanceof DataTransfer?await GSAttachment.traverse(t,e.directory):GSAttachment.from(t),s=e.maxFileSize>0?r.filter((t=>t.file.size<=e.maxFileSize)):r;e.emit('accept',{attachments:s},!0,!1,!0)&&s.length&&(e.#xc(s),e.emit('accepted',{attachments:s},!0))}static styles=T`
        .dash {
            border-style: var(--gs-fieldbox-border, dashed) !important;
            border-color: var(--gs-fieldbox-border-color, lightgrey);
        }
        input[type=file] {
            color : var(--gs-fieldbox-color, transparent);
        } 
        input[type=file]::file-selector-button {}             
        input[type=file]::file-selector-button:hover {}`;static{this.define('gs-filebox')}}class GSTimeFormat extends gt{static properties={interval:{reflect:!0,type:Number},language:{reflect:!0}};#a=0;constructor(){super(),this.interval=1,this.language=h.language}connectedCallback(){super.connectedCallback(),this.start()}disconnectedCallback(){this.stop(),super.disconnectedCallback()}renderUI(){return(new Date).toLocaleTimeString(this.language)}start(){const t=this;t.interval>0&&0===t.#a?t.#a=setInterval(t.#Qn.bind(t),1e3*t.interval):t.requestUpdate()}stop(){clearInterval(this.#a),this.#a=0}#Qn(){requestAnimationFrame((()=>this.requestUpdate()))}static{this.define('gs-time-format')}}class GSDateFormat extends gt{static properties={value:{},format:{},language:{}};constructor(){super(),this.language=navigator.language,this.value=new Date}renderUI(){return this.result}get result(){const t=this,e=t.date;return t.format?e.format(t.format):new Intl.DateTimeFormat(t.language,t.dataset).format(e)}get date(){const t=Date.parse(this.value||new Date),e=new GSDate(t);return e.language=this.language,e}static{this.define('gs-date-format')}}class GSYearFormat extends gt{static properties={offset:{type:Number}};constructor(){super(),this.offset=0}renderUI(){return this.value}get value(){return this.current+this.offset}get current(){return(new Date).getFullYear()}static{this.define('gs-year-format')}}class GSCurrencyFormat extends gt{static properties={value:{},currency:{},language:{}};renderUI(){return this.format}get#ps(){return Object.apply(this.dataset,{style:'currency',currency:this.currency})}get format(){const t=this;return new Intl.NumberFormat(t.language,t.#ps).format(t.value)}static{this.define('gs-currency-format')}}class GSStepStyle{static{GSCacheStyles.adopt(GSStepStyle.style)}static get style(){return'\n        .step .step-icon-wrap {\n            height: 80px;\n        }\n        \n        .step .step-icon-wrap::before,\n        .step .step-icon-wrap::after {\n            display: block;\n            position: absolute;\n            top: 50%;\n            width: 50%;\n            height: 3px;\n            margin-top: -1px;\n            background-color: var(--bs-gray-200);\n            content: \'\';\n            z-index: 1\n        }\n        \n        .step .step-icon-wrap::before {\n            left: 0\n        }\n        \n        .step .step-icon-wrap::after {\n            right: 0\n        }\n        \n        .step .step-icon {\n            width: 80px;\n            height: 80px;\n            line-height: 81px;\n            z-index: 5\n        }\n                \n        .step:first-child .step-icon-wrap::before {\n            display: none\n        }\n        \n        .step:last-child .step-icon-wrap::after {\n            display: none\n        }\n                \n        @media (max-width: 576px) {\n            .flex-sm-nowrap .step .step-icon-wrap::before,\n            .flex-sm-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 768px) {\n            .flex-md-nowrap .step .step-icon-wrap::before,\n            .flex-md-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 991px) {\n            .flex-lg-nowrap .step .step-icon-wrap::before,\n            .flex-lg-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 1200px) {\n            .flex-xl-nowrap .step .step-icon-wrap::before,\n            .flex-xl-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }        \n        '}}class GSStepElement extends gt{static INACTIVE='text-bg-light';static SELECTED='text-bg-primary';static COMPLETED='text-bg-secondary';static ICON_CSS='border rounded-circle fs-1';static TITLE_CSS='mb-0 fs-6 mt-3 fw-bold';static properties={title:{},icon:{},color:{},iconCSS:{attribute:'icon-css'},titleCSS:{attribute:'title-css'}};constructor(){super();const t=GSStepElement;this.icon=t.INACTIVE,this.iconCSS=t.ICON_CSS,this.titleCSS=t.TITLE_CSS}renderUI(){const t=this;return k`
        <div class="step d-block w-100 text-center mb-4"  dir="${M(t.direction)}">
            <div class="step-icon-wrap d-block w-100 text-center position-relative">
                <div class="step-icon position-relative d-inline-block ${t.iconCSS} ${t.color||GSStepElement.INACTIVE}">
                    ${t.#Kn()}
                </div>
            </div>
            <div class="step-title ${t.titleCSS}">${t.translate(t.title)}</div>
        </div>        
        `}#Kn(){return this.icon?k`<gs-icon name="${this.icon}"></gs-icon>`:k`<slot name="icon"></slot>`}static{this.define('gs-step')}}class GSStepsElement extends gt{static CSS='steps d-flex flex-wrap flex-sm-nowrap justify-content-between padding-top-2x padding-bottom-1x';#Zd=-1;constructor(){super()}shouldUpdate(t){return this.steps.length>0}renderUI(){return k`<div class="${x(this.renderClass())}"  dir="${M(this.direction)}"><slot></slot></div>`}renderClass(){return this.mapCSS(GSStepsElement.CSS,super.renderClass())}get steps(){return this.queryAll('gs-step',!1,!0)}get length(){return this.steps.length}get index(){return this.#Zd}set index(t=0){t<0||t>=this.length||(this.#Zd=t)}get current(){return this.steps[this.#Zd]}get isFirst(){return 0===this.#Zd}get isLast(){return this.#Zd===this.length-1}next(){const t=this;if(0!==t.steps.length)return!t.isLast&&(t.#Zd>-1&&(t.current.color=GSStepElement.COMPLETED),t.index++,t.current.color=GSStepElement.SELECTED,t.current)}previous(){const t=this;if(0!==t.steps.length)return!t.isFirst&&(t.current.color=GSStepElement.INACTIVE,t.index--,t.current.color=GSStepElement.SELECTED,t.current)}reset(){const t=this;t.steps.forEach((t=>t.color=GSStepElement.INACTIVE)),requestAnimationFrame((()=>{t.#Zd=0,t.current.color=GSStepElement.SELECTED}))}static{this.define('gs-steps',GSStepsElement)}}class GSNotificationElement extends gt{static TOP_START='position-fixed top-0 start-0';static TOP_CENTER='position-fixed top-0 start-50 translate-middle-x';static TOP_END='position-fixed top-0 end-0';static MIDDLE_START='position-fixed top-50 start-0 translate-middle-y';static MIDDLE_CENTER='position-fixed top-50 start-50 translate-middle';static MIDDLE_END='position-fixed top-50 end-0 translate-middle-y';static BOTTOM_START='position-fixed bottom-0 start-0';static BOTTOM_CENTER='position-fixed bottom-0 start-50 translate-middle-x';static BOTTOM_END='position-fixed bottom-0 end-0';static DEFAULT=GSNotificationElement.BOTTOM_END;static properties={position:{reflect:!0},native:{reflect:!0,type:Boolean}};#Se=new Set;constructor(){super(),this.css='p-3',this.position=GSNotificationElement.DEFAULT}renderUI(){return k`<div  dir="${M(this.direction)}"
            class="toast-container z-10k ${x(this.renderClass())}">
            <slot></slot>
        </div>`}renderClass(){return this.mapCSS(this.#tu,super.renderClass())}get#tu(){const t=GSNotificationElement,e=this.position||t.DEFAULT;return e.indexOf('_')>0&&t[e]?t[e]:e}clear(){this.queryAll('gs-toast').forEach((t=>t.dismiss()))}info(t,e,r,s,n,i){return this.display(t,e,'text-bg-info',r,s,n,i)}success(t,e,r,s,n,i){return this.display(t,e,'text-bg-success',r,s,n,i)}warn(t,e,r,s,n,i){return this.display(t,e,'text-bg-warning',r,s,n,i)}danger(t,e,r,s,n,i){return this.display(t,e,'text-bg-danger',r,s,n,i)}primary(t,e,r,s,n,i){return this.display(t,e,'text-bg-primary',r,s,n,i)}secondary(t,e,r,s,n,i){return this.display(t,e,'text-bg-secondary',r,s,n,i)}dark(t,e,r,s,n,i){return this.display(t,e,'text-bg-dark',r,s,n,i)}light(t,e,r,s,n,i){return this.display(t,e,'text-bg-light',r,s,n,i)}async display(t='',e='',r='',s=!1,n=2,i=.5,a){if(!e)return;const o=this;if(o.native){let r=await GSNotificationElement.requestPermission();if(r&&(r=o.#eu(t,e,n,i,a)),r)return r}return o.#ru(t,e,r,s,n,i)}#ru(t,e,r,s,n,i){const a=this,o=`<gs-toast css="${r}"  opened ${s?'closable':''} timeout="${n}"  delay="${i}" message="${e}" title="${t}" language="${a.language}" ></gs-toast>`,l=GSDOM.parse(o,!0);return requestAnimationFrame((async()=>{await a.#Ae(i);const t=a.#su;t!==a&&GSAttr.set(t,'class',`toast-container ${a.css} ${a.position}`),t.appendChild(l)})),l}async#eu(t,e,r,s,n={}){const i=this;await i.#Ae(s),n.body=n.body||e;const a=new Notification(t,n);i.#Se.add(a);const o=i.#nu.bind({notification:a,owner:i});return a.addEventListener('close',o),r>0&&(a.iid=setTimeout(o,1e3*r)),a}get#su(){const t=customElements.get('gs-dialog')?.top;return t&&t.isConnected&&GSDOM.query(t,'.toast-container')||this}async#Ae(t=0){GSUtil.isNumber(t)&&t>0&&await GSUtil.timeout(1e3*t)}#nu(){const t=this;t.notification.close(),t.owner.#Se.delete(t.notification),t.notification.iid&&clearTimeout(t.notification.iid)}clear(){const t=this;Array.from(t.querySelectorAll('gs-toast')).forEach((t=>t.remove())),t.#Se.forEach((t=>t.close())),t.#Se.clear()}static get isNativeSupported(){return'Notification'in self}static get isGranted(){return'granted'===Notification.permission}static async requestPermission(){const t=GSNotificationElement;return!!t.isNativeSupported&&(t.isGranted||await Notification.requestPermission(),t.isGranted)}static{this.define('gs-notification')}}class GSToastElement extends gt{static properties={closable:{reflect:!0,type:Boolean},opened:{reflect:!0,type:Boolean},message:{reflect:!0},title:{reflect:!0},delay:{reflect:!0,type:Number},timeout:{reflect:!0,type:Number}};#iu=!1;constructor(){super();const t=this;t.timeout=2,t.delay=2,t.auto=!0}shouldUpdate(t){const e=this,r=e.#au(t);return e.delay>0&&e.opened&&r&&(e.#iu=!0,e.#ou()),e.#lu&&!e.#iu}#au(t){return t.has('opened')}async#ou(){const t=this;await h.timeout(1e3*t.delay),t.#iu=!1,t.requestUpdate()}async updated(t){const e=this,r=e.#au(t);e.timeout>0&&e.opened?(await h.timeout(1e3*e.timeout),e.opened=!1):r&&!e.opened&&e.remove()}renderUI(){const t=this;return t.title?t.#cu():t.#du()}#cu(){const t=this;return k`
        <div dir="${M(t.direction)}"
            class="mt-1 mb-1 toast fade ${x(t.renderClass())}">
            <div class="toast-header">
                ${t.translate(t.title)}
                <slot name="header"></slot>
                ${t.closable?t.#Bn:''}
            </div>
            <div class="toast-body">
                ${t.translate(t.message)}
                <slot name="body"></slot>
            </div>
        </div>            
        `}#du(){const t=this;return k`
        <div class="mt-1 mb-1 toast fade ${x(t.renderClass())}">
          <div class="d-flex">
              <div class="toast-body">
              ${t.translate(t.message)}
              <slot name="body"></slot>
              </div>
              ${t.closable?t.#Bn:''}
          </div>
        </div>            
        `}renderClass(){return{...super.renderClass(),show:this.opened}}dismiss(){this.opened=!1}get#Bn(){return k`<button type="button" class="btn-close me-2 m-auto" @click="${this.dismiss}"></button>`}get#lu(){const t=GSDOM.hasClass(this.parentElement,'toast-container'),e=this.parentElement instanceof GSNotificationElement;return t||e}static{this.define('gs-toast')}}class AbstractTreeController{#Ut;#uu;constructor(t){this.#Ut=t,t.addController(this)}hostConnected(){const t=this;t.#uu=t.#Ut.node,t.#hu(t)}hostDisconnected(){const t=this;t.#pu(t),t.#Ut.removeController(t)}hostUpdate(){const t=this,e=t.#uu;t.#uu=t.#Ut.node,e!=t.#uu&&(t.#pu(t),t.#hu(t))}#hu(t){this.#Ut.node?.addController?.(t)}#pu(t){this.#uu?.removeController?.(t)}host(t){return t[e]||this.#Ut}match(t){const e=this.host(t);return e?.node===t}get store(){return this.#Ut.dataController?.store}requestUpdate(t){this.match(t)&&this.host(t).requestUpdate()}}class TreeController extends AbstractTreeController{constructor(t){super(t)}#mu(t,e=!1){const r=this.host(t);r&&(r.loading=e)}onLoad(t){this.#mu(t,!0)}onRefresh(t){this.requestUpdate(t)}onAppend(t,e){this.#mu(t),this.requestUpdate(t.root)}onInsert(t,e){this.#mu(t),this.requestUpdate(t.root)}onExpand(t){const e=this.store;e?e.onExpand(t):this.requestUpdate(t)}onCollapse(t){this.requestUpdate(t)}onFocusChanged(t){this.requestUpdate(t)}onSelectionChanged(t,e){this.requestUpdate(t)}onRemove(t){this.match(t)&&this.host(t).remove()}}class GSTreeItemElement extends gt{static properties={loading:{state:!0},node:{type:Object,hasChanged:t=>t instanceof TreeNode}};constructor(){super(),this.flat=!0}shouldUpdate(t){return!!this.node}willUpdate(t){super.willUpdate(t),t.has('node')&&(this.node[e]=this)}updated(){this.focused&&this.#Rt?.focus(),this.dataset.visible=this.visible}renderUI(){const t=this,e=t.node,r=t.value||{};r.tooltip=t.translate(r.tooltip),r.title=t.translate(r.title);const s=t.loading?t.#gu(e.level):t.#Kn(e.level);return GSLinklement.generate(r,t.renderClass(),s)}renderClass(){const t=this,e={'list-group-item':!0,'list-group-item-action':!0,'user-select-none  ':!0,'border-0':!t.#fu,'gs-hide':!t.visible};return t.mapCSS(t.#Su,t.mapCSS(t.#yu,e,t.selected&&!t.multiselect),t.focused)}toggle(){this.opened?this.close():this.open()}open(){this.#bu(!0),this.focus()}close(){this.#bu(!1)}toggleSelection(){this.select(!this.selected)}focus(t=!0){t&&super.focus(),this.focused=1==t}select(t=!0){this.selected=1==t}handle(t){GSAttributeHandler.process(this.#Rt,t)}get#Rt(){return this.query('a')}get isLeaf(){return this.node?.isLeaf}get isFolder(){return!this.isLeaf}get key(){return this.node?.key}get value(){return this.node?.value||{}}get level(){return this.node?.level||-1}get focused(){return this.node?.focused}get visible(){const t=this.parent;return t?.opened||-1===t?.level}get parent(){return this.node?.parent}get parentItem(){const t=this.parent?.[e];return t instanceof GSTreeItemElement?t:void 0}set focused(t){t=!0===t,this.node.focused=t}get selected(){return this.node?.selected}set selected(t){t=!0===t;const e=this;e.isFolder&&e.owner.leaf&&(t=!1),e.multiselect?t?e.node.selectAll():e.node.deselectAll():e.node.selected=t}get opened(){return this.node?.opened}set opened(t){this.#bu(!0===t)}get owner(){return this.closest('gs-tree')}get multiselect(){return this.owner.multiselect}get#Su(){return this.owner.cssFocus||'focus-ring'}get#yu(){return this.owner.cssSelected||'active'}get#Xa(){return this.owner.cssCheck||''}get#vu(){return this.owner.checkColor||'secondary'}get#Gu(){return this.owner.checkColorSelected||'primary'}get#fu(){return!0===this.value?.border||!0===this.owner.border}get#Xo(){const t=this,e=t.node,r=t.value,s=t.owner;let n=r.icon||s.itemIcon;return e.isFolder&&(n=e.opened?r.openIcon||s.openIcon:r.closeIcon||s.closeIcon),n}#Cu(t){return k`<gs-indent size="${t}"></gs-indent>`}#gu(t){return k`${this.#Cu(t)}<gs-spinner small></gs-spinner>`}#Kn(t){return k`${this.#Cu(t)}${this.#Eu()}<gs-icon size="5" name="${this.#Xo}"></gs-icon>`}#Eu(){const t=this;if(!t.multiselect)return'';const e=t.selected?t.#Gu:t.#vu,r=t.node.isPartialySelected?'dash-square-fill':t.selected?'check-square-fill':'square';return k`<gs-icon size="6" data-type="state" 
                css="me-1 text-${e} ${t.#Xa}"
                name="${r}"></gs-icon>`}#bu(t=!1){const e=this;e.node?.isFolder&&(e.node.opened=t)}static{this.define('gs-tree-item')}}class GSTreeElement extends gt{static styles=T`            
    :focus-visible {
      outline: none !important;
    }  
    .list-group-item {
      cursor: pointer;
    }`;static shared={itemIcon:{attribute:'icon-item'},closeIcon:{attribute:'icon-close'},openIcon:{attribute:'icon-open'},cssCheck:{attribute:'css-check'},cssFocus:{attribute:'css-focus'},cssSelected:{attribute:'css-selected'},checkColor:{attribute:'check-color',...tt},checkColorSelected:{attribute:'check-color-selected',...tt}};static properties={storage:{},data:{type:Object},node:{type:Object,hasChanged:t=>t instanceof TreeNode},border:{type:Boolean,reflect:!0},guide:{type:Boolean,reflect:!0},leaf:{type:Boolean,reflect:!0},multiselect:{type:Boolean,reflect:!0},circular:{type:Boolean,reflect:!0},...GSTreeElement.shared};static options={...GSTreeElement.shared,css:{},icon:{},color:{},title:{},tooltip:{},opened:{type:Boolean},selected:{type:Boolean}};#Ue=!1;#wu=D();#Gi=null;constructor(){super();const t=this;t.leaf=!1,t.multiselect=!1,t.data=GSDOM.toJson(t,!0,!0).items,t.node=new TreeNode(null,{'#tagName':this.tagName},null,-1),t.itemIcon='file-earmark',t.closeIcon='folder',t.openIcon='folder2-open',t.cssSelected='active',t.cssFocus='focus-ring',t.node[e]=t,t.#Gi=new TreeController(t)}renderUI(){const t=this;return k`<div  dir="${M(t.direction)}"
          class="treeview ${x(t.renderClass())}"          
          @click="${t.#Tn}"
          @keydown="${t.#U}"
          @keyup="${t.#An}">
          <div class="list-group" ${R(t.#wu)}>
          ${F(t.node.walk(t.node,!1,!1),(t=>t.key),(t=>k`
            <gs-tree-item .node="${t}"></gs-tree-item>
          `))}
          </div>    
        </div>`}shouldUpdate(t){const e=this;return t.has('data')&&e.data&&!e.#Ue&&(e.#Ue=!0,queueMicrotask((()=>{e.node.clear(),e.node.fromJSON(e.data),e.#Ue=!1,e.requestUpdate()}))),!!this.node}willUpdate(t){super.willUpdate(t),t.has('multiselect')&&!this.multiselect&&this.node?.deselectAll(),this.node.multi=this.multiselect}onDataRead(t){t instanceof TreeNode?t.root!==this.node&&(this.node=t):this.data=t}next(t=!1){const e=this;let r=e.nextItem;return!r&e.circular&&(r=e.#Nn),r?.visible&&(r.focus(),t&&e.focused?.isFolder&&e.focused.open()),e.focused}previous(t=!1){const e=this;let r=e.previousItem;return!r&e.circular&&(r=e.#In),r?.visible&&(r.focus(),r.isFolder&&t&&r.close()),e.focused}expandAll(){this.node?.expandAll()}collapseAll(){this.node?.collapseAll()}open(t){this.focused?.open()}close(t){this.focused?.close()}clear(){this.node?.clear(),this.requestUpdate()}reload(){this.clear(),this.dataController?.read()}get selected(){return this.#Ut(this.node.selectedNodes())}get focused(){return this.#Ut(this.node.focusedNode())}get previousItem(){return this.focused?.node.find((t=>t?.visible),!0,!0)?.[e]}get nextItem(){return this.focused?.node.find((t=>t?.visible),!0)?.[e]}get#Se(){return this.#wu.value}get#Nn(){return this.#Se.firstElementChild}get#In(){return this.#Se.lastElementChild}#Ut(t){return Array.isArray(t)?t.map((t=>t[e])).filter((t=>t)):t?.[e]}#Tn(t){const e='GS-ICON'===t.target.tagName?t.target:t.target.closest('gs-icon'),r='state'===e?.dataset.type,s=t.target.closest('gs-tree-item');if(!s.node)return;const n=this;n.multiselect?r&&s.toggleSelection():s.select(!0);const i=n.multiselect&&!r||!n.multiselect;s.isFolder&&i&&s.toggle(),s.focus(),s.handle(t)}#U(t){const e=this,r=e.focused;if(r)switch(t.code){case'ArrowUp':e.previous();break;case'ArrowDown':e.next();break;case'ArrowLeft':r.isFolder?r.opened?e.close():(r.parentItem||r)?.focus():e.previous();break;case'ArrowRight':r.isFolder&&!r.opened?e.open():e.next();break;case'Enter':r.isFolder&&r.toggle()}}#An(t){const e=t.target.closest('gs-tree-item');if(e?.node)switch(t.code){case'Enter':e.handle(t);break;case'Tab':e.focus();break;case'Space':e.select(!this.multiselect||!e.selected),e.focus()}}static{this.define('gs-tree')}}class ServiceWorkkerElement extends gt{static properties={src:{},scope:{},module:{type:Boolean,default:!1},trace:{type:Boolean,reflect:!0,default:!1},disabled:{type:Boolean,reflect:!0,default:!1}};#$u=!1;#xu=null;#Du=null;#Tu=!1;constructor(){super(),this.flat=!0}connectedCallback(){super.connectedCallback();const t=this;t.#xu=t.#Au.bind(t),t.#_s()}disconnectedCallback(){super.disconnectedCallback(),this.#ku()}willUpdate(t){const e=this;t.has('trace')&&e.#Mu(),t.has('disabled')&&(e.disabled?e.#ku():e.#_s()),super.willUpdate(t)}get available(){return'serviceWorker'in navigator&&this.src&&h.isURL(this.src)}get registration(){return this.#$u}clearCache(){return this.postMessage('CLEAR_CACHE')}refresh(){return this.postMessage('REFRESH_CACHE')}postMessage(t){const e=this,r=h.nonNull(t)&&e.isLoaded;return r&&(e.#Du?e.#Du.port1.postMessage(t):e.#$u?.active?.postMessage(t)),r}onMessage(t){return me.#Ou('ServiceWorker message received:',t),!0}#Au=t=>{const e=this;t.data?e.onMessage(t)&&e.emit('message',t.data,!0,!0,!0):e.#Ou('ServiceWorker message is empty:',t)};#Lu(){const t=this;t.#$u?.active&&(t.#Du=new MessageChannel,t.#Du.port1.onmessage=t.#xu,t.#Mu(),t.#$u.active.postMessage('INIT_PORT',[t.#Du.port2]))}#Mu(){this.#$u?.active?.postMessage(this.trace?'TRACE_ON':'TRACE_OFF')}async#Iu(t){return t?.waiting?.postMessage('NOTIFICATION_WAITING')}#Nu(t){const e=this;t.addEventListener('updatefound',(()=>{t.installing?.addEventListener('statechange',(()=>{t.waiting&&(navigator.serviceWorker.controller?e.#Iu(t):e.#Ou('Service Worker initialized for the first time'))}))}))}#Ru(){let t=!1;navigator.serviceWorker.addEventListener('controllerchange',(()=>{t||(window.location.reload(),t=!0)}))}async#ku(){const t=this;GSLoader.NO_CACHE=t.#Tu,t.disabled&&await(t.#$u?.unregister()),t.#Du?.port1.close(),t.#Du?.port2.close(),t.#Du=null,t.#$u=null}async#_s(){const t=this;if(!t.disabled&&(t.#Tu=GSLoader.NO_CACHE,GSLoader.NO_CACHE=!1,t.available)){try{const e=t.scope?{scope:t.scope}:{};t.module&&(e.type='module'),t.#$u=await navigator.serviceWorker.register(t.src,e),t.#Ou('ServiceWorker registration started:',t.#$u),t.#Ru(),t.#Iu(t.#$u),t.#Nu(t.#$u),t.#Lu(t.#$u),t.#Ou('ServiceWorker registration successful with scope: ',t.#$u.scope)}catch(e){t.#$u=!1}t.emit('loaded',t.isLoaded,!0,!0,!0)}}#Ou(t,e=''){this.trace}static{this.define('gs-service-worker')}}class GSChartElement extends gt{static get URL_LIB(){return globalThis.GS_URL_CHART||globalThis.location?.origin||'/bootstrap-lit'}static properties={url:{},config:{},storage:{},height:{type:Number},width:{type:Number},data:{type:Array},options:{type:Object}};#Uu=D();#Fu=null;constructor(){super(),this.height=0,this.width=0,GSChartElement.#ht()}connectedCallback(){super.connectedCallback(),this.#Bu()}disconnectedCallback(){super.disconnectedCallback();const t=this;t.#Fu&&t.#Fu.destroy(),t.#Fu=null}shouldUpdate(t){return GSChartElement.#Hu}firstUpdated(t){this.#Pu(),super.firstUpdated(t)}updated(t){const e=this;(t.has('url')||t.has('config'))&&e.#Pu(),(t.has('data')||t.has('options'))&&e.#zu(e.data,e.options)}renderUI(){const t=this;return k`<canvas ${R(t.#Uu)} 
                class="${x(t.renderClass())}"
                width="${M(t.width>0&&t.width)}" 
                height="${M(t.height>0&&t.height)}" >
            </canvas>`}onDataRead(t){this.data=t}get canvas(){return this.#Uu.value}reset(){this.#Fu?.reset()}refresh(){this.#Fu?.render()}updateChart(t){this.#Fu?.update(t)}stop(){this.#Fu?.stop()}clear(){this.#Fu?.clear()}resize(t,e){const r=this;r.#Fu&&requestAnimationFrame((()=>{const s=r.query('div');s&&(s.style.width=`${t}px`,s.style.height=`${e}px`),r.#Fu.resize(t,e)}))}toBase64Image(t='image/png',e=1){return this.#Fu?.toBase64Image(t,e)}async#Pu(){const t=this;try{const e=await GSLoader.loadSafe(t.config,'GET',null,!0,{}),r=await GSLoader.loadSafe(t.url,'GET',null,!0,[]);t.data=r,t.options=e}catch(t){GSLog.error(null,t)}}#zu(t,e){const r=this,s=r.querySelector('gs-item[group="options"]'),n=Object.assign(e,GSChartElement.toJson(s)),i=n.data.datasets;if(i.forEach(((e,r)=>e.data=1===i.length?t:t[r]||[])),r.#Fu)return r.updateChart(n);const a=r.canvas?.getContext('2d');a?r.#Fu=new GSChartElement.#ju(a,n):GSLog.error(null,'Failed to get canvas context')}async#Bu(){GSChartElement.#Hu||await GSEvents.wait(document,'gs-chart',0,!1),this.requestUpdate()}static#Hu=!1;static#qu=!1;static#ju=null;static async#ht(){const t=GSChartElement;if(!1!==t.URL_LIB&&!t.#Hu&&!t.#qu){t.#qu=!0;try{const e=`${GSChartElement.URL_LIB}/assets/chart/chart.mjs`,{Chart:r,registerables:s}=await import(e);r.register(...s),t.#ju=r,t.#Hu=!0,GSEvents.send(document,'gs-chart')}catch(t){GSLog.error(null,t)}finally{t.#qu=!1}}}static toJson(t,e='name',r='value',s='type'){if(!(t instanceof HTMLElement))return{};const n=t.getAttribute(e),i=t.getAttribute(r),a=t.getAttribute(s);let o=null;switch(a){case'array':o=[];break;case'object':o={};break;default:return GSChartElement.#C(i,a)}const l=Array.from(t.children),c='array'===a,d='object'===a;return l.forEach((t=>{const i=t.getAttribute(e);if(c)o.push(GSChart.toJson(t,e,r,s));else if(d){const n=GSChartElement.toJson(t,e,r,s);o[i]=n}else{const e=t.getAttribute(r),a=t.getAttribute(s);o[n][i]=GSChart.#C(e,a)}})),o}static#C(t,e){switch(e){case'boolean':return'true'===t;case'number':return parseFloat(t);default:return t}}static{this.define('gs-chart')}}class GSHighlightElement extends gt{static get URL_LIB(){return globalThis.GS_URL_HLJS||'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0'}static properties={url:{},theme:{},target:{},language:{}};#Vu=D();#Hr;constructor(){super(),this.theme='default'}willUpdate(t){const e=this;t.has('theme')&&e.#nr(),t.has('target')&&e.#_u(),t.has('url')&&e.#Wu(),t.has('language')&&e.#Yu(e.#Hr)}renderUI(){return k`<pre><code ${R(this.#Vu)} class="${x(this.renderClass())}"><code/><pre/>`}renderClass(){const t=h.isStringNonEmpty(this.language);return{[`language-${this.language}`]:t}}highlight(t='',e=!1){this.#Hr=t,this.#Yu(t,e)}set content(t=''){this.#Hr=t,this.#Yu(t)}get content(){return this.#Hr}async#nr(){const t=`${GSHighlightElement.URL_LIB}/styles/${this.theme}.min.css`;GSDOM.injectCSS(this,t)}#_u(){const t=this,e=t.target?GSDOM.query(t.target):null;if(!e)return GSDOM.setHTML(t.#Ju,`Element with id ${t.target} not found!`);t.#Hr=e.innerHTML,t.#Yu(e.innerHTML)}async#Wu(){const t=this;try{const e=await GSLoader.load(t.url);if(!e)throw new Error(`Code URL ${t.url} unreachable!`);t.#Hr=e,t.#Yu(e)}catch(e){GSDOM.setHTML(t.#Ju,e.message)}}get#Ju(){return this.#Vu.value}#Ku(t){const e=t.data.data;URL.revokeObjectURL(t.data.url),GSDOM.setHTML(this.#Ju,t.data.append?this.#Ju.innerHTML+e:e),t.target.terminate()}#Yu(t='',e=!1){const r=this;if(!t)return GSDOM.setHTML(r.#Ju,'No data!');try{const s=r.#Xu,n=new Blob([s],{type:'application/javascript'}),i=URL.createObjectURL(n),a=new Worker(i);a.onmessage=r.#Ku.bind(r),a.postMessage({data:t,url:i,append:e})}catch(t){GSDOM.setHTML(r.#Ju,t.message)}}get#Xu(){const t=this.language?this.language.split(',').map((t=>`importScripts('${GSHighlightElement.URL_LIB}/languages/${t.trim()}.min.js');`)).join(''):'';return`globalThis.onmessage = (event) => {\n                importScripts('${GSHighlightElement.URL_LIB}/highlight.min.js');\n                ${t}\n                const result = globalThis.hljs.highlightAuto(event.data.data);\n                postMessage({data:result.value, url:event.data.url, append: event.data.append});};`}static{this.define('gs-highlight')}}class GSMarkdownElement extends gt{static get URL_LIB(){return globalThis.GS_URL_MARKDOWN||'https://unpkg.com/showdown/dist/showdown.min.js'}static properties={url:{},history:{type:Number},maxHeight:{type:Number,attribute:'max-height'}};#Qu=D();#Zu=null;#In=null;#Nn=null;#is=null;#rl=null;#L=[];#ci=GSID.id;constructor(){super(),this.history=10,this.dynamicStyle(this.#ci)}async connectedCallback(){const t=this;if(await t.#th(),globalThis.showdown){const e={tasklists:!0,tables:!0};t.#Zu=new globalThis.showdown.Converter(e),super.connectedCallback()}}willUpdate(t){const e=this;t.has('url')&&(e.#eh(e.url),e.#Wu(e.url))}renderUI(){const t=this,e={'max-height':t.maxHeight>0&&`${t.maxHeight}px;`};return t.dynamicStyle(t.#ci,e),k`<div ${R(t.#Qu)} class="overflow-auto ${x(t.renderClass())}"><div/>`}renderClass(){const t=this,e=h.isStringNonEmpty(t.language);return{[t.#ci]:!0,[`language-${t.language}`]:e}}back(){const t=this.#rh();this.#Wu(t)}get root(){return this.#is||''}get#sh(){return this.#Qu.value}async#Wu(t=''){const e=this;if(!(t=e.#d(t)))return;let r=await GSLoader.load(t);r&&(e.#rl=e.#gr(t),e.#is||(e.#is=e.#rl),r=r.replace(/^[-_\*]{3}$/gm,'<hr>'),e.#sh.innerHTML=e.#nh(r),GSEvents.send(e,'data',t),requestAnimationFrame((()=>{e.#ih(),e.#ah(),e.#oh()})))}#d(t=''){return!t||t.startsWith('http')?t:this.#rl?new URL(t,this.#rl).toString():GSLoader.normalizeURL(t,!0)}#gr(t=''){return t.endsWith('/')?t:GSLoader.parentPath(t)}#oh(){this.#lh('pre:has(code)','text-white bg-dark p-1')}#ah(){this.#lh('table','table table-light table-hover table-striped table-bordered w-auto shadow-sm')}#lh(t,e){const r=GSDOM.queryAll(this.#sh,t);requestAnimationFrame((()=>r.forEach((t=>GSDOM.toggleClass(t,e)))))}#ih(){const t=this,e=GSDOM.queryAll(t.#sh,'a').filter((t=>!GSAttr.get(t,'href').startsWith('#')));e.filter((t=>!(GSAttr.get(t,'href').endsWith('.md')||GSAttr.get(t,'href').endsWith('/')))).forEach((t=>t.target='_blank')),e.filter((t=>GSAttr.get(t,'href').endsWith('.md')||GSAttr.get(t,'href').endsWith('/'))).forEach((e=>GSEvents.attach(e,e,'click',t.#ch.bind(t))))}#ch(t){const e=this,r=t.target,s=GSAttr.get(r,'href');if(s.startsWith('#'))return;GSEvents.prevent(t),r.href=e.#d(s);return GSEvents.send(e,'link',r.href,!1,!1,!0)?(e.#eh(r.href),e.#Wu(r.href),!1):void 0}#rh(){const t=this;if(0===t.#L.length)return t.#Nn;const e=t.#L.pop();return e&&e===t.#In?t.#rh():e}#eh(t){const e=this;e.#L.length>=e.history&&(e.#L=e.#L.slice(1)),e.#In!=t&&(e.#L.push(t),e.#In=t,e.#Nn||(e.#Nn=t))}#nh(t){return this.#Zu.makeHtml(t)}async#th(){if(globalThis.showdown)return;const t=document.createElement('script'),e=GSEvents.wait(t,'load',0,!1);t.type='text/javascript',t.src=GSMarkdownElement.URL_LIB,GSDOM.appendChild(document.head,t),await e}static{this.define('gs-markdown')}}class GSMonacoElement extends gt{static get URL_LIB(){return globalThis.GS_URL_MONACO||'https://unpkg.com/monaco-editor@latest/min/'}static properties={url:{},theme:{},target:{},language:{}};#Qu=D();#dh=null;constructor(){super(),this.language='',this.theme='vs-dark'}async connectedCallback(){await GSMonacoElement.#ht(),super.connectedCallback()}createRenderRoot(){return this}firstUpdated(){this.#uh(),super.firstUpdated()}willUpdate(t){const e=this;e.#dh&&(t.has('theme')&&e.#nr(e.theme),t.has('target')&&e.#_u(e.target),t.has('url')&&e.#Wu(e.url),t.has('language')&&e.#Ns(e.language))}renderUI(){return k`<div ${R(this.#Qu)} class="${x(this.renderClass())}"><div/>`}get monaco(){return window.monaco}get editor(){return this.#dh}get model(){return this.#dh.getModel()}get code(){return this.#dh?.getValue()||''}set code(t=''){this.#dh&&this.#dh.setValue(t)}get selection(){return this.model.getValueInRange(this.editor.getSelection())}get owner(){return this.parentElement}#Ns(t){const e=this;e.monaco&&t&&e.monaco.editor.setModelLanguage(e.model,t)}#nr(t){this.monaco&&t&&this.monaco.editor.setTheme(t)}#_u(t){const e=t?GSDOM.query(t):null;if(!e)return this.code=`Element with id ${t} not found!`;this.code=e.innerHTML}async#Wu(t){const e=this;try{const r=t?await GSLoader.load(t):null;if(!r)throw new Error(`Code URL ${t} unreachable!`);e.code='',e.#Ns(e.language),e.code=r}catch(t){e.code=t.message}}#uh(){const t=this,e={value:'',language:t.language,theme:t.theme,automaticLayout:!0,minimap:{enabled:!1}};t.#dh=t.monaco?.editor?.create(t.#sh,e),t.attachEvent(window,'resize',t.#_.bind(t));try{t.url?t.#Wu(t.url):t.target&&t.#_u(t.target)}finally{requestAnimationFrame((()=>t.emit('initialized'))),t.#_()}}#_(t){const e=this;e.#dh&&(e.#dh.layout({width:0,height:0}),requestAnimationFrame((()=>{const t=e.owner?.getBoundingClientRect();t&&e.#dh.layout({width:t.width,height:t.height})})))}get#sh(){return this.#Qu.value}static#hh;static async#th(){if(globalThis.monaco)return;const t=document.createElement('script'),e=GSEvents.wait(t,'load',0,!1);t.type='text/javascript',t.src=`${GSMonacoElement.URL_LIB}vs/loader.js`,GSDOM.appendChild(document.head,t),await e}static#ph(){const t=GSMonacoElement.URL_LIB;window.MonacoEnvironment={baseUrl:`${t}`,getWorkerUrl:(e,r)=>`data:text/javascript;charset=utf-8,${encodeURIComponent(`\n                globalThis.MonacoEnvironment = {baseUrl: '${t}'};\n                importScripts('${t}vs/base/worker/workerMain.js');`)}`}}static#mh(){return new Promise(((t,e)=>{require.config({paths:{vs:`${GSMonacoElement.URL_LIB}/vs`},'vs/css':{disabled:!1}}),require(['vs/editor/editor.main'],t)}))}static async#ht(){const t=GSMonacoElement;t.#hh||(t.#ph(),await t.#th(),await t.#mh(),t.#hh=!0)}static{this.define('gs-monaco')}}export{AbstractTreeController,AdoptedController,AttributeController,_ as AutocapitalizeTypes,Y as AutocompleteTypes,K as AutocorrectTypes,BinaryTree,BinaryTreeNode,ButtonTypes,Z as ColorTypes,ComboController,ContentController,ControllerHandler,CopySelectController,DataController,DataSelector,DoublyLinkedList,ElementMoveController,ElementNavigationController,et as EnvironmentTypes,g as GSAbortController,GSAbstractReadWrite,GSAccordionElement,GSAccordionItemElement,GSAdoptedEngine,GSAlertElement,GSAttachment,GSAttr,GSAttributeHandler,GSBeep,GSBreadcrumbElement,GSBreadcrumbItemElement,GSButtonElement,GSCSSMap,GSCacheStyles,GSCachedReadWrite,GSCalendarElement,GSCardElement,GSCenterElement,GSChartElement,GSCompareElement,GSContextElement,GSControllerElement,GSCopyrightElement,GSCurrencyFormat,GSDOM,GSDOMObserver,GSData,GSDataHandler,GSDate,GSDateFormat,GSDialogElement,GSDrawerElement,GSDropdownElement,GSDynamicStyle,gt as GSElement,GSEmailElement,GSEnvironment,GSEvent,GSEventBus,GSEvents,GSExtButtonElement,GSExtDataListElement,GSExtFormElement,GSExtInputElement,GSExtSelectElement,GSExtTextAreaElement,GSFileBoxElement,GSFormElement,GSFormGroupElement,GSFormPanelElement,p as GSFunction,GSGesture,GSGroupElement,GSHighlightElement,GSID,GSIconElement,GSImageElement,GSIndentElement,GSItem,GSLayoutElement,GSLinklement,GSListElement,GSListItemElement,GSLoader,b as GSLocalization,GSLog,GSMarkdownElement,GSMenuElement,GSMonacoElement,GSMouseElement,GSMovableElement,GSNavElement,GSNavItemElement,GSNotificationElement,GSOverlayElement,GSPagerElement,GSPopoverElement,GSPopper,GSPopupElement,GSProgressElement,GSPromise,GSQuery,GSQueryCSS,GSReadWrite,v as GSReadWriteRegistry,GSRouter,GSRouterElement,GSSpinnerElement,GSSplitterElement,GSStepStyle,GSTabGroupElement,GSTabItemElement,GSTabPanelElement,GSTableElement,GSTemplateCache,GSTemplateElement,GSTextElement,GSTheme,GSTimeFormat,GSToastElement,GSTooltipElement,GSTreeElement,GSTreeItemElement,GSTreeReader,h as GSUtil,GSVersion,GSYearFormat,GroupController,st as InputTypes,InteractiveController,LinkedList,ListController,LocalizationController,MaskController,MultipatternController,it as NavTypes,Node,NumberController,OrientationController,OrientationTypes,PasswordController,PlacementTypes,PositionTypes,PropagateController,dt as ProtocolTypes,Queue,ServiceWorkkerElement,ht as SizeTypes,SlotController,Stack,TemplateController,TextController,ThemeController,Tree,TreeController,TreeNode,ValidityController,W as autocapitalize,J as autocomplete,X as autocorrect,Q as buttonType,tt as color,V as cssMap,q as dataset,rt as environment,t as gsstyles,nt as inputType,literalTemplate,mixin,at as nav,notEmpty,numGE0,numGT0,numLE0,numLT0,ot as orientation,lt as placement,ct as position,ut as protocol,pt as size,mt as stringArrayConverter};
//# sourceMappingURL=io.greenscreens.components.all.min.js.map
