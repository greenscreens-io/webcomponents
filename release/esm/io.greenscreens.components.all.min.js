const t='.z-10k{z-index:10000 !important;}\n.gs-hide,gs-item{display:none !important;}\ngs-popover,gs-tooltip{position:fixed;top:0px;left:0px;},\n.d-contents{display:contents;}\';\ngs-button-group::part(.btn-group){box-shadow:rgba(72, 72, 72, 0.4) 0px 0.125rem 0.25rem;}\ngs-group>gs-button::part(button) {box-shadow: none;}\ngs-group>gs-button:not(:last-child)::part(button) {border-top-right-radius: 0;border-bottom-right-radius: 0;}\ngs-group>gs-button:not(:first-child)::part(button) {margin-left: calc(var(--bs-border-width) * -5);border-top-left-radius: 0;border-bottom-left-radius: 0;}\ngs-layout {width: 100%;height: 100%;}\ngs-split-panel{flex: 1 1 auto !important;}\ninput[is="gs-ext-input"][type="date"]:before {content: attr(data-value);}\ninput[is="gs-ext-input"][type="date"]::-webkit-datetime-edit, input::-webkit-inner-spin-button, input::-webkit-clear-button {visibility: hidden;display: inline-block;}\ninput[is="gs-ext-input"][type="date"]::-webkit-calendar-picker-indicator {position: relative;top: 0px;right: 0;color: black;opacity: 0.5;}\n';class GSLog{static logging=!0;static tracing=!1;static info(t,e){this.#t(t,e,!0,'info')}static warn(t,e){this.#t(t,e,!0,'warn')}static error(t,e){this.#t(t,e,!0,'error')}static trace(t,e){GSLog.tracing&&this.#t(t,e,!1,'error')}static log(t,e,s){this.#t(t,e,s)}static#t(t,e,s,r){if(!s&&!this.logging)return;const n=t?`${t.nodeName} -> ${t.id}: ${e}`:e;let i=console[r||'log'];i='function'==typeof i?i:console.log,i(n),e instanceof Error&&i(e)}static{Object.seal(GSLog)}}let e=class GSUtil{static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static#e=/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isDate=t=>t instanceof Date;static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asBool=(t=!1)=>'true'===t?.toString().trim().toLowerCase();static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,s)=>e[s]));static reverse=t=>(t||'').split('').reverse().join('');static capitalize=(t='')=>t?t[0].toUpperCase()+t.slice(1).toLowerCase():'';static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isInstance=t=>t instanceof t.constructor;static range=(t=0,e=10,s=100)=>Math.max(Math.min(s,t),e);static extractNumber=(t='')=>t.match(/[\d,\.]*\d/)?.[0];static asNum(t=0,e=0,s){if(s=s||GSUtil.locale,GSUtil.isString(t)){const e=GSUtil.numberSeparator(s);t=GSUtil.extractNumber(t)?.replaceAll(e,'')||t}return GSUtil.isNumber(t)?parseFloat(t):e}static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.trim().startsWith('<')&&t.trim().endsWith('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static toRegex(t,e){return t instanceof RegExp?t:GSUtil.isStringEmpty(t)?void 0:new RegExp(t,e)}static decimalSeparator(t){return Intl.NumberFormat(t).format(1.1)[1]}static numberSeparator(t){return Intl.NumberFormat(t).format(1e3)[1]}static getDateFormat(t=void 0){return new Intl.DateTimeFormat(t).format(new Date(2e3,0,2)).replace('2000','YYYY').replace('01','MM').replace('1','M').replace('02','DD').replace('2','D')}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return t&&Array.isArray(t)||'object'==typeof t}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t='',e={},s=!0){return GSUtil.isJsonString(t)?JSON.parse(s?GSUtil.normalizeJson(t):t):GSUtil.isJsonType(t)?t:(t&&GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),e)}static normalizeJson(t=''){return t?.replace(GSUtil.#e,'"$2": ')}static normalize(t,e=''){return(t??e).toString().trim()}static toStringArray(t='',e=' '){return t.split(e).map((t=>t.trim())).filter((t=>t.length>0))}static textTransform(t='',e=''){switch(t){case'lowercase':e=e.toLowerCase();break;case'uppercase':e=e.toUpperCase();break;case'capitalize':e=GSUtil.capitalizeAll(e)}return e}static fromTemplateLiteral(t,e){const s=Object.keys(e),r=Object.values(e);return new Function(...s,`return \`${t}\`;`)(...r)}static decodeHTMLEntities(t){const e=document.createElement('textarea');return e.innerHTML=t,e.value}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,s=null;return t.trim().split('.').forEach(((t,r,n)=>{if(e)return r<n.length-1?e=e[t]:void(s=e[t])})),s}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return 0===GSUtil.normalize(t).trim().length}static isStringMatch(t,e){const s=GSUtil.isStringNonEmpty(t),r=GSUtil.isStringNonEmpty(e);return s&&r?t.trim().toLowerCase()==e.trim().toLowerCase():s===r}static async timeout(t=0,e){return e=GSUtil.isNumber(e)?AbortSignal.timeout(e):e,new Promise(((s,r)=>{const n=setTimeout(s.bind(null,!0),t);e instanceof AbortSignal&&e.addEventListener('abort',(()=>{clearTimeout(n),r(new Error('aborted timeout'))}))}))}static async export(t,e,s='octet/stream'){const r=new Blob(t,{type:s}),n=URL.createObjectURL(r);try{const t=document.createElement('a');t.href=n,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(n)}}static register(t,e,s,r=!0,n=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:s?.toLowerCase()}),r&&!Object.isSealed(e)&&Object.seal(e),n&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),s=URL.createObjectURL(e);try{return await import(s)}finally{URL.revokeObjectURL(s)}}static async writeToClipboard(t=''){const e=await navigator.permissions.query({name:'clipboard-write'});return'granted'===e.state||'prompt'===e.state?navigator.clipboard.writeText(t):''}static async readFromClipboard(){const t=await navigator.permissions.query({name:'clipboard-read'});return'granted'===t.state||'prompt'===t.state?navigator.clipboard.readText():''}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}},s=class GSFunction{static isFunction=t=>'function'==typeof t;static isFunctionNative(t){return GSFunction.isFunction(t)&&t.toString().includes('native code')}static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static hasGetter(t,e){return GSFunction.isFunctionDefined(t,e,'get')}static hasSetter(t,e){return GSFunction.isFunctionDefined(t,e,'set')}static isFunctionDefined(t,e,s){const r=!!t&&Reflect.getOwnPropertyDescriptor(t.__proto__,e);return r&&'function'==typeof r[s]}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){const s=arguments?Array.from(arguments).slice(2):[];return await t.apply(e||null,s)}static callFunctionSync(t,e){const s=arguments?Array.from(arguments).slice(2):[];return t.apply(e||null,s)}static async callFunction(t,s,r=!0){if(t=e.isString(t)?GSFunction.parseFunction(t):t,!GSFunction.isFunction(t))return;if(!r&&GSFunction.isFunctionNative(t))return;const n=arguments?Array.from(arguments).slice(3):[];return GSFunction.isFunctionAsync(t)?await GSFunction.callFunctionAsync(t,s,...n):GSFunction.callFunctionSync(t,s,...n)}static parseFunction(t){const s=e.parseValue(t);return GSFunction.isFunction(s)?s:null}static async#s(t,e,s){if(!GSFunction.isFunction(t))return;return GSFunction.isFunctionAsync(t)?await t.apply(e,s):t.apply(e,s)}static callOnceFifo(t,e){let s=!1;return async(...r)=>{if(s)return;s=!0;const n=e||this;return await GSFunction.#s(t,n,r)}}static callOnceLifo(t,e){let s=0;return(...r)=>{if(s<0)return;s++;const n=e||this;return new Promise(((e,i)=>{queueMicrotask((async()=>{if(!(s<=0)&&(s--,0===s))try{const s=await GSFunction.#s(t,n,r);e(s)}catch(t){i(t)}finally{s=-1}}))}))}}static{Object.seal(GSFunction),globalThis.GSFunction=GSFunction}};class GSID{static#r=0;static reset(){this.#r=0}static next(t='GSId-'){return`${t}${this.#r++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let s=0,r=0;if(0===e)return s;for(;r<e;)s=(s<<5)-s+t.charCodeAt(r++)|0;return s}static setIf(t){t&&(t.id='string'!=typeof t.id?GSID.id:t.id||GSID.id)}static{Object.freeze(GSID)}}let r=class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,s=!1){GSAttr.isHTMLElement(t)&&(s?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,s,r){GSAttr.isHTMLElement(t)&&(e.normalize(r)?t.setAttribute(s,r):t.removeAttribute(s))}static get(t,s='',r=''){if(!GSAttr.isHTMLElement(t))return r;if(!e.isInstance(t))return;const n=t.getAttribute(s)||r;return e.normalize(n)}static getAsBool(t,s='',r='false'){const n=GSAttr.get(t,s,r);return e.asBool(n,r)}static getAsNum(t,s='',r='0'){const n=GSAttr.get(t,s,r);return e.asNum(n,r)}static getAsJson(t,s='',r='0'){const n=GSAttr.get(t,s,r,{});return e.toJson(n)}static setAsBool(t,s='',r='false'){GSAttr.set(t,s,e.asBool(r),!1)}static setAsNum(t,s='',r='0'){GSAttr.set(t,s,e.asNum(r),NaN)}static setAsJson(t,e='',s='0'){GSAttr.set(t,e,JSON.stringify(s),'{}')}static flattenJson(t){return Object.entries(t||{}).map((t=>`${t[0]}=${t[1]}`)).join(' ')}static jsonToAttr(t,e){GSAttr.isHTMLElement(e)&&Object.entries(t||{}).map((t=>GSAttr.set(e,t[0],t[1])))}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static flatten(t,e=' '){return Array.from(t?.attributes||[]).map((t=>`${t.name}="${t.value}"`)).join(e)}static proxify(t,s={},r='items'){return new Proxy(t,{set(t,r,n){if('self'===r)return;if('dataset'===r)return t.dataset=n;const i=s[r]?.type;switch(r=s[r]?.attribute||r,i){case Boolean:GSAttr.toggle(t,r,e.asBool(n));break;case Number:GSAttr.setAsNum(t,r,n);break;case Object:case Array:GSAttr.set(t,r,JSON.stringify(n));default:GSAttr.set(t,r,n)}return!0},get(t,n){if('self'===n)return t;if('dataset'===n)return t.dataset;if(n===r)return Array.from(t.children).map((t=>GSAttr.proxify(t,s,r)));const i=s[n]?.type,a=!!s[n]?.unsafe,o=s[n]?.default,l=!0===s[n]?.multi;n=s[n]?.attribute||n;let c=GSAttr.get(t,n);switch(i){case Boolean:return t.hasAttribute(n);case Number:return e.asNum(c,0);case Object:return e.toJson(c,{});case Array:return e.toJson(c,[]);default:return c=a?c||o||'':c||o||void 0,l?e.toStringArray(c):c}}})}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}},n=class GSCSSMap{static#n=!!globalThis.document?.body?.computedStyleMap;#i;constructor(t){this.#i=GSCSSMap.#a(t)}get(t){const s=this;if(s.#i)return GSCSSMap.#n?s.#i.get(t):s.#i[e.capitalizeAttr(t)]}asText(t){return(this.get(t)||'')?.toString()}asBool(t){const s=this.get(t);return e.asBool(GSCSSMap.#n?s?.value:s)}asNum(t){let r=this.get(t);return GSCSSMap.#n&&s.isFunction(r?.to)&&'number'!==r.unit&&(r=r.to('px')),e.asNum(GSCSSMap.#n?r?.value:r.match(/\d*(\.\d*)?/g).filter((t=>e.isNumber(t))).shift())}matches(t,e){return this.asText(t)==e}static#a(t){return GSCSSMap.#n?t.computedStyleMap():globalThis.window?.getComputedStyle?globalThis.window.getComputedStyle(t):null}static styleValue(t,e){return GSCSSMap.getComputedStyledMap(t).get(e)}static getComputedStyledMap(t){return new GSCSSMap(t)}static#o(t){return t?(t=String(t).replace(/\s*([>~+])\s*/g,' $1 ')).replace(/(\s+)/g,' ').trim():''}static#l(t,e){return t.split(e).map((t=>t.trim())).filter((t=>t))}static#c(t,e){return!!t&&e.some((e=>t.includes(e)))}static findRule(t){const e=GSCSSMap,s=e.#l(e.#o(t),',');return Array.from(globalThis.document.styleSheets).map((t=>Array.from(t.cssRules||[]))).reduce(((t,e)=>t.concat(e)),[]).filter((t=>e.#c(e.#o(t.selectorText),s)))}static{Object.seal(GSCSSMap),globalThis.GSCSSMap=GSCSSMap}};class GSDate extends Date{static DEFAULT_FORMAT='YYYY-MM-DDTHH:mm:ssZ';static REGEX_FORMAT=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;#d=navigator.locale;format(t=GSDate.DEFAULT_FORMAT,e){this.locale=e;const s=this.asJSON();return t.replace(GSDate.REGEX_FORMAT,((t,e)=>e||s[t]))}build(){const t=this,e=t.last.getDate(),s=t.first.getDay(),r=t.#u(),n=0===s?[]:' '.repeat(s+(r?-2:-1)).split(' ');let i=1;for(;i<=e;)n.push(i.toString()),i++;for(;n.length%7!=0;)n.push('');return n}get locale(){return this.#d}set locale(t){this.#d=t||navigator.language}get year(){return this.getFullYear()}set year(t=0){this.setFullYear(t)}get month(){return this.getMonth()}set month(t=0){this.setMonth(t)}get day(){return this.getDate()}set day(t=0){this.setDate(t)}get first(){return new GSDate(this.getFullYear(),this.getMonth(),1)}get last(){return new GSDate(this.getFullYear(),this.getMonth()+1,0)}get YY(){return String(this.YYYY).slice(-2)}get YYYY(){return this.getFullYear()}get M(){return this.getMonth()+1}get MM(){return this.M.toString().padStart(2,'0')}get MMM(){return this.#h({month:'short'})}get MMMM(){return this.#h({month:'long'})}get D(){return this.getDate().toString()}get DD(){return this.D.padStart(2,'0')}get d(){return this.getDay().toString()}get dd(){return this.ddd.slice(0,2)}get ddd(){return this.#h({weekday:'short'})}get dddd(){return this.#h({weekday:'long'})}get H(){return this.getHours().toString()}get HH(){return this.H.padStart(2,'0')}get h(){return this.#p(1)}get hh(){return this.#p(2)}get a(){return this.#m(!0)}get A(){return this.#m(!1)}get m(){return this.getMinutes().toString()}get mm(){return this.m.padStart(2,'0')}get s(){return this.getSeconds().toString()}get ss(){return this.s.padStart(2,'0')}get SSS(){return this.getMilliseconds().toString().padStart(3,'0')}get Z(){return this.#g()}get ZZ(){return this.Z.replace(':','')}get Q(){return Math.ceil(this.M/3)}get k(){return(this.getHours()+1).toString()}get kk(){return this.k.padStart(2,'0')}get W(){const t=new Date(this.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)}get WW(){return this.W.toString().padStart(2,'0')}get x(){return this.getTime()}get X(){return Math.floor(this.x/1e3)}asJSON(){const t=this;return{YY:t.YY,YYYY:t.YYYY,M:t.M,MM:t.MM,MMM:t.MMM,MMMM:t.MMMM,D:t.D,DD:t.DD,d:t.d,dd:t.dd,ddd:t.ddd,dddd:t.dddd,H:t.H,HH:t.HH,h:t.h,hh:t.hh,a:t.a,A:t.A,m:t.m,mm:t.mm,s:t.s,ss:t.ss,SSS:t.SSS,Z:t.Z,ZZ:t.ZZ,Q:t.Q,k:t.k,kk:t.kk,W:t.W,WW:t.WW,x:t.x,X:t.X}}static monthList(t=!1,e=navigator.locale,s=!0){const r=new GSDate;r.locale=e,r.setMonth(0);const n=[];let i=null,a=12;for(;a--;)i=t?r.MMM:r.MMMM,i=s?r.#f(i):i,n.push(i),r.setMonth(r.getMonth()+1);return n}static dayList(t=!1,e=navigator.locale,s=!0){const r=new GSDate;r.locale=e;const n=r.#u()?1:0;r.setDate(r.getDate()-r.getDay()+n);const i=[];let a=null,o=7;for(;o--;)a=t?r.ddd:r.dddd,a=s?r.#f(a):a,i.push(a),r.setDate(r.getDate()+1);return i}#u(){return 1===new Intl.Locale(this.#d)?.weekInfo?.firstDay}#f(t=''){return t.charAt(0).toUpperCase()+t.slice(1)}#h(t){return this.toLocaleString(this.#d,t)}#p(t){return(this.getHours()%12||12).toString().padStart(t,'0')}#m(t){const e=this.#h({hour:'2-digit',hour12:!0}).split(' ').pop(-1);return t?e.toLowerCase():e}#g(){const t=-1*this.getTimezoneOffset(),e=Math.abs(t),s=e%60;return`${t<=0?'+':'-'}${Math.floor(e/60).toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`}static parse(t,s,r){s=s||e.getDateFormat(r);const n=GSDate.#y(s);return GSDate.#S(t,n)}static#y(t){return new RegExp('^\\s*'+t.toUpperCase().replaceAll(/([MDY])\1*/g,'(?<$1>\\d+)')+'\\s*$')}static#S(t,e){const{groups:s}=t.match(e)??{};if(!s)return null;const r=Number(s.Y),n=Number(s.M),i=Number(s.D);if(r<1e3||r>2999)return null;if(n<1||n>12)return null;const a=new Date(r,n-1,i);return i!==a.getDate()||isNaN(a.valueOf())?null:a}static{globalThis.GSDate=GSDate}}class GSData{static PROPERTIES={name:{},type:{},format:{},currency:{},locale:{},extract:{}};static uniqe(t){return Array.from(new Set(t))}static compareArrays=(t,e)=>t.length===e.length&&t.every(((t,s)=>t===e[s]));static arraysEqual(t,e){return!!Array.isArray(t)&&(!!Array.isArray(e)&&(t===e||(t=t.toSorted(),e=e.toSorted(),GSData.compareArrays(t,e))))}static mergeArrays(t=[],e=[]){return[...t,...e].filter(((t,e,s)=>s.indexOf(t)===e))}static mergeObjects(t=[]){let e={};return t.filter((t=>t)).forEach((t=>e={...e,...t})),e}static format(t,s){const r=GSData.#b(t,s),n=t.locale||e.locale,i=e.toRegex(t.extract,'g');switch(s=i?s.match(i)[0]:s,r){case'timestamp':return s instanceof Date?s:Date.parse(s);case'date':if(s instanceof Date)return s;const r=e.asBool(t.format)?void 0:t.format;return e.isString(s)?GSDate.parse(s,r,n):s&&0!=s?new GSDate(s).format(r,n):s;case'string':case'text':if(s instanceof Date){const r=t.format||e.getDateFormat(n);return new GSDate(s).format(r,n)}break;case'boolean':return e.asBool(s,!1);case'number':return e.asNum(s,s,n);case'currency':e.isString(s)&&(s=e.asNum(s));const i={style:'currency',currency:t.currency};return new Intl.NumberFormat(n,i).format(s)}return s}static#b(t,e){return t.type?t.type:e instanceof Date?'date':e instanceof Number?'number':e instanceof Boolean?'boolean':typeof e}static*filter(t=[],e=[],s,r=0){let n=0,i=!1;for(let a of t)if(i=GSData.filterRecord(a,e,s),i&&(n++,yield a),r>0&&n>=r)break}static filterData(t=[],e=[],s,r=0){return t=Array.isArray(t)?t:[],0===(e=Array.isArray(e)?e:[]).length?t:[...GSData.filter(t,e,s,r)]}static filterRecord(t,e,s){return'string'==typeof e?GSData.filterSimple(t,e,s):GSData.filterComplex(t,e)}static filterSimple(t,e='',s){e=e.toLowerCase(),s=s||Object.keys(t);let r=null;for(let n of s)if(r=t[n],GSData.filterValue(r,e))return!0;return!1}static filterComplex(t,e){let s=!0,r=null;for(let n of e)if(r=t[n.name],s=n.name?s&&GSData.filterValue(r,n):s&&GSData.filterSimple(t,n.value),!s)break;return s}static filterValue(t,s){return t instanceof Date?GSData.matchDate(t,s):t instanceof Date?GSData.matchNumber(t,e.asNum(s.value),s.op):(''+t).toLocaleLowerCase().includes((''+s.value).toLocaleLowerCase())}static matchDate(t,e,s){if('string'==typeof e){const r=''+e,n=t.toLocaleDateString(s),i=t.toISOString();return n.includes(r)||i.includes(r)}if(!e.value)return!1;switch(e.value instanceof Date?'date':typeof e.value){case'number':return GSData.matchNumber(t.getTime(),e.value,e.op);case'date':return GSData.matchNumber(t.getTime(),e.value.getTime(),e.op)}return GSData.matchDate(t,''+e.value,e.locale)}static matchNumber(t=0,e=0,s='eq'){switch(s){case'gt':return e>t;case'lt':return e<t;case'ge':return e>=t;case'le':return e<=t}return t===e}static sortData(t,e){return 0===e.length?t:t.toSorted(((t,s)=>GSData.sortPair(t,s,e)))}static sortPair(t,s,r){const n=Array.isArray(t);let i=0;return r.forEach(((r,a)=>{if(!r)return;const o=e.isNumber(r)?r:r.ord,l=e.isNumber(r.col)?r.col:a,c=n?l:r.name,d=t[c],u=s[c];i=GSData.compare(d,u,o,i)})),i}static compare(t,s,r,n){return e.isNumber(t)&&e.isNumber(s)?n||GSData.compareNum(t,s,r):e.isString(t)||e.isString(s)?n||GSData.compareString(t,s,r):e.isBool(t)||e.isBool(s)?n||GSData.compareBool(t,s,r):e.isDate(t)||e.isDate(s)?n||GSData.compareNum(Number(t),Number(s),r):n}static compareBool(t,e,s){return t=t?1:0,e=e?1:0,GSData.compareNum(t,e,s)}static compareString(t,e,s){const r=(t||'').toString(),n=(e||'').toString();return s<0?n.localeCompare(r):r.localeCompare(n)}static compareNum(t,e,s){return s<0?e-t:t-e}static writeToOject(t,s,r,n=!0){if(n&&e.isNull(r))return;const i=s.split('.');if(1===i.length)return GSData.#v(t,s,r);const a=i.slice(0,-1),o=i.slice(-1)[0];return a.forEach((e=>{t.hasOwnProperty(e)||(t[e]={}),t=t[e]})),GSData.#v(t,o,r)}static#v(t,e,s){return t.hasOwnProperty(e)?(Array.isArray(t[e])||(t[e]=[t[e]]),Array.isArray(s)?t[e]=t[e].concat(s):t[e].push(s)):t[e]=s,t}static readFromProperty(t,s){if(e.isNull(t))return;const r=/\[\d+\]$/g;let n=s,i='';return r.test(s)?(n=s.replace(r,''),i=s.match(r).shift().match(/\d+/).shift(),i=e.asNum(i),t=t.hasOwnProperty(n)?t=t[n][i]:null):t=t.hasOwnProperty(n)?t=t[n]:null,t}static readFromObject(t,s){return s.split('.').filter((t=>!e.isNull(t))).forEach((e=>t=GSData.readFromProperty(t,e))),t}static objectPathExist(t,s){return!!s&&s.split('.').map((e=>GSData.readFromProperty(t,e))).filter((t=>!e.isNull(t))).length>0}static{Object.seal(GSData),globalThis.GSData=GSData}}let i=class GSDOM{static QUERY_FOCUSABLE='a[href]:not([tabindex=\'-1\']),area[href]:not([tabindex=\'-1\']),input:not([disabled]):not([tabindex=\'-1\']),select:not([disabled]):not([tabindex=\'-1\']),textarea:not([disabled]):not([tabindex=\'-1\']),button:not([disabled]):not([tabindex=\'-1\']),iframe:not([tabindex=\'-1\']),[tabindex]:not([tabindex=\'-1\']),[contentEditable=true]:not([tabindex=\'-1\'])';static QUERY_INPUT='input:not([type=\'hidden\']):not(disabled):not(readonly),select:not([type=\'hidden\']):not(disabled):not(readonly),textarea:not([type=\'hidden\']):not(disabled):not(readonly)';static#w=['INPUT','SELECT','TEXTAREA','OUTPUT'];static SPEED=300;static get activeElement(){return GSDOM.active(document.activeElement)}static active(t){return t.shadowRoot?.activeElement?GSDOM.active(t.shadowRoot?.activeElement):t}static isVisible(t){if(!GSDOM.isHTMLElement(t))return!1;const e=n.getComputedStyledMap(t),s=!e.matches('visibility','hidden'),r=!e.matches('display','none'),i=e.asNum('opacity')>0,a=t.getBoundingClientRect();return a.width>0&&a.height>0&&i&&s&&r}static parse(t='',e=!1,s='text/html'){try{const r=(new DOMParser).parseFromString(t,s);return e?r?.head?.firstElementChild||r?.body?.firstElementChild:r}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',s=!1){const r=GSDOM.parse(e),n=[...GSDOM.#E(r.head.children),...GSDOM.#E(r.body.children)],i=s||1!==n.length,a=GSDOM.wrap(t,i?null:n.shift());for(;n.length>0;)a.appendChild(n.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#E(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const s=e.isString(t)?t:t?.tagName;return GSDOM.#w.includes(s)}static formElements(t){return GSDOM.queryAll(t,GSDOM.#w.map((t=>t.toLowerCase())))}static isButtonElement(t){return t instanceof HTMLButtonElement||'GS-BUTTON'===t?.tagName||GSDOM.hasClass(t,'btn')}static isElement(t,s){if(!(s&&t))return!1;if(!e.isString(s))return t instanceof s;const r=customElements.get(s.toLowerCase());if(r&&t instanceof r)return t;const n=GSDOM.inheritance(t);for(let e of n)if(e?.constructor?.name===s)return t;return s.toUpperCase()===t.tagName&&t}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const s=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),r=GSDOM.isHTMLElement(t)&&s,n=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!r||n)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,s){const r=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),n=t===e&&t.parentNode===e;return!(!r||n)&&t.insertAdjacentElement(s,e)}static removeElement(t){return GSDOM.parent(t)?.removeChild(t)}static walk(t,e=!1,s=!1,r=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,s,r)}static*childAll(t,e=!1,s=!0,r=!1){if(!t)return;r&&(yield t),s&&(yield*GSDOM.childAll(t.shadowRoot,e,s,!0));const n=e?t.childNodes:t.children;if(n)for(let t of n)yield*GSDOM.childAll(t,e,s,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static offsetParent(t){let e=t?.offsetParent;if(e)return e;const s=GSDOM.parentAll(t);for(const t of s)if(e=t.offsetParent,e)break;return e}static root(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static component(t){return GSDOM.parent(GSDOM.root(t))}static getElementIndex(t){return GSDOM.isHTMLElement(t)?[...t.parentElement.children].indexOf(t):0}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.documentElement,t);if(!t||!e)return null;const s=GSDOM.walk(t,!1);for(let t of s)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM.closest(document.documentElement,e);if(!t||!e)return null;const s=GSDOM.walk(t,!0);for(let t of s)if(GSDOM.matches(t,e))return t;return null}static query(t,e,s=!1,r=!0){if('string'==typeof t)return GSDOM.query(document.documentElement,t,s,r);if(!t||!e)return null;if(GSDOM.matches(t,e))return GSDOM.#G(t);const n=GSDOM.walk(t,!1,s,r);for(let t of n)if(GSDOM.matches(t,e))return GSDOM.#G(t);return null}static queryAll(t,e,s=!1,r=!0){if('string'==typeof t)return GSDOM.queryAll(document.documentElement,t,s,r);const n=[];if(!t||!e)return n;const i=GSDOM.walk(t,!1,s,r);for(let t of i)GSDOM.matches(t,e)&&n.push(GSDOM.#G(t));return n}static#G(t){return'FORM'!==t.tagName?t:GSDOM.isHTMLElement(t.id)?new Proxy(t,{get:(t,e,s)=>{if('_owner_'===e)return t;if('id'===e)return t.getAttribute('id');const r=Reflect.get(t,e);return GSFunction.isFunction(r)?r.bind(t):r},set:(t,e,s)=>t[e]=s}):t}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static setHTML(t,e='',s=!1,r){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(s&&t?.setHTML?r?t.setHTML(e,{sanitizer:r}):t.setHTML(e):t.innerHTML=e instanceof Document?e.body.innerHTML:e)}static setText(t,e=''){t&&(t.textContent=e)}static css(t,s){if(e.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!(Array.isArray(t)&&t.length>0))return!1;requestAnimationFrame((()=>{t.forEach((t=>{Object.entries(s).forEach((e=>{t.style[e[0]]=e[1]}))}))}))}static toggleClass(t,s,r){return e.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!!(Array.isArray(t)&&t.length>0)&&(!(!s||0==s.trim().length)&&(s=s.split(' ').filter((t=>t&&t.trim().length>0)),e.isNull(r)?s.forEach((e=>{t.forEach((t=>t.classList.toggle(e)))})):(t.forEach((t=>{r?t.classList.add.apply(t.classList,s):t.classList.remove.apply(t.classList,s)})),!0)))}static toggle(t,s){return GSDOM.toggleClass(t,'d-none',e.isNull(s)?s:!s)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea, output'){const s=GSDOM.unwrap(t);requestAnimationFrame((()=>{s.querySelectorAll(e).forEach((t=>t.value=''))}))}static getValue(t){switch(t.type){case'datetime-local':case'number':return t.value?t.valueAsNumber:t.value;case'select-multiple':return Array.from(t.selectedOptions).map((t=>t.value));case'checkbox':return t.hasAttribute('value')&&t.value?t.checked?t.value:null:t.checked;default:return t.value}}static toValue(t){if(!GSDOM.isHTMLElement(t))return;let s=GSDOM.getValue(t);if('text'===t.type){const r=n.styleValue(t,'text-transform');r&&(s=e.textTransform(r.value,s))}return s}static fromValue(t,e){if(!GSDOM.isHTMLElement(t))return;const s=Array.isArray(e)?e[0]||'':e;if('checkbox'===t.type)t.hasAttribute('value')?t.checked=s===t.value:t.checked=1==s;else t.value=s}static toObject(t,e='input, textarea, select, output',s=!0){const r=GSDOM.unwrap(t),n={};return GSDOM.queryAll(r,e).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!s||t.checkValidity())).forEach((t=>{('radio'!==t.type||t.checked)&&GSData.writeToOject(n,t.name,GSDOM.toValue(t))})),n}static fromObject(t,s,r='input, textarea, select, output'){if(s=e.toJson(s),0===Object.entries(s).length)return;const n=GSDOM.unwrap(t),i=GSDOM.queryAll(n,r);return Array.from(i).forEach((t=>GSDOM.fromObject2Element(t,s))),s}static fromObject2Element(t,e){if(!GSData.objectPathExist(e,t.name))return;const s=GSData.readFromObject(e,t.name);'radio'!==t.type?GSDOM.fromValue(t,s):t.value===s&&(t.checked=!0)}static toJson(t,e=!0,s=!1){if(Array.isArray(t))return t.map((t=>GSDOM.toJson(t,e)));const r={};if(!GSDOM.isHTMLElement(t))return r;if(s||(r['#tagName']=t.tagName.toLowerCase()),r.$text=t.innerText,Array.from(t.attributes).forEach((t=>r[t.name]=t.value)),e){const n=Array.from(t.children).map((t=>GSDOM.toJson(t,e,s)));n.length>0&&(r.items=n)}return r}static fromJson(t,e='gs-item',s=!1){return s?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,s='gs-item'){if(!t)return null;if(e.isNumber(t)||e.isString(t))return GSDOM.fromJsonAsDOM({title:t},s);if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t,s)));const r=t['#tagName']||s,n=document.createElement(r);return Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.setAttribute(e,t[e]))),Array.isArray(t.items)&&t.items.forEach((t=>{const e=GSDOM.fromJsonAsDOM(t,s);n.appendChild(e)})),n}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const s=t['#tagName']||e,r=[];return r.push(`<${s} `),Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>r.push(` ${e}="${t[e]}" `))),r.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const s=GSDOM.fromJsonAsString(t,e);r.push(s)})),r.push(`</${s}>`),r.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').filter((t=>t.length>1)).forEach((e=>{const s=e.split('=');GSDOM.setValue(`input[name=${s[0]}]`,s[1],t)}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,s='input, select, textarea, .btn',r=!0,n=''){let i=GSDOM.queryAll(t,s);!r&&n&&(i=i.filter((t=>e.asBool(t.dataset[n])))),i.forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, textarea, .btn',s=!0,r=''){GSDOM.queryAll(t,e).filter((t=>!!s||!t.disabled)).forEach((t=>{t.setAttribute('disabled',!0),r&&(t.dataset[r]=!0)}))}static setValue(t,e,s){GSDOM.queryAll(s,t).forEach((t=>GSDOM.fromValue(t,e)))}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),s=[];let r;for(;r=e.nextNode();)s.push(r);return s}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(/(\n*\t*)*(?=\n\t*)/g,'')))}static validate(t,e,s,r=!1){if(t.tagName!==e){if(r)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),s))return!0;if(r)return!1;const n=GSDOM.toValidationError(t,s);throw new Error(n)}static isAllowed(t,e){if(Array.isArray(t))return 0===t.filter((t=>GSDOM.isAllowed(t,e))).length;const s=!(t instanceof Text||t instanceof Comment),r=!e.includes(t.tagName);return s&&r}static toValidationError(t,e){const s=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${s}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let s=!0;try{const s=await fetch(e);if(!s.ok)return;const r=await s.text(),n=new CSSStyleSheet;n.replaceSync(r),t.shadowRoot.adoptedStyleSheets=[n]}catch(t){GSLog.error(null,t),s=!1}return s}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM}};class GSEvents{static#C=0;static#x=!1;static#$=new Map;static#T=!1;static#k=0;get altContext(){return GSEvents.#x}set altContext(t){GSEvents.#x=e.asBool(t,!0)}static protect(){GSEvents.listen(globalThis,null,'contextmenu',GSEvents.#D),GSEvents.listen(globalThis.document,null,'keydown',GSEvents.#A)}static#D(t){!GSEvents.#x&&t.shiftKey||GSEvents.prevent(t)}static#A(t){const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}static async waitPageLoad(t,e='loaded',r,n=100,i=!0){if(!GSEvents.#T)try{await GSEvents.wait(globalThis.window,'load',n,i),GSEvents.#T=!0}catch(t){}await s.callFunction(r),GSEvents.sendSuspended(t,e)}static wait(t,s='',r=0,n=!0){if(e.isStringEmpty(s))throw new Error('Event undefined!');if(!e.isNumber(r))throw new Error('Invalid timeout value!');return r>0?GSEvents.once(t,null,s,null,r):new Promise((e=>{GSEvents.once(t,null,s,(t=>{n&&GSEvents.prevent(t),e(t)}),r)}))}static async waitAnimationFrame(t,e=!1){if(e){if('function'!=typeof t)return;if(GSEvents.#k>0)return s.callFunction(t);GSEvents.#k++}return new Promise(((r,n)=>{requestAnimationFrame((async()=>{try{const e=await s.callFunction(t);r(e)}catch(t){n(t)}finally{e&&GSEvents.#k>0&&GSEvents.#k--}}))}))}static listen(t,e,s,r,n=!1){return!e&&t?t.addEventListener(s,r,n):i.queryAll(t,e).map((t=>t.addEventListener(s,r,n)))}static unlisten(t,e,s,r){return!e&&t?t.removeEventListener(s,r):i.queryAll(t,e).map((t=>t.removeEventListener(s,r)))}static on=GSEvents.listen;static off=GSEvents.unlisten;static once(t,e,s,r,n=0){const i=GSEvents.#M(n);return i&&i.internal?new Promise(((n,a)=>{GSEvents.listen(t,e,s,r||n,{once:!0,signal:i}),i.addEventListener('abort',a)})):GSEvents.listen(t,e,s,r,{once:!0,signal:i})}static prevent(t,e=!0){s.hasFunction(t,'preventDefault')&&t.preventDefault(),s.hasFunction(t,'stopPropagation')&&t.stopPropagation(),e&&s.hasFunction(t,'stopImmediatePropagation')&&t.stopImmediatePropagation()}static send(t=document,e,s='',r=!1,n=!1,i=!1){const a=new CustomEvent(e,{detail:s,bubbles:r,composed:n,cancelable:i});return t?.dispatchEvent(a)}static toEvent(t,e){let s=null;switch(t){case'copy':case'cut':case'paste':s=new ClipboardEvent(t,e);break;case'blur':case'focus':case'focusin':case'focusout':s=new FocusEvent(t,e);break;case'input':case'beforeinput':s=new InputEvent(t,e);break;case'keydown':case'keyup':case'keypress':s=new KeyboardEvent(t,e);break;case'dblclick':case'mousedown':case'mouseenter':case'mouseleave':case'mousemove':case'mouseout':case'mouseover':case'mouseup':s=new MouseEvent(t,e);break;case'submit':s=new SubmitEvent(t,e);break;case'touchstart':case'touchend':case'touchmove':case'touchcancel':s=new TouchEvent(t,e);break;case'whell':s=new WheelEvent(t,e);break;case'pointerover':case'pointerenter':case'pointerdown':case'pointermove':case'pointerup':case'pointercancel':case'pointerout':case'pointerleave':case'pointerrawupdate':case'gotpointercapture':case'lostpointercapture':s=new PointerEvent(t,e);break;default:s=new CustomEvent(t,e)}return s}static isMouseOrPointerEvent(t){return t instanceof MouseEvent||t instanceof PointerEvent}static sendSuspended(t=document,e,s='',r=!1,n=!1,i=!1){return requestAnimationFrame((()=>{GSEvents.send(t,e,s,r,n,i)}))}static sendDelayed(t=1,e=document,s,r='',n=!1,i=!1,a=!1){return setTimeout((()=>GSEvents.send(e,s,r,n,i,a)),t)}static attach(t,e,r='',n,i=!1,a=!1){if(!e)return!1;if(!(window instanceof Window||e.isConnected))return!1;if(!s.isFunction(n))return!1;if(!s.hasFunction(e,'addEventListener'))return!1;const o=this,l=o.#L(t,e,r,n),c=o.#O(t);return o.#I(c,l.key).set(l.fnkey,l),l.capture=a,i&&(l.once=t=>{try{l.fn(t)}finally{o.remove(l.own,l.el,l.name,l.once)}},Object.defineProperty(l.once,'gsid',{value:n.gsid,writable:!1})),e.addEventListener(r,i?l.once:l.fn,{once:i,capture:a}),!0}static remove(t,e,s='',r){const n=this,i=n.#L(t,e,s,r),a=n.#O(t),o=n.#I(a,i.key),l=o.get(i.fnkey);if(l)o.delete(l.fnkey),n.#N(l);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),n.#N(t);0===o.size&&a.delete(i.key),0===a.size&&n.#$.delete(t)}static deattachListeners(t){const e=this,s=e.#R(t);if(!s)return;const r=s.values();for(let t of r){for(let s of t.values())e.#N(s);t.clear()}s.clear()}static#L(t,e,s='',r=''){if(!e)return!1;const n=this.#U(e),i=this.#F(r);return{own:t,fn:r,el:e,name:s,key:GSID.hashCode(`${n}${s}`),fnkey:GSID.hashCode(`${n}${s}${i||''}`)}}static#I(t,e){let s=t.get(e);return s||(s=new Map,t.set(e,s)),s}static#F(t){return s.isFunction(t)?(t.gsid||Object.defineProperty(t,'gsid',{value:GSID.next(),writable:!1}),t.gsid):null}static#U(t){let e=t[Symbol.for('gs-event-id')];return e||(e=GSID.id,t[Symbol.for('gs-event-id')]=e),e}static#O(t){return this.#I(this.#$,t)}static#R(t){const e=this.#$.get(t);if(e)return this.#$.delete(t),e}static#N(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static#M(t=0){return e.isNumber(t)&&t>0?((t=AbortSignal.timeout(t)).internal=!0,t):t instanceof AbortSignal?t:void 0}static monitorAction(t,e){t.on('action',(async s=>{const r=t,n=s.detail,i=n.action||n.data?.action;await GSEvents.onAction(r,i,e,s)}))}static async onAction(t,e,r,n){const i=GSEvents.findAction(t,e,r);if(!i)return;GSEvents.prevent(n);let a=!1;try{a=s.isFunctionAsync(i)?await i(n):i(n)}catch(e){if(a=e,!s.isFunction(t.onError))throw e;t.onError(e)}return a}static findAction(t,r='',n=''){let i=!1;if(!r)return i;const a=t;r=e.capitalizeAttr(e.capitalize(r));const o=`on${n=e.capitalizeAttr(e.capitalize(n))}${r}`;globalThis.GS_LOG_ACTION&&GSLog.warn(t,`Action : ${o}`);const l=a[o];return i=s.isFunction(l),i=i&&!s.isFunctionNative(l),i?a[o].bind(a):null}static#P(){clearTimeout(GSEvents.#C),GSEvents.#C=setTimeout((async()=>{await GSEvents.waitAnimationFrame(),GSEvents.send(window,'resized')}),100)}static resizeMonitor(){const t=GSEvents,e=document.documentElement,s=t.#L(e,window,'resize',t.#P),r=t.#O(e),n=r.get(s.key)?.get(s.fnkey);n||t.attach(e,window,'resize',t.#P)}static{Object.freeze(GSEvents),globalThis.GSEvents=GSEvents}}let a=class GSAbortController extends AbortController{#B=0;constructor(t=0){if(super(),!e.isNumber(t))throw new Error('Timeout parameter must be number');const s=this;t&&(s.#B=setTimeout(s.abort.bind(s),t)),s.signal.addEventListener('abort',(()=>clearInterval(s.#B)))}wait(t=0){return GSEvents.wait(me.signal,'abort',t)}};class GSDOMObserver extends MutationObserver{static#H=new Map;static#z=new Map;observe(t,e){const s=e||{childList:!0,subtree:!0};return super.observe(t,s)}static create(t,e){const s=new GSDOMObserver(GSDOMObserver.#j);return s.observe(t,e),s}static#q(t=!1){return t?GSDOMObserver.#z:GSDOMObserver.#H}static get#_(){return GSDOMObserver.#V||GSDOMObserver.#W}static get#V(){return GSDOMObserver.#H.size>0}static get#W(){return GSDOMObserver.#z.size>0}static#j(t){GSDOMObserver.#_&&t.forEach((t=>{GSDOMObserver.#V&&t.addedNodes.forEach((t=>GSDOMObserver.#Y(t,GSDOMObserver.#H))),GSDOMObserver.#W&&t.removedNodes.forEach((t=>GSDOMObserver.#Y(t,GSDOMObserver.#z)))}))}static#Y(t,e){return 0!==e.size&&(GSDOMObserver.#J(t,e),t.childNodes.forEach((t=>GSDOMObserver.#Y(t,e))),!0)}static#J(t,e){e.forEach(((e,s)=>{try{s(t)&&e(t)}catch(t){GSLog.error(null,t)}}))}static#K(t,e,s){if(t instanceof HTMLElement==0)return!1;const r=new Map;return r.set(e,s),GSDOMObserver.#Y(t,r)}static#X(t){return'function'==typeof t}static#Q(t,e){return GSDOMObserver.#X(t)&&GSDOMObserver.#X(e)}static registerFilter(t,e,s=!1,r){return!!GSDOMObserver.#Q(t,e)&&(GSDOMObserver.#q(s).set(t,e),s||GSDOMObserver.#K(r||document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#X(t)&&GSDOMObserver.#q(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver,GSDOMObserver.create(document.documentElement)}}class GSDynamicStyle extends CSSStyleSheet{constructor(t='dynamic'){super(),this.id=t||GSID.id}deleteRule(t=''){const e=this;Array.from(e.cssRules).map(((e,s)=>e.selectorText===`.${t}`?s:-1)).filter((t=>t>-1)).forEach((t=>e.deleteRule(t)))}getRule(t=''){return Array.from(this.cssRules).filter((e=>e.selectorText===`.${t}`)).pop()}setRule(t,e='',s=!1){const r=this;if(!t)return;let n=r.getRule(t);if(!n)return r.insertRule(`.${t} {}`),r.setRule(t,e,s);if(!e)return n;let i=[];return i='string'==typeof e?e.replaceAll('\n','').split(';').map((t=>t.trim().split(':'))).filter((t=>2===t.length)):Object.entries(e),s?i.forEach((t=>r.#Z(n,t[0],t[1]))):requestAnimationFrame((()=>{i.forEach((t=>r.#Z(n,t[0],t[1])))})),n}#Z(t,e='',s=''){const r=(s=s||'').includes('!important');s=s.replace('!important',''),e=e.trim(),t.style.setProperty(e,s,r?'important':'')}static dynamicStyleSheet(t){const e=i.root(t),s=t.dataset.sheet||'dynamic';return GSDynamicStyle.dynamicStyleSheetByID(e,s)}static dynamicStyleSheetByID(t,e){return Array.from(t?.adoptedStyleSheets).filter((t=>t.id===e)).pop()}static dynamicRule(t){const e=GSDynamicStyle.dynamicStyleSheet(t);return e?.getRule(t.dataset.gsClass)}static dynamicRuleByID(t,e){const s=GSDynamicStyle.dynamicStyleSheetByID(t,'dynamic');return s?.getRule(e)}static dynamicStyle(t){const e=GSDynamicStyle.dynamicRule(t);return e?.style}static dynamicStyleByID(t,e){const s=GSDynamicStyle.dynamicRuleByID(t,e);return s?.style}static applyDynamicStyle(t,e){requestAnimationFrame((()=>{const s=GSDynamicStyle.dynamicStyle(t);return Object.assign(s,e)}))}static applyDynamicStyleByID(t,e,s){requestAnimationFrame((()=>{const r=GSDynamicStyle.dynamicStyleByID(t,e);return Object.assign(r,s)}))}}class GSCacheStyles{static#tt=new Map;static create(t){const e=new GSDynamicStyle(t);return this.#tt.set(t,e),e}static set(t,e){const s=this;if(e instanceof CSSStyleSheet&&s.#tt.set(t,e),e&&'string'==typeof e){GSCacheStyles.create(t).replaceSync(e)}return s.get(t)}static remove(t){return this.#tt.delete(t)}static get(t){return this.#tt.get(t)}static get dynamic(){const t='gs-dynamic';let e=GSCacheStyles.get(t);return e||(e=GSCacheStyles.create(t),document.adoptedStyleSheets=GSCacheStyles.styles),e}static getRule(t=''){return GSCacheStyles.dynamic.getRule(t)}static setRule(t='',e='',s=!1){return GSCacheStyles.dynamic.setRule(t,e,s)}static deleteRule(t=''){GSCacheStyles.dynamic.deleteRule(t)}static get styles(){return Array.from(new Map([...GSCacheStyles.#tt].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static adopt(t='',e=0){if(t)try{e=e||GSID.hashCode(t),GSCacheStyles.set(e,t),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){}}static{Object.freeze(GSCacheStyles),globalThis.GSCacheStyles=GSCacheStyles,GSCacheStyles.adopt(t)}}const l=Symbol(),c=Symbol();class GSAdoptedEngine{static#et=0;static#st=Date.now();static#rt=!1;static#nt(){const t=GSAdoptedEngine;t.observe(document.head),t.#it(),t.#et=setInterval((()=>t.#at()),t.timeout)}static#ot(){const t=GSAdoptedEngine;clearInterval(t.#et),t.#et=void 0}static#at(){const t=GSAdoptedEngine,e=t.#lt;if(0==e.length)return t.#ot();e.map((e=>t.#ct(e))),t.update()}static update(){const t=GSAdoptedEngine;t.#rt||(t.#rt=!0,queueMicrotask((()=>{requestAnimationFrame((()=>{try{document.adoptedStyleSheets=t.#dt,document.adoptedStyleSheets.id=++t.#st}finally{t.#rt=!1,globalThis.dispatchEvent(new CustomEvent('gs-adopted'))}}))})))}static#ut(t){return Object.values(t.cssRules).map((t=>t.cssText)).join('')}static#ht(t){const e=GSAdoptedEngine;GSAdoptedEngine.#pt(t),Array.from(document.styleSheets).filter((e=>e.ownerNode===t)).map((t=>e.#ct(t)))}static#ct(t){const e=GSAdoptedEngine,s=e.#ut(t);return e.#mt(t.ownerNode,s)}static#mt(t,e){const s=GSAdoptedEngine,r=new CSSStyleSheet;return r.replaceSync(e),r.id=++s.#st,t[l]=r.id,s.#tt(t,r),r}static#tt(t,e){GSCacheStyles.set(e.id,e)}static#gt(t,e){GSCacheStyles.remove(e.id),t[c]?.disconnect?.(),t[c]=void 0}static get#dt(){return GSCacheStyles.styles}static get#lt(){return Object.values(document.styleSheets).filter((t=>t.ownerNode)).filter((t=>t.ownerNode.dataset.adoptable)).filter((t=>!t.ownerNode[l]))}static#it(){i.queryAll(document.head,'link[rel="preload"][as="style"]').forEach((t=>{t.remove(),document.head.appendChild(t)}))}static#ft(t){t.forEach((t=>{const e=t.target[l],s=GSCacheStyles.get(e);s&&(s.disabled=t.target.hasAttribute('disabled'))})),GSAdoptedEngine.update()}static#pt(t){const e=GSAdoptedEngine,s=e.#ft.bind(e),r=new MutationObserver(s);return r.observe(t,{attributeFilter:['disabled'],attributeOldValue:!0,subtree:!1}),r}static#yt(t){return Boolean(t.dataset?.adoptable)&&(t instanceof HTMLLinkElement&&('stylesheet'===t.rel||'style'===t.as)||t instanceof HTMLStyleElement)}static#St(t){const e=GSAdoptedEngine;t instanceof HTMLStyleElement?(e.#mt(t,t.innerText),e.update()):t instanceof HTMLLinkElement&&GSEvents.wait(t,'load',0,!1).then((s=>{if('preload'===t.rel)return t.rel='stylesheet';e.#ht(s.target),e.update()}))}static#bt(t){const e=GSAdoptedEngine;e.#dt.filter((e=>e.id===t[l])).forEach((s=>e.#gt(t,s))),e.update()}static observe(t){const e=GSAdoptedEngine;GSDOMObserver.registerFilter(e.#yt,e.#St,!1,t),GSDOMObserver.registerFilter(e.#yt,e.#bt,!0,t)}static{this.#nt()}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((s=>{s.brand.toLowerCase().includes(e)&&(t=!0)})),t}const s=navigator.userAgent.toLocaleLowerCase()||'',r=s.includes('edg');return!(!r||!e.startsWith('edg'))||!r&&s.includes(e)}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSPromise{#vt;#wt;#Et;#Gt;#Ct;#xt;constructor(t,s){const r=this;r.#wt=t,r.#vt=s instanceof AbortSignal?s:null,r.#vt=e.isNumber(s)?AbortSignal.timeout(s):r.#vt,r.#Et={abort:r.#$t.bind(r)}}await(){const t=this;return t.#xt||(t.#vt?.addEventListener('abort',t.#Et.abort),t.#xt=new Promise(t.#Tt.bind(t))),t.#xt}get aborted(){return!0===this.#vt?.aborted}#Tt(t,e){const s=this;s.#Gt=t,s.#Ct=e;try{s.#wt(s.#kt.bind(s),s.#Dt.bind(s))}catch(t){s.#ot(),e(t)}}#$t(){this.#ot(),this.#Ct(new Error('Promise aborted!'))}#kt(t){const e=this;return e.#ot(),e.aborted?null:e.#Gt(t)}#Dt(t){const e=this;return e.#ot(),e.aborted?null:e.#Ct(t)}#ot(){this.#vt?.removeEventListener('abort',this.#Et.abort)}static sequential(t){return Array.isArray(t)||(t=[]),t.reduce(((t,e)=>t.then(e)),Promise.resolve())}static{globalThis.GSPromise=GSPromise}}class GSEvent extends EventTarget{#At=new Set;#Mt(t='',e){const s=Array.from(this.#At);return this.#X(e)?s.filter((s=>s.type===t&&s.listener===e)):s.filter((e=>e.type===t))}#X(t){return'function'==typeof t}on(t='',e,s=0,r=!1){if(!t)return reject('Event undefined!');let n=null;n=r instanceof AbortController?r:r?new GSAbortController(s):null;const i=n||0==s?n?.signal:AbortSignal.timeout(s);return this.addEventListener(t,e,{signal:i}),n||i}once(t,e,s=0,r=!1){if(!t)return reject('Event undefined!');const n=this,wrap=t=>{e(t),n.#At.delete(wrap)};return wrap.type=t,wrap.listener=e,wrap.timeout=s,r instanceof AbortController?wrap.controller=r:wrap.controller=r?new GSAbortController(s):null,wrap.signal=wrap.controller||0==s?wrap.controller?.signal:AbortSignal.timeout(s),n.addEventListener(t,wrap,{once:!0,signal:wrap.signal}),wrap.controller||wrap.signal}off(t='',e){this.removeEventListener(t,e)}emit(t='',s,r=0){const n=this;return!0===r?queueMicrotask((()=>n.#Lt(t,s))):(r=e.asNum(r,0))<=0?n.#Lt(t,s):setTimeout((()=>n.#Lt(t,s)),r)}#Lt(t='',e){const s=new CustomEvent(t,{detail:e});return this.dispatchEvent(s)}wait(t='',e){const s=this;return new GSPromise(((e,r)=>{s.once(t,e)}),e).await()}listen(t,e){this.on(t,e)}unlisten(t,e){this.off(t,e)}unbind(){Array.from(this.#At).forEach((t=>{super.removeEventListener(t.type,t.listener)})),this.#At.clear()}addEventListener(t,e,s){return!!this.#X(e)&&(this.#At.add({type:t,listener:e}),super.addEventListener(t,e,s))}removeEventListener(t,e){const s=this,r=s.#Mt(t,e);r.forEach((t=>super.removeEventListener(t.type,t.listener))),r.forEach((t=>s.#At.delete(t)))}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSEventBus{static#Ot=new Map;static send(t='',e='',s){return GSEventBus.register(t).emit(e,s)}static exist(t=''){return t&&GSEventBus.#Ot.has(t)}static register(t=''){return GSEventBus.exist(t)||GSEventBus.#Ot.set(t,new GSEvent),GSEventBus.#Ot.get(t)}static unregister(t=''){const e=GSEventBus.#Ot.get(t);return e?.unbind&&e.unbind(),GSEventBus.#Ot.delete(t)}static{Object.freeze(GSEventBus),globalThis.GSEventBus=GSEventBus}}class GSGesture{#It=0;#Nt=0;#Rt=null;#Ut=null;#Ft=null;#Pt=null;#Bt=!1;#Ht=!1;#zt=!1;#jt=0;static timeout=1500;constructor(t,e,s,r){const n=this;n.#Bt=e,n.#Ht=s,n.#zt=r,n.#Rt=null,n.#Ut=null,n.#Ft='string'==typeof t?document.querySelector(t):t,n.#Pt={move:n.#qt.bind(n),start:n.#_t.bind(n),end:n.#Vt.bind(n)},GSEvents.attach(n.#Ft,n.#Ft,'touchmove',n.#Pt.move,!1),GSEvents.attach(n.#Ft,n.#Ft,'touchstart',n.#Pt.start,!1),GSEvents.attach(n.#Ft,n.#Ft,'touchend',n.#Pt.end,!1)}unbind(){const t=this;GSEvents.remove(t.#Ft,t.#Ft,'touchmove',t.#Pt.move),GSEvents.remove(t.#Ft,t.#Ft,'touchstart',t.#Pt.start),GSEvents.remove(t.#Ft,t.#Ft,'touchend',t.#Pt.end)}#_t(t){const e=this;e.#Rt=t.touches[0].clientX,e.#Ut=t.touches[0].clientY,e.#zt&&setTimeout(e.#Wt.bind(e),GSGesture.timeout)}#Vt(t){clearTimeout(this.#jt)}#qt(t){const e=this;if(!e.#Rt||!e.#Ut)return;if(!e.#Bt)return;const s=t.touches[0].clientX,r=t.touches[0].clientY;if(e.#zt){Math.abs(e.#It)>10&&Math.abs(e.#Nt)>10&&clearTimeout(e.#jt)}e.#It=e.#Rt-s,e.#Nt=e.#Ut-r;let n='';n=Math.abs(e.#It)>Math.abs(e.#Nt)?e.#It>0?'swipe-left':'swipe-right':e.#Nt>0?'swipe-up':'swipe-down',GSEvents.send(e.#Ft,n,t),e.#Rt=null,e.#Ut=null}#Wt(){GSEvents.send(me.#Ft,'long-press')}static fingers(t){return t.detail.touches?.length}static attach(t,e=!0,s=!1,r=!1){return new GSGesture(t,e,s,r)}}class GSItem extends HTMLElement{static#Yt=['GS-ITEM','TEMPLATE'];constructor(){super(),GSItem.validate(this)}get body(){let t=r.get(this,'template');return t?`<gs-template href="${t}"></gs-template>`:(t=this.querySelector('template'),t?.innerHTML||'')}get items(){return Array.from(this.children).filter((t=>'GS-ITEM'==t.tagName))}get name(){return r.get(this,'name','')}asJSON(t=!0){return i.toJson(this,t)}static validate(t,e='GS-ITEM'){return i.validate(t,e,GSItem.#Yt)}static collect(t){return i.isHTMLElement(t)?Array.from(t.children).filter((t=>'GS-ITEM'==t.tagName)):[]}static toJSON(t){return GSItem.collect(t).map((t=>t.asJSON(!0)))}static proxify(t,e){return GSItem.collect(t).map((t=>r.proxify(t,e)))}static{customElements.define('gs-item',GSItem),Object.seal(GSItem)}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let s=null;const r=location.pathname.split('/').pop(-1).includes('.'),n=t.includes('extension:/');s=t.startsWith('http')||n?t:t.startsWith('/')?`${location.origin}/${t}`:r?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,s=s.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(s);return!e&&GSLoader.NO_CACHE&&i.searchParams.append('_dc',Date.now()),i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')+'/'}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=i.query(document.documentElement,t);return e?e.innerHTML:t}return e.isHTML(t)?t:(t=GSLoader.#Jt(t),GSLoader.loadSafe(t))}static#Jt(t=''){return t=t.startsWith('//')?GSLoader.#Kt+'/'+t:t,GSLoader.normalizeURL(t)}static get#Kt(){return GSLoader.normalizeURL(GSLoader.#Xt,!0)}static get#Xt(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const s=GSLoader.#Jt(t);return await GSLoader.load(s,e)}static async load(t='',e='GET',s,r=!1,n){let i=null;const a='Content-Type';(s={...s})[a]=r?'application/json; utf-8':s[a]||'text/plain',s.Accept='application/json';const o=GSLoader.normalizeURL(t,!0),l={method:e,headers:s};('POST'===e||'PUT'===e&&n)&&(l.body=JSON.stringify(n));const c=await fetch(o,l);return c.ok&&(i=r?await c.json():await c.text()),i}static async loadSafe(t='',e='GET',s,r=!1,n,i){try{if(t)return GSLoader.load(t,e,s,r,i)}catch(t){GSLog.error(this,t)}return n||(r?{}:'')}static async loadData(t=''){const r=e.isJson(t),n=!r&&s.parseFunction(t),i=n&&s.isFunction(n);if((!i&&e.parseValue(t)||r)&&(t=e.toJson(t)),i&&(t=await s.callFunction(n)),e.isJsonType(t))return t}static{Object.seal(GSLoader),globalThis.GSLoader=GSLoader}}const d=globalThis.GS_LOCALIZATION_LANGUAGE||document.documentElement.lang||navigator.language;const u=new class GSLocalizationImpl{#Qt=new Map;#Zt=new Set;#te=!1;#ee=globalThis.GS_LOCALIZATION_URL;#se=d;#re;constructor(){this.load()}get default(){return this.#se}set default(t=''){this.#se=t||d}get lang(){return this.#re||this.default}set lang(t=''){this.#re=t}get url(){return this.#ee}set url(t=''){this.#ee=t||globalThis.GS_LOCALIZATION_URL}translate(t='',s=''){const r=this;if(e.isStringEmpty(t))return s;if(!r.#Qt.has(t))return r.load(t),s;const n=r.#ne('default'),i=r.#ne(t),a=n.get(GSID.hashCode(s));return a&&i.get(a)||s}reset(){const t=this;t.#se=d,t.#re=void 0,t.load()}load(t='default'){const s=this;e.isStringEmpty(t)||e.isStringEmpty(s.url)||s.#Qt.has(t)||(s.#Zt.add(t),s.#te||(s.#te=!0,queueMicrotask((async()=>{const t=Array.from(s.#Zt.values()).map((t=>s.loadWait(t)));await GSPromise.sequential(t),s.#te=!1}))))}async loadWait(t){const s=this;if(e.isStringEmpty(t))return;if(e.isStringEmpty(s.url))return;const r=GSLoader.normalizeURL(`${s.url}/${t}.json`);let n=await GSLoader.loadSafe(r,'GET',{'Cache-Control':'no-cache',Pragma:'no-cache'},!0);if(!n&&t.indexOf('-')>0&&(n=await s.loadWait(t.split('-')[0])),!n)return!1;s.#Zt.delete(t),s.#tt(t,n)}#tt(t,e){if(!e||!t)return!1;const s='default'===t,r=this.#ne(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0].trim());r.set(e,s?GSID.hashCode(t[1]):t[1])})),GSEvents.send(window,'gs-language',{details:t}),!0}#ne(t=''){const e=this;return e.#Qt.has(t)||e.#Qt.set(t,new Map),e.#Qt.get(t)}};class GSPopper{static asRect(t){return t.getBoundingClientRect()}static getOffset(t){const e=GSPopper.asRect(t),s=window.scrollX,r=window.scrollY,n={left:e.left+s,right:e.right+s,top:e.top+r,bottom:e.bottom+r,height:e.height,width:e.width,x:e.x+s,y:e.y+r};return n.centerX=n.left+n.width/2,n.centerY=n.top+n.height/2,n}static boundingRect(t,e){const s=GSPopper.asRect(t),r=GSPopper.elementPadding(e?t:null),n=r.x,i=r.y,a=t.clientWidth-n,o=t.clientHeight-i,l=s.left+r.left,c=s.top+r.top;return{width:a,height:o,top:c,left:l,x:l,y:c,centerX:a/2+l,centerY:c+o/2}}static elementPadding(t){const e={left:0,right:0,top:0,bottom:0,x:0,y:0};if(!(t instanceof HTMLElement))return e;const s=n.getComputedStyledMap(t);return e.left=s.asNum('padding-left'),e.right=s.asNum('padding-right'),e.top=s.asNum('padding-top'),e.bottom=s.asNum('padding-bottom'),e.x=e.left+e.right,e.y=e.top+e.bottom,e}static popupFixed(t='top',e,s,r){if(!e||!s)return!1;const n=GSPopper.#ie(t);if(!GSPopper.#ae(n))return void GSLog.warn(e,`Invalid popover position: ${t}!`);const i=GSDynamicStyle.dynamicStyle(e);Object.assign(i,{position:'fixed',top:'0px',left:'0px',margin:'0px',padding:'0px',transform:'',translate:''});const a=e.clientHeight/2,o=e.clientWidth/2,l=GSPopper.boundingRect(s,r instanceof HTMLElement),c=GSPopper.#oe(e,r,n),d={x:l.centerX,y:l.centerY,offH:a,offW:o,srcH:e.clientHeight,srcW:e.clientWidth};GSPopper.#le(n,d,l,c),i.translate=`${d.x}px ${d.y}px`}static popupAbsolute(t='top',e,s,r){if(!e||!s)return!1;const n=GSPopper.#ie(t);if(!GSPopper.#ae(n))return void GSLog.warn(e,`Invalid popover position: ${t}!`);const i=GSDynamicStyle.dynamicStyle(e),a=GSDynamicStyle.dynamicStyle(r),o={inset:GSPopper.#ce(n),position:'absolute',margin:'0px',top:'0px',left:'0px',width:'max-content',height:'max-content',transform:'',translate:''};Object.assign(i,o),a.position='absolute';const l=GSPopper.asRect(e),c=GSPopper.asRect(r),d=GSPopper.getOffset(s),u={x:d.centerX,y:d.centerY},h={x:l.width/2-c.width/2,y:l.height/2-c.height/2};GSPopper.#de(n,u,h,l,c,d);const p={translate:`${h.x}px ${h.y}px`,top:h.top?h.top:'',left:h.left?h.left:''},m={translate:`${u.x}px ${u.y}px`};Object.assign(i,m),Object.assign(a,p)}static#de(t,e,s,r,n,i){t.isTop?(s.y=0,s.left='0px',e.x=e.x-r.width/2,e.y=-1*(r.bottom-i.top+n.height)):t.isBottom?(s.y=0,s.left='0px',e.x=e.x-r.width/2,e.y=i.bottom+n.height):t.isStart?(s.x=0,s.top='0px',e.x=-1*(r.right-i.left+n.width),e.y=e.y-r.height/2):t.isEnd&&(s.x=0,s.top='0px',e.x=i.right+n.width,e.y=e.y-r.height/2)}static#le(t,e,s,r){t.isTop?(e.y=s.top-e.srcH-r.size,e.x=e.x-e.offW):t.isBottom?(e.y=s.top+s.height+r.size,e.x=e.x-e.offW):t.isStart?(e.x=s.left-e.srcW-r.size,e.y=e.y-e.offH+r.size):t.isEnd&&(e.x=s.left+s.width+r.size,e.y=e.y-e.offH+r.size)}static#ce(t){return t.isTop?'auto auto 0px 0px':t.isBottom?'0px auto auto 0px':t.isStart?'0px 0px auto auto':t.isEnd?'0px auto auto 0px':void 0}static#ae(t){return t.isStart||t.isEnd||t.isTop||t.isBottom}static#ie(t){return{isStart:'start'==t||'left'==t,isEnd:'end'==t||'right'==t,isTop:'top'==t,isBottom:'bottom'==t}}static#oe(t,e,s){if(!e)return{x:0,y:0,size:0,width:0,height:0};let r=0;const n=GSPopper.boundingRect(t),i=GSPopper.boundingRect(e),a=s.isStart||s.isEnd?i.width:i.height,o=n.width/2-a/2,l=n.height/2-a/2;i.size=a;const c={position:'absolute'};return s.isStart||s.isEnd?(c.left='',c.top='0px',r=0,c.translate=`${r}px ${l/2}px`):(c.top='',c.left='0px',r=0,c.translate=`${o}px ${r}px`),GSDynamicStyle.applyDynamicStyle(e,c),i}static{Object.seal(GSPopper),globalThis.GSPopper=GSPopper}}class GSQueryCSS{#i=null;constructor(t){if(!i.isHTMLElement(t))throw new Error('Only HTMLElement type allowed!');this.#i=new GSCSSMap(t)}#ue(t){return s.hasFunction(this.#i,t)}get(t,s,r){return(n,i)=>{const a=this;return e.isNull(n)?a.#i.get(s):a.#ue(s)?a.#i[s](n,i):(t[s]=n,r)}}static wrap(t){return new Proxy(t.style,new GSQueryCSS(t))}}class GSQuery{#he=null;constructor(t){Array.isArray(t)||(this.#he=GSQueryCSS.wrap(t))}get(t,e){return'css'===e?this.#he:'query'===e?(e,s,r)=>{const n=i.query(t,e,s,r);return GSQuery.wrap(n)}:'queryAll'===e?(e,s,r)=>{const n=i.queryAll(t,e,s,r);return GSQuery.wrap(n)}:t[e]}set(t,e,s){if('css'===e)Array.isArray(t)?t.forEach((t=>t[e]=s)):i.css(t,s);else t[e]=s;return!0}static instance(t){return new Proxy(t,new GSQuery(t))}static wrap(t){return i.isHTMLElement(t)?GSQuery.instance(t):Array.isArray(t)?(t=t.map((t=>GSQuery.instance(t))),GSQuery.instance(t)):t}static all(t,e,s,r){return GSQuery.wrap(i.queryAll(t,e,s,r))}static first(t,e,s,r){return GSQuery.wrap(i.query(t,e,s,r))}static{Object.freeze(GSQuery),globalThis.GSQuery=GSQuery}}class GSTemplateCache{static#tt=new Map;static store(t,e){this.#tt.set(t,e)}static remove(t){return this.#tt.delete(t)}static load(t){return this.#tt.get(t)}static getOrCreate(t,e){const s=GSTemplateCache;let r=s.load(t);return r||(r=s.create(e),s.store(t,r),r)}static create(t){const e=document.createElement('template');return i.setHTML(e,t),e}static clone(t){return i.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(t){const e=s.parseFunction(t);return!!s.isFunction(e)&&e}static isHTMLTemplate(t){const e=t?t.trim():'';return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():'';return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e='',s){const r=GSTemplateCache;return t?r.getOrCreate(e,s):r.create(s)}static loadHTMLTemplate(t=!1,e='',s){const r=GSTemplateCache,n=r.isHTMLTemplate(s);return n?r.initTemplate(t,e,n):n}static async loadURLTemplate(t=!1,e='',s){const r=GSTemplateCache;try{let n=null;return t&&(n=r.load(s)),n?n:(n=await GSLoader.loadTemplate(s),r.initTemplate(t,e,n))}catch(t){GSLog.error(r,t)}return!1}static async loadFunctionTemplate(t=!1,e='',r){const n=GSTemplateCache,i=n.isFunctionTemplate(r);if(!i)return i;try{let r=null;return n.cached&&(r=n.load(o)),r?r:(r=s.isFunctionAsync(i)?await i():i(),n.initTemplate(t,e,r))}catch(t){GSLog.error(n,t)}return i}static async loadTemplate(t=!1,e='',s){if(!e)return!1;if(!s)return!1;const r=GSTemplateCache;let n=!1;return 0==s.indexOf('#')?document.getElementById(s.slice(1)):(n||(n=r.loadHTMLTemplate(t,e,s)),n||(n=await r.loadFunctionTemplate(t,e,s)),n||(n=await r.loadURLTemplate(t,e,s)),n)}}class GSTheme{static#pe='gs-theme-mode';static darkMode(t){GSTheme.#me(t,'light','dark')}static lightMode(t){GSTheme.#me(t,'dark','light')}static#me(t,e='light',s='dark'){GSTheme.theme=s}static get theme(){return localStorage.getItem(GSTheme.#pe)}static set theme(t){localStorage.setItem(GSTheme.#pe,t),window.dispatchEvent(new CustomEvent('gs-theme',{detail:t}));const e=document.head.parentElement;t?e.dataset.bsTheme=t:delete e.dataset.bsTheme}static getSystemDefaultTheme(){return window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light'}static#ge(t){const e=new URLSearchParams(location.hash.slice(1));GSTheme.theme=e.get('theme')}static#fe(){window.addEventListener('hashchange',GSTheme.#ge);let t=localStorage.getItem(GSTheme.#pe);return null==t&&(t=GSTheme.getSystemDefaultTheme()),'dark'==t?GSTheme.darkMode():'light'==t?GSTheme.lightMode():void 0}static{GSTheme.#fe(),globalThis.GSTheme=GSTheme}}class GSAttributeHandler{static#ye=Symbol();static#Se=Symbol();static DEFINITION={action:{attribute:'data-gs-action'},anchor:{attribute:'data-gs-anchor'},attribute:{attribute:'data-gs-attribute'},call:{attribute:'data-gs-call'},exec:{attribute:'data-gs-exec'},inject:{attribute:'data-gs-inject'},property:{attribute:'data-gs-property'},swap:{attribute:'data-gs-swap'},target:{attribute:'data-gs-target'},template:{attribute:'data-gs-template'},toggle:{attribute:'data-gs-toggle'},trigger:{attribute:'data-gs-trigger'},value:{attribute:'data-gs-value'},calls:{attribute:'data-gs-call',multi:!0},toggles:{attribute:'data-gs-toggle',multi:!0},timeout:{attribute:'data-gs-timeout',type:Number},triggers:{attribute:'data-gs-trigger',multi:!0}};#be;#G;#ve=!1;#wt;constructor(t){const e=this;e.#be=t,e.#wt=e.handle.bind(e),e.#G=GSAttributeHandler.proxify(e.#be)}handle(t){const e=this;e.targets.forEach((s=>e.#we(e.#be,s,t)))}#we(t,e,s){const r=this;r.#Ee(e,s),r.#Ge(e),r.#Ce(e),r.#xe(e),r.#$e(e),r.#Te(e,s),r.#ke(t,e,s),r.#De(t,e,s),r.#Ae(e),r.#Me(t,e),r.#Le(t,e)}#Ee(t,e){const s=e.target.field||e.target.form||e.target,r=(HTMLFormElement,i.isFormElement(s));r?t[s.name]=i.getValue(s):Object.assign(t,i.toObject(s))}#Ge(t){GSEvents.send(t,'action',this.action)}#Ce(t){const s=this;if(s.isAttributeJSON){const n=e.toJson(s.attribute);return r.jsonToAttr(t,n)}s.attributes.forEach((e=>s.#Oe(t,e[0],s.value||e[1])))}#xe(t){const s=this;if(s.isPropertyJSON){const r=e.toJson(s.property);return Object.assign(t,r)}s.properties.forEach((e=>s.#Ie(t,e[0],s.value||e[1])))}#Oe(t,s,n){if(e.isBool(t[s]))return r.toggle(t,s,!t[s]);e.isNumber(t[s])&&(n=e.asNum(n)),r.set(t,s,n)}#Ie(t,s,r){e.isBool(t[s])?e.isStringEmpty(r)?t[s]=!t[s]:t[s]=e.asBool(r):e.isNumber(t[s])?t[s]=e.asNum(r):t[s]=r}async#$e(t){const s=this,r=1e3*s.timeout;let n=s.toggles;if(0===r)n.forEach((e=>i.toggleClass(t,e)));else{t[s.#Ne]&&(n=n.reverse());for(const s of n)await e.timeout(r),i.toggleClass(t,s);t[s.#Ne]=!t[s.#Ne]}}#ke(t,r,n){const i=e.isJsonString(t.value)?e.toJson(t.value):t.value;this.calls.forEach((t=>s.callFunction(r[t],r,!0,i||n)))}#De(t,e,s){if(this.exec)try{new Function(this.exec).bind(e)()}catch(t){GSLog.error(e,t)}}#Te(t,e){this.triggers.forEach((s=>GSEvents.send(t,s,e)))}#Me(t,e){if(this.inject){const s=i.parse(this.inject,!0);this.#Re(t,e,s)}}#Ae(t){this.swap&&(t.innerHTML=this.swap)}async#Le(t,e){const s=await GSTemplateCache.loadTemplate(!0,this.template,this.template);this.#Ue(t,e,s)}#Ue(t,e,s){const r=GSTemplateCache.clone(s);this.#Re(t,e,r)}#Re(t,e,s){t.anchor?i.insertAdjacent(e,s,t.anchor):i.appendChild(e,s)}attach(t='click'){const e=this;e.#ve||(GSEvents.on(e.#be,null,t,e.#wt),e.#ve=!0)}deattach(t='click'){const e=this;GSEvents.off(e.#be,null,t,e.#wt),e.#ve=!1}get#Ne(){return GSAttributeHandler.#ye}get targets(){const t=this;switch(t.target){case'this':case'self':return[t.#be];case'owner':return[i.root(t.#be)];case'parent':return[t.#be.parentElement]}return i.queryAll(document.body,t.target,!1,!0)||[t.#be]}get host(){return this.#be}get action(){return this.#G.action}get anchor(){return this.#G.anchor}get attribute(){return this.#G.attribute}get exec(){return this.#G.exec}get call(){return this.#G.call}get inject(){return this.#G.inject}get property(){return this.#G.property}get swap(){return this.#G.swap}get target(){return this.#G.target}get toggle(){return this.#G.toggle}get trigger(){return this.#G.trigger}get timeout(){return this.#G.timeout}get template(){return this.#G.template}get value(){return this.#G.value}get calls(){return this.#G.calls}get toggles(){return this.#G.toggles}get triggers(){return this.#G.triggers}get attributes(){return(this.#G.attribute||'').split(/[,;]/g).map((t=>t.split('='))).filter((t=>e.isStringNonEmpty(t)))}get properties(){return(this.#G.property||'').split(/[,;]/g).map((t=>t.split('='))).filter((t=>e.isStringNonEmpty(t)))}get isPropertyJSON(){return e.isJson(this.property)}get isAttributeJSON(){return e.isJson(this.attribute)}static proxify(t){return r.proxify(t,GSAttributeHandler.DEFINITION)}static process(t,e){if(!t?.hasAttribute('gs-target'))return;let s=t[GSAttributeHandler.#Se];s instanceof GSAttributeHandler||(s=new GSAttributeHandler(t),t[GSAttributeHandler.#Se]=s),s.handle(e)}static create(t){const e=new GSAttributeHandler(t);return e.attach(),e}static clone(t,e){const s=GSAttributeHandler.DEFINITION;Object.values(s).filter((e=>t.hasAttribute(e.attribute))).forEach((s=>e.setAttribute(s.attribute,t.getAttribute(s.attribute))))}static{const t=GSAttributeHandler.DEFINITION;Object.values(t).forEach((t=>Object.freeze(t))),Object.freeze(t)}}class Stack extends Array{push(t){this.unshift(t)}pop(){return this.shift()}peek(){return this[0]}isEmpty(){return 0===this.length}}class Queue extends Array{enqueue(t){this.push(t)}dequeue(){return this.shift()}peek(){return this[0]}isEmpty(){return 0===this.length}}class BinaryTreeNode{constructor(t,e=t,s=null){this.key=t,this.value=e,this.parent=s,this.left=null,this.right=null}get isLeaf(){return null===this.left&&null===this.right}get hasChildren(){return!this.isLeaf}get isRoot(){return!this.parent}get root(){return this.parent?.root||this}}class BinaryTree extends BinaryTreeNode{constructor(t,e=t){super(t,e)}*inOrderTraversal(t=this){t.left&&(yield*this.inOrderTraversal(t.left)),yield t,t.right&&(yield*this.inOrderTraversal(t.right))}*postOrderTraversal(t=this){t.left&&(yield*this.postOrderTraversal(t.left)),t.right&&(yield*this.postOrderTraversal(t.right)),yield t}*preOrderTraversal(t=this){yield t,t.left&&(yield*this.preOrderTraversal(t.left)),t.right&&(yield*this.preOrderTraversal(t.right))}insert(t,e,s=e,{left:r,right:n}={left:!0,right:!0}){for(let i of this.preOrderTraversal())if(i.key===t){const t=r&&null===i.left,a=n&&null===i.right;if(!t&&!a)return!1;if(t)return i.left=new BinaryTreeNode(e,s,i),!0;if(a)return i.right=new BinaryTreeNode(e,s,i),!0}return!1}remove(t){for(let e of this.preOrderTraversal()){if(e.left.key===t)return e.left=null,!0;if(e.right.key===t)return e.right=null,!0}return!1}find(t){for(let e of this.preOrderTraversal())if(e.key===t)return e}}class Node{value=null;next=null;previous=null;constructor(t,e=null,s=null){this.value=t,this.next=e,this.previous=s}release(){this.value=void 0,this.next=void 0,this.previous=void 0}toJSON(){return this.value}}class DoublyLinkedList{#Fe=[];get size(){return this.#Fe.length}get head(){return this.size?this.#Fe[0]:null}get tail(){return this.size?this.#Fe[this.size-1]:null}create(t,e,s){return new Node(t,e,s)}insertAt(t,e,s){if(!this.#Pe(t,s))return!1;const r=this.#Fe[t-1]||null,n=this.#Fe[t]||null,i=create(e,n,r);r&&(r.next=i),n&&(n.previous=i),this.#Fe.splice(t,0,i)}insertFirst(t){this.insertAt(0,t)}insertLast(t){this.insertAt(this.size,t)}getAt(t){return this.#Fe[t]}indexOf(t){return this.#Fe.indexOf(t)}removeAt(t,e){if(!this.#Pe(t,e))return!1;const s=this.#Fe[t-1]||null,r=this.#Fe[t+1]||null;return s&&(s.next=r),r&&(r.previous=s),this.#Fe.splice(t,1)}clear(t=!0){t&&this.#Fe.forEach((t=>t.release())),this.#Fe=[]}reverse(){this.#Fe=this.#Fe.reduce(((t,{value:e})=>{const s=t[0]||null,r=new Node(e,s,null);return s&&(s.previous=r),[r,...t]}),[])}toArray(){return this.#Fe.map((t=>t.value))}toJSON(){return this.#Fe}*[Symbol.iterator](){yield*this.#Fe}#Pe(t,e=!1){const s=this.#Be(t);if(s&&!e)throw new Error(this.#He());return!s}#Be(t){return!Number.isInteger(t)||t<0||t>this.size}#He(){return`Invalid index. Current length is ${this.size}.`}static from(t){const e=new DoublyLinkedList;return Array.isArray(t)&&t.forEach((t=>e.insertLast(t))),e}}class Tree{value;#ze=null;#je=null;#qe;#_e=!1;#Ve=0;constructor(t,e=t,s=null,r=0){this.#ze=t,this.#je=s,this.#_e=!1===e?.leaf,this.#Ve=s?s.level+1:r,this.#qe=this.#_e?[]:void 0,this.value=e}get subtree(){return Array.from(this.up(void 0,!1,!0,!0))}get levelID(){return this.subtree.map((t=>t.level)).join('.')}get nodeID(){return this.subtree.map((t=>t.index)).join('.')}get path(){return this.subtree.map((t=>t.key)).join('/')}get index(){return this.parent?.nodes.indexOf(this)||0}get size(){return this.#qe?.length||-1}get level(){return this.#Ve}get isRoot(){return!this.parent}get isLeaf(){return!this.#_e}get isFolder(){return this.#_e}get hasChildren(){return this.#_e&&this.size>0}get key(){return this.#ze??=this.nodeID,this.#ze}get nodes(){return this.#qe}get parent(){return this.#je}get root(){return this.parent?.root||this}get hasMore(){return this.#je?.size>this.index+1}get firstChild(){return this.hasMore?this.#qe[0]:void 0}get lastChild(){return this.hasMore?this.#qe[this.#qe.length-1]:void 0}get next(){return this.down(this,!1,!1).next().value||this.nextSibling||this.parent?.nextSibling}get previous(){const t=this.previousSibling;return t?.hasChildren?t.lastChild:t||this.up(this,!1,!1).next().value}get nextSibling(){return this.hasMore?this.#je.#qe[this.index+1]:void 0}get previousSibling(){return this.index>0?this.#je.#qe[this.index-1]:void 0}clear(){this.#qe&&(this.#qe.forEach((t=>t.release?.())),this.#qe=[])}release(){this.clear(),this.#ze=null,this.value=null,this.#je=null}*down(t=this,e=!1,s=!0,r=!1,n=!1){const i=e?t.value:t;if(s&&!r&&t.level>-1&&(yield i),t.#qe?.length)for(let s of t.#qe)yield*this.down(s,e,!0,r,n);if(n){const s=t.nextSibling||t.parent.nextSibling;s&&(yield*this.down(s,e,!0,r,n))}s&&r&&t.level>-1&&(yield i)}*up(t=this,e=!1,s=!0,r=!1,n=!1){const i=e?t.value:t;if(s&&!r&&t.level>-1&&(yield i),n){let s=t.previousSibling;s=s?.isFolder?s.lastChild:s,s&&(yield*this.up(s,e,!0,r,n))}t.parent&&(yield*this.up(t.parent,e,!0,r,n)),s&&r&&t.level>-1&&(yield i)}walk=this.down;forEach(t,e=!1,s=!1){this.every(((e,s)=>(t(e,s),!0)),e,s)}every(t,e=!1,s=!1){const r=this.iterate(e,s);let n=!0,i=0;for(let e of r)if(n=t(e,i++),!n)break;return n}find(t,e=!1,s=!1){const r=this.iterate(e,s);let n=0;for(let e of r)if(t(e,n++))return e}filter(t,e,s){return[...this.#We(t,e,s)]}*#We(t,e,s){const r=this.iterate(e,s);for(let e of r){t(e)&&(yield e)}}*iterate(t,e){e?yield*this.up(this,!1,!1,!1,t):yield*this.down(this,!1,!1,!1,t)}append(t,e=t){let s;return t instanceof Tree?(t.#je=this,t.#Ve=this.#Ve+1,s=t):s=new Tree(t,e,this),this.#_e=!0,this.#qe??=[],this.#qe.push(s),s}insert(t,e,s=e){for(let r of this.walk())if(r.key===t){const t=new Tree(e,s,r);return this.#_e=!0,this.#qe??=[],r.#qe.push(t),t}return!1}remove(t){const e=this;if(t){const s=e.findByKey(t);return s?.remove(),s}if(e.isRoot)throw new Error('Root node can\'t be removed!');const s=e.parent,r=s.#qe.filter((t=>t!==e));return r.length!==s.#qe.length&&(s.#qe=r,e)}findByKey(t){for(let e of this.walk())if(e.key===t)return e}flatten(t,e,s){return[...this.down(this,t,e,s)]}fromJSON(t){return t&&Tree.from(this,t),this}toJSON(){return this.level<0?this.#qe?.map((t=>t.toJSON()))||{}:this.isLeaf?{key:this.key,value:this.value}:{key:this.key,value:this.value,items:this.#qe.map((t=>t.toJSON()))}}*[Symbol.iterator](){yield*this.down()}static from(t,e){const s=e||t,r=t instanceof Tree;if(Array.isArray(s)){if(!r)throw new Error('Parent required when data is array');return s.forEach((e=>Tree.from(t,e))),t}const{items:n,...i}=s,a=new Tree(i.key,i,e?t:void 0);return r&&t.append(a),n&&Tree.from(a,n),a}}class GSReadWriteRegistryImpl extends GSEvent{static#Ye=null;static#Je=Symbol();#Ke=new Map;#i=new Map;constructor(t){if(t!=GSReadWriteRegistryImpl.#Je)throw new Error('Creating new instance not allowed.');super()}addHandler(t,e){this.#Ke.set(t,e)}removeHandler(t){this.#Ke.delete(t)}getHandler(t){return this.#Ke.get(t)}newHandler(t,e,s){const r=this.getHandler(t);return r?new r(e,s):void 0}register(t){const e=this;e.#Xe(t);const s=e.find(t.id);if(s!=t){if(s)throw new Error(`Key (${t.id}) already exist in read/write registry!`);e.#i.set(t.id,t),e.emit(`register-${t.id}`,t),e.emit('register',t)}}unregister(t){const s=this;e.isString(t)&&(t=s.find(t)),s.#Xe(t);const r=s.#i.delete(t.id);return r&&(s.emit(`unregister-${t.id}`,t),s.emit('unregister',t)),r}find(t){return this.#i.get(t)}async wait(t='',e,s=!0){if(!t)throw new Error('GSReadWrite ID not valid.');const r=this;if(s){const e=r.find(t);if(e)return e}const n=s?'register':'unregister';return await super.wait(`${n}-${t}`,e),r.find(t)}#Xe(t){}static get#Qe(){return GSReadWriteRegistryImpl.#Ye||(GSReadWriteRegistryImpl.#Ye=new GSReadWriteRegistryImpl(GSReadWriteRegistryImpl.#Je)),GSReadWriteRegistryImpl.#Ye}static{Object.seal(GSReadWriteRegistryImpl),globalThis.GSReadWriteRegistry=GSReadWriteRegistryImpl.#Qe}}const h=globalThis.GSReadWriteRegistry;class GSAbstractReadWrite extends GSEvent{#r=null;#Ze=null;constructor(t,e=!0){super();this.#r=t||GSID.next(),e&&this.enable()}addProcessor(t){t&&(this.#Ze??=new Set,this.#Ze.add(t))}removeProcessor(t){t&&this.#Ze?.delete(t)}get id(){return this.#r}enable(){h.register(this),this.emit('enabled')}disable(){h.unregister(this),this.emit('disabled')}get isRegistered(){return!!h.find(this.id)}notify(t,e,s,r){this.emit(r?'error':e,{type:e,error:r,owner:t,data:s},!0)}async read(t){const e=this;let s=null;try{s=await e.onRead(t),e.#Ze?.forEach((t=>t.postRead?.(s))),s&&e.notify(t,'read',s)}catch(r){throw e.notify(t,'read',s,r),r}return s}async write(t,e){const s=this;let r=null;try{r=await s.onWrite(t,e),s.#Ze?.forEach((t=>t.postWrite?.(e))),r&&s.notify(t,'write',e)}catch(r){throw s.notify(t,'write',e,r),r}return r}async onRead(t){throw new Error('Extend base GSAbstractReadWrite to implement read operation')}async onWrite(t,e){throw new Error('Extend base GSAbstractReadWrite to implement write operation')}}class GSReadWrite extends GSAbstractReadWrite{static#ts=['','rest','query','quark'];static#es=['GET','PUT','POST','DELETE'];#ss='';#rs={};#ns='GET';#is='POST';#as='';#os='';#ls=0;#cs=0;#ds=[];#us=[];constructor(t,e){super(t,e)}get mode(){return e.normalize(this.#os)}set mode(t){const s=this;t=e.normalize(t);if(!GSReadWrite.#ts.includes(t))throw new Error(null,`Invalid mode, allowed: ${GSReadWrite.#ts}`);return'quark'===s.#os&&s.#os!=t&&(s.#ns='GET',s.#is='POST'),this.#os=t}get reader(){return this.#ns}set reader(t){if(!(!!this.isQuark||GSReadWrite.#es.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#es}`);return this.#ns=t}get writer(){return this.#is}set writer(t){if(!(!!this.isQuark||GSReadWrite.#es.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#es}`);return this.#is=t}get headers(){return{...this.#rs}}set headers(t={}){t=e.toJson(t);this.#rs={...t}}get src(){return this.#ss}set src(t=''){this.#ss=t}get limit(){return this.#cs}set limit(t=10){this.#cs=e.asNum(t,10)}get skip(){return this.#ls}set skip(t=0){this.#ls=e.asNum(t,0)}get filter(){return this.#us}set filter(t){t=t||[],t=e.isJson(t)?e.toJson(t):t,this.#us=Array.isArray(t)?t:[t]}get sort(){return this.#ds}set sort(t){t=t||[],t=e.isJson(t)?e.toJson(t):t,this.#ds=Array.isArray(t)?t:[t]}get action(){let t='';switch(this.mode){case'query':t='?limit=${limit}&skip=${skip}&sort=${sort}&filter=${filter}';break;case'rest':t='/${limit}/${skip}?sort=${sort}&filter=${filter}'}return this.#as||t}set action(t=''){this.#as=t}get url(){const t=this;return t.#hs(t.#ss,t.#ls,t.#cs,t.#us,t.#ds)}#hs(t,s,r,n,i){if(e.isStringEmpty(t))throw new Error('Attribute "src" not set!');i=i?JSON.stringify(i):'',n=n?JSON.stringify(n):'';const a={limit:r,skip:s,sort:encodeURIComponent(i),filter:encodeURIComponent(n)};return t+e.fromLiteral(this.action,a)}get isOffline(){return''===this.mode}get isQuark(){return'quark'===this.mode}get isRemote(){return['rest','query'].includes(this.mode)}async onRead(t){const e=this;if(e.isOffline)return;if(!e.#ns)return super.onRead(t);if(e.isRemote)return await GSLoader.load(e.url,e.#ns,e.#rs,!0);if(!e.isQuark)return;const r=s.parseFunction(e.#ns);if(!r)throw new Error('Reader quark function not found!');return r(e.skip,e.limit,e.filter,e.sort)}async onWrite(t,e){const r=this;if(r.isOffline)return;if(!r.#is)return super.onWrite(t);if(!r.isRemote)return await GSLoader.load(r.url,r.#is,r.#rs,!0,e);if(!r.isQuark)return;const n=s.parseFunction(r.#is);if(!n)throw new Error('Writer quark function not found!');return n(e)}static register(t){return new GSReadWrite(t,!0)}static{h.addHandler('remote',GSReadWrite)}}const p=globalThis.GS_LIT_URL||'/bootstrap-lit/assets/lib/lit-all.min.js',m=await import(p);m.ReactiveController,m.ReactiveElement,m.AsyncDirective,m.AsyncReplaceDirective,m.CSSResult;const g=m.Directive,f=m.LitElement,y=m.PartType;m.TemplateResultType,m.UnsafeHTMLDirective,m.UntilDirective,m._$LE,m._$LH,m.adoptStyles,m.asyncAppend,m.asyncReplace,m.cache,m.choose;const S=m.classMap;m.clearPart;const b=m.createRef,v=m.css,w=m.defaultConverter,E=m.directive;m.getCommittedValue,m.getCompatibleStyle,m.getDirectiveClass,m.guard;const G=m.html,C=m.ifDefined;m.insertPart,m.isCompiledTemplateResult,m.isDirectiveResult,m.isPrimitive,m.isServer,m.isSingleExpression,m.isTemplateResult,m.join,m.keyed,m.literal,m.live;const x=m.map,$=m.noChange,T=m.notEqual,k=m.nothing,D=m.range,A=m.ref;m.removePart,m.render;const M=m.repeat;m.setChildPartValue,m.setCommittedValue,m.staticHtml,m.staticSvg;const L=m.styleMap;m.supportsAdoptingStyleSheets;const O=m.svg,I=m.templateContent;m.unsafeCSS;const N=m.unsafeHTML;m.unsafeSVG,m.unsafeStatic,m.until,m.when,m.withStatic;const R={action:'gsAction',anchor:'gsAnchor',attribute:'gsAttribute',call:'gsCall',exec:'gsExec',inject:'gsInject',property:'gsProperty',swap:'gsSwap',target:'gsTarget',template:'gsTemplate',toggle:'gsToggle',trigger:'gsTrigger',value:'gsValue'},U={gsAction:void 0,gsAnchor:void 0,gsAttribute:void 0,gsCall:void 0,gsExec:void 0,gsInject:void 0,gsProperty:void 0,gsSwap:void 0,gsTarget:void 0,gsTemplate:void 0,gsToggle:void 0,gsTrigger:void 0,gsValue:void 0};const F=E(class DatasetDirective extends g{render(t){return k}update(t,[e,s=!0]){if(!e)return k;const r=t.element.dataset,n=e.dataset||e;return n instanceof DOMStringMap&&Object.assign(r,n),s&&this.#ps(r,e),k}#ps(t,e){const s=Object.assign({},U),r=Object.entries(e).filter((t=>Object.hasOwn(R,t[0])));r.length>0&&(r.forEach((t=>s[R[t[0]]]=t[1])),Object.assign(t,s))}});function descriptors(t){return Object.entries(Object.getOwnPropertyDescriptors(t))}function listProperties(t){return descriptors(t).filter((t=>'function'!=typeof t[1].value)).map((t=>t[0]))}function listGetters(t){return descriptors(Reflect.getPrototypeOf(t)).filter((t=>'function'==typeof t[1].get&&'__proto__'!==t[0])).map((t=>t[0]))}function literalTemplate(t,e){const s=Array.from(function listGettable(t){return new Set([...listGetters(t),...listProperties(t)])}(e)),r=s.map((t=>e[t]));return s.push('html'),r.push(G),new Function(...s,`return html\`${t}\`;`)(...r)}const P=E(class CssMapDirective extends g{constructor(t){if(super(t),t.type!==y.ATTRIBUTE||'css'!==t.name||t.strings?.length>2)throw new Error('`classMap()` can only be used in the `css` attribute and must be the only part in the attribute.')}render(t){return' '+Object.keys(t).filter((e=>t[e])).join(' ')+' '}update(t,[e]){if(void 0===this._previousClasses){this._previousClasses=new Set,void 0!==t.strings&&(this._staticClasses=new Set(t.strings.join(' ').split(/\s/).filter((t=>''!==t))));for(const t in e)e[t]&&!this._staticClasses?.has(t)&&this._previousClasses.add(t);return this.render(e)}const s=t.element.classList;for(const t of this._previousClasses)t in e||(s.remove(t),this._previousClasses.delete(t));for(const t in e){const r=!!e[t];r===this._previousClasses.has(t)||this._staticClasses?.has(t)||(r?(s.add(t),this._previousClasses.add(t)):(s.remove(t),this._previousClasses.delete(t)))}return $}}),notEmpty=(t,e)=>t!==e&&t,numGT0=(t,e)=>t!==e&&Number(t)>0,numGE0=(t,e)=>t!==e&&Number(t)>=0,numLT0=(t,e)=>t!==e&&Number(t)<0,numLE0=(t,e)=>t!==e&&Number(t)<=0;class ButtonTypes{static values=['button','reset','submit'];static is(t){return ButtonTypes.values.includes(t)}static isReest(t){return 1===ButtonTypes.values.indexOf(t)}static isSubmit(t){return 2===ButtonTypes.values.indexOf(t)}}const B={hasChanged:(t,e)=>t!==e&&ButtonTypes.is(t)},H=['','primary','secondary','dark','light','info','warning','danger','alert','link','success'],z={hasChanged:(t,e)=>t!==e&&H.includes(t)},j=['','dektop','mobile','tablet','android','linux','windows','macos','ios'],q={hasChanged:(t,e)=>t!==e&&j.includes(t)},_=['checkbox','radio','switch','number','range','text','passsword','email','url','file'],V={hasChanged:(t,e)=>t!==e&&_.includes(t)},W=['','pills','tabs','underline'],Y={hasChanged:(t,e)=>t!==e&&W.includes(t)};class OrientationTypes{static values=['','horizontal','vertical','portrait','landscape'];static includes(t){return OrientationTypes.values.includes(t)}static isVertical(t){const e=OrientationTypes.values.indexOf(t);return 2===e||3===e}static isHorizontal(t){const e=OrientationTypes.values.indexOf(t);return 1===e||4===e}}const J={hasChanged:(t,e)=>t!==e&&OrientationTypes.includes(t)};class PlacementTypes{static values=['center','left','right','start','end','top','bottom'];static includes(t){return PlacementTypes.values.includes(t)}static isVertical(t){return PlacementTypes.values.indexOf(t)>4}static isHorizontal(t){const e=PlacementTypes.values.indexOf(t);return e>0&&e<5}static isCenter(t){return 0===PlacementTypes.values.indexOf(t)}static isBefore(t){return['left','start','top'].includes(t)}static isAfter(t){return['right','end','bottom'].includes(t)}}const K={hasChanged:(t,e)=>t!==e&&PlacementTypes.includes(t)};class PositionTypes{static values=['absolute','fixed','relative','sticky','static'];static includes(t){return PositionTypes.values.includes(t)}}const X={hasChanged:(t,e)=>t!==e&&PositionTypes.includes(t)},Q=['','http','https'],Z={hasChanged:(t,e)=>t!==e&&Q.includes(t)},tt={default:'',normal:'',medium:'',small:'sm',large:'lg',big:'lg'},et={hasChanged:(t,e)=>t!==e&&Object.hasOwn(tt,t)},st={fromAttribute:(t,e)=>(t||'').split(','),toAttribute:(t,e)=>(t||[]).join(',')};class AdoptedController{#be;#ms;constructor(t){this.#be=t,t.addController(this)}hostConnected(){AdoptedController.#gs.add(this),this.#at()}hostDisconnected(){const t=this;AdoptedController.#gs.delete(t.#be),t.#be.removeController(t)}style(t,e){const s=this;return s.#ms=s.#ms??new GSDynamicStyle('dynamic'),s.#ms.setRule(t,e,!0)}#at(t=!1){const e=this;if(e.#fs&&(t||e.#ys)){const t=[...document.adoptedStyleSheets],s=Array.from(e.#fs);e.#ms&&s.push(e.#ms),e.#Ss.adoptedStyleSheets=[...t,...s]}}get#ys(){return document.adoptedStyleSheets.id!==this.#fs?.id}get#Ss(){return this.#be.renderRoot}get#fs(){return this.#Ss?.adoptedStyleSheets}static#gs=new Set;static#bs(t){requestAnimationFrame((()=>{AdoptedController.#gs.forEach((t=>t.#at()))}))}static#nt(){const t=AdoptedController;GSEvents.on(window,null,'gs-adopted',t.#bs)}static{this.#nt()}}class AttributeController extends GSAttributeHandler{constructor(t){super(t);t.addController(this)}hostConnected(){this.attach(this.#vs)}hostDisconnected(){const t=this;t.host.removeController(t),t.deattach(t.#vs)}onNotify(t){this.handle(t)}get#vs(){const t=this.host?.tagName.toLowerCase(),e=this.host?.clazzName,s=i.isFormElement(this.host),r=['gs-form','gs form-group'].includes(t),n=['GSFormGroupElement'].includes(e);return r||n||s?'change':'click'}}class ContentController{#be;#ws;#Es=new Set;constructor(t){this.#be=t,t.addController(this)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#Gs(),t.#be=null,t.#Es=null,t.#ws=null}hostUpdated(){const t=this;t.#Cs()||t.#Es.add(t.#xs)}get contentRef(){return this.#ws}get#$s(){return this.#be?.renderOptions}get#xs(){return this.#$s?.renderBefore?.previousElementSibling}#Cs(){const t=this,e=t.#xs,s=t.#be?.renderRoot,r=t.#be?.shadowRoot;return e===r||e==s}#Gs(){const t=this;t.#be?.keep||(Array.from(t.#Es).forEach((t=>t?.remove())),t.#Es.clear())}}class DataController{#be;#Ts;#ks;#Ds;constructor(t){const e=this;e.#be=t,e.#Ts=e.#As.bind(e),e.#ks=e.#Ms.bind(e),e.#Ds=e.#Ls.bind(e),e.#be.addController(e)}hostConnected(){this.#Os(!1)}hostDisconnected(){const t=this;t.#Is(),t.#be.removeController(t)}async relink(t=!0){this.#Is(),this.#Os(t)}async read(t){return this.store?.read(this.#be)}async write(t){return this.store?.write(this.#be,t)}async storage(){return h.wait(this.storeID)}sort(t){if(this.store)return this.store.sort=t,this.store.read()}filter(t){if(this.store)return this.store.filter=t,this.store.read()}search(t){this.store&&(this.store.search=t)}get store(){return h.find(this.storeID)}get storeID(){return this.#be?.storage}firstPage(){this.page=1}lastPage(){this.nextPage()}nextPage(){this.page=this.page+1}prevPage(){this.page=this.page-1}get page(){const t=this.store;return t?Math.floor(t.skip/Math.max(t.limit,1))+1:1}set page(t){t=Math.max(1,e.asNum(t,1));const s=this.store;s&&(s.skip=t>0?s.limit*t-s.limit:0,s.read(this.#be))}async#Os(t=!0){const e=this,s=await e.storage();s?.on('read',e.#Ts),s?.on('write',e.#ks),s?.on('error',e.#Ds),t&&s.read(e.#be)}#Is(){const t=this,e=t.store;e?.off('read',t.#Ts),e?.off('write',t.#ks),e?.off('error',t.#Ds)}#As(t){this.#be.onDataRead?.(t.detail.data),this.#Ns('data-read',t.detail.data)}#Ms(t){this.#be.onDataWrite?.(t.detail.data),this.#Ns('data-write',t.detail.data)}#Ls(t){const e=this;GSLog.error(e.#be,t),e.#be.onDataError?.(t),e.#Ns('data-error',t.detail.data)}#Ns(t,e){this.#be.emit(t,e,!0,!1,!0)}}class ElementMoveController{#be;#Ft;#Rs=!1;#Us=0;#Fs=0;#Ps;#Bs;#Hs;constructor(t){const e=this;e.#be=t,t.addController(e),e.#Ps=e.#zs.bind(e),e.#Bs=e.#js.bind(e),e.#Hs=e.#qs.bind(e)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be=null}attach(t){const e=this;e.#Rs||(e.#Ft=t,e.#Rs=!0,e.#be.attachEvent(e.#Ft,'mousedown',e.#Bs))}reset(){const t=this;t.#Us=0,t.#Fs=0,t.#be.removeEvent(document,'mouseup',t.#Ps),t.#be.removeEvent(document,'mousemove',t.#Hs)}#js(t){const e=this;e.#be.prevent(t),e.#Us=t.clientX,e.#Fs=t.clientY,e.#be.onStartMove?.(t,e.#Us,e.#Fs),e.#be.attachEvent(document,'mouseup',e.#Ps,!0),e.#be.attachEvent(document,'mousemove',e.#Hs)}#zs(t){const e=this;return e.#be.prevent(t),e.#be.removeEvent(document,'mousemove',e.#Hs),e.#be.onEndMove?.(t,e.#Us,e.#Fs)}#qs(t){const e=this;e.#be.prevent(t),e.#be.onMouseMove?.(t,e.#Us,e.#Fs),e.#Us<t.clientX?e.#be.onCursorRight?.(t,e.#Us,e.#Fs):e.#Us>t.clientX&&e.#be.onCursorLeft?.(t,e.#Us,e.#Fs),e.#Fs<t.clientY?e.#be.onCursorUp?.(t,e.#Us,e.#Fs):e.#Fs>t.clientY&&e.#be.onCursorDown?.(t,e.#Us,e.#Fs),e.#Us=t.clientX,e.#Fs=t.clientY}}class ElementNavigationController{#be;#Rs;#_s;#Vs;#Ws=new Set;constructor(t){this.#be=t,t.addController(this)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be=null,t.#Rs=!1}get circular(){return!0===this.#be?.circular}get multiple(){return!0===this.#be?.multiple}get focused(){return this.#Vs}get selected(){return this.multiple?[...this.#Ws.values()]:this.#_s}attach(t){const e=this;e.#Rs||(e.#Rs=!0,e.#be.attachEvent(t,'keydown',(t=>e.onKeyDown(t))),e.#be.attachEvent(t,'keyup',(t=>e.onKeyUp(t))),e.#be.attachEvent(t,'click',(t=>e.onClick(t))),e.#be.attachEvent(t,'focusin',(t=>e.onFocusIn(t))),e.#be.attachEvent(t,'focusout',(t=>e.onFocusOut(t))))}previous(){const t=this;let e=t.#Vs?.previousElementSibling;for(;e&&e.disabled;)e=e.previousElementSibling;t.circular&&!e&&(e=t.lastElementChild),e?.focus()}next(){const t=this;let e=t.#Vs?.nextElementSibling;for(;e&&e.disabled;)e=e.nextElementSibling;t.circular&&!e&&(e=t.firstElementChild),e?.focus()}reset(){const t=this;t.multiple?t.#Ws.forEach((t=>{t.active=!1,t.blur()})):t.#_s&&(t.#_s.active=!1,t.#_s.blur()),t.#Ws.clear(),t.#Vs=void 0,t.#_s=void 0,this.#be?.emit('group-reset',void 0,!0)}#Ys(t){this.#be?.onSelected?.(t),this.#be?.emit('group-selected',t,!0)}#Js(t){this.#be?.onDeselected?.(t),this.#be?.emit('group-deselected',t,!0)}#Ks(t){this.#be?.onFocused?.(t),this.#be?.emit('group-focused',t,!0)}#Xs(t){return!this.#be?.isNavigable||this.#be?.isNavigable(t)}#Qs(t){const e=this;e.#Xs(t)&&(e.#Vs=t,t&&e.#Ks(e.#Vs))}#Zs(t){if(!t)return;const e=this;e.#Xs(t)&&(t.active?(e.#Ws.add(t),e.#Ys(t)):(e.#Ws.delete(t),e.#Js(t)))}#tr(t){const e=this;e.#Xs(t)&&(e.#_s&&!e.multiple&&(e.#_s.active=!1,e.#Zs(e.#_s)),e.#_s=t,t&&(e.multiple?t.active=!t.active:t.active=!0,e.#Zs(t)))}onFocusOut(t){}onFocusIn(t){this.#Qs(t.target)}onClick(t){t.ctrlKey&&this.reset(),this.#tr(t.target)}onKeyDown(t){const e=this;switch(t.code){case'ArrowUp':case'ArrowLeft':e.previous();break;case'ArrowDown':case'ArrowRight':e.next()}}onKeyUp(t){const e=this;if('Enter'===t.code)e.#Vs?.click()}}class OrientationController{static#er=new Set;#be;constructor(t){this.#be=t,t.addController(this)}hostConnected(){OrientationController.#er.add(this),this.update()}hostDisconnected(){const t=this;OrientationController.#er.delete(t.#be),t.#be.removeController(t),t.#be=null}update(){this.#be.requestUpdate()}static#sr(t){Array.from(OrientationController.#er).forEach((t=>t.update()))}static{screen.orientation.addEventListener('change',OrientationController.#sr)}}class ThemeController{#be;#rr;constructor(t){const e=this;e.#be=t,e.#rr=t.theme,t.addController(e)}hostConnected(){ThemeController.#gs.add(this)}hostDisconnected(){const t=this;ThemeController.#gs.delete(t),t.#be.removeController(t)}hostUpdate(){const t=this;t.#rr!==t.#be?.theme&&(t.#rr,t.#be?.theme,t.updateTheme(t.#rr))}updateThemeExt(t){this.#rr||this.updateTheme(t)}updateTheme(t){if(!t)return;r.set(this.#be,'data-bs-theme',t);const e=this.#be?.renderRoot?.children||[];Array.from(e).forEach((e=>r.set(e,'data-bs-theme',t)))}static#gs=new Set;static#ge(t){ThemeController.#gs.forEach((e=>e.updateThemeExt(t.detail)))}static#nt(){GSEvents.on(window,null,'gs-theme',ThemeController.#ge)}static{ThemeController.#nt()}}class TemplateController{#be;#nr;#ir;static#rt=!1;static#ar=new Set;constructor(t){this.#be=t,t.addController(this)}hostConnected(){this.#or()}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be=null,t.#ir=null,t.#nr=null}hostUpdate(){this.#or()}requestUpdate(){this.#be.requestUpdate()}#or(){const t=this,e=t.templateRef;t.#ir!==e&&(t.#ir=e,TemplateController.#lr(this))}async#cr(){const t=this,e=t.templateRef,s=e instanceof HTMLTemplateElement?e:await GSTemplateCache.loadTemplate(!0,e,e);s&&(t.#nr=s,t.#be.requestUpdate())}get isTemplateElement(){return'GS-TEMPLATE'===this.#be?.tagName}get template(){return this.#nr}get templateRef(){const t=this.#be;return this.isTemplateElement?t.url:t.template||t.query('template',!1)}static async#dr(t){await e.timeout(100);const s=Array.from(t);for(let e of s)await e.#cr(),t.delete(e)}static#lr(t){const e=TemplateController;e.#ar.add(t),e.#rt||(e.#rt=!0,queueMicrotask((()=>e.#dr(e.#ar).finally(e.#rt=!0))))}}class LocalizationController{#be;#d;constructor(t){const e=this;e.#be=t,e.#d=t.locale,t.addController(e)}hostConnected(){LocalizationController.#gs.add(this)}hostDisconnected(){const t=this;LocalizationController.#gs.delete(t),t.#be.removeController(t)}hostUpdate(){const t=this;t.#d!==t.#be?.locale&&(t.#d,t.#be?.locale,t.updateLanguage(t.#d))}updateLanguageExt(t){this.#d||this.updateLanguage(t)}updateLanguage(t){t&&this.#be.requestUpdate()}static#gs=new Set;static#ur(t){LocalizationController.#gs.forEach((e=>e.updateLanguageExt(t.detail)))}static#nt(){GSEvents.on(window,null,'gs-language',LocalizationController.#ur)}static{LocalizationController.#nt()}}class GSElement extends f{static properties={flat:{type:Boolean},rtl:{type:Boolean,reflect:!0},hide:{type:Boolean,reflect:!0},padding:{type:Number},margin:{type:Number},rounded:{type:Boolean},bordered:{type:Boolean},shadow:{type:Boolean},keep:{type:Boolean},onready:{},css:{},theme:{},os:{},browser:{},locale:{reflect:!0,hasChanged:notEmpty},environment:q,orientation:J,protocol:Z,template:{}};#hr;#pr;#mr;#gr;#fr;#yr;#nr;#Sr;constructor(){super();const t=this;t.css='',t.locale='',t.#hr=new AdoptedController(t),t.#Sr=new ContentController(t),t.#gr=new LocalizationController(t),t.#mr=new OrientationController(t),t.#nr=new TemplateController(t),t.#yr=new ThemeController(t)}attributeChangedCallback(t,e,s){super.attributeChangedCallback(t,e,s)}connectedCallback(){super.connectedCallback(),this.isBindable&&this.binded()}disconnectedCallback(){GSEvents.deattachListeners(this),super.disconnectedCallback()}createRenderRoot(){return this.flat?this:super.createRenderRoot()}firstUpdated(){super.firstUpdated();const t=this;if(t.onready){const e=t.onready.startsWith('this')?this:window;s.callFunction(t.onready,e)}}willUpdate(t){const e=this;t.has('storage')&&(e.storage?e.#fr?e.#fr.relink():e.#fr=new DataController(e):(e.#fr?.hostDisconnected(),e.#fr=void 0))}render(){return this.isAllowRender&&!this.hide?this.renderUI():''}renderUI(){return $}renderTemplate(){return this.templateRef?I(this.templateRef):''}renderClass(){const t=this,e={border:t.bordered,'shadow-sm':t.shadow,rounded:t.rounded,[`p-${t.padding}`]:t.padding>=0,[`m-${t.margin}`]:t.margin>=0};return t.mapCSS(t.css,e)}binded(){this.#pr??=new AttributeController(this)}handle(t){this.#pr?.handle(t)}mapCSS(t,e,s=!0){return e=e||{},(t||'').split(' ').map((t=>t.trim())).filter((t=>t.length>0)).map((t=>e[t.trim()]=s)),e}dynamicStyle(t,e){return this.#hr.style(t,e)}getByID(t=''){return i.getByID(this,t)}closest(t=''){return i.closest(this,t)}query(t='',e=!1){return i.query(this,t,!1,e)}queryAll(t='',e=!1){return i.queryAll(this,t,!1,e)}notify(t=!0,e=!1,s){this.emit('notify',s,t,e,!0)}emit(t,e='',s=!1,r=!1,n=!1){return GSEvents.send(this,t,e,s,r,n)}waitEvent(t='',e=0){return GSEvents.wait(this,t,e)}once(t,e){return this.listen(t,e,!0)}on(t,e,s=!1){return this.listen(t,e,s)}off(t,e){return this.unlisten(t,e)}prevent(t){GSEvents.prevent(t)}listen(t,e,s=!1){return this.attachEvent(this,t,e,s)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',s,r=!1){return GSEvents.attach(this,t,e,s,r)}removeEvent(t,e='',s){return GSEvents.remove(this,t,e,s)}toggle(){this.hide=!this.hide}translate(t){return u.translate(this.locale,t)}get direction(){if(!e.isNull(this.rtl))return this.rtl?'rtl':'ltr'}get isBindable(){return this.dataset.gsTarget}get isFocused(){return this===document.activeElement}get tag(){return this.tagName.toLowerCase()}get templateRef(){return this.#nr.template}get contentRef(){return this.#Sr.contentRef}get dataController(){return this.#fr}get isAllowRender(){return this.isValidEnvironment&&this.isValidBrowser&&this.isValidOS&&this.isValidProtocol&&this.isValidOrientation}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get clazzName(){return this.constructor.name}get definitions(){const t=[...i.inheritance(this)].map((t=>t.constructor?.properties)).filter((t=>t));return t.push(this.constructor?.properties),GSData.mergeObjects(t)}static allProperties(t){const e=[...i.inheritance(t)].map((t=>t.properties)).filter((t=>t));return e.push(t.constructor?.properties||t.properties),GSData.mergeObjects(e)}static define(t,e,s){customElements.get(t)||customElements.define(t,e||this,s)}}class GSAccordionElement extends GSElement{static properties={storage:{},autoclose:{type:Boolean},cssItem:{reflect:!0,attribute:'css-item'},cssHeader:{reflect:!0,attribute:'css-header'},cssBody:{reflect:!0,attribute:'css-body'},data:{type:Array}};constructor(){super(),this.data=this.settings}renderUI(){const t=this;return G`<div  dir="${C(t.direction)}"
       @notify="${t.#br.bind(t)}"
       @click="${t.#vr}" 
       @keyup="${t.#wr}" 
       class="accordion ${S(t.renderClass())}">
       ${this.#Er()}
       <slot></slot></div>`}get items(){return this.queryAll('gs-accordion-item')}get settings(){const t=this.constructor.properties;return GSItem.collect(this).map((e=>r.proxify(e,t)))}close(){this.#Gr(!1)}open(){this.#Gr(!0)}onDataRead(t){this.data=t}#Er(){return this.data.map((t=>G`<gs-accordion-item generated
        .opened="${C(!0===t.disabled)}" 
        message="${C(t.message)}" 
        template="${C(t.template)}" 
        title="${C(t.title)}"></gs-accordion-item>`))}#Gr(t=!1){this.items.forEach((e=>e.opened=t)),this.notify()}#br(t){const e=this;e.autoclose&&t.target.opened&&e.items.filter((e=>e!=t.target)).forEach((t=>t.opened=!1))}#vr(t){t.target.toggle?.()}#wr(t){switch(t.code){case'ArrowLeft':t.target.close?.();break;case'ArrowRight':t.target.open?.()}}static{this.define('gs-accordion')}}class GSAccordionItemElement extends GSElement{static properties={cssHeader:{reflect:!0,attribute:'css-header'},cssBody:{reflect:!0,attribute:'css-body'},message:{reflect:!0},title:{reflect:!0},opened:{type:Boolean,reflect:!0}};constructor(){super()}shouldUpdate(t){return'GS-ACCORDION'===this.owner?.tagName}renderUI(){const t=this,e=t.owner,s=t.cssHeader||e?.cssHeader,r=t.cssBody||e?.cssBody;return G`<div class="accordion-item ${t.css}">
             <h2 class="accordion-header">
               <button type="button" 
                class="accordion-button  ${s} ${t.opened?'':'collapsed'}"> 
                 ${t.translate(t.title)}
               </button>
             </h2>
             <div class="accordion-collapse collapse  ${r} ${t.opened?'show':''}">
               <div class="accordion-body">
                   ${t.translate(t.message)}
                   ${t.renderTemplate()}
                   <slot></slot>
               </div>
             </div>      
     </div>`}open(){this.notify(!0)}close(){this.notify(!1)}toggle(){this.notify(!this.opened)}notify(t=!1){this.opened=t,super.notify()}get owner(){return this.closest('gs-accordion')||i.component(this)}static{this.define('gs-accordion-item')}}class GSAlertElement extends GSElement{static properties={message:{reflect:!0},color:{...z},closed:{reflect:!0,type:Boolean},closable:{reflect:!0,type:Boolean},delay:{reflect:!0,type:Number}};#ws;#Cr=!1;#xr=0;#$r=0;#Tr;constructor(){super(),this.delay=1,this.#ws=b(),this.#Tr=this.#kr(this)}disconnectedCallback(){clearInterval(this.#xr),super.disconnectedCallback()}renderUI(){const t=this;return G`<div role="alert" dir="${C(t.direction)}" ${A(t.#ws)} 
            @mouseover="${()=>t.#Cr=!0}"
            @mouseout="${()=>t.#Cr=!1}"
            class="alert fade ${S(t.renderClass())}" >
            ${t.#Dr}
            ${t.renderTemplate()}
            <slot></slot>
            ${t.#Ar}
        </div>`}firstUpdated(t){this.#Mr(),super.firstUpdated(t)}updated(t){t.has('opened')&&this.#Mr()}renderClass(){const t=this;return{...super.renderClass(),show:!t.closed,'alert-dismissible':t.closable,[`alert-${this.color}`]:t.color}}open(){this.notify(!1)}close(){this.notify(!0)}toggle(){this.notify(!this.closed)}notify(t=!1){const e=this;e.closed=t,e.closed&&setTimeout((()=>{e.#ws.value.classList.toggle('d-none',!0)}),250),super.notify()}get isBillboard(){return this.#Tr?.length>0}get#Lr(){return this.translate(this.message)}get#Dr(){return this.rtl?this.#Or:this.#Lr}get#Ar(){return this.rtl?this.#Lr:this.#Or}get#Or(){return this.closable?G`<button type="button" class="btn-close" aria-label="Close" @click="${this.close}"></button>`:''}#kr(t){return GSItem.collect(t).map((t=>r.proxify(t,{message:{}})))}#Mr(){const t=this;t.closed?(clearInterval(t.#xr),t.#xr=0):t.#Ir()}#Ir(){const t=this;if(!t.isBillboard)return;const e=t.#Tr;t.message?t.#$r=-1:t.message=e[0].message,t.#xr=setInterval((()=>{t.#Cr||(t.#$r++,t.#$r>=e.length&&(t.#$r=0),t.message=e[t.#$r].message)}),1e3*t.delay)}static{this.define('gs-alert')}}class GSButtonElement extends GSElement{static properties={type:{...B},size:{...et},color:{...z},toggleColor:{...z,attribute:'toggle-color'},autofocus:{type:Boolean},disabled:{type:Boolean,reflect:!0},outline:{type:Boolean,reflect:!0},active:{type:Boolean,reflect:!0},toggling:{type:Boolean},icon:{},title:{},tooltip:{},text:{}};#Nr=b();constructor(){super(),this.type='button'}firstUpdated(t){super.firstUpdated(t),this.autofocus&&!this.disabled&&this.focus()}renderUI(){const t=this;return G`<button part="button" role="button" ${A(t.#Nr)}
        dir="${C(t.direction)}"
        type="${C(t.type)}" 
        class="btn ${S(t.renderClass())}" 
        title="${C(t.#Rr)}"
        ?disabled=${t.disabled} 
        @click="${t.#vr}">
          ${t.#Dr} ${t.#Ar}</button>`}renderClass(){const t=this,e=tt[t.size];return{...super.renderClass(),active:t.active,'focus-ring':document.activeElement===t,[`text-${t.text}`]:t.text,[`btn-${e}`]:e,[`btn-outline-${t.color}`]:t.outline,[`btn-${t.color}`]:!t.outline&&t.color,[`btn-${t.toggleColor}`]:t.active&&t.toggleColor}}click(){this.#Nr.value?.click()}focus(){requestAnimationFrame((()=>this.#Nr.value?.focus()))}toggle(){this.active=!this.active}#vr(t){const e=this;return e.toggling&&e.toggle(),e.isReset?e.form?.reset():e.isSubmit?e.form?.submit():void e.notify()}get isReset(){return ButtonTypes.isReest(this.type)}get isSubmit(){return ButtonTypes.isSubmit(this.type)}get form(){return this.closest('gs-form, form')}get#Ur(){return this.translate(this.title)}get#Rr(){return this.translate(this.tooltip)}get#Dr(){return this.rtl?this.#Ur:this.#Fr}get#Ar(){return this.rtl?this.#Fr:this.#Ur}get#Fr(){return this.icon?G`<gs-icon class="bi bi-${this.icon}"></gs-icon>`:G`<slot name="icon"></slot>`}static{this.define('gs-button')}}class GSCalendarElement extends GSElement{static style=v`.year::-webkit-outer-spin-button,.year::-webkit-inner-spin-button {-webkit-appearance: none;margin: 0;} .year {-moz-appearance: textfield;} .day:focus{font-weight: bold;}`;static properties={date:{},target:{},format:{hasChanged:notEmpty},year:{type:Number},month:{type:Number,hasChanged:numGE0},day:{type:Number,hasChanged:numGE0},arrovPrev:{attribute:'arrow-prev'},arrowNext:{attribute:'arrow-next'},cssDays:{attribute:'css-days'},cssToday:{attribute:'css-today'},cssWeeks:{attribute:'css-weeks'},cssMonth:{attribute:'css-month'},cssYear:{attribute:'css-year'},cssNav:{attribute:'css-nav'},cssHeader:{attribute:'css-header'},cssSelected:{attribute:'css-selected'},minYear:{attribute:'year-min',type:Number},maxYear:{attribute:'year-max',type:Number}};#Pr;constructor(){super();const t=this;t.#Pr=new GSDate,t.#Pr.locale=e.locale,t.locale=e.locale,t.day=t.#Pr.day,t.month=t.#Pr.month,t.year=t.#Pr.year,t.minYear=1900,t.maxYear=2100,t.arrowPrev='&#10094;',t.arrowNext='&#10095;',t.cssNav='btn-light',t.cssToday='btn-secondary',t.cssSelected='btn-primary',t.cssWeeks='fw-bold text-bg-dark',t.cssYear='form-control fs-5 fw-bold border-0 text-center m-1 p-0',t.cssMonth='form-control fs-3 fw-bold border-0 text-center m-1 p-0'}get date(){const t=this;return new Proxy(this.#Pr,{set:(e,s,r)=>('function'!=typeof e[s]&&(e[s]=r,t.#Br()),!0),get(e,s,r){const n=e[s];return n instanceof Function?function(...s){try{return n.apply(this===r?e:this,s)}finally{t.#Br()}}:n}})}previousMonth(){const t=this;0==t.month?(t.month=11,t.year--):t.month--}nextMonth(){const t=this;11==t.month?(t.month=0,t.year++):t.month++}previousYear(){this.year--}nextYear(){this.year++}formatted(t){const e=this;return(t||e.#Pr).format(e.format,e.locale)}updated(){const t=this,e=new GSDate(t.#Pr);t.#Hr(e),t.emit('date',{type:'calendar',date:e,val:t.formatted(e)},!0,!0)}renderUI(){const t=this;t.#Pr.year=t.year,t.#Pr.month=t.month,t.#Pr.day=t.day,t.#Pr.locale=t.locale;const e=GSDate.dayList(!0,t.locale).map((t=>G`<div class="col">${t}</div>`)),s=t.#zr(),r=t.#jr();return G`
          <div class="container-fluid text-center ${S(t.renderClass())}"
          dir="${C(t.direction)}"
          @keydown="${t.#qr}"
          @click="${t.#_r}">
          <div class="row align-items-center ${t.cssHeader} header">
              <div class="col-auto">
                  <a href="#" @click="${t.previousMonth}" class="btn ${t.cssNav} arrow prev">${N(t.arrowPrev)}</a>
              </div>
              <div class="col"></div>
              <div class="col-auto">
                  ${s}
                  ${r}
              </div>
              <div class="col"></div>
              <div class="col-auto">
                  <a href="#" @click="${t.nextMonth}" class="btn ${t.cssNav} arrow next">${N(t.arrowNext)}</a>
              </div>
          </div>
          <div class="row weeks ${t.cssWeeks}">${e}</div>
          ${N(t.#Vr())}
      </div>`}#Hr(t){const e=this;if(!e.target)return;const s=i.query(document.documentElement,e.target);return s?s instanceof HTMLInputElement?'date'===s.type?s.valueAsDate=t:s.value=e.formatted(t):void i.setHTML(s,e.formatted(t)):void 0}#Br(){const t=this;t.day=t.#Pr.day,t.month=t.#Pr.month,t.year=t.#Pr.year,t.locale=t.#Pr.locale}#Wr(t,s){return t&&e.asNum(t)===s.day&&s.month===this.#Pr.month&&this.#Pr.year===s.year}#Vr(){const t=this,e=new GSDate;e.locale=t.locale;const s=t.#Pr.build(t.locale).map((s=>{const r=t.#Wr(s,e)?t.cssToday:'',n=t.#Wr(s,t.#Pr)?t.cssSelected:'';return`<div class="col p-0">${s?`<a tabindex="0" href="#" class="btn shadow-none ${r} ${n} day" data-day="${s}">${s}</a>`:''}</div>`})).map(((t,e)=>{if(0===e)return`<div class="row days">${t}`;return e%7==0?`</div><div class="row days">${t}`:t}));return s.push('</div>'),s.join('')}#zr(){const t=this,e=t.#Pr.MMMM,s=GSDate.monthList(!1,t.locale),r=s.map(((t,s)=>G`<option value="${s}" selected=${C(e==t||void 0)}>${t}</option>`));return G`<select @change="${t.#Yr}" name="month" class="month ${t.cssMonth}" value="${s.indexOf(e)}">${r}</select>`}#jr(){const t=this;return G`<input @change="${t.#Jr}" name="year" class="year ${t.cssYear}" value="${t.#Pr.getFullYear()}" type="number" min="${t.minYear}" max="${t.maxYear}">`}#_r(t){GSEvents.prevent(t),t.target.classList.contains('day')&&(this.day=e.asNum(t.target.dataset.day,this.day))}#Yr(t){this.month=t.target.selectedIndex}#Jr(t){this.year=t.target.value}#qr(t){}static{this.define('gs-calendar')}}class GSCardElement extends GSElement{static styles=v`.card-header, .card-footer{ background-color: inherit; color: inherit;}`;static properties={imageStyle:{type:Object,attribute:'image-style',reflect:!0},overlay:{type:Boolean},placement:{...K},align:{...K},image:{},title:{},subtitle:{},text:{},footer:{},header:{},colorText:{attribute:'color-text'},colorBack:{attribute:'color-back'},colorBorder:{attribute:'color-border'},cssTitle:{attribute:'css-title'},cssSubtitle:{attribute:'css-subtitle'},cssText:{attribute:'css-text'},cssFooter:{attribute:'css-footer'},cssHeader:{attribute:'css-header'},cssBody:{attribute:'css-body'},cssImage:{attribute:'css-image'}};constructor(){super(),this.border=!1,this.shadow=!1,this.align='start',this.placement='top',this.imageStyle=this.imageStyle||{}}renderUI(){const t=this,e=t.isVertical?t.#Kr():t.#Xr();return G`<div  dir="${C(t.direction)}" class="card ${S(t.renderClass())}">${e}</div>`}#Kr(){const t=this;return[t.#Qr,t.#Zr,t.#tn,t.#en,t.#sn]}#Xr(){const t=this,e=PlacementTypes.isBefore(t.placement),s=e?'col-4':'col-8',r=e?'col-8':'col-4',n=e?t.#rn:t.#tn,i=e?t.#tn:t.#rn;return G`<div class="row g-0">
        <div class="${s}">
            ${n}
        </div>
        <div class="${r}">
          ${i}
        </div>
      </div>`}renderClass(){const t=this;return{...super.renderClass(),border:t.border||t.colorBorder,[`text-${t.align}`]:t.align,[`text-${t.colorText}`]:t.colorText,[`bg-${t.colorBack}`]:t.colorBack,[`border-${t.colorBorder}`]:t.colorBorder}}get isVertical(){return PlacementTypes.isVertical(this.placement)}get isHorizontal(){return PlacementTypes.isHorizontal(this.placement)}get#tn(){const t=this;return G`<div class="${t.overlay?'card-img-overlay':'card-body'} ${t.cssBody}">
      <h5 class="card-title  ${t.cssTitle}"><slot name="title">${t.translate(title)}</slot></h5>
      <h6 class="card-subtitle  ${t.cssSubtitle}"><slot name="subtitle">${t.translate(t.subtitle)}</slot></h6>
      <p class="card-text ${t.cssText}"><slot name="text">${t.translate(t.text)}</slot></p>
      <slot name="body"></slot>
    </div>    
    `}get#Zr(){return this.overlay?'':G`<div class="card-header  ${this.cssHeader}"><slot name="header">${this.header}</slot></div>`}get#en(){return this.overlay?'':G`<div class="card-footer ${this.cssFooter}"><slot name="footer">${this.footer}</slot></div>`}get#nn(){return G`<slot name="image"></slot>`}get#in(){const t=this.isHorizontal?'img-fluid':'card-img';return G`<img src="${this.image}" class="rounded-${this.placement} ${t} ${this.cssImage}" style=${L(this.imageStyle)} alt="...">`}get#rn(){return this.image?this.#in:this.#nn}get#Qr(){return'top'===this.placement?this.#rn:''}get#sn(){return'bottom'===this.placement?this.#rn:''}static{this.define('gs-card')}}class GSCenterElement extends GSElement{constructor(){super()}renderUI(){return G`<div  dir="${C(me.direction)}"
      class="position-absolute top-50 start-50 translate-middle ${S(this.renderClass())}">
    ${this.renderTemplate()}<slot></slot></div>`}static{this.define('gs-center')}}class GSMenuElement extends GSElement{static properties={storage:{},auto:{type:Boolean,reflect:!0},opened:{type:Boolean,reflect:!0},dark:{type:Boolean},reverse:{type:Boolean},data:{type:Array}};static options={name:{},title:{},header:{},color:{},icon:{},url:{default:'#'}};#an=b();#on=GSID.id;constructor(){super();const t=this;t.dynamicStyle(t.#on),t.data=t.#kr(t)}willUpdate(t){super.willUpdate(t),t.has('opened')&&!this.opened&&this.#ln()}updated(){this.#cn()}renderUI(){const t=this;return G`<ul 
            ${A(t.#an)}
            dir="${C(t.direction)}"
            class="dropdown-menu ${S(t.renderClass())}"
            data-gs-class="${t.#on}"
            data-menu="true"
            @mouseover="${t.#dn}"
            @mouseleave="${t.#un}"
            @keydown="${t.#A}"
            @click="${t.#vr}">
            ${t.#hn(t.data)}
        </ul>`}renderClass(){const t=this;return{...super.renderClass(),submenu:t.dataset.submenu,'dropdown-menu-dark':t.dark,[t.#on]:!0,show:t.opened,dropend:!t.reverse,dropstart:t.reverse}}close(){this.opened=!1}open(){this.opened=!0}toggle(){this.opened=!this.opened}popup(t=0,e=0,s){const r=this;let n=s;if(GSEvents.isMouseOrPointerEvent(t)){const s=t;n=s.target,e=s.clientY,t=s.clientX;let a=i.offsetParent(r);a=a?a.getBoundingClientRect():null,t-=a?.left||0,e-=a?.top||0}const a=t,o=e;requestAnimationFrame((()=>{const t={position:'fixed',top:'0px',left:'0px',translate:`${a}px ${o}px`},e=r.dynamicStyle(r.#on);Object.assign(e.style,t)})),r.open()}onDataRead(t){this.data=t}#hn(t){const e=this;return t.map((t=>e.#pn(t)))}#pn(t){const e=this;return t.items?.length>0?e.#mn(t):t.header||t.name?t.header?e.#gn(t):e.#fn(t):e.#yn()}#gn(t){return G`<li data-inert="true"><h6 class="dropdown-header">${t.header}</h6></li>`}#yn(){return G`<li data-inert="true"><hr class="dropdown-divider"></li>`}#mn(t){const e=this;return G`<li>
            <a class="dropdown-item dropdown-toggle" data-toggle="true" href="#">
                <div class="d-inline-block w-100">${t.name}</div>
            </a>
            <gs-menu auto 
                .data=${t.items} 
                ?dark=${e.dark} 
                ?reverse="${e.reverse}" 
                locale="${C(e.locale)}" 
                data-submenu="true">
            </gs-menu>
        </li>`}#fn(t){return G`<li>
                <gs-button css="dropdown-item shadow-none" 
                    ${F(t,!1)}
                    url="${t.url}"
                    title="${t.name}" 
                    locale="${C(this.locale)}" 
                    icon="${C(t.icon)}" 
                    text="${C(t.color)}">
                </gs-button></li>`}#kr(t){return GSItem.collect(t).map((t=>r.proxify(t,GSMenuElement.options)))}#ln(t){i.queryAll(this.renderRoot,'gs-menu',!1,!1).filter((e=>e!=t)).forEach((t=>t.close()))}#A(t){const e=this;if('Escape'===t.key)e.close()}#vr(t){GSEvents.prevent(t);const e=this,s=e.#Sn(t);s?.close(),e.auto&&e.close()}#un(t){GSEvents.prevent(t),this.auto&&this.close()}#dn(t){GSEvents.prevent(t);const e=this.#Sn(t);this.#ln(e),e?.open()}#Sn(t){const e=t.target.closest('li');return e?.querySelector('gs-menu')}#cn(){const t=this;if(!t.opened)return;const e=t.dynamicStyle(t.#on);if(t.isSubmenu){const s={translate:'0px -25px'};t.reverse?(s.left='inherited',s.right='100%'):(s.right='inherited',s.left='100%'),Object.assign(e.style,s)}else{e.style.translate=null;const s=t.#bn.getBoundingClientRect(),r=window.innerWidth-s.right;t.reverse=r-5<0,t.reverse&&(e.style.translate=r-2+'px')}}get isSubmenu(){return this.dataset.submenu}get#bn(){return this.#an.value}static{this.define('gs-menu')}}class GSDContextElement extends GSMenuElement{static properties={target:{},altContext:{type:Boolean},disabled:{type:Boolean}};constructor(){super(),this.auto=!0}connectedCallback(){super.connectedCallback();const t=this;t.attachEvent(window,'resize',t.close.bind(t)),t.#vn()}#vn(){const t=this;i.queryAll(document.documentElement,t.target).forEach((e=>t.attachEvent(e,'contextmenu',t.#wn.bind(t))))}#En(t){const e=this;return t.composedPath().filter((t=>t.matches)).filter((t=>t.matches(e.target)))}#wn(t){const e=this;if(t.shiftKey&&e.altContext)return;return 0!==e.#En(t).length?(GSEvents.prevent(t),e.popup(t),!0):void 0}popup(t=0,e=0,s){return!this.disabled&&super.popup(t,e,s)}static{this.define('gs-context')}}class GSCompareElement extends GSElement{static styles=v`.slider {
         --gs-position : 50%;
          left : var(--gs-position);
          width: 8px;
          height: 100%;
          border-width: 1px;
          cursor: w-resize;
          border-color: darkgray;
          border-style: solid;
          background-color: lightgray;
      }
      .clipper {
        --gs-position : 50%;
        clip-path: inset(0px var(--gs-position) 0px 0px);
      }
    `;static properties={background:{...z},width:{type:Number},height:{type:Number},before:{hasChanged:notEmpty},after:{hasChanged:notEmpty}};#on=GSID.id;#Gn=b();#Cn=b();#xn=b();#$n;#Tn;constructor(){super();const t=this;t.width=0,t.height=0,t.dynamicStyle(t.#on),t.#$n=new ElementMoveController(t)}firstUpdated(t){this.#$n.attach(this.#kn),super.firstUpdated(t)}willUpdate(t){super.willUpdate(t);const e=this,s=e.#ms;s.width=e.width>0?`${e.width}px`:'',s.height=e.height>0?`${e.height}px`:''}renderUI(){const t=this;return G`<div ${A(t.#Gn)} 
         dir="${C(t.direction)}"
         @loaded="${t.#Dn}" 
         @dblclick="${t.#An}"
         data-gs-class="${t.#on}"
         class="${S(t.renderClass())}">
      <div class="overflow-hidden position-absolute top-0 start-0 overflow-hidden"><slot name="before">${t.#Mn}</slot></div>
      <div ${A(t.#Cn)} class="overflow-hidden position-absolute top-0 start-0 overflow-hidden clipper"><slot name="after">${t.#Ln}</slot></div>
      <div ${A(t.#xn)} class="slider position-absolute top-0><slot name="control"></slot></div>
    </div>`}renderClass(){const t=this;return{...super.renderClass(),'position-relative':!0,'user-select-none':!0,'d-contents':t.isAuto,'h-100':t.isAuto,'w-100':t.isAuto,'overflow-hidden':!0,[`bg-${t.background}`]:t.background,[`${t.#on}`]:!0}}onStartMove(t){this.#Tn=this.#kn.getBoundingClientRect()}onMouseMove(t){const s=this,r=s.#Tn.left,n=s.#Tn.width,i=e.range(t.clientX-r,0,n)/n*100;s.#Br(i)}get isAuto(){return 0==this.width||0==this.height}get isFixed(){return!this.isAuto}get#ms(){return this.dynamicStyle(this.#on).style}get#Mn(){return this.before?G`<img @load="${this.#Dn}" src="${me.before}"></img>`:''}get#Ln(){return this.after?G`<img @load="${this.#Dn}" src="${me.after}"></img>`:''}get#On(){return 0===this.width||0===this.height}get#kn(){return this.#Gn.value}get#In(){return this.#xn.value}get#Nn(){return this.#Cn.value}#Dn(t){const e=this;if(e.#On){const s=t.target;e.height=e.height||s.height,e.width=e.width||s.width}}#An(t){const e=this;e.prevent(t),e.#Br(),e.#$n.reset()}#Br(t=50){this.#Nn.style.setProperty('--gs-position',100-t+'%'),this.#In.style.setProperty('--gs-position',`${t}%`)}static{this.define('gs-compare')}}class GSControllerElement extends GSElement{static properties={module:{},controller:{}};#Rn=!1;constructor(){super()}updated(t){super.updated(t);const e=this;e.isConnected&&e.isValid&&e.#Un()}get isValid(){return this.parentElement instanceof GSElement}async#Un(){const t=this,e=t.parentElement;if(t.#Rn)return;let s=globalThis[t.controller];if(!s&&t.module){const e=GSLoader.normalizeURL(t.module);s=(await import(e))[t.controller]}s&&(new s(e),t.#Rn=s)}static{this.define('gs-controller')}}class GSCopyrightElement extends GSElement{static properties={year:{reflect:!0,type:Number},company:{reflect:!0},url:{reflect:!0}};constructor(){super(),this.flat=!0,this.css='fixed-bottom d-flex justify-content-center align-items-center mt-1 p-2 text-muted'}renderUI(){const t=this;if(!t.isCompany||!t.isYear)return'';const e=(new Date).getFullYear();return G`<div  dir="${C(t.direction)}" class="${S(t.renderClass())}"><a target="_blank" href="${t.url?t.url:'#'}"><small>&copy; ${t.company} ${t.year}. - ${e}.</small></a></div>`}get isCompany(){return e.isStringNonEmpty(this.company)}get isYear(){return e.isStringNonEmpty(this.year)}static{this.define('gs-copyright')}}class GSDataHandler extends GSElement{static properties={storage:{state:!0},src:{reflect:!0},action:{reflect:!0},mode:{reflect:!0},reader:{reflect:!0},writer:{reflect:!0},limit:{type:Number,reflect:!0},skip:{type:Number,reflect:!0},filter:{type:Array,reflect:!0},sort:{type:Array,reflect:!0},type:{},autoload:{type:Boolean},autorefresh:{type:Number,reflect:!0,hasChanged:numGT0}};#B=0;#Fn=null;#Pn=null;#Bn=null;constructor(){super();const t=this;if(!t.id)throw new Error('Element ID is required attribute!');GSItem.validate(t,t.tagName),t.autorefresh=!0,t.autoload=!1,t.flat=!0,t.filter=[],t.sort=[],t.limit=0,t.skip=0,t.type='remote',t.mode='query',t.reader='GET',t.writer='POST',t.storage=t.id}connectedCallback(){super.connectedCallback();const t=this;t.#Hn(),t.#Fn=GSItem.proxify(t,GSData.PROPERTIES),t.#Pn=h.newHandler(t.type,t.id,!1),t.#Fn?.length>0&&t.#Pn?.addProcessor(t),t.#Pn?.enable()}disconnectedCallback(){super.disconnectedCallback(),this.#Pn?.disable(),this.#Pn?.removeProcessor(this),this.#Bn=null,clearTimeout(this.#B)}firstUpdated(){this.dataController?.read()}willUpdate(t){super.willUpdate(t);const e=this;e.#zn(),t.has('autorefresh')&&e.schedule(e.autorefresh)}#zn(){const t=this;t.#Pn&&(t.#Pn.src=t.src,t.#Pn.mode=t.mode,t.#Pn.action=t.action,t.#Pn.reader=t.reader,t.#Pn.writer=t.writer,t.#Pn.limit=t.limit,t.#Pn.skip=t.skip,t.#Pn.sort=t.formatSort(t.sort),t.#Pn.filter=t.formatFilter(t.filter),t.autoload&&t.read())}get isDebug(){return this.dataset.gsDebug}get handler(){return this.#Pn}get isRegistered(){return!0===this.#Pn?.isRegistered}get isOffline(){return this.#Pn?.isOffline}set search(t){this.#Pn&&(this.#Pn.search=t)}formatFilter(t){return t=this.#jn(t),Array.isArray(t)?t:[]}formatSort(t){let s;if('string'==typeof(t=this.#jn(t)))s=[{col:t}];else if(Array.isArray(t))s=t;else if(e.isNumber(t)){const e=Math.abs(t);s=new Array(e),s[e-1]={ord:t}}return s||[]}schedule(t=0){const s=this;t=1e3*e.asNum(t),clearInterval(s.#B),t>0&&(s.#B=setInterval((()=>{s.read(s)}),t))}read(){return this.#Bn()}write(t){const e=this;e.#qn(),e.#Pn?.write(e,t)}load(){return this.read()}save(t){return this.write(t)}onDataRead(t){this.isDebug&&GSLog.log(this,'Data Read: '+JSON.stringify(t))}onDataWrite(t){this.isDebug&&GSLog.log(this,'Data write: '+JSON.stringify(t))}postRead(t){const s=this;Array.isArray(t)||(t=[t]),t.forEach((t=>{s.#Fn.forEach((s=>{let r=t[s.name];e.isNull(r)||(r=GSData.format(s,r),t[s.name]=r)}))}))}onDataError(t){this.isDebug&&GSLog.log(this,'Data error: '+JSON.stringify(t))}#qn(){if(!this.isOffline&&!this.isRegistered)throw new Error('Data handler not initialized!')}#Hn(){const t=this;t.#Bn=s.callOnceLifo(t.#_n,t)}#_n(){return this.#Hn(),this.#Vn()}#Vn(){const t=this;return t.#qn(),t.#Pn?.read(t)}#jn(t){return e.isJsonString(t)?JSON.parse(t):t}static{this.define('gs-data-handler')}}class GSDialogElement extends GSElement{static CSS='rounded shadow-sm';static HEADER_CSS='p-3';static TITLE_CSS='fs-5 fw-bold text-muted';static ALIGN='end';static CANCEL='Cancel';static CONFIRM='Ok';static#Wn=[];static styles=v`dialog{outline:none;}dialog::backdrop{backdrop-filter: blur(4px);}`;static properties={standard:{refelct:!0,type:Boolean},opened:{refelct:!0,type:Boolean},cancelable:{refelct:!0,type:Boolean},closable:{refelct:!0,type:Boolean},escapable:{refelct:!0,type:Boolean},disabled:{refelct:!0,type:Boolean},title:{refelct:!0},message:{refelct:!0},cancelText:{refelct:!0},confirmText:{refelct:!0},buttonAlign:{refelct:!0,attribute:'button-align'},iconCancel:{refelct:!0,attribute:'icon-cancel'},iconConfirm:{refelct:!0,attribute:'icon-confirm'},cssCancel:{attribute:'css-cancel'},cssConfirm:{attribute:'css-confirm'},cssTitle:{attribute:'css-title'},cssHeader:{attribute:'css-header'},cssFooter:{attribute:'css-footer'},cssBody:{attribute:'css-body'},cssContent:{attribute:'css-content'}};#Yn=b();#Jn=b();#Kn=b();constructor(){super();const t=this,e=GSDialogElement;t.opened=!1,t.standard=!1,t.cancelable=!1,t.closable=!1,t.escapable=!1,t.disabled=!1,t.shadow=!1,t.rounded=!1,t.css=e.CSS,t.cssTitle=e.TITLE_CSS,t.cssHeader=e.HEADER_CSS,t.buttonAlign=e.ALIGN,t.cancelText=e.CANCEL,t.confirmText=e.CONFIRM}disconnectedCallback(){super.disconnectedCallback(),GSDialogElement.#Xn()}updated(){super.updated();const t=this;t.opened?(GSDialogElement.#Wn.push(t),t.standard?t.#Qn?.open():t.#Qn?.showModal(),t.#Zn()?.focus()):(GSDialogElement.#Wn.pop(),t.#Qn?.close()),t.notify()}#ti(){const t=this;return t.closable?G`<gs-button  ${A(t.#Jn)} 
      @click="${t.#ei.bind(t)}" 
      icon="${C(t.iconConfirm)}"
      locale="${C(t.locale)}"
      .disabled="${t.disabled}"  
      css="${t.cssConfirm}" 
      color="primary" 
      title="${t.confirmText}">
      </gs-button>`:''}#si(){const t=this;return t.cancelable?G`<gs-button ${A(t.#Kn)}
      @click="${t.#ri.bind(t)}" 
      icon="${C(t.iconCancel)}"
      locale="${C(t.locale)}"
      css="${t.cssCancel}" 
      color="primary" 
      title="${t.cancelText}">
      </gs-button>`:''}#ni(){const t=this;return t.cancelable||t.closable?G`<div class="card-footer d-flex user-select-none justify-content-${t.buttonAlign} ${t.cssFooter}">
      ${t.#si()} &nbsp;${t.#ti()}
      </div>`:''}renderUI(){const t=this;return G`
        <dialog tabindex="-1" ${A(t.#Yn)} 
            dir="${C(t.direction)}"
            @close="${t.#ri.bind(t)}"
            @cancel="${t.#ri.bind(t)}"
            @keydown="${t.#A.bind(t)}"
            class="dialog p-0 border-0 ${S(t.renderClass())}">
            <div class="card ${t.cssContent}">
                <div class="card-header user-select-none ${t.cssHeader}">
                  <div class="card-title ${t.cssTitle}">
                    <slot name="title">${t.translate(t.title)}</slot>
                  </div>
                </div>
                <div class="card-body ${t.cssBody}">
                  <slot name="body">${t.translate(t.message)}</slot>
                </div>
                ${t.#ni()}
            </div>
            <slot name="extra"></slot>
            <div class="toast-container position-fixed"></slot></div>
        </dialog>`}info(t='',e='',s=!1,r=!1){const n=this;if(n.title=t,n.body=e,n.closable=s,n.cancelable=r,n.escapable=r,n.open(),s||r)return n.waitEvent('click-action')}confirm(t='',e=''){return this.info(t,e,!0,!1)}prompt(t='',e=''){return this.info(t,e,!0,!0)}reset(t,s=0){s=e.asNum(s,0);this.forms.forEach((e=>{e.reset(),e.values=t}));const r=this.tab;r&&s>-1&&(r.index=s)}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}get form(){return this.query('form',!0)}get forms(){return this.queryAll('form',!0)}get tab(){return this.query('gs-tab',!0)}get#Qn(){return this.#Yn.value}get#ii(){return this.#Jn.value}get#ai(){return this.#Kn.value}#Zn(){const t=this,e=t.queryAll(i.QUERY_INPUT,!0).filter((t=>i.isVisible(t))).shift();return e||(t.cancelable?t.#ai:t.closable?t.#ii:t)}#ei(t){this.close(),this.emit('click-action')}#ri(t){this.close(),this.emit('click-action')}#A(t){const e=this;'Escape'===t.key&&(e.cancelable||e.escapable)&&(GSEvents.prevent(t),e.close())}static#Xn(){const t=GSDialogElement.#Wn;t=t.filter((t=>t.isConnected))}static get top(){GSDialogElement.#Xn();const t=GSDialogElement.#Wn;return 0===t.length?null:t[t.length-1]}static{this.define('gs-dialog')}}class GSDrawerElement extends GSElement{static properties={autoclose:{reflect:!0,type:Boolean},closable:{reflect:!0,type:Boolean},backdrop:{reflect:!0,type:Boolean},expanded:{reflect:!0,type:Boolean},scroll:{reflect:!0,type:Boolean},min:{reflect:!0,type:Number},max:{reflect:!0},fingers:{reflect:!0,type:Number},placement:{...K},transition:{reflect:!0},duration:{reflect:!0,type:Number},title:{reflect:!0},cssTitle:{reflect:!0,attribute:'css-title'},cssHead:{reflect:!0,attribute:'css-head'},cssBody:{reflect:!0,attribute:'css-body'}};constructor(){super();const t=this;t.placement='start',t.cssTitle='fs-5',t.transition='linear',t.duration=.2,t.min=0,t.max='auto',t.fingers=2,t.on('mouseleave',t.#oi.bind(t)),t.on('mouseenter',t.#li.bind(t))}renderUI(){const t=this;return G`${N(t.#ci)}
    <div tabindex="-1" dir="${C(t.direction)}"
     class="offcanvas overflow-hidden anime ${S(t.renderClass())}">
      ${t.#Zr}
      <div class="offcanvas-body  ${t.cssBody}">
        ${t.renderTemplate()}
        <slot name="body"></slot>
      </div>
    </div>${t.#di}`}renderClass(){const t=this;return{...super.renderClass(),show:!0,'anime-open':t.expanded,'anime-close':!t.expanded,[`offcanvas-${t.placement}`]:t.placement}}get#ci(){const t=this,s=t.isHorizontal?'width':'height';return`<style>\n    .anime {\n      transition-property: ${s} !important;\n      transition-duration: ${t.duration}s  !important;\n      transition-timing-function: ${t.transition} !important;\n    }\n    .anime-open {\n        ${s} : ${t.max}${e.isNumber(t.max)?'px':''} !important;\n    }\n    .anime-close {\n      ${s} : ${t.min}${e.isNumber(t.min)?'px':''} !important;\n    }    \n    </style>`}get#di(){const t=this;return t.backdrop?G`<div class="offcanvas-backdrop fade ${t.expanded?'show':'invisible'}" @click="${t.close}"></div>`:''}get#Or(){return this.closable?G`<button type="button" class="btn-close text-reset" @click="${this.close}"></button>`:''}get#Ur(){const t=this;return t.title?G`<div class="offcanvas-title ${t.cssTitle}">${t.translate(t.title)}</div>`:''}get#Zr(){const t=this;return t.#ui?G`<div class="offcanvas-header ${t.cssHead}"><slot name="header">${t.#Ur}${t.#Or}</slot></div>`:''}get#hi(){return this.querySelector('[slot="header"]')}get#ui(){return this.title||this.closable||this.#hi}#Ns(t){this.expanded=1==t,this.notify()}#oi(){this.autoclose&&this.close()}#li(){this.min>0&&this.open()}open(){this.#Ns(!0)}close(){this.#Ns(!1)}toggle(){this.#Ns(!this.expanded)}get isHorizontal(){return!this.isVertical}get isVertical(){return PlacementTypes.isVertical(this.placement)}static{this.define('gs-drawer')}}class GSDropdownElement extends GSMenuElement{static properties={icon:{},text:{...z},color:{...z},size:{},title:{}};constructor(){super(),this.auto=!0}renderUI(){return G`<div class="dropdown"  dir="${C(this.direction)}">
                ${this.#pi()}
                ${super.renderUI()}
            </div>`}#mi(){return{...super.renderClass(),btn:!0,[`btn-${this.color}`]:!!this.color,'dropdown-toggle':!0,'shadow-none':!0}}#pi(){const t=this;return G`<gs-link css="${P(t.#mi())}"
            url="#"         
            icon="${C(t.icon)}"
            text="${C(t.text)}"
            size="${C(t.size)}"
            title="${C(t.title)}"
            @notify="${t.open}">
            </gs-link>`}static{this.define('gs-dropdown')}}class GSEmailElement extends GSElement{static shadowRootOptions={mode:'closed'};static style=v`.e-mail:before {
    content: attr(data-website) "\0040" attr(data-user);
    unicode-bidi: bidi-override;
    direction: rtl;
    }`;static properties={user:{reflect:!0},domain:{reflect:!0},dev:{type:Boolean}};#gi;#fi;constructor(){super()}willUpdate(t){super.willUpdate(t),this.#yi(),this.#Si()}renderUI(){return G`${N(this.#ci)}<a @click="${this.#vr}" class="e-mail" data-user="${this.#gi}" data-website="${this.#fi}"  href="mailto://"></a>`}get#ci(){return'<style>.e-mail:before { content: attr(data-website) "@" attr(data-user); unicode-bidi: bidi-override; direction: rtl; }</style>'}get#ee(){return`mailto://${e.reverse(this.dataset.user)}@${e.reverse(this.dataset.domain)}`}#yi(){const t=this,s=t.dataset;t.user&&(t.#gi=s.user||e.reverse(t.user),t.dev&&(s.user=t.#gi),t.user='')}#Si(){const t=this,s=t.dataset;t.domain&&(t.#fi=s.domain||e.reverse(t.domain),t.dev&&(s.domain=t.#fi),t.domain='')}#vr(t){this.prevent(t),window.location.href=this.#ee}static{this.define('gs-email')}}class GSFormElement extends GSElement{static properties={storage:{},disabled:{type:Boolean},data:{type:Object}};#bi=b();constructor(){super(),this.data=[]}renderUI(){const t=this;return G`<form ${A(t.#bi)}
      dir="${C(t.direction)}"
      @change="${t.#vi}"
      @submit="${t.submit}"
      @reset="${t.reset}">
      <slot></slot>
    </form>`}updated(t){const e=this;t.has('disabled')&&(e.disabled?e.disable():e.enable()),t.has('data')&&(e.asJSON=e.data)}get form(){return this.#bi.value}get isValid(){return 0===this.queryAll('input,select,textarea',!0).filter((t=>i.isVisible(t))).map((t=>t.checkValidity())).filter((t=>!1===t)).length}get elements(){return this.queryAll('input,select,output,textarea',!0)}get asJSON(){return i.toObject(this)}set asJSON(t){return i.fromObject(this,t),this.validate()}disable(){i.disableInput(this,'gs-form-group, input, textarea, select, .btn',!1,'gsForm')}enable(){i.enableInput(this,'gs-form-group, input, textarea, select, .btn',!1,'gsForm')}checkValidity(){return this.form.checkValidity()}reportValidity(){return this.form.reportValidity()}reset(t){const e=this;t?.target===e.form?e.dataController?.read(e.asJSON):e.form.reset()}submit(t){GSEvents.prevent(t);const e=this;e.validate()&&e.dataController?.write(e.asJSON)}onDataRead(t){this.data=t}onDataWrite(t){}onDataError(t){GSLog.error(this,t)}validate(){const t=this,e=t.checkValidity()&&t.isValid;return e||t.reportValidity(),e}#vi(t){this.isBindable&&this.handle(t)}static{this.define('gs-form')}}class GSFormGroupElement extends GSElement{static CSS_LABEL_CELL='col-md-4 col-sm-4 col-xs-2';static CSS_LABEL='user-select-none fw-small fw-light text-secondary';static CSS_ICON='text-primary me-2 fs-5';static ICON='info-circle-fill';static properties={icon:{},layout:{},placement:{},description:{},label:{},placeholder:{},pattern:{},mask:{},name:{},type:{...V},list:{},accept:{},lang:{},step:{type:Number,reflect:!0,hasChanged:numGT0},min:{type:Number,reflect:!0,hasChanged:numGE0},max:{type:Number,reflect:!0,hasChanged:numGT0},minLength:{type:Number,reflect:!0,hasChanged:numGE0},maxLength:{type:Number,reflect:!0,hasChanged:numGT0},reverse:{type:Boolean},autoid:{type:Boolean},autocopy:{type:Boolean,reflect:!0},autoselect:{type:Boolean,reflect:!0},autocapitalize:{type:Boolean,reflect:!0},autocomplete:{type:Boolean,reflect:!0},autofocus:{type:Boolean,reflect:!0},autoselect:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},checked:{type:Boolean,reflect:!0},multiple:{type:Boolean,reflect:!0},reveal:{type:Boolean,reflect:!0},readonly:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},cellField:{attribute:'cell-field'},cellLabel:{attribute:'cell-label'},cssLabel:{attribute:'css-label'},cssField:{attribute:'css-field'}};#wi=b();#Ei=b();#Gi=[];constructor(){super(),this.#Ci(),this.type='text',this.icon=GSFormGroupElement.ICON,this.placement='top',this.layout='horizontal',this.cssLabel=GSFormGroupElement.CSS_LABEL,this.cellLabel=GSFormGroupElement.CSS_LABEL_CELL}connectedCallback(){this.#Gi=GSItem.collect(this).filter((t=>t.dataset.pattern)).map((t=>new RegExp(t.dataset.pattern))),super.connectedCallback()}updated(){const t=this;if(t.#xi(),t.templateRef&&!t.field){const e=i.formElements(t.renderRoot).pop();t.#wi.value=e,e&&(e.name=this.name,t.attachEvent(e,'change',t.#vi.bind(t)))}}renderUI(){const t=this;switch(t.layout){case'floating':return t.#$i();case'vertical':return t.#Kr();default:return t.#Xr()}}#$i(){const t=this;return G`
    <div  dir="${C(t.direction)}" class="row ${S(t.renderClass())}">
       <div class="form-floating ${t.#Ti} ${t.#ki}">
          ${t.#Di()}
          ${t.#Ai()}
          ${t.#Mi()}
       </div>
       ${t.#Li()}
    </div>`}#Kr(){const t=this;return G`
    <div  dir="${C(t.direction)}" class="row ${S(t.renderClass())}">
      <div class="col-12 text-md-start ${t.cellLabel}">
          ${t.#Mi()}
      </div>
       <div class="${t.#Ti} ${t.#ki}">
          ${t.#Di()}
          ${t.#Ai()}
       </div>
       ${t.#Li()}   
    </div>      
    `}#Xr(){const t=this;return G`
    <div  dir="${C(t.direction)}" class="row form-group ${S(t.renderClass())}">    
       <slot name="header"></slot>
       ${t.#Oi()}
       ${t.#Ii()}
       ${t.#Li()}
       <slot name="footer"></slot>
    </div>`}#Mi(){const t=this;return G`<label class="${t.#Ni} ${t.cssLabel} user-select-none" for="${t.name}">${t.translate(t.label)}</label>`}#Oi(){return G`<div class=" text-md-end ${this.cellLabel}">${this.#Mi()}</div>`}#Ri(){return this.#Ui?G`<gs-icon size="5" css="${GSFormGroupElement.CSS_ICON}}" name="${this.icon}"></gs-icon>`:G`<slot name="icon"></slot>`}#Fi(){const t=this,e=t.#Ui?'@parent':`[name='${t.name}']`;return t.description?G`<gs-tooltip local locale="${C(t.locale)}" placement="${t.placement}" title="${t.description}" target=${C(e)}></gs-tooltip>`:''}#Li(){const t=this,e=t.#Fi();return e&&t.#Ui?G`
    <div class="col-auto">
       ${e}
       ${t.#Ri()}
    </div>`:e}#Ii(){const t=this;return G`
    <div class="${t.#Ti} ${t.#ki}">
       <slot name="body">${t.#Di()}${t.#Ai()}</slot>
    </div>`}#Ai(){const t=this;return t.isRange?G`<span ${A(t.#Ei)} class="position-absolute px-1">${t.value}</span>`:''}#Di(){const t=this;if(t.query('template')||t.template)return t.renderTemplate();const e=t.autoid?t.name:void 0,s=t.isFieldset?t.value.split(','):t.value;if(Array.isArray(s)){const e='vertical'===t.dataset.radioLayout;return s.map(((e,s)=>({v:e,id:`${t.name}_${s}`}))).map(((s,r)=>t.#Pi(t.name+r,s.v,t.#Bi(s.id,t.name,s.v),e)))}return t.#Bi(e,t.name,t.value)}#Pi(t,e,s,r=!1){return r?G`<div class="me-3">${s}<label for="${t}" class="ms-1">${this.translate(e)}</label></div>`:G`<span class="me-3">${s}<label for="${t}" class="ms-1">${this.translate(e)}</label></span>`}#Bi(t,e,s){const r=this,n=r.isSwitch?'checkbox':r.type;return G`<input is="gs-ext-input" 
            ${A(r.#wi)}
            id=${C(t)} 
            @blur="${r.#Hi.bind(r)}"
            @input="${r.#xi.bind(r)}"
            @change="${r.#vi.bind(r)}"
        
            name="${e}" 
            value="${s}"
            type="${n}" 
    
            style="${r.reverse&&r.isRange?'transform: rotateY(180deg);':''}"
            class="${r.#zi} ${r.cssField}" 

            placeholder="${C(r.translate(r.placeholder))}"
            description="${C(r.translate(r.description))}"

            mask="${C(r.mask)}"
            pattern="${C(r.pattern)}"
            list="${C(r.list)}"
            accept="${C(r.accept)}"
             
            step="${C(r.step)}"
            min="${C(r.min)}"
            max="${C(r.max)}"
            lang="${C(r.lang)}"

            minlength="${C(r.minLength)}"
            maxlength="${C(r.maxLength)}"
            
            ?autofocus="${r.autofocus}"
            ?autocopy="${r.autocopy}"
            ?autoselect="${r.autoselect}"
            ?autocomplete="${r.autocomplete}"
            ?multiple="${r.multiple}"
            ?checked="${r.checked}"
            ?readonly="${r.readonly}"
            ?required="${r.required}"
            ?disabled="${r.disabled}"
            ?reveal="${r.reveal}"
            >`}get#zi(){return this.isCheckable?'form-check-input ms-0':this.isRange?'form-range':'form-control'}get#Ni(){const t=this;return t.isCheckable?'form-check-label':t.isFloating?'ms-2':t.isVertical?'form-label':''}get#Ti(){const t=this;return t.isCheckable?t.isSwitch?'form-check form-switch ps-3 fs-5':t.isFieldset?'':'form-check':''}get#ki(){const t=this.isHorizontal?'6':'11';return this.cellField||`col-md-${t} col-sm-${t} col-xs-11`}get#Ui(){return e.isStringNonEmpty(this.icon)}#xi(t){const e=this;if(e.isRange){const t=e.#Ei.value;t&&(t.innerHTML=e.field?.value||''),e.field.title=e.field.value}e.emit('input',t)}#vi(t){this.emit('change',t,!0)}async#Hi(t){const s=this,r=s.field;if(0===r.value.length||0===s.#Gi.length)return;let n=!1;for(const t of s.#Gi)if(n=t.test(r.value),n)break;n||(r.setCustomValidity('Invalid input'),r.reportValidity(),r.focus(),await e.timeout(2e3),r.setCustomValidity('')),s.emit('change',t)}#Ci(){const t=this,e=['header','body','footer'];let s=Array.from(t.children).filter((t=>t.slot&&!e.includes(t.slot)));if(s.length>0)throw new Error(`Custom element injection must contain slot="header|body|footer" attribute! Element: ${t.tagName}, ID: ${t.id}`);s=Array.from(t.children).filter((t=>!t.slot));const r=['TEMPLATE','GS-ITEM'];if(!i.isAllowed(s,r))throw new Error(i.toValidationError(t,r))}validate(){const t=this.checkValidity();return t||this.reportValidity(),t}checkValidity(){return this.field?.checkValidity()}reportValidity(){return this.field?.reportValidity()}get value(){return this.field?.value}set value(t){i.fromObject2Element(this.field,{[this.name]:t}),this.validate()}get isFloating(){return'floating'===this.layout}get isHorizontal(){return'horizontal'===this.layout}get isVertical(){return'vertical'===this.layout}get isFieldset(){return'radio'===this.type&&this.value?.includes(',')}get isCheckable(){const t=this;return t.isCheck||t.isRadio||t.isSwitch}get isChecked(){return this.field.checked}get isCheck(){return'checkbox'===this.type}get isRadio(){return'radio'===this.type}get isSwitch(){return'switch'===this.type}get isNumber(){return'number'===this.type}get isRange(){return'range'===this.type}get isText(){return'text'===this.type}get isPassword(){return'passsword'===this.type}get isEmail(){return'email'===this.type}get isURL(){return'url'===this.type}get isFile(){return'file'===this.type}get field(){return this.#wi.value}static{this.define('gs-form-group')}}class GSFormPanelElement extends GSElement{static properties={storage:{},formStorage:{attribute:'form-storage'},disabled:{type:Boolean},data:{type:Array}};#bi=b();constructor(){super(),this.data=this.#kr}renderUI(){const t=this;return G`<gs-form ${A(t.#bi)}
      ?disabled=${t.disabled} 
      storage="${C(t.formStorage)}" 
      .locale="${t.locale}"
      .rtl="${t.rtl}"
      .css="${t.css}"
      .theme="${t.theme}"
      .margin="${t.margin}"
      .padding="${t.padding}"
      .border="${t.border}"
      .shadow="${t.shadow}"
      .os="${t.os}"
      .browser="${t.browser}"
      .environment="${t.environment}"
      .orientation="${t.orientation}"
      .protocol="${t.protocol}">
      <slot>
        ${M(t.data,(e=>G`<gs-form-group .data=${e} locale="${C(t.locale)}" ></gs-form-group>`))}
      </slot>
    </form>`}get form(){return this.#bi.value}onDataRead(t){this.data=t}onDataError(t){GSLog.error(this,t)}get#kr(){return GSItem.collect(this).map((t=>r.proxify(t,GSFormGroupElement.properties)))}static{this.define('gs-form-panel')}}class GSGroupElement extends GSElement{static properties={storage:{},circular:{type:Boolean},multiple:{type:Boolean},data:{type:Array}};#Gn=b();#ji;constructor(){super(),this.data=this.initData(),this.#ji=new ElementNavigationController(this)}firstUpdated(t){this.#ji.attach(this.#Gn.value),super.firstUpdated(t)}renderUI(){const t=this;return G`<div ${A(t.#Gn)} 
      dir="${C(t.direction)}"
      class="${S(t.renderClass())}">
      ${t.renderWrappedUI()}
      </div>`}renderWrappedUI(t){return G`<div 
      class="${S(this.renderWrappedClass())}">
      <slot name="${C(t)}">${this.renderItems()}</slot>
      </div>`}renderWrappedClass(){return{}}renderItems(){return''}initData(){}previous(){this.#ji.previous()}next(){this.#ji.next()}reset(){this.#ji.reset()}isNavigable(t){return!0}onDataRead(t){this.data=t}get focused(){return this.#ji.focused}get selected(){return this.#ji.selected}settings(t){const e=t instanceof GSElement?t.definitions:GSElement.allProperties(t),s=GSItem.collect(this).map((t=>r.proxify(t,e))),n=s.filter((t=>t.active));return n.forEach(((t,e)=>t.active=0===e)),s}static{this.define('gs-group')}}class GSIconElement extends GSElement{static styles=v`
    :host {
      --gs-icon-super-color : cornflowerblue;
      --gs-icon-content : '';
    }
    i::after {
      top: -8px;
      font-size: 0.7em;
      position: relative;
      content: var(--gs-icon-content);
      content: attr(data-super);
      color: var(--gs-icon-super-color);
    }`;static properties={name:{reflect:!0,hasChanged:notEmpty},size:{reflect:!0,type:Number,hasChanged:numGT0},color:{reflect:!0,...z},superColor:{attribute:'super-color'},super:{reflect:!0}};constructor(){super()}renderUI(){const t=this,e=t.superColor?`--gs-icon-super-color:${t.superColor};`:'';return G`<i class="bi ${S(t.renderClass())}" data-super="${C(t.super)}" style="${C(e)}"></i>`}renderClass(){const t=this;return{...super.renderClass(),[`text-${t.color}`]:t.color,[`bi-${t.name}`]:t.name,fs:t.size>0,[`fs-${t.size}`]:t.size>0}}static{this.define('gs-icon')}}class GSIndentElement extends GSElement{static styles=v`.indent {
      --gs-indent : 10px;
      margin-left: var(--gs-indent);
      margin-right: var(--gs-indent);
    }`;static properties={flat:{type:Boolean},size:{type:Number,hasChanged:numGT0},multiplier:{type:Number,hasChanged:numGT0}};constructor(){super();this.size=1,this.multiplier=10}renderUI(){const t=this.size*this.multiplier;return G`<span class="indent" style="--gs-indent: ${t}px;"></span>`}static{this.define('gs-indent')}}const rt={reflect:!0,type:Number,hasChanged:numGE0};class GSImageElement extends GSElement{static properties={src:{hasChanged:notEmpty},width:rt,height:rt,opacity:rt,invert:rt,grayscale:rt,brightness:rt,blur:rt,contrast:rt,saturate:rt,hue:rt,sepia:rt,alt:{},loading:{}};#qi=b();#on=GSID.id;constructor(){super(),this.dynamicStyle(this.#on)}shouldUpdate(t){return this.#Br(),this.src}renderUI(){const t=this;return G`<img ${A(t.#qi)} 
            @load="${t.#Dn}"
            src="${t.src}" 
            alt="${t.alt}" 
            loading="${C(t.loading)}" 
            class="${t.#on}" 
            data-gs-class="${t.#on}">
          </img>`}get complete(){return this.#qi.value?.complete||!1}get#ms(){return this.dynamicStyle(this.#on).style}#_i(){const t=this,e=t.#Vi();return{width:t.width>0?t.width:void 0,height:t.height>0?t.height:void 0,filter:e.length>0?e.join(' '):''}}#Vi(){const t=this,e=[];return t.blur>0&&e.push(`blur(${t.blur}px)`),t.invert>0&&e.push(`invert(${t.invert})`),t.opacity>0&&e.push(`opacity(${t.opacity})`),t.contrast>0&&e.push(`contrast(${t.contrast})`),t.grayscale>0&&e.push(`grayscale(${t.grayscale})`),t.brightness>0&&e.push(`brightness(${t.brightness})`),t.hue>0&&e.push(`hue-rotate(${t.hue}deg)`),t.sepia>0&&e.push(`sepia(${t.sepia}%)`),t.saturate>0&&e.push(`saturate(${t.saturate}%)`),e}#Br(){const t=this,e=t.#ms;e.filter=t.#Vi().join(' ').trim(),e.width=t.width>0?`${t.width}px`:'',e.height=t.height>0?`${t.height}px`:''}#Dn(t){const e=t.target,s=this;e&&(s.height=s.height||e.height,s.width=s.width||e.width,s.emit('loaded',{width:e.width,height:e.height,element:e},!0))}static{this.define('gs-image')}}class GSLayoutElement extends GSElement{static properties={type:{...J}};static options={type:{},min:{type:Number},max:{type:Number},resizable:{type:Boolean},autofit:{type:Boolean},vPos:{attribute:'h-pos'},hPos:{attribute:'v-pos'}};constructor(){super(),this.autofit=!0}connectedCallback(){super.connectedCallback(),this.autofit&&i.root(this)===document.body&&document.body.classList.add('vh-100')}renderUI(){const t=this,e=t.#hn(t).map(((e,s,r)=>t.#Wi(e,s,r)));return G`<div  dir="${C(t.direction)}" class="d-flex flex-fill w-100 h-100 ${S(t.renderClass())}">${e}</div>`}renderClass(){const t=OrientationTypes.isHorizontal(this.type);return{...super.renderClass(),'flex-column':t}}#hn(t){return GSItem.collect(t).map((t=>r.proxify(t,GSLayoutElement.options)))}#Wi(t,e,s){const r=this,n=t.self.parentElement.type||'vertical',i=r.#hn(t.self).map(((t,e,s)=>r.#Wi(t,e,s))),a=t.min,o=t.max,l=t.template,c=r.#Yi(t),d=`#${c?.id}`!==l,u=t.type||n||'vertical',h=OrientationTypes.isHorizontal(u),p=i.length>0&&h?'flex-column':'',m=r.#Ji(t,p),g=r.#Ki(t,h),f=t.name?G`<slot name="${t.name}"></slot>`:'',y=G`<div class="d-flex ${S(m)}" style="${L(g)}">
            ${i}
            ${I(c)}
            ${l&&d?G`<gs-template url="${l}"></gs-template>`:''}
            ${f}
            </div>`;if(!t.resizable)return y;const b=e===s.length-1?'end':'start',v=r.#kn(a,o,n,b);return e===s.length-1?[v,y]:[y,v]}#Yi(t){const e=t.self.firstElementChild;return e instanceof HTMLTemplateElement?e:void 0}#Ji(t,e){const s=t.min>0||t.max>0||t.resizable?'':'flex-grow-1';let r=t.vPos,n=t.hPos;n=n?`align-items-${n}`:'',r=r?`justify-content-${r}`:'';return this.mapCSS(t.css,{[e]:e,[s]:s,[n]:n,[r]:r})}#Ki(t,e){const s=t.min,r=t.max,n={};return e?(n['min-height']=s>0?`${s}px`:void 0,n['max-height']=r>0?`${r}px`:void 0):(n['min-width']=s>0?`${s}px`:void 0,n['max-width']=r>0?`${r}px`:void 0),n}#kn(t,e,s,r){return G`<gs-splitter split="${s}" resize="${r}" min="${t}" max="${e}"></gs-splitter>`}static{this.define('gs-layout')}}class GSLinklement extends GSElement{static properties={autofocus:{type:Boolean},disabled:{type:Boolean,reflect:!0},size:{type:Number},text:{...z},color:{...z},url:{},ping:{},icon:{},title:{},tooltip:{},target:{}};#Nr=b();constructor(){super(),this.url='#'}firstUpdated(t){super.firstUpdated(t),this.autofocus&&!this.disabled&&this.focus()}renderUI(){const t=this;return G`
      <a ${A(t.#Nr)}  
        dir="${C(t.direction)}"
        title="${C(t.translate(t.tooltip))}" 
        href="${C(t.url)}" 
        ping="${C(t.ping)}" 
        target="${C(t.target)}"
        class="${S(t.renderClass())}" 
        ?disabled=${t.disabled} 
        @click="${t.#vr}">
        ${t.#Dr} ${t.#Ar}
        </a>`}renderClass(){const t=this;return{...super.renderClass(),active:t.active,[`fs-${t.size}`]:t.size>0,[`text-${t.text}`]:t.text,[`bg-${t.color}`]:t.color}}click(){this.#Nr.value?.click()}focus(){requestAnimationFrame((()=>this.#Nr.value?.focus()))}#vr(t){const s=this;if(s.notify(),'#'===s.url||e.isStringEmpty(s.url))return GSEvents.prevent(t),this.handle(t),!1}get#Ur(){return this.translate(this.title)}get#Dr(){return this.rtl?this.#Ur:this.#Fr}get#Ar(){return this.rtl?this.#Fr:this.#Ur}get#Fr(){return this.icon?G`<gs-icon name="${this.icon}" size="${this.size}"></gs-icon>`:G`<slot name="icon"></slot>`}static generate(t,e,s,r){const n=t;return G`<a class="${S(e)}"
        tabindex="0"    
        ${F(n,!0)}
        part="${C(n.part)}"
        tooltip="${C(n.tooltip)}"
        href="${C(n.url)}">        
        ${s||''}
        <slot>${n.title}</slot> 
        ${r||''}
    </a>`}static{this.define('gs-link')}}class GSListElement extends GSGroupElement{static properties={selectable:{reflect:!0,type:Boolean},cssItem:{attribute:'css-item'},data:{type:Array}};constructor(){super(),this.circular=!1,this.multiple=!1,this.data=this.settings}shouldUpdate(t){return this.data.length>0||this.query('gs-list-item')}renderClass(){return{...super.renderClass(),'list-group':!0}}renderWrappedUI(){return G`<slot>${this.renderItems()}</slot>`}reset(){this.items.forEach((t=>t.reset())),this.notify()}renderItems(){return this.data.map((t=>G`<gs-list-item generated
        .active="${!0===t.active}"
        .autofocus="${!0===t.autofocus}"
        .selectable="${!0===t.selectable}"
        .disabled="${C(!0===t.disabled)}" 
        icon="${C(t.icon)}" 
        href="${C(t.href)}" 
        target="${C(t.target)}" 
        title="${C(t.title)}"></gs-list-item>`))}isNavigable(t){return'GS-LIST-ITEM'===t?.tagName}get items(){return this.queryAll('gs-list-item')}static{this.define('gs-list')}}class GSListItemElement extends GSElement{static properties={href:{},target:{},title:{},icon:{},autofocus:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},active:{type:Boolean,reflect:!0},selectable:{type:Boolean,reflect:!0},generated:{state:!0,type:Boolean}};#Xi;#Nr=b();constructor(){super(),this.bind()}connectedCallback(){super.connectedCallback(),this.#Xi=this.active}shouldUpdate(t){return'GS-LIST'===this.owner?.tagName}renderUI(){const t=this;return t.mapCSS(t.#Qi,{}),G`<a  tabindex="0" ${A(t.#Nr)}
       href="${C(t.url)}" 
       target="${C(t.target)}" 
       class="${S(t.renderClass())}">
        ${t.#Zi()} 
        ${t.#ta()}
        <slot>${t.renderTemplate()}</slot>
      </a>`}renderClass(){const t=this,e={...super.renderClass(),'list-group-item':!0,'list-group-item-action':!0,[t.#ea]:!0,active:t.active};return t.active?t.mapCSS(t.#Qi,e):e}#Ri(){return this.icon?G`<gs-icon name="${this.icon}"></gs-icon>`:G`<slot name="icon"></slot>`}#Zi(){return this.rtl?this.translate(this.title):this.#Ri()}#ta(){return this.rtl?this.#Ri():this.translate(this.title)}toggle(){this.active=!this.active}reset(){this.active=this.autofocus||this.#Xi||!1}click(){this.#Nr.value?.click()}focus(){requestAnimationFrame((()=>this.#Nr.value?.focus()))}get url(){return this.href&&this.target?this.href:'#'}get owner(){return this.hasAttribute('generated')?i.component(this):this.parentElement}get#Qi(){return this.owner.dataset?.cssActive||''}get#ea(){return this.owner.dataset?.cssItem||''}static{this.define('gs-list-item')}}class GSNavItemElement extends GSElement{static properties={href:{},target:{},title:{},autofocus:{type:Boolean},disabled:{type:Boolean},active:{type:Boolean,reflect:!0},generated:{state:!0,type:Boolean}};#Nr=b();constructor(){super()}shouldUpdate(t){return'GS-NAV'===this.owner?.tagName}firstUpdated(t){super.firstUpdated(t),this.autofocus&&!this.disabled&&this.focus()}renderUI(){return G`<div class="nav-item ${S(this.renderClass())}">${this.#Or}</div>`}renderClass(){return this.mapCSS(this.#sa,super.renderClass())}reset(){this.active=this.autofocus||!1}click(){this.#Nr.value?.click()}focus(){requestAnimationFrame((()=>this.#Nr.value?.focus()))}get vertical(){return this.parentElement.vertical||!1}get placement(){return this.parentElement.placement}get owner(){return this.hasAttribute('generated')?i.component(this):this.parentElement}get url(){return this.href&&this.target?this.href:'#'}get#Ur(){return G`<slot>${this.translate(this.title)}</slot>`}get#Fr(){return this.icon?G`<gs-icon name="${this.icon}"></gs-icon>`:G`<slot name="icon"></slot>`}get#Dr(){return this.rtl?this.#Ur:this.#Fr}get#Ar(){return this.rtl?this.#Fr:this.#Ur}get#Or(){const t=this;let e=t.mapCSS(t.#ra,{});return t.active&&(e=t.mapCSS(t.#na+' '+t.#Qi,e)),G`<a tabindex="0" type="button" role="nav" 
     ${A(t.#Nr)}
     class="nav-link ${S(e)}"
     href="${C(t.url)}" 
     target="${C(t.target)}">
        ${t.#Dr} 
        ${t.#Ar}
      </a>`}get#sa(){return this.owner.dataset?.cssItem||''}get#ra(){return this.owner.dataset?.cssButton||''}get#Qi(){return this.owner.dataset?.cssActive||''}get#ia(){return W.indexOf(this.owner.type)}get#na(){const t=this.vertical,e=PlacementTypes.isBefore(this.placement);switch(this.#ia){case 1:return'rounded text-bg-primary';case 2:return t?e?'shadow-none border border-end-0':'shadow-none border border-start-0':'shadow-none border border-bottom-0';case 3:return'shadow-none border-bottom border-3 fw-medium';default:return''}}static{this.define('gs-nav-item')}}class GSNavElement extends GSGroupElement{static properties={type:Y,placement:K,vertical:{type:Boolean}};constructor(){super(),this.circular=!0,this.multiple=!1,this.type='pills',this.placement='start'}initData(){return this.settings(GSNavItemElement)}shouldUpdate(t){return this.data.length>0||this.query('gs-nav-item')}renderWrappedClass(){const t=this,e=PlacementTypes.isBefore(t.placement),s='tabs'===t.type;return{nav:!0,[`nav-${t.type}`]:t.type,'flex-column':t.vertical,'border-bottom-0':t.vertical,'border-end':s&&e&&t.vertical,'border-start':s&&!e&&t.vertical,[`justify-content-${t.placement}`]:!t.vertical}}renderItems(){return this.data.map((t=>G`<gs-nav-item generated
        .active="${!0===t.active}"
        .autofocus="${!0===t.autofocus}"
        .disabled="${C(!0===t.disabled)}" 
        icon="${C(t.icon)}" 
        href="${C(t.href)}" 
        target="${C(t.target)}" 
        title="${C(t.title)}"></gs-nav-item>`))}isNavigable(t){return'GS-NAV-ITEM'===t?.tagName}onFocused(t){t?.click()}static{this.define('gs-nav')}}class GSOverlayElement extends GSElement{static properties={color:{},target:{},autoremove:{type:Boolean},opened:{type:Boolean},opacity:{type:Number},padding:{type:Number},radius:{type:Number}};#on=GSID.id;constructor(){super(),this.color='rgb(0,0,0)',this.opacity=.7,this.padding=1,this.radius=6,this.dynamicStyle(this.#on)}connectedCallback(){super.connectedCallback();const t=this;t.attachEvent(window,'resize',(()=>t.requestUpdate()))}renderUI(){const t=this;if(!t.opened)return'';const e=t.#aa;return e?G`<svg xmlns="http://www.w3.org/2000/svg" xmlspce="preserve"
            xmlnsXlink="http://www.w3.org/1999/xlink"
            version="1.1" preserveAspectRatio="xMinYMin slice"
            viewvbox="0 0 ${window.innerWidth} ${window.innerHeight}"
            class="gs-overlay gs-overlay-animated ${t.#on}"
            @click="${t.reset.bind(t)}">
            ${e}
        </svg>`:''}async firstUpdated(t){this.dynamicStyle(this.#on,{fillRule:'evenodd',clipRule:'evenodd',strokeLinejoin:'round',strokeMiterlimit:'2',zIndex:'10000',position:'fixed',top:'0',left:'0',width:'100%',height:'100%'}),super.firstUpdated(t)}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}reset(){this.autoremove&&this.close()}get#aa(){const t=this,e=i.query(t.target);if(!t.target)return'';const s=t.#oa(e);return O`<path style="fill:${t.color};opacity:${t.opacity};pointerEvents:auto;cursor:auto;" d="${s}"></path>`}#oa(t){const e=window.innerWidth,s=window.innerHeight,r=t.getBoundingClientRect(),n=this.padding,i=this.radius,a=r.width+2*n,o=r.height+2*n,l=Math.min(i,a/2,o/2),c=Math.floor(Math.max(l,0)),d=a-2*c,u=o-2*c;return`M${e},0L0,0L0,${s}L${e},${s}L${e},0Z\n            M${r.x-n+c},${r.y-n} \n            h${d} \n            a${c},${c} 0 0 1 ${c},${c} \n            v${u} \n            a${c},${c} 0 0 1 -${c},${c} \n            h-${d} \n            a${c},${c} 0 0 1 -${c},-${c} \n            v-${u} \n            a${c},${c} 0 0 1 ${c},-${c} z`.replace(/[\t\n]/g,' ')}static{this.define('gs-overlay')}}class GSPagerElement extends GSElement{static properties={storage:{},size:{...et},first:{type:Boolean},last:{type:Boolean},next:{type:Boolean},previous:{type:Boolean},pages:{type:Number},labelFirst:{attribute:'label-first'},labelLast:{attribute:'label-last'},labelNext:{attribute:'label-next'},labelPrevious:{attribute:'label-previous'},cssItem:{attribute:'css-item'}};#ws=b();constructor(){super(),this.pages=5,this.labelFirst='&laquo;',this.labelLast='&raquo;',this.labelNext='&rsaquo;',this.labelPrevious='&lsaquo;'}renderUI(){const t=this,e=Math.floor((t.pages-1)/2),s=t.dataController?.page||0,r=s-e<1?1:s-e,n=s>0?s+e:t.pages;return G`<nav 
        dir="${C(t.direction)}"
        @click="${t.#vr}"
        @keyup="${t.#wr}"
        @keydown="${t.#A}">
        <ul ${A(t.#ws)} class="${S(t.renderClass())}">
        ${t.#Zi()}
        ${t.#la()}
        ${x(D(r,n+1),(e=>t.#ca(e,'','',e===s)))}
        ${t.#da()}
        ${t.#ua()}
        </ul></nav>`}renderClass(){const t=this,e=t.size?tt[t.size]||t.size:'';return{...super.renderClass(),pagination:!0,[`pagination-${e}`]:e}}updated(){const t=this.#ws.value;t&&this.isFocused&&t.querySelector('.active > a')?.focus()}onDataRead(){this.requestUpdate()}#Zi(){return this.first?this.#ca(this.labelFirst,'first','First page'):''}#ua(){return this.last?this.#ca(this.labelLast,'last','Last page'):''}#la(){return this.previous?this.#ca(this.labelPrevious,'previous','Previous page'):''}#da(){return this.next?this.#ca(this.labelNext,'next','Next page'):''}#ca(t='',s='',r='',n=!1){return t=e.decodeHTMLEntities(t),G`<li class="page-item ${n?'active':''}">
              <a class="page-link ${this.cssItem}" 
                 name="${s}" 
                 title="${this.translate(r)}" 
                 href="#">${this.translate(t)}</a>
            </li>`}#vr(t){const e=this.#ha(t,'a');if(!e)return;const s=this.dataController;if(!s)return;const r=e.name||e.text;switch(this.emit(r,e),r){case'first':return s.firstPage();case'last':return s.lastPage();case'next':return s.nextPage();case'previous':return s.prevPage()}s.page=r}#A(t){const e=this.#ha(t,'li');let s=null;switch(t.code){case'ArrowLeft':s=e?.previousElementSibling;break;case'ArrowRight':s=e?.nextElementSibling}s=s?.querySelector('a'),s?.focus()}#wr(t){'Space'===t.code&&this.#ha(t,'a')?.click()}#ha(t,e){const s=t.target.closest(e)||t.target;return s.tagName===e.toUpperCase()?s:void 0}static{this.define('gs-pagination')}}class GSPopupElement extends GSElement{static properties={placement:{...K},position:{...X},trigger:{},target:{},autoclose:{type:Boolean},autofocus:{type:Boolean},opened:{type:Boolean},hPos:{type:Number,attribute:'h-pos'},vPos:{type:Number,attribute:'v-pos'},wMin:{type:Number,attribute:'w-min'},wMax:{type:Number,attribute:'w-max'},hMin:{type:Number,attribute:'h-min'},hMax:{type:Number,attribute:'h-max'}};#pa=null;#ma=b();#on=GSID.id;constructor(){super(),this.autofocus=!0,this.autoclose=!0,this.trigger='click',this.position='absolute',this.placement='bottom',this.dynamicStyle(this.#on)}connectedCallback(){super.connectedCallback();const t=this;t.#ga(),t.attachEvent(window,'resize',t.close.bind(t)),t.on('mouseleave',t.#fa.bind(t))}firstUpdated(t){const e=this;requestAnimationFrame((()=>{e.#ya(),e.#Sa()})),super.firstUpdated()}updated(){const t=this;t.#Sa(),t.autofocus&&t.focus(),t.notify()}renderUI(){const t=this;return G`<div 
      ${A(t.#ma)}
      dir="${C(t.direction)}"
      class="fade ${S(t.renderClass())}"
      data-gs-class="${t.#on}"
      @keydown="${t.#A}">
      ${t.renderTemplate()}
      <slot></slot>
    </div>`}renderClass(){const t=this;return{...super.renderClass(),show:t.opened,[t.#on]:!0,[`position-${t.position}`]:t.position}}focus(){this.query('[tabindex], input, select, textarea, button, a',!0)?.focus()}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}popup(t=0,e=0){const s={top:'0px',left:'0px',translate:`${t}px ${e}px`};this.#ya(s)}#A(t){const e=this;if('Escape'===t.key)e.close()}#Sa(){const t=this;if(t.vPos||t.hPos){const e={top:'0px',left:'0px',translate:`${t.hPos}px ${t.vPos}px`},s=t.dynamicStyle(t.#on);Object.assign(s.style,e)}else if(t.target){let e=i.query(document.documentElement,t.target);e=e.renderRoot?.firstElementChild||e,GSPopper.popupFixed(t.placement,t.#ba,e)}}#ya(t={}){const e=this,s=e.dynamicStyle(e.#on);e.wMax&&(t['max-width']=`${e.wMax}px`),e.wMin&&(t['min-width']=`${e.wMin}px`),e.hMax&&(t['max-height']=`${e.hMax}px`),e.hMin&&(t['min-height']=`${e.hMin}px`),Object.assign(s.style,t)}#wn(t){const e=this;if(e.#pa=t,t instanceof Event&&(GSEvents.prevent(t),e.#pa=t.composedPath().filter((t=>!(t instanceof HTMLSlotElement))).shift()),e.placement)return GSPopper.popupFixed(e.placement,e.#ba,e.#pa),void(e.opened=!0);let s=t.clientX,r=t.clientY;const n=e.#ba.getBoundingClientRect(),i=s+n.width>window.innerWidth,a=r+n.height>window.innerHeight;return i&&(s=window.innerWidth-n.width),a&&(r=window.innerHeight-n.height),e.popup(s,r),!0}#ga(){const t=this,e=i.queryAll(document.documentElement,t.target);t.trigger.split(' ').forEach((s=>{e.forEach((e=>t.attachEvent(e,s,t.#wn.bind(t))))}))}#fa(t){this.autoclose&&this.close()}get#ba(){return this.#ma.value}static{this.define('gs-popup')}}class GSProgressElement extends GSElement{static properties={min:{reflect:!0,type:Number},max:{reflect:!0,type:Number},step:{reflect:!0,type:Number},value:{reflect:!0,type:Number},label:{reflect:!0}};constructor(){super(),this.min=0,this.step=1,this.max=100,this.value=0,this.styles={width:'0%'}}renderUI(){const t=this;t.#va();const e={min:t.min,max:t.max,step:t.step,value:t.value,percentage:t.percentage};return G`
    <div class="progress" @keydown="${t.#wa}" dir="${C(t.direction)}">
        <div class="progress-bar ${S(t.renderClass())}" 
             style=${L(t.styles)} 
             role="progressbar"
             tabindex="0">
             ${literalTemplate(t.label,e)}
        </div>
    </div>    
    `}willUpdate(t){super.willUpdate(changed);const e=this;if(t.has('value')){let s=e.step+t.get('value');s=e.#Br(s,s),t.set('value',s)}}updated(t){t.has('value')&&this.notify()}increase(t){const s=this;return t=e.isNumber(t)?t:s.step,s.value=s.#Br(s.value+t,s.value),!0}decrease(t){const s=this;return t=e.isNumber(t)?t:s.step,s.value=s.#Br(s.value-t,s.value),!0}get percentage(){return Math.trunc(this.value/this.max*100)}#va(){this.styles.width=`${this.percentage}%`}#Br(t,s=0){const r=this;return(t=e.asNum(t,e.asNum(s)))>r.max&&(t=r.max),t<r.min&&(t=r.min),t}#wa(t){const e=this;switch(t.code){case'ArrowUp':case'ArrowRight':return e.increase();case'ArrowLeft':case'ArrowDown':return e.decrease()}}static{this.define('gs-progress')}}class GSSpinnerElement extends GSElement{static styles=v`.spinner-border { border: var(--bs-spinner-border-width) solid currentcolor; border-right-color: transparent; }`;static properties={color:{...z,reflect:!0},small:{type:Boolean,reflect:!0},pulsar:{type:Boolean}};constructor(){super()}renderUI(){return G`<div class="${S(this.renderClass())}" role="status"></div>`}renderClass(){const t=this;return{...super.renderClass(),'spinner-border':!t.pulsar,'spinner-grow':t.pulsar,[`text-${t.color}`]:t.color,'spinner-border-sm':!t.pulsar&&t.small,'spinner-grow-sm':t.pulsar&&t.small}}static{this.define('gs-spinner')}}class GSSplitterElement extends GSElement{static properties={split:{reflect:!0},resize:{...K,hasChanged:notEmpty},size:{type:Number,hasChanged:numGT0}};#Ea=0;#on=GSID.id;#Gn=b();#$n;constructor(){super();const t=this;t.size=8,t.resize='start',t.dynamicStyle(t.#on),t.#cr(),t.#$n=new ElementMoveController(t)}firstUpdated(t){this.#$n.attach(this.#kn),super.firstUpdated(t)}renderUI(){const t=this;return G`<div ${A(t.#Gn)} 
            @dblclick="${t.#An}"
            data-gs-class="${t.#on}" 
            class="${S(t.renderClass())}">
            <slot></slot>
        </div>`}renderClass(){return{...super.renderClass(),splitter:!0,[this.#on]:!0}}updated(t){this.#Ga()}onStartMove(t){const e=this;e.#Ea=e.isVertical?t.clientX:t.clientY,e.#Ca(!0),GSEvents.send(globalThis,'gs-split',{start:!0})}onMouseMove(t){const e=this.isVertical?t.clientX:t.clientY;this.#xa(e)}onEndMove(t){this.#$a(),this.#Ca(!1),GSEvents.send(globalThis,'gs-split',{stop:!0})}get isVertical(){return'vertical'===this.split}get isHorizontal(){return!this.isVertical}get start(){return this.previousElementSibling}get end(){return this.nextElementSibling}get target(){const t=this;let e=t.#Ta?t.start:t.end;return e=e||t.parentElement,e=i.isGSElement(e)?e.self:e,e instanceof ShadowRoot&&(e=Array.from(e.children).filter((t=>!i.isStyleValue(t,'display','none'))).pop()),e}get#Ta(){const t=this.resize;return'start'===t||'top'===t}get#kn(){return this.#Gn.value}get#ka(){return this.target.style}get#Da(){const t='iframe,embed,portal';return[...i.queryAll(this.previousElementSibling,t),...i.queryAll(this.nextElementSibling,t)]}#cr(){const t=this;if(!t.id)return;const s=GSID.hashCode(location.origin+location.pathname);let r=localStorage.getItem(`gs-splitter-${s}-${t.id}`);r=e.asNum(r),t.#Br(r)}#$a(){const t=this;if(!t.id)return;const e=n.getComputedStyledMap(t.target),s=t.isVertical?e.get('width'):e.get('height');if(!s)return;const r=GSID.hashCode(location.origin+location.pathname);localStorage.setItem(`gs-splitter-${r}-${t.id}`,s)}#An(t){const s=this;let r=0,i='';s.isVertical?(i='width',r=s.target.clientWidth):(i='height',r=s.target.clientHeight);let a=n.styleValue(s.target,`min-${i}`),o=n.styleValue(s.target,`max-${i}`);a=e.asNum(a.value),o=e.asNum(o.value),r=(o-a)/2>r?o:a,s.#Br(r)}#Ca(t=!0){const e=this,s='pe-none';t?e.#Da.filter((t=>!i.hasClass(t,'pe-none'))).forEach((t=>{i.toggleClass(t,s,!0),t.dataset.gsSplitter=!0})):e.#Da.filter((t=>t.dataset.gsSplitter)).forEach((t=>{i.toggleClass(t,s,!1),delete t.dataset.gsSplitter}))}#xa(t){const e=this;requestAnimationFrame((()=>{e.isVertical?e.#Aa(t):e.#Ma(t)}))}#Aa(t){const e=this,s=e.target,r=e.#Ta?1:-1;let n=(t-e.#Ea)*r;n+=s.clientWidth,n=n<0?0:n,e.#ka.width=n+'px',e.#Ea=t}#Ma(t){const e=this,s=e.target,r=e.#Ta?1:-1;let n=(t-e.#Ea)*r;n+=s.clientHeight,n=n<0?0:n,e.#ka.height=n+'px',e.#Ea=t}#Br(t=0){if(t<=0)return;const e=this;e.#Ea=t,e.isVertical?e.#ka.width=t+'px':e.#ka.height=t+'px'}#Ga(){const t=this,e=t.isVertical?'width':'height',s=t.isVertical?'height':'width',r=t.isVertical?'w-resize':'n-resize',n={[e]:`${t.size}px`,[s]:'100%','border-width':'1px',cursor:r,'border-color':'darkgray','border-style':'solid','background-color':'lightgray'};t.dynamicStyle(t.#on,n)}static{this.define('gs-splitter')}}class GSTabItemElement extends GSNavItemElement{static properties={name:{}};shouldUpdate(t){return'GS-TAB-GROUP'===this.owner?.tagName}static{this.define('gs-tab')}}class GSTabPanelElement extends GSElement{static properties={name:{},template:{},active:{type:Boolean}};constructor(){super()}shouldUpdate(t){return'GS-TAB-GROUP'===i.component(this)?.tagName}renderUI(){return G`<div  dir="${C(me.direction)}" 
      class="${S(this.renderClass())}">
      <slot>
      ${this.template?G`<gs-template url="${this.template}"></gs-template>`:''}
      </slot></div>`}renderClass(){return{...super.renderClass(),'tab-pane':!0,'d-none':!this.active}}static{this.define('gs-tab-panel')}}class GSTabGroupElement extends GSNavElement{static properties={panelCSS:{attribute:'css-panel'},tabCSS:{attribute:'css-tab'}};initData(){return this.settings(GSTabItemElement)}shouldUpdate(t){return this.data.length>0||this.query('gs-tab')}renderClass(){return{...super.renderClass(),'d-flex':this.vertical}}renderWrappedUI(){const t=this,e=PlacementTypes.isAfter(t.placement),s=[super.renderWrappedUI('tabs'),G`<div class="tab-content flex-fill ${t.panelCSS}"  dir="${C(t.direction)}">
        <slot name="panels">${t.renderPanels()}</slot>
      </div>
      <slot class="d-none"></slot>`];return e?s.reverse():s}renderWrappedClass(){const t=super.renderWrappedClass();return this.mapCSS(this.tabCSS,t)}renderItems(){return this.data.map((t=>(t.name||(t.name=GSID.id),G`<gs-tab generated
        .active="${!0===t.active}"
        .autofocus="${t.autofocus||t.active}"
        .disabled="${C(!0===t.disabled)}" 
        icon="${C(t.icon)}"    
        title="${C(t.title)}"
        name="${t.name}"></gs-tab>`)))}renderPanels(){return this.data.map((t=>(t.name||(t.name=GSID.id),G`<gs-tab-panel name="${t.name}" 
        template="${C(t.template)}"></gs-tab-panel>`)))}isNavigable(t){return'GS-TAB'===t?.tagName}onSelected(t){t?.click();const e=this.#La(t);e&&(e.active=!0)}onDeselected(t){const e=this.#La(t);e&&(e.active=!1)}#La(t){const e=Symbol.for('gs-element'),s=this.data?.length>0;let r=t[e]||this.query(`gs-tab-panel[name="${t.name}"]`,s);return t[e]||(t[e]=r),r}static{this.define('gs-tab-group')}}class GSTableElement extends GSElement{static#Oa=['sort-up','arrow-down-up','sort-down-alt'];static styles=v`th:hover { opacity: 50% !important; }`;static CELLS={align:{},width:{},width:{},css:{},title:{},filter:{type:Boolean},filterType:{attribute:'filter-type'},cssFilter:{attribute:'css-filter'},cssHeader:{attribute:'css-header'},...GSData.PROPERTIES};static properties={storage:{},color:{...z},colorHead:{...z,attribute:'head-color'},colorSelect:{...z,attribute:'select-color'},stripedColumn:{type:Boolean,attribute:'striped-column'},cssFilter:{attribute:'css-filter'},cssHeader:{attribute:'css-header'},divider:{type:Boolean},striped:{type:Boolean},hover:{type:Boolean},small:{type:Boolean},grid:{type:Boolean},borderless:{type:Boolean},sort:{type:Array,state:!0},columns:{type:Array,state:!0},selections:{type:Array,state:!0},key:{type:Number,state:!0},data:{type:Array},datacolumn:{type:Boolean},multisort:{type:Boolean},multiselect:{type:Boolean},protected:{type:Boolean},selectable:{type:Boolean},sortable:{type:Boolean}};#Fn=[];#Ia=[];constructor(){super(),this.headColor='secondary',this.colorSelect='info',this.columns=[],this.selections=[],this.data=[],this.sort=[],this.key=0}get selected(){const t=this;return t.data.filter(((e,s)=>t.selectable.includes(s)))}set search(t){const e=this;if(e.storage)return e.dataController.search=t}connectedCallback(){const t=this;t.#Fn=GSItem.proxify(t,GSTableElement.CELLS),0===t.columns.length&&(t.columns=t.#Fn.map((t=>t.name))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.data=[],this.selections=[]}renderClass(){const t=this;return{...super.renderClass(),'user-select-none':t.protected,table:!0,'table-sm':t.small,'table-hover':t.hover,'table-striped':t.striped,'table-bordered':t.grid,'table-borderless':t.borderless,'table-striped-columns':t.stripedColumns,[`table-${t.color}`]:t.color}}firstUpdated(){this.dataController?.read()}willUpdate(t){const e=this;e.columns.length!=e.sort.length&&(e.sort=Array(e.columns.length).fill(0)),e.datacolumn&&e.data.length>0&&(e.columns=e.data[0],e.data=e.data.slice(1)),t.has('multiselect')&&!e.multiselect&&(e.selections=[]),t.has('selectable')&&!e.selectable&&(e.selections=[]),(t.has('sortable')||t.has('multisort'))&&(e.sort=Array(e.columns.length).fill(0),e.#Ia=[]),super.willUpdate(t)}renderUI(){const t=this,e=t.colorHead?`table-${t.colorHead}`:'';return G`
      <table  
       dir="${C(t.direction)}"
       @keyup="${t.#wr}"
       @keydown="${t.#A}"
       class="${S(t.renderClass())}">
        <thead class="${C(e)}">
          ${t.#Na()}
          <tr @click=${t.#Ra}>
            ${t.columns.map(((e,s)=>t.#Ua(e,s)))}
          </tr>
        </thead>
        <tbody @click=${t.#Fa} class="${t.divider?'table-group-divider':''}">
          ${t.data.map(((e,s)=>t.#Pa(e,s)))}
        </tbody>
      </table>
      <slot name="extra"></slot>
    `}onDataRead(t){const e=this;e.data=t,e.selections=[],t.length>0&&e.#_&&e.#Fn.forEach(((t,s)=>{t.columnType=e.#Ba(s)}))}clear(){this.#Ha.forEach((t=>t.value='')),this.dataController?.filter([])}valueAt(t,e){return this.data.length>t?this.data[t][e]:void 0}get#Ha(){return this.queryAll('th > input',!0)}get#_(){return this.#Fn.filter((t=>t.filter)).length>0}#Ba(t){const e=this,s=e.#Fn[t],r=e.valueAt(0,e.columns[t]);s.type=s.type||'text';const n={string:'text',currency:'number',timestamp:'datetime-local'}[s.type],i=r instanceof Date?'date':typeof r;return r?i:n||s.type}#Na(){const t=this;return t.#_?G`<tr>${t.columns.map(((e,s)=>t.#za(e,s)))}</tr>`:''}#za(t,s){const r=this,n=r.#Fn[s];if(!n?.filter)return G`<th></th>`;let i='';const a='date'===n.columnType;a&&(i=n.format||e.getDateFormat(n.locale||e.locale));const o=`${e.normalize(r.cssFilter)} ${e.normalize(t.cssFilter)}`;return G`<th .index=${s} @change="${r.#ja}">
        <input is="gs-ext-input" .index=${s}
            class="form-control ${o}" 
            mask="${C(i)}"
            name="${t}" 
            type="${n.filterType||n.columnType}"
            data-slots="${C(a?'DMY':void 0)}">
        </th>`}#Ua(t,s){const r=this,n=r.#Fn[s],i=`${e.normalize(r.cssHeader)} ${e.normalize(t.cssHeader)}`;return G`
      <th .index=${s} class="${i}" width="${C(r.#Fn[s]?.width)}">
        <div class="d-flex justify-content-between"> 
          <span>${n?.title||t}</span>
          ${r.#Ri(s)}
        </div>
      </th>
    `}#Ri(t){const e=this;if(!e.sortable)return'';const s=GSTableElement.#Oa,r=e.sort[t],n=e.multisort?e.#Ia.indexOf(t)+1:'';return G`<gs-icon name="${s[r+1]}" super="${n>0?n:''}"></gs-icon>`}#Pa(t,e){const s=this;Array.isArray(t)||(t=s.columns.map((e=>t[e]))),t=t.map(((t,e)=>s.#Fn[e]?GSData.format(s.#Fn[e],t):t));const r=s.colorSelect&&s.selections.includes(e)?`table-${s.colorSelect}`:'';return G`
        <tr .index=${e} class="${r}" tabindex="0">
          ${t.map(((t,e)=>G`<td class="text-${s.#Fn[e]?.align}"><span>${t}</span></td>`))}
        </tr>
      `}#ja(t){const e=this,s=e.#Ha.map((t=>{if(!t.value)return;const s='date'===t.type?t.valueAsDate:t.value,r=e.#Fn[t.index];return{name:t.name,value:s,locale:r?.locale}})).filter((t=>t?.value));e.dataController.filter(s)}#Ra(t){const e=this;if(!e.sortable)return;const s='GS-ICON'===t.target.tagName?t.target:t.target.closest('gs-icon'),r=t.target.closest('th');if(!s||!r)return;const n=void 0!==r.index?r.index:i.getElementIndex(r),a=e.sort[n],o=1===a?-1:a+1;e.multisort?0==o?e.#Ia=e.#Ia.filter((t=>t!=n)):e.#Ia.includes(n)||e.#Ia.push(n):(e.sort=Array(e.columns.length).fill(0),e.#Ia=[n]),e.sort[n]=o;const l=e.#qa(e.sort,e.#Ia);if(e.storage)return e.dataController.sort(l);e.data=GSData.sortData(e.data,l),e.emit('sort')}#qa(t,e){const s=this;0===t.filter((t=>t)).length&&((t=Array(s.columns.length).fill(0))[s.key]=1);const r=s.data[0]&&!Array.isArray(s.data[0]),n=t.map(((t,n)=>t?{name:r?s.columns[n]:void 0,col:n,ord:t,idx:e.indexOf(n)}:null)).filter((t=>t));return t=GSData.sortData(n,[{name:'idx',ord:1}])}#Fa(t){const e=this;if(!e.selectable)return;const s='TR'===t.target.tagName?t.target:t.target.closest('tr');if(!s)return;const r=e.selections.includes(s.index);e.multiselect?r?e.selections=e.selections.filter((t=>t!=s.index)):(e.selections.push(s.index),e.requestUpdate()):e.selections=r?[]:[s.index],e.emit('select')}#A(t){if(!t.target.matches('tbody tr'))return;let e=null;switch(t.code){case'ArrowUp':e=t.target.previousElementSibling;break;case'ArrowDown':e=t.target.nextElementSibling}e&&(e.focus(),this.emit('focus',e))}#wr(t){'Space'===t.code&&this.#Fa(t)}static{this.define('gs-table')}}class GSTagElement extends GSElement{static#_a=['Enter','NumpadEnter','Comma','Space'];static styles=v`
        .tag-input:focus-visible {
            outline:none;
        }
        .tag .btn-close {
            background: none;
        }            
        .tag .btn-close::after {
            content: 'x';
        }`;static properties={placeholder:{},max:{type:Number},size:{type:Number},name:{},data:{type:Array},values:{type:Array,reflect:!0,converter:st},appendable:{type:Boolean},color:{...z},closeColor:{...z,attribute:'close-color'},cssClose:{attribute:'css-close'},cssTag:{attribute:'css-tag'}};static options={name:{}};#Va=b();#wi=b();constructor(){super(),this.name='',this.data=this.#hn,this.closeColor='light',this.color='primary'}renderUI(){const t=this,e=t.#Wa();return G`
        <div  dir="${C(t.direction)}" 
            class="${S(t.renderClass())}"
            @click="${t.#vr.bind(t)}">
            ${e}
            <input type="text" 
            @keydown="${t.#A.bind(t)}"
            @input="${t.#Ya.bind(t)}"
            ${A(t.#wi)}
            name="${t.name}" 
            list="${t.name}_list"
            class="form-control d-flex w-auto flex-grow-1" 
            placeholder="${t.#Ja}">
            <datalist ${A(t.#Va)} id="${t.name}_list">${t.#Ka()}</datalist>
        </div>`}renderClass(){return{...super.renderClass(),'d-flex':!0,'flex-wrap':!0,'align-items-center':!0,'gap-1 ':!0}}get#Ja(){const t=this,e=t.max>0?`Add max ${t.max} tags...`:'';return t.placeholder?t.placeholder:e}#Ya(t){t.inputType||this.#Xa(t)}#A(t){GSTagElement.#_a.includes(t.code)&&this.#Xa(t)}#vr(t){t.srcElement===t.target&&t.target instanceof HTMLButtonElement&&this.#Qa(t.target.parentElement)}#Xa(t){GSEvents.prevent(t);this.#Za(this.#_s)}get#to(){const t=this;return t.max>0&&t.data.length>=t.max}get#$s(){return Array.from(this.#eo.children)}get#_s(){const t=this;return t.#$s.filter((e=>e.value.toLowerCase()===t.#Ha.value.toLowerCase())).pop()}#Za(t){const e=this,s=e.#Ha;e.#to||!t&&0==e.appendable?s.value='':e.values.includes(s.value)||(e.values.push(s.value),s.value='',e.requestUpdate())}#Qa(t){if(!t)return;const e=t.dataset.value;this.values=this.values.filter((t=>t!=e))}#Wa(){const t=this;return t.values.map((e=>t.#so(e)))}#so(t=''){if(!t)return'';const e=this;return e.size>0&&e.size,G`<div class="${S(e.#ro)}" data-value="${t}">${t}<button type="button" class="${S(e.#no)}"></button></div>`}get#ro(){const t=this,e={badge:!0,tag:!0,[`fs-${t.size}`]:t.size>0,[`bg-${t.color}`]:!!t.color};return t.mapCSS(t.cssTag,e)}get#no(){const t=this,e={'btn-close':!0,'ms-1':!0,[`bg-${t.closeColor}`]:!!t.closeColor};return t.mapCSS(t.cssClose,e)}#Ka(){return this.data.map((t=>G`<option value="${t}">`))}#kr(t){return GSItem.collect(t).map((t=>r.proxify(t)))}get#hn(){return this.#kr(this).map((t=>t.name)).filter((t=>!!t))}get#Ha(){return this.#wi.value}get#eo(){return this.#Va.value}static{this.define('gs-tag')}}class GSTextElement extends GSElement{#io='';constructor(){super(),this.flat=!0,this.#io=this.innerText,this.innerText=''}renderUI(){return this.translate(this.#io)}static{this.define('gs-text')}}class GSTooltipElement extends GSElement{static properties={placement:{...K},title:{},target:{},opened:{type:Boolean},local:{type:Boolean}};#ao=b();#ma=b();#on=GSID.id;#oo=GSID.id;constructor(){super(),this.placement='top',this.dynamicStyle(this.#on),this.dynamicStyle(this.#oo)}firstUpdated(t){super.connectedCallback();this.#lo(),this.#Sa(),super.firstUpdated(t)}willUpdate(t){super.willUpdate(t),this.#Sa()}renderUI(){const t=this;return G`
    <div ${A(t.#ma)} 
      dir="${C(t.direction)}"
      role="tooltip"
      data-popper-placement="${t.placement}"
      data-gs-class="${t.#on}"
      class="${S(t.renderClass())}">
      <div ${A(t.#ao)} 
          class="tooltip-arrow ${t.#oo}" 
          data-gs-class="${t.#oo}">
      </div>
      <div class="tooltip-inner">${t.translate(t.title)}</div>
    </div>`}renderClass(){return{...super.renderClass(),tooltip:!0,'bs-tooltip-auto':!0,fade:!0,show:this.opened,[this.#on]:!0}}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}#lo(){const t=this;t.attachEvent(t.#ws,'mouseenter',t.open.bind(t)),t.attachEvent(t.#ws,'mouseleave',t.close.bind(t))}#Sa(){const t=this,e=t.#co,s=t.#ba;s&&(t.opened?GSPopper.popupFixed(t.placement,s,t.#ws,e):t.dynamicStyle(t.#on,{top:'-1000px',left:'-1000px'}))}get#ws(){const t=this;switch(t.target){case'@parent':return this.parentElement;case'@previous':return this.previousElementSibling;case'@next':return this.nextElementSibling;default:return t.local?t.#do:t.#uo}}get#do(){const t=i.root(this);return i.query(t,this.target)}get#uo(){return i.query(document.body,this.target)}get#co(){return this.#ao.value}get#ba(){return this.#ma.value}static{this.define('gs-tooltip')}}class GSTemplateElement extends GSElement{static properties={url:{reflect:!0,hasChanged:notEmpty}};constructor(){super()}renderUI(){return G`${this.renderTemplate()}`}static{this.define('gs-template')}}class CopySelectController{#be;#ho;#po;constructor(t){const e=this;e.#be=t,e.#ho=e.#vr.bind(e),e.#po=e.#mo.bind(e),t.addController(e)}hostConnected(){const t=this;t.#be.on('click',t.#ho),t.#be.on('copy',t.#po)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be.off('click',t.#ho),t.#be.off('copy',t.#po)}#mo(){e.writeToClipboard(this.#be.value)}#vr(t){const s=this;s.#be.autocopy&&e.writeToClipboard(s.#be.value),s.#be.autoselect&&s.#be.select()}}class MaskController{static#go='.^$*+?()[]{}|';static#fo={x:/[0-9a-fA-F]/g,n:/[0-9]/g,y:/[0-9]/g,m:/[0-9]/g,d:/[0-9]/g,h:/[0-9]/g,s:/[0-9]/g,'.':/[0-9]/g,'#':/[a-zA-Z]/g,'*':/[0-9a-zA-Z]/g,_:/./g};#yo=!1;#So;#bo;#Dr;#vo;#wo;#be;#Eo;#Go;#Co;#xo;constructor(t){const e=this;e.#be=t,e.#Eo=e.#A.bind(e),e.#Go=e.#$o.bind(e),e.#Co=e.#To.bind(e),e.#xo=e.#Hi.bind(e),t.addController(e)}hostConnected(){const t=this;t.initRules(),t.#be.on('keydown',t.#Eo),t.#be.on('input',t.#Go),t.#be.on('focus',t.#Co),t.#be.on('blur',t.#xo)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be.off('keydown',t.#Eo),t.#be.off('input',t.#Go),t.#be.off('focus',t.#Co),t.#be.off('blur',t.#xo)}initRules(){const t=this;var e;t.pattern&&(t.#So=t.#ko(),t.#bo=(e=0,Array.from(t.pattern,((s,r)=>t.#So.has(s)?e=r+1:e))),t.#Dr=[...t.pattern].findIndex((e=>t.#So.has(e))),t.#vo=t.#Do(),t.#Ao())}validate(){const t=this;t.setCustomValidity(''),t.#wo.lastIndex=0;const e=!t.required||t.#wo.test(t.raw),s=e&&t.checkValidity();return e||t.setCustomValidity('Data did not match pattern!'),s||t.reportValidity(),s}checkValidity(){return this.#be.checkValidity()}setCustomValidity(t){return this.#be.setCustomValidity(t)}reportValidity(){return this.#be.reportValidity()}setSelectionRange(t,e){this.#be.setSelectionRange(t,e)}select(){this.#be.select()}get value(){const[t,e]=this.#Mo();return this.raw.substring(0,e)}set value(t){this.#be.value=t}get raw(){return this.#be.raw}get required(){return this.#be.required}get pattern(){return this.#be.mask}get dataset(){return this.#be.dataset}get selectionStart(){return this.#be.selectionStart}get selectionEnd(){return this.#be.selectionEnd}get autoselect(){return this.#be.autoselect}#A(t){this.#yo='Backspace'===t.key}#To(t){const e=this;e.#$o(t),e.autoselect&&e.select()}#Hi(t){this.validate()}#ko(){const t=this;let e=t.dataset.slots;if(!e){const s=MaskController.#fo;e=[...new Set(t.pattern)].filter((t=>s[t.toLowerCase()])).join('')}return new Set(e||'_')}#Do(){const t=this;let e=t.dataset.accept;if(!e){const s=MaskController.#fo;if(e=[...new Set(t.pattern)].map((t=>s[t.toLowerCase()])).filter((t=>t)),e.length>0){const t={};return e.forEach((e=>t[e.src]=e)),e=Object.values(t),1===e.length?e.pop():e}}return new RegExp(e||'\\d','g')}#Mo(){const t=this,e=t.raw;return[t.selectionStart,t.selectionEnd].map((s=>(s=t.#Lo(e.slice(0,s)).findIndex((e=>t.#So.has(e))))<0?t.#bo[t.#bo.length-1]:t.#yo?t.#bo[s-1]||t.#Dr:s))}#$o(t){const e=this,[s,r]=e.#Mo();e.value=e.#Lo(e.#be.raw).join``,e.setSelectionRange(s,r),e.#yo=!1}#Lo(t){const e=this;return t=t.match(e.#vo)||[],Array.from(e.pattern,(s=>(t[0]===s||e.#So.has(s))&&t.shift()||s))}#Ao(){const t=this;if(0===t.pattern.length)return;const e=t.pattern.split(''),s=['^'],r=MaskController.#fo,n=MaskController.#go;let i=0;e.forEach(((t,a)=>{const o=r[t.toLowerCase()];return o?(e[a]=new RegExp(o,'g'),0===s.length?s.push(o.source):s[s.length-1]===o.source?i++:(i>0&&s.push(`{${++i}}`),i=0,void s.push(o.source))):(i>0&&s.push(`{${++i}}`),i=0,n.includes(t)&&s.push('\\'),s.push(t))})),i>0&&s.push(`{${++i}}`),s.push('$'),t.#wo=new RegExp(s.join(''),'g')}}class NumberController{#be;#Go;constructor(t){const e=this;e.#be=t,e.#Go=e.#Ya.bind(e),t.addController(e)}hostConnected(){this.#be.on('input',this.#Go)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be.off('input',t.#Go)}get maxLength(){return e.asNum(this.#be.maxLength,0)}get value(){return this.#be.value}set value(t){this.#be.value=t}get type(){return this.#be?.type}#Ya(t){if('number'===this.type)return this.#Oo(t)}#Oo(t){const e=this;e.maxLength>0&&e.value.length>e.maxLength&&(e.value=e.value.substring(0,e.maxLength))}}class PasswordController{#be;#Io=!1;#No;#Eo;constructor(t){const e=this;e.#be=t,e.#No=e.#wr.bind(e),e.#Eo=e.#A.bind(e),t.addController(e)}hostConnected(){const t=this;t.#be.on('keyup',t.#No),t.#be.on('keydown',t.#Eo)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be.off('keyup',t.#No),t.#be.off('keydown',t.#Eo)}get reveal(){return this.#be.hasAttribute('reveal')}get type(){return this.#be?.type}set type(t){this.#be&&(this.#be.type=t)}#Ro(t){return this.reveal&&'Shift'===t.key&&t.altKey&&t.shiftKey&&'password'===this.type}#wr(t){const e=this;'Shift'===t.key&&e.#Io&&(e.type='password')}#A(t){const e=this;e.#Ro(t)&&(e.#Io=!0,e.type='text')}}class TextController{#be;#Go;constructor(t){const e=this;e.#be=t,e.#Go=e.#Ya.bind(e),t.addController(e)}hostConnected(){this.#be.on('input',this.#Go)}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be.off('input',t.#Go)}get value(){return this.#be.value}set value(t){this.#be.value=t}get type(){return this.#be?.type}#Ya(t){const e=this;'text'===e.type&&(e.value=e.#Uo(e.value))}#Uo(t=''){const s=n.styleValue(this.#be,'text-transform');return s&&(t=e.textTransform(s.value,t)),t}}class ListController{#be;#Fo;#Po;#xo;constructor(t){const e=this;e.#be=t,e.#xo=e.#Hi.bind(e),e.#Fo=e.#Bo.bind(e),e.#Po=e.#Ho.bind(e),t.addController(e)}hostConnected(){const t=this;t.list&&(t.#be.on('blur',t.#xo),t.#be.on('change',t.#Po),t.#be.attachEvent(t.filter,'change',t.#Fo))}hostDisconnected(){const t=this;t.#be.removeController(t),t.#be.off('blur',t.#xo),t.#be.off('change',t.#Po),t.#be.removeEvent(t.filter,'change',t.#Fo)}hostUpdated(){this.#be.hasUpdated||this.#Ho()}get value(){return this.#be.value}set value(t){this.#be.value=t}get list(){const t=this;if(t.#be.list)return t.#be.list;const e=r.get(t.#be,'list');return i.getByID(t.#be.owner,e)}get filter(){const t=r.get(this.#be,'data-filter');return i.getByID(this.#be.owner,t)}get owner(){return this.#be.owner}get strict(){return r.get(this.#be,'strict','')}#Hi(t){this.#zo()||GSEvents.send(this.#be,'strict',{ok:!1,source:t})}#Ho(t){const e=this,s=e.owner;let n=i.query(e.list,`option[value="${e.value}"]`),a=!1;n||(n=e.list?.querySelector('option'),a=!0);const o=n?.dataset||{};Object.entries(o).forEach((t=>{const n=a?'':t[1],o=t[0];if(r.set(e.#be,`data-${o}`,t[1]),'id'===o||'group'===o)return;const l=`[data-${o}]:not([data-${o}=""]`;Array.from(i.queryAll(s,l)).filter((t=>'OPTION'!==t.tagName)).filter((t=>t!==e)).filter((t=>0===r.get(t,'list').length)).forEach((t=>e.#jo(t,o,n)))}))}#Bo(t){const e=this,s=e.list;e.value='';const n=r.get(e.filter,'data-group');i.queryAll(s,'option').forEach((t=>r.set(t,'disabled',!0)));const a=n?`option[data-group="${n}"]`:`option[data-id="${t.target.value}"]`;i.queryAll(s,a).forEach((t=>r.set(t,'disabled')))}#jo(t,e='',s=''){const n=r.get(t,`data-${e}`,'').split(/[,;;]/),a=s.length>0&&n.includes(s);i.isFormElement(t)||i.isButtonElement(t)?r.toggle(t,'disabled',!a):a?i.show(t):i.hide(t);const o=i.closest(t,'form');i.formElements(o).forEach((t=>r.set(t,'data-ignore',!a||null)))}#zo(){const t=this,e=t.list;if(!e)return!0;if(!t.strict)return!0;if(!e.querySelector('option'))return!0;return null!=e.querySelector(`option[value="${t.value}"]`)}}const nt={attribute:!0,reflect:!1,type:String,converter:w,hasChanged:T},it=Symbol(),at=Symbol(),ot=Symbol(),lt=Symbol(),ct=Symbol(),prepareFn=function(){const t=this;if(Object.getOwnPropertySymbols(t).includes(ot))return;const e=Object.getPrototypeOf(t);'function'==typeof e[lt]&&e[lt](),t[ot]=new Map(e[ot])},attributeNameForProperty=(t,e)=>{const s=e.attribute;return!1===s?void 0:'string'==typeof s?s:'string'==typeof t?t.toLowerCase():void 0};class ReactiveInput extends HTMLInputElement{static properties={};static[ct]=!1;#qo=void 0;#_o=void 0;#gs=void 0;#Vo=void 0;#Wo=void 0;#Yo=void 0;#Jo=!1;#Ko=!1;static get observedAttributes(){Object.defineProperty(ReactiveInput.__proto__,at,{value:prepareFn});const t=this;return t[lt](),t[it]&&[...t[it].keys()]}static addInitializer(t){this[at](),this.initializers??=[].push(t)}static[lt](){const t=this;if(!0!==t[ct]){if(t[ct]=!0,t[at](),Object.hasOwn(t,'properties')){const e=t.properties,s=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const r of s)t.createProperty(r,e[r])}t[it]=new Map;for(const[e,s]of t[ot]){const r=attributeNameForProperty(e,s);void 0!==r&&t[it].set(r,e)}}}static createProperty(t,e){const s=this;if(e.state&&(e.attribute=!1),s[at](),s[ot].set(t,e),!e.noAccessor){const r=Symbol(),n=s.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(s.prototype,t,n)}}static getPropertyDescriptor(t,e,s){const{get:r,set:n}=Object.getOwnPropertyDescriptor(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){const i=this,a=r?.call(i);n?.call(i,e),i.requestUpdate(t,a,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this[ot].get(t)??nt}constructor(){super(),this.#Un()}connectedCallback(){this.enableUpdating(!0),this.#gs?.forEach((t=>t.hostConnected?.()))}disconnectedCallback(){this.#gs?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,s){this.#Xo(t,s)}get hasUpdated(){return this.#Jo}get isUpdatePending(){return this.#Ko}get renderRoot(){return this}addController(t){(this.#gs??=new Set).add(t),this.isConnected&&t.hostConnected?.()}removeController(t){this.#gs?.delete(t)}createRenderRoot(){return this}enableUpdating(t){}firstUpdated(t){}updated(t){}getUpdateComplete(){return this.#Vo}scheduleUpdate(){return this.performUpdate()}shouldUpdate(t){return!0}willUpdate(t){}update(t){const e=this;e.#qo&&=e.#qo.forEach((t=>e.#Qo(t,this[t]))),e.#Zo()}get updateComplete(){return this.getUpdateComplete()}requestUpdate(t,e,s){const r=this;if(void 0!==t){s??=r.constructor.getPropertyOptions(t);if(!(s.hasChanged??T)(r[t],e))return;r.#tl(t,e,s)}!1===r.#Ko&&(r.#Vo=r.#el())}performUpdate(){const t=this;if(!t.#Ko)return;if(!t.#Jo){if(t.#_o){for(const[e,s]of t.#_o)this[e]=s;t.#_o=void 0}const e=t.constructor[ot];if(e.size>0)for(const[s,r]of e)!0!==r.wrapped||t.#Wo.has(s)||void 0===t[s]||t.#tl(s,this[s],r)}let e=!1;const s=t.#Wo;try{e=t.shouldUpdate(s),e?(t.willUpdate(s),t.#gs?.forEach((t=>t.hostUpdate?.())),t.update(s)):t.#Zo()}catch(s){throw e=!1,t.#Zo(),s}e&&t.#sl(s)}#sl(t){const e=this;e.#gs?.forEach((t=>t.hostUpdated?.())),e.#Jo||(e.#Jo=!0,e.firstUpdated(t)),e.updated(t)}#Zo(){this.#Wo=new Map,this.#Ko=!1}async#el(){const t=this;t.#Ko=!0;try{await t.#Vo}catch(t){Promise.reject(t)}const e=t.scheduleUpdate();return null!=e&&await e,!t.#Ko}#tl(t,e,s){const r=this;r.#Wo.has(t)||r.#Wo.set(t,e),!0===s.reflect&&r.#Yo!==t&&(r.#qo??=new Set).add(t)}#Xo(t,e){const s=this,r=s.constructor,n=r[it].get(t);if(void 0!==n&&s.#Yo!==n){const t=r.getPropertyOptions(n),i='function'==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:w;s.#Yo=n,s[n]=i?.fromAttribute(e,t.type),s.#Yo=null}}#Qo(t,e){const s=this,r=s.constructor[ot],n=r?.get(t),i=attributeNameForProperty(t,n);if(void 0!==i&&!0===n.reflect){const r=void 0!==n.converter?.toAttribute?n.converter:w,a=r?.toAttribute(e,n.type);s.#Yo=t,null==a?s.removeAttribute(i):s.setAttribute(i,a),s.#Yo=null}}#rl(){const t=this,e=new Map,s=t.constructor[ot];for(const r of s.keys())Object.hasOwn(t,r)&&(e.set(r,t[r]),delete t[r]);e.size>0&&(t.#_o=e)}#Un(){const t=this;t.#Vo=new Promise((e=>t.enableUpdating=e)),t.#Wo=new Map,t.#rl(),t.requestUpdate()}}class GSComboExt extends HTMLSelectElement{static{customElements.define('gs-ext-select',GSComboExt,{extends:'select'}),Object.seal(GSComboExt)}constructor(){super()}static get observedAttributes(){return['data']}attributeChangedCallback(t,e,s){'data'===t&&this.load(s)}connectedCallback(){GSID.setIf(this)}validate(){const t=this.checkValidity();return t||this.reportValidity(),t}get owner(){const t=i.root(this);return i.unwrap(t)}async load(t=''){if(!t)return;const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}apply(t){if(!Array.isArray(t))return!1;const e=this;return queueMicrotask((()=>{const s=[];t.forEach((t=>{s.push(e.#nl(t))})),i.setHTML(e,s.join('\n'))})),!0}#nl(t){const e=['<option'];return Object.entries(t).forEach((t=>{const s=t[0],r=t[1];if('text'!==s)return'selected'===s?e.push(s):void e.push(`${s}="${r}"`)})),e.push('>'),e.push(t.text),e.push('</option>'),e.join(' ')}}class GSDataListExt extends HTMLDataListElement{static{customElements.define('gs-ext-datalist',GSDataListExt,{extends:'datalist'}),Object.seal(GSDataListExt)}constructor(){super()}static get observedAttributes(){return['data']}attributeChangedCallback(t,e,s){'data'===t&&this.load(s)}connectedCallback(){GSID.setIf(this)}get owner(){const t=i.root(this);return i.unwrap(t)}async load(t=''){if(!t)return;const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}apply(t){if(!Array.isArray(t))return!1;const e=this;return queueMicrotask((()=>{const s=[];t.forEach((t=>{s.push(e.#nl(t))})),i.setHTML(e,s.join('\n'))})),!0}#nl(t){const s=['<option'];return e.isString(t)&&(t={value:t}),Object.entries(t).forEach((t=>{const e=t[0],r=t[1];if('text'!==e)return'selected'===e?s.push(e):void s.push(`${e}="${r}"`)})),s.push(t.text),s.push('>'),s.join(' ')}}class GSInputElement extends ReactiveInput{static properties={autocopy:{type:Boolean},autofocus:{type:Boolean},autoselect:{type:Boolean},reveal:{type:Boolean},mask:{reflect:!0}};#hr;#pr;#il;#al;#ol;#ll;#cl;#dl;constructor(){super(),this.#il=new CopySelectController(this)}connectedCallback(){super.connectedCallback(),this.isBindable&&this.binded()}disconnectedCallback(){GSEvents.deattachListeners(this),super.disconnectedCallback()}willUpdate(t){switch(super.willUpdate(t),t.has('mask')&&this.mask&&(this.placeholder=this.mask,this.#al??=new MaskController(this),this.#al.initRules()),this.list&&(this.#dl??=new ListController(this)),this.type){case'text':this.#cl??=new TextController(this);break;case'password':this.#ol??=new PasswordController(this);break;case'number':this.#ll??=new NumberController(this)}}firstUpdated(t){super.firstUpdated(t),this.autofocus&&this.focus()}binded(){this.#pr??=new AttributeController(this)}handle(t){this.#pr?.handle(t)}dynamicStyle(t,e){return this.#hr??=new AdoptedController(me),this.#hr.style(t,e)}getByID(t=''){return i.getByID(this,t)}closest(t=''){return i.closest(this,t)}notify(t=!0,e=!1,s){this.emit('notify',s,t,e,!0)}emit(t,e='',s=!1,r=!1,n=!1){return GSEvents.send(this,t,e,s,r,n)}waitEvent(t='',e=0){return GSEvents.wait(this,t,e)}once(t,e){return this.listen(t,e,!0)}on(t,e,s=!1){return this.listen(t,e,s)}off(t,e){return this.unlisten(t,e)}prevent(t){GSEvents.prevent(t)}listen(t,e,s=!1){return this.attachEvent(this,t,e,s)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',s,r=!1){return GSEvents.attach(this,t,e,s,r)}removeEvent(t,e='',s){return GSEvents.remove(this,t,e,s)}get owner(){const t=i.root(this);return i.unwrap(t)}get raw(){return super.value}get value(){return this.#al?this.#al.value:super.value}set value(t){super.value=t}get isBindable(){return this.dataset.gsTarget}get isFocused(){return this===document.activeElement}get tag(){return this.tagName.toLowerCase()}get clazzName(){return this.constructor.name}get definitions(){const t=[...i.inheritance(this)].map((t=>t.constructor?.properties)).filter((t=>t));return t.push(this.constructor?.properties),GSData.mergeObjects(t)}static allProperties(t){const e=[...i.inheritance(t)].map((t=>t.properties)).filter((t=>t));return e.push(t.constructor?.properties||t.properties),GSData.mergeObjects(e)}static define(t,e){customElements.get(t)||customElements.define(t,e||this,{extends:'input'})}static{GSInputElement.define('gs-ext-input',GSInputElement)}}class GSBreadcrumbElement extends GSElement{static properties={storage:{},data:{type:Array},color:{...z},divider:{reflect:!0},spacing:{reflect:!0,type:Number}};constructor(){super();const t=this;t.spacing=1,t.divider='chevron-right',t.#ul()}willUpdate(t){super.willUpdate(t),this.#ul()}renderUI(){const t=this;return G`<nav part="base" class="breadcrumb" @click="${t.#vr}" dir="${C(t.direction)}"><slot>
      ${M(t.data||[],(t=>t),(e=>G`
        <gs-breadcrumb-item  
        href="${e.href}"
        color="${e.color}"
        .data=${e}     
        .active=${e.active}
        .divider="${e.divider||t.divider}"
        .spacing="${e.spacing||t.spacing}">
          ${e.$text}
        </gs-breadcrumb-item>
      `))}
    </slot></nav>`}onDataRead(t){this.data=t}#ul(){const t=this;t.queryAll('gs-breadcrumb-item').forEach((e=>{e.divider=t.divider,e.spacing=t.spacing,e.color=t.color}))}#vr(t){const e=t.target.closest('gs-bradcrumb-item');e?.handle(t)}static{this.define('gs-breadcrumb')}}class GSBreadcrumbItemElement extends GSElement{static properties={href:{},color:{...z},data:{state:!0,type:Object},active:{reflect:!0,type:Boolean},divider:{state:!0,type:Boolean},spacing:{state:!0,type:Number}};constructor(){super(),this.data={}}renderUI(){const t=this;return G`<div part="base" class="breadcrumb-item ${S(t.renderClass())}"  dir="${C(t.direction)}">
        <span part="prefix"><slot name="prefix"></slot></span>        
        ${t.#hl}
        <span part="suffix"><slot name="suffix"></slot></span>
        <span part="separator"><slot name="separator">${t.#pl}</slot></span>
      </div>`}renderClass(){return{...super.renderClass(),active:this.active}}get#hl(){const t=this;return t.active?G`<slot></slot>`:(t.data.url=t.data.url||t.href,t.data.part='label',GSLinklement.generate(t.data,{}))}get#pl(){const t=this;return t.nextElementSibling&&t.divider?G`<gs-icon size="7" color="${t.color}" css="mx-${t.spacing}" name="${t.divider}"></gs-icon>`:''}handle(t){GSAttributeHandler.process(this.query('a',!0),t)}static{this.define('gs-breadcrumb-item')}}class GSTimeFormat extends GSElement{static properties={interval:{reflect:!0,type:Number},locale:{reflect:!0}};#r=0;constructor(){super(),this.interval=1,this.locale=e.locale}connectedCallback(){super.connectedCallback(),this.start()}disconnectedCallback(){this.stop(),super.disconnectedCallback()}renderUI(){return(new Date).toLocaleTimeString(this.locale)}start(){const t=this;t.interval>0&&0===t.#r?t.#r=setInterval(t.#Br.bind(t),1e3*t.interval):t.requestUpdate()}stop(){clearInterval(this.#r),this.#r=0}#Br(){requestAnimationFrame((()=>this.requestUpdate()))}static{this.define('gs-time-format')}}class GSDateFormat extends GSElement{static properties={value:{},locale:{},format:{}};constructor(){super(),this.locale=navigator.locale,this.value=new Date}renderUI(){return this.result}get result(){const t=this,e=t.date;return t.format?e.format(t.format):new Intl.DateTimeFormat(t.locale,t.dataset).format(e)}get date(){const t=Date.parse(this.value||new Date),e=new GSDate(t);return e.locale=this.locale,e}static{this.define('gs-date-format')}}class GSYearFormat extends GSElement{static properties={offset:{type:Number}};constructor(){super(),this.offset=0}renderUI(){return this.value}get value(){return this.current+this.offset}get current(){return(new Date).getFullYear()}static{this.define('gs-year-format')}}class GSCurrencyFormat extends GSElement{static properties={value:{},locale:{},currency:{}};renderUI(){return this.format}get#$s(){return Object.apply(this.dataset,{style:'currency',currency:this.currency})}get format(){const t=this;return new Intl.NumberFormat(t.locale,t.#$s).format(t.value)}static{this.define('gs-currency-format')}}class GSStepStyle{static{GSCacheStyles.adopt(GSStepStyle.style)}static get style(){return'\n        .step .step-icon-wrap {\n            height: 80px;\n        }\n        \n        .step .step-icon-wrap::before,\n        .step .step-icon-wrap::after {\n            display: block;\n            position: absolute;\n            top: 50%;\n            width: 50%;\n            height: 3px;\n            margin-top: -1px;\n            background-color: var(--bs-gray-200);\n            content: \'\';\n            z-index: 1\n        }\n        \n        .step .step-icon-wrap::before {\n            left: 0\n        }\n        \n        .step .step-icon-wrap::after {\n            right: 0\n        }\n        \n        .step .step-icon {\n            width: 80px;\n            height: 80px;\n            line-height: 81px;\n            z-index: 5\n        }\n                \n        .step:first-child .step-icon-wrap::before {\n            display: none\n        }\n        \n        .step:last-child .step-icon-wrap::after {\n            display: none\n        }\n                \n        @media (max-width: 576px) {\n            .flex-sm-nowrap .step .step-icon-wrap::before,\n            .flex-sm-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 768px) {\n            .flex-md-nowrap .step .step-icon-wrap::before,\n            .flex-md-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 991px) {\n            .flex-lg-nowrap .step .step-icon-wrap::before,\n            .flex-lg-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 1200px) {\n            .flex-xl-nowrap .step .step-icon-wrap::before,\n            .flex-xl-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }        \n        '}}class GSStepElement extends GSElement{static INACTIVE='text-bg-light';static SELECTED='text-bg-primary';static COMPLETED='text-bg-secondary';static ICON_CSS='border rounded-circle fs-1';static TITLE_CSS='mb-0 fs-6 mt-3 fw-bold';static properties={title:{},icon:{},color:{},iconCSS:{attribute:'icon-css'},titleCSS:{attribute:'title-css'}};constructor(){super();const t=GSStepElement;this.icon=t.INACTIVE,this.iconCSS=t.ICON_CSS,this.titleCSS=t.TITLE_CSS}renderUI(){const t=this;return G`
        <div class="step d-block w-100 text-center mb-4"  dir="${C(t.direction)}">
            <div class="step-icon-wrap d-block w-100 text-center position-relative">
                <div class="step-icon position-relative d-inline-block ${t.iconCSS} ${t.color||GSStepElement.INACTIVE}">
                    ${t.#Ri()}
                </div>
            </div>
            <div class="step-title ${t.titleCSS}">${t.translate(t.title)}</div>
        </div>        
        `}#Ri(){return this.icon?G`<gs-icon name="${this.icon}"></gs-icon>`:G`<slot name="icon"></slot>`}static{this.define('gs-step')}}class GSStepsElement extends GSElement{static CSS='steps d-flex flex-wrap flex-sm-nowrap justify-content-between padding-top-2x padding-bottom-1x';#ml=-1;constructor(){super()}shouldUpdate(t){return this.steps.length>0}renderUI(){return G`<div class="${S(this.renderClass())}"  dir="${C(this.direction)}"><slot></slot></div>`}renderClass(){return this.mapCSS(GSStepsElement.CSS,super.renderClass())}get steps(){return this.queryAll('gs-step')}get length(){return this.steps.length}get index(){return this.#ml}set index(t=0){t<0||t>=this.length||(this.#ml=t)}get current(){return this.steps[this.#ml]}get isFirst(){return 0===this.#ml}get isLast(){return this.#ml===this.length-1}next(){const t=this;if(0!==t.steps.length)return!t.isLast&&(t.#ml>-1&&(t.current.color=GSStepElement.COMPLETED),t.index++,t.current.color=GSStepElement.SELECTED,t.current)}previous(){const t=this;if(0!==t.steps.length)return!t.isFirst&&(t.current.color=GSStepElement.INACTIVE,t.index--,t.current.color=GSStepElement.SELECTED,t.current)}reset(){const t=this;t.steps.forEach((t=>t.color=GSStepElement.INACTIVE)),requestAnimationFrame((()=>{t.#ml=0,t.current.color=GSStepElement.SELECTED}))}static{this.define('gs-steps',GSStepsElement)}}class GSNotificationElement extends GSElement{static TOP_START='position-fixed top-0 start-0';static TOP_CENTER='position-fixed top-0 start-50 translate-middle-x';static TOP_END='position-fixed top-0 end-0';static MIDDLE_START='position-fixed top-50 start-0 translate-middle-y';static MIDDLE_CENTER='position-fixed top-50 start-50 translate-middle';static MIDDLE_END='position-fixed top-50 end-0 translate-middle-y';static BOTTOM_START='position-fixed bottom-0 start-0';static BOTTOM_CENTER='position-fixed bottom-0 start-50 translate-middle-x';static BOTTOM_END='position-fixed bottom-0 end-0';static DEFAULT=GSNotificationElement.BOTTOM_END;static properties={position:{reflect:!0},native:{reflect:!0,type:Boolean}};#Mt=new Set;constructor(){super(),this.css='p-3'}renderUI(){return G`<div  dir="${C(this.direction)}"
            class="toast-container z-10k ${S(this.renderClass())}">
            <slot></slot>
        </div>`}renderClass(){return this.mapCSS(this.#gl,super.renderClass())}get#gl(){const t=GSNotificationElement,e=this.position||t.DEFAULT;return e.indexOf('_')>0&&t[e]?t[e]:e}clear(){this.queryAll('gs-toast').forEach((t=>t.dismiss()))}info(t,e,s,r,n,i){return this.display(t,e,'text-bg-info',s,r,n,i)}success(t,e,s,r,n,i){return this.display(t,e,'text-bg-success',s,r,n,i)}warn(t,e,s,r,n,i){return this.display(t,e,'text-bg-warning',s,r,n,i)}danger(t,e,s,r,n,i){return this.display(t,e,'text-bg-danger',s,r,n,i)}primary(t,e,s,r,n,i){return this.display(t,e,'text-bg-primary',s,r,n,i)}secondary(t,e,s,r,n,i){return this.display(t,e,'text-bg-secondary',s,r,n,i)}dark(t,e,s,r,n,i){return this.display(t,e,'text-bg-dark',s,r,n,i)}light(t,e,s,r,n,i){return this.display(t,e,'text-bg-light',s,r,n,i)}async display(t='',e='',s='',r=!1,n=2,i=.5,a){if(!e)return;const o=this;if(o.native){let s=await GSNotificationElement.requestPermission();if(s&&(s=o.#fl(t,e,n,i,a)),s)return s}return o.#yl(t,e,s,r,n,i)}#yl(t,e,s,r,n,i){const a=this,o=`<gs-toast css="${s}"  opened ${r?'closable':''} timeout="${n}"  delay="${i}" message="${e}" title="${t}" locale="${a.locale}" ></gs-toast>`,l=GSDOM.parse(o,!0);return requestAnimationFrame((async()=>{await a.#jt(i);const t=a.#Sl;t!==a&&GSAttr.set(t,'class',`toast-container ${a.css} ${a.position}`),t.appendChild(l)})),l}async#fl(t,e,s,r,n={}){const i=this;await i.#jt(r),n.body=n.body||e;const a=new Notification(t,n);i.#Mt.add(a);const o=i.#bl.bind({notification:a,owner:i});return a.addEventListener('close',o),s>0&&(a.iid=setTimeout(o,1e3*s)),a}get#Sl(){const t=customElements.get('gs-dialog')?.top;return t&&t.isConnected&&GSDOM.query(t,'.toast-container')||this}async#jt(t=0){GSUtil.isNumber(t)&&t>0&&await GSUtil.timeout(1e3*t)}#bl(){const t=this;t.notification.close(),t.owner.#Mt.delete(t.notification),t.notification.iid&&clearTimeout(t.notification.iid)}clear(){const t=this;Array.from(t.querySelectorAll('gs-toast')).forEach((t=>t.remove())),t.#Mt.forEach((t=>t.close())),t.#Mt.clear()}static get isNativeSupported(){return'Notification'in self}static get isGranted(){return'granted'===Notification.permission}static async requestPermission(){const t=GSNotificationElement;return!!t.isNativeSupported&&(t.isGranted||await Notification.requestPermission(),t.isGranted)}static{this.define('gs-notification')}}class GSToastElement extends GSElement{static properties={closable:{reflect:!0,type:Boolean},opened:{reflect:!0,type:Boolean},message:{reflect:!0},title:{reflect:!0},delay:{reflect:!0,type:Number},timeout:{reflect:!0,type:Number}};#vl=!1;constructor(){super();const t=this;t.timeout=2,t.delay=2,t.auto=!0}shouldUpdate(t){const e=this,s=t.has('opened');return e.delay>0&&e.opened&&s&&(e.#vl=!0,e.#wl()),e.#El&&!e.#vl}async#wl(){const t=this;await e.timeout(1e3*t.delay),t.#vl=!1,t.requestUpdate()}async updated(t){const s=this;s.timeout>0&&(await e.timeout(1e3*s.timeout),s.opened=!1,await e.timeout(i.SPEED),s.remove())}renderUI(){const t=this;return t.title?t.#Gl():t.#Cl()}#Gl(){const t=this;return G`
        <div dir="${C(t.direction)}"
            class="mt-1 mb-1 toast fade ${S(t.renderClass())}">
            <div class="toast-header">
                ${t.translate(t.title)}
                <slot name="header"></slot>
                ${t.closable?t.#Or:''}
            </div>
            <div class="toast-body">
                ${t.translate(t.message)}
                <slot name="body"></slot>
            </div>
        </div>            
        `}#Cl(){const t=this;return G`
        <div class="mt-1 mb-1 toast fade ${S(t.renderClass())}">
          <div class="d-flex">
              <div class="toast-body">
              ${t.translate(t.message)}
              <slot name="body"></slot>
              </div>
              ${t.closable?t.#Or:''}
          </div>
        </div>            
        `}renderClass(){return{...super.renderClass(),show:this.opened}}dismiss(){this.opened=!1}get#Or(){return G`<button type="button" class="btn-close me-2 m-auto" @click="${this.dismiss}"></button>`}get#El(){return this.parentElement instanceof GSNotificationElement}static{this.define('gs-toast')}}class AbstractTreeController{#be;#xl;constructor(t){this.#be=t,t.addController(this)}hostConnected(){const t=this;t.#xl=t.#be.node,t.#$l(t)}hostDisconnected(){const t=this;t.#Tl(t),t.#be.removeController(t)}hostUpdate(){const t=this,e=t.#xl;t.#xl=t.#be.node,e!=t.#xl&&(t.#Tl(t),t.#$l(t))}#$l(t){this.#be.node?.addController?.(t)}#Tl(t){this.#xl?.removeController?.(t)}host(t){return t[Symbol.for('gs-element')]||this.#be}match(t){const e=this.host(t);return e?.node===t}get store(){return this.#be.dataController?.store}requestUpdate(t){this.match(t)&&this.host(t).requestUpdate()}}class TreeController extends AbstractTreeController{constructor(t){super(t)}#kl(t,e=!1){const s=this.host(t);s&&(s.loading=e)}onLoad(t){this.#kl(t,!0)}onRefresh(t){this.requestUpdate(t)}onAppend(t,e){this.#kl(t),this.requestUpdate(t.root)}onInsert(t,e){this.#kl(t),this.requestUpdate(t.root)}onExpand(t){const e=this.store;e?e.onExpand(t):this.requestUpdate(t)}onCollapse(t){this.requestUpdate(t)}onFocusChanged(t){this.requestUpdate(t)}onSelectionChanged(t,e){this.requestUpdate(t)}onRemove(t){this.match(t)&&this.host(t).remove()}}class TreeNode extends Tree{#Dl=!1;#Al=!1;#Vs=!1;#_s=!1;#Ml=void 0;#Ll=void 0;#gs=void 0;constructor(t,e=t,s=null,r=0){super(t,e,s,r),(!0===e?.select||this.multi&&s?.selected)&&(this.selected=!0),!0===e?.focus&&(this.focused=!0),!0===e?.open&&(this.opened=!0)}addController(t){const e=this.root;(e.#gs??=new Set).add(t)}removeController(t){this.root.#gs?.delete(t)}get multi(){return!0===this.root.#Dl}set multi(t){this.root.#Dl=!0===t}get visible(){return this.level<0||this.parent?.opened}get opened(){return this.level<0||(this.isLeaf?this.parent?.opened:this.#Al)}set opened(t){(t=!0===t)?this.expand():this.collapse()}get focused(){return this.#Vs}set focused(t){t=!0===t;const e=this.root,s=this.#Vs!=t,r=e.focusedNode();e.#Ml=void 0,this.#Vs=t,r&&r!==this&&(r.focused=!1),t&&(e.#Ml=this),s&&e.#gs?.forEach((t=>t.onFocusChanged?.(this)))}get selected(){return this.#_s}set selected(t){t=!0===t;const e=this.root,s=e.selectedNode(),r=this.#_s!=t;this.#_s=t,t&&(s&&s!==this&&!e.multi&&(s.selected=!1),e.#Ll=this),r&&(e.#gs?.forEach((t=>t.onSelectionChanged?.(this,s))),e.multi&&e.#gs?.forEach((t=>t.onSelectionChanged?.(this.parent,s))))}get isPartialySelected(){return this.selected&&this.hasChildren&&this.nodes.length>this.nodes.filter((t=>t.selected)).length}selectAll(){const t=this.root;if(!t.multi)return this.deselectAll(),void(this.selected=!0);this.#Ol(!0),t.#Ll=this,t.#gs?.forEach((e=>e.onSelectAll?.(t)))}deselectAll(){const t=this.root;this.#Ol(!1),t.#Ll=void 0,t.#gs?.forEach((e=>e.onDeselectAll?.(t)))}focusedNode(){const t=this.root.#Ml;return t?.focused?t:void 0}selectedNode(){const t=this.root.#Ll;return t?.selected?t:void 0}selectedNodes(){const t=this.root;if(!t.multi){const e=t.selectedNode();return e?.selected?[e]:[]}const e=[];for(let s of t.walk())s.selected&&e.push(s);return e}refresh(t){t=t||this.root,t.#gs?.forEach((t=>t.onRefresh?.(this)))}loading(t){t=t||this.root,t.#gs?.forEach((t=>t.onLoad?.(this)))}expandAll(t){t=t||this.root;for(let e of this.walk())e.isLeaf||e.expand(t)}collapseAll(t){t=t||this.root;for(let e of this.walk())e.isLeaf||e.collapse(t)}expand(t){const e=this;t=t||e.root,e.parent?.opened||e.parent?.expand(t);const s=!e.opened;e.#Al=!0,s&&e.#Il(t),e.nodes?.forEach((e=>e.refresh(t)))}collapse(t){const e=this;t=t||e.root;const s=e.#Al||e.parent.#Al;e.nodes?.filter((t=>t.opened||t.parent.opened)).forEach((e=>e.collapse(t))),e.#Al=!1,s&&e.#Nl(t)}select(t=!0){this.selected=!0===t}#Il(t){t.#gs?.forEach((t=>t.onExpand?.(this)))}#Nl(t){t.#gs?.forEach((t=>t.onCollapse?.(this)))}release(){this.#_s&&(this.selected=!1),super.release()}append(t,e=t){const s=this,r=super.append(t,e);return r&&s.root.#gs?.forEach((t=>t.onAppend?.(s,r))),r}insert(t,e,s=e){const r=this,n=super.insert(t,e,s);return n&&r.root.#gs?.forEach((t=>t.onInsert?.(r,n))),n}remove(){const t=super.remove();return t&&this.root.#gs?.forEach((e=>e.onInsert?.(t))),t}#Ol(t=!1){t=!0===t;for(let e of this.walk())e.selected=t}fromJSON(t){return t&&TreeNode.from(this,t),this}toJSON(){if(this.level<0)return this.nodes?.map((t=>t.toJSON()))||{};const t=Object.assign({key:this.key,opened:this.#Al,focused:this.#Vs,selected:this.#_s,items:void 0},this.value);return t.items=this.nodes?.map((t=>t.toJSON())),t}static get root(){return new TreeNode(null,null,null,-1)}static from(t,e){const s=e||t,r=t instanceof TreeNode;if(Array.isArray(s))return r?(s.forEach((e=>TreeNode.from(t,e))),t):TreeNode.from(TreeNode.root,s);const{items:n,...i}=s;i.leaf=!Array.isArray(n);const a=new TreeNode(i.key,i,e?t:void 0);return n&&TreeNode.from(a,n),r&&t.append(a),a}}class GSTreeItemElement extends GSElement{static properties={loading:{state:!0},node:{type:Object,hasChanged:t=>t instanceof TreeNode}};constructor(){super(),this.flat=!0}shouldUpdate(t){return!!this.node}willUpdate(t){super.willUpdate(t),t.has('node')&&(this.node[Symbol.for('gs-element')]=this)}updated(){this.focused&&this.query('a')?.focus(),this.dataset.visible=this.visible}renderUI(){const t=this,e=t.node,s=t.value||{};s.tooltip=t.translate(s.tooltip),s.title=t.translate(s.title);const r=t.loading?t.#Rl(e.level):t.#Ri(e.level);return GSLinklement.generate(s,t.renderClass(),r)}renderClass(){const t=this,e={'list-group-item':!0,'list-group-item-action':!0,'user-select-none  ':!0,'border-0':!t.#Ul,'gs-hide':!t.visible};return t.mapCSS(t.#Fl,t.mapCSS(t.#Pl,e,t.selected&&!t.multiselect),t.focused)}toggle(){this.opened?this.close():this.open()}open(){this.#Bl(!0),this.focus()}close(){this.#Bl(!1)}focus(t=!0){t&&super.focus(),this.focused=1==t}select(t=!0){this.selected=1==t}handle(t){GSAttributeHandler.process(this.querySelector('a'),t)}get isLeaf(){return this.node?.isLeaf}get isFolder(){return!this.isLeaf}get key(){return this.node?.key}get value(){return this.node?.value||{}}get level(){return this.node?.level||-1}get focused(){return this.node?.focused}get visible(){const t=this.parent;return t?.opened||-1===t?.level}get parent(){return this.node?.parent}get parentItem(){const t=this.parent?.[Symbol.for('gs-element')];return t instanceof GSTreeItemElement?t:void 0}set focused(t){t=!0===t,this.node.focused=t}get selected(){return this.node?.selected}set selected(t){t=!0===t;const e=this;e.isFolder&&e.owner.leaf&&(t=!1),e.multiselect?t?e.node.selectAll():e.node.deselectAll():e.node.selected=t}get opened(){return this.node?.opened}set opened(t){this.#Bl(!0===t)}get owner(){return this.closest('gs-tree')}get multiselect(){return this.owner.multiselect}get#Fl(){return this.owner.cssFocus||'focus-ring'}get#Pl(){return this.owner.cssSelected||'active'}get#Ti(){return this.owner.cssCheck||''}get#Hl(){return this.owner.checkColor||'secondary'}get#zl(){return this.owner.checkColorSelected||'primary'}get#Ul(){return!0===this.value?.border||!0===this.owner.border}get#Fr(){const t=this,e=t.node,s=t.value,r=t.owner;let n=s.icon||r.itemIcon;return e.isFolder&&(n=e.opened?s.openIcon||r.openIcon:s.closeIcon||r.closeIcon),n}#jl(t){return G`<gs-indent size="${t}"></gs-indent>`}#Rl(t){return G`${this.#jl(t)}<gs-spinner small></gs-spinner>`}#Ri(t){return G`${this.#jl(t)}${this.#ql()}<gs-icon size="5" name="${this.#Fr}"></gs-icon>`}#ql(){const t=this;if(!t.multiselect)return'';const e=t.selected?t.#zl:t.#Hl,s=t.node.isPartialySelected?'dash-square-fill':t.selected?'check-square-fill':'square';return G`<gs-icon size="6" data-type="state" 
                css="me-1 text-${e} ${t.#Ti}"
                name="${s}"></gs-icon>`}#Bl(t=!1){const e=this;e.node?.isFolder&&(e.node.opened=t)}static{this.define('gs-tree-item')}}class GSTreeElement extends GSElement{static styles=v`            
    :focus-visible {
      outline: none !important;
    }  
    .list-group-item {
      cursor: pointer;
    }`;static shared={itemIcon:{attribute:'icon-item'},closeIcon:{attribute:'icon-close'},openIcon:{attribute:'icon-open'},cssCheck:{attribute:'css-check'},cssFocus:{attribute:'css-focus'},cssSelected:{attribute:'css-selected'},checkColor:{attribute:'check-color',...z},checkColorSelected:{attribute:'check-color-selected',...z}};static properties={storage:{},data:{type:Object},node:{type:Object,hasChanged:t=>t instanceof TreeNode},border:{type:Boolean,reflect:!0},guide:{type:Boolean,reflect:!0},leaf:{type:Boolean,reflect:!0},multiselect:{type:Boolean,reflect:!0},circular:{type:Boolean,reflect:!0},...GSTreeElement.shared};static options={...GSTreeElement.shared,css:{},icon:{},color:{},title:{},tooltip:{},opened:{type:Boolean},selected:{type:Boolean}};#te=!1;#_l=b();#ji=null;constructor(){super();const t=this;t.leaf=!1,t.multiselect=!1,t.data=i.toJson(t,!0,!0).items,t.node=new TreeNode(null,{'#tagName':this.tagName},null,-1),t.itemIcon='file-earmark',t.closeIcon='folder',t.openIcon='folder2-open',t.cssSelected='active',t.cssFocus='focus-ring',t.node[Symbol.for('gs-element')]=t,t.#ji=new TreeController(t)}renderUI(){const t=this;return G`<div  dir="${C(t.direction)}"
          class="treeview ${S(t.renderClass())}"          
          @click="${t.#vr}"
          @keydown="${t.#A}"
          @keyup="${t.#wr}">
          <div class="list-group" ${A(t.#_l)}>
          ${M(t.node.walk(t.node,!1,!1),(t=>t.key),(t=>G`
            <gs-tree-item .node="${t}"></gs-tree-item>
          `))}
          </div>    
        </div>`}shouldUpdate(t){const e=this;return t.has('data')&&e.data&&!e.#te&&(e.#te=!0,queueMicrotask((()=>{e.node.clear(),e.node.fromJSON(e.data),e.#te=!1,e.requestUpdate()}))),!!this.node}willUpdate(t){super.willUpdate(t),t.has('multiselect')&&!this.multiselect&&this.node?.deselectAll(),this.node.multi=this.multiselect}onDataRead(t){t instanceof TreeNode?t.root!==this.node&&(this.node=t):this.data=t}next(t=!1){const e=this;let s=e.nextItem;return!s&e.circular&&(s=e.#Dr),s?.visible&&(s.focus(),t&&e.focused?.isFolder&&e.focused.open()),e.focused}previous(t=!1){const e=this;let s=e.previousItem;return!s&e.circular&&(s=e.#$r),s?.visible&&(s.focus(),s.isFolder&&t&&s.close()),e.focused}expandAll(){this.node?.expandAll()}collapseAll(){this.node?.collapseAll()}open(t){this.focused?.open()}close(t){this.focused?.close()}clear(){this.node?.clear(),this.requestUpdate()}reload(){this.clear(),this.dataController?.read()}get selected(){return this.#be(this.node.selectedNode())}get focused(){return this.#be(this.node.focusedNode())}get previousItem(){return this.focused?.node.find((t=>t?.visible),!0,!0)?.[Symbol.for('gs-element')]}get nextItem(){return this.focused?.node.find((t=>t?.visible),!0)?.[Symbol.for('gs-element')]}get#Mt(){return this.#_l.value}get#Dr(){return this.#Mt.firstElementChild}get#$r(){return this.#Mt.lastElementChild}#be(t){return t?.[Symbol.for('gs-element')]}#vr(t){const e='state'===t.target.closest('gs-icon')?.dataset.type,s=t.target.closest('gs-tree-item');if(!s.node)return;const r=this;r.multiselect?e&&s.select(!s.selected):s.select(!0);const n=r.multiselect&&!e||!r.multiselect;s.isFolder&&n&&s.toggle(),s.focus(),s.handle(t)}#A(t){const e=this,s=e.focused;if(s)switch(t.code){case'ArrowUp':e.previous();break;case'ArrowDown':e.next();break;case'ArrowLeft':s.isFolder?s.opened?e.close():(s.parentItem||s)?.focus():e.previous();break;case'ArrowRight':s.isFolder&&!s.opened?e.open():e.next()}}#wr(t){const e=t.target.closest('gs-tree-item');if(e?.node)switch(t.code){case'Enter':e.handle(t);break;case'Tab':e.focus();break;case'Space':e.select(!this.multiselect||!e.selected),e.focus()}}static{this.define('gs-tree')}}class GSChartElement extends GSElement{static get URL_LIB(){return globalThis.GS_URL_CHART||globalThis.location?.origin||'/bootstrap-lit'}static properties={url:{},config:{},storage:{},height:{type:Number},width:{type:Number},data:{type:Array},options:{type:Object}};#Vl=b();#Wl=null;constructor(){super(),this.height=0,this.width=0,GSChartElement.#nt()}connectedCallback(){super.connectedCallback(),this.#Yl()}disconnectedCallback(){super.disconnectedCallback();const t=this;t.#Wl&&t.#Wl.destroy(),t.#Wl=null}shouldUpdate(t){return GSChartElement.#Jl}firstUpdated(t){this.#Kl(),super.firstUpdated(t)}updated(t){const e=this;(t.has('url')||t.has('config'))&&e.#Kl(),(t.has('data')||t.has('options'))&&e.#Xl(e.data,e.options)}renderUI(){const t=this;return G`<canvas ${A(t.#Vl)} 
                class="${S(t.renderClass())}"
                width="${C(t.width>0&&t.width)}" 
                height="${C(t.height>0&&t.height)}" >
            </canvas>`}onDataRead(t){this.data=t}get canvas(){return this.#Vl.value}reset(){this.#Wl?.reset()}refresh(){this.#Wl?.render()}updateChart(t){this.#Wl?.update(t)}stop(){this.#Wl?.stop()}clear(){this.#Wl?.clear()}resize(t,e){const s=this;s.#Wl&&requestAnimationFrame((()=>{const r=s.query('div');r&&(r.style.width=`${t}px`,r.style.height=`${e}px`),s.#Wl.resize(t,e)}))}toBase64Image(t='image/png',e=1){return this.#Wl?.toBase64Image(t,e)}async#Kl(){const t=this,e=await GSLoader.loadSafe(t.config,'GET',null,!0,{}),s=await GSLoader.loadSafe(t.url,'GET',null,!0,[]);t.data=s,t.options=e}#Xl(t,e){const s=this,r=s.querySelector('gs-item[group="options"]'),n=Object.assign(e,GSChartElement.toJson(r)),i=n.data.datasets;if(i.forEach(((e,s)=>e.data=1===i.length?t:t[s]||[])),s.#Wl)return s.updateChart(n);const a=s.canvas.getContext('2d');s.#Wl=new GSChartElement.#Ql(a,n)}async#Yl(){GSChartElement.#Jl||await GSEvents.wait(document,'gs-chart',0,!1),this.requestUpdate()}static#Jl=!1;static#Zl=!1;static#Ql=null;static async#nt(){const t=GSChartElement;if(!1!==t.URL_LIB&&!t.#Jl&&!t.#Zl){t.#Zl=!0;try{const e=`${GSChartElement.URL_LIB}/assets/chart/chart.mjs`,{Chart:s,registerables:r}=await import(e);s.register(...r),t.#Ql=s,t.#Jl=!0,GSEvents.send(document,'gs-chart')}catch(t){GSLog.error(null,t)}finally{t.#Zl=!1}}}static toJson(t,e='name',s='value',r='type'){if(!(t instanceof HTMLElement))return{};const n=t.getAttribute(e),i=t.getAttribute(s),a=t.getAttribute(r);let o=null;switch(a){case'array':o=[];break;case'object':o={};break;default:return GSChartElement.#b(i,a)}const l=Array.from(t.children),c='array'===a,d='object'===a;return l.forEach((t=>{const i=t.getAttribute(e);if(c)o.push(GSChart.toJson(t,e,s,r));else if(d){const n=GSChartElement.toJson(t,e,s,r);o[i]=n}else{const e=t.getAttribute(s),a=t.getAttribute(r);o[n][i]=GSChart.#b(e,a)}})),o}static#b(t,e){switch(e){case'boolean':return'true'===t;case'number':return parseFloat(t);default:return t}}static{this.define('gs-chart')}}class GSHighlightElement extends GSElement{static get URL_LIB(){return globalThis.GS_URL_HLJS||'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0'}static properties={url:{},theme:{},target:{},language:{}};#tc=b();#Tr;constructor(){super(),this.theme='default'}willUpdate(t){const e=this;t.has('theme')&&e.#ge(),t.has('target')&&e.#ec(),t.has('url')&&e.#sc(),t.has('language')&&e.#rc(e.#Tr)}renderUI(){return G`<pre><code ${A(this.#tc)} class="${S(this.renderClass())}"><code/><pre/>`}renderClass(){const t=e.isStringNonEmpty(this.language);return{[`language-${this.language}`]:t}}highlight(t='',e=!1){this.#Tr=t,this.#rc(t,e)}set content(t=''){this.#Tr=t,this.#rc(t)}get content(){return this.#Tr}async#ge(){const t=`${GSHighlightElement.URL_LIB}/styles/${this.theme}.min.css`;i.injectCSS(this,t)}#ec(){const t=this,e=t.target?i.query(t.target):null;if(!e)return i.setHTML(t.#nc,`Element with id ${t.target} not found!`);t.#Tr=e.innerHTML,t.#rc(e.innerHTML)}async#sc(){const t=this,e=await GSLoader.load(t.url);if(!e)return i.setHTML(t.#nc,`Code URL ${t.url} unreachable!`);t.#Tr=e,t.#rc(e)}get#nc(){return this.#tc.value}#ic(t){const e=t.data.data;URL.revokeObjectURL(t.data.url),i.setHTML(this.#nc,t.data.append?this.#nc.innerHTML+e:e),t.target.terminate()}#rc(t='',e=!1){const s=this;if(!t)return i.setHTML(s.#nc,'No data!');const r=s.#ac,n=new Blob([r],{type:'application/javascript'}),a=URL.createObjectURL(n),o=new Worker(a);o.onmessage=s.#ic.bind(s),o.postMessage({data:t,url:a,append:e})}get#ac(){const t=this.language?this.language.split(',').map((t=>`importScripts('${GSHighlightElement.URL_LIB}/languages/${t.trim()}.min.js');`)).join(''):'';return`globalThis.onmessage = (event) => {\n                importScripts('${GSHighlightElement.URL_LIB}/highlight.min.js');\n                ${t}\n                const result = globalThis.hljs.highlightAuto(event.data.data);\n                postMessage({data:result.value, url:event.data.url, append: event.data.append});};`}static{this.define('gs-highlight')}}class GSMarkdownElement extends GSElement{static get URL_LIB(){return globalThis.GS_URL_MARKDOWN||'https://unpkg.com/showdown/dist/showdown.min.js'}static properties={url:{},history:{type:Number},maxHeight:{type:Number,attribute:'max-height'}};#oc=b();#lc=null;#$r=null;#Dr=null;#Ss=null;#aa=null;#$=[];constructor(){super(),this.history=10}async connectedCallback(){const t=this;if(await t.#cc(),globalThis.showdown){const e={tasklists:!0,tables:!0};t.#lc=new globalThis.showdown.Converter(e),super.connectedCallback()}}willUpdate(t){const e=this;t.has('url')&&(e.#dc(e.url),e.#sc(e.url))}renderUI(){const t=this,e={'max-height':t.maxHeight>0&&`${t.maxHeight}px;`};return G`<div ${A(t.#oc)} class="overflow-auto ${S(t.renderClass())}" style="${L(e)}"><div/>`}renderClass(){const t=e.isStringNonEmpty(this.language);return{[`language-${this.language}`]:t}}back(){const t=this.#uc();this.#sc(t)}get root(){return this.#Ss||''}get#hc(){return this.#oc.value}async#sc(t=''){const e=this;if(!(t=e.#o(t)))return;let s=await GSLoader.load(t);s&&(e.#aa=e.#je(t),e.#Ss||(e.#Ss=e.#aa),s=s.replace(/^[-_\*]{3}$/gm,'<hr>'),e.#hc.innerHTML=e.#pc(s),GSEvents.send(e,'data',t),requestAnimationFrame((()=>{e.#mc(),e.#gc(),e.#fc()})))}#o(t=''){return!t||t.startsWith('http')?t:this.#aa?new URL(t,this.#aa).toString():GSLoader.normalizeURL(t,!0)}#je(t=''){return t.endsWith('/')?t:GSLoader.parentPath(t)}#fc(){this.#yc('pre:has(code)','text-white bg-dark p-1')}#gc(){this.#yc('table','table table-light table-hover table-striped table-bordered w-auto shadow-sm')}#yc(t,e){const s=i.queryAll(this.#hc,t);requestAnimationFrame((()=>s.forEach((t=>i.toggleClass(t,e)))))}#mc(){const t=this,e=i.queryAll(t.#hc,'a').filter((t=>!r.get(t,'href').startsWith('#')));e.filter((t=>!(r.get(t,'href').endsWith('.md')||r.get(t,'href').endsWith('/')))).forEach((t=>t.target='_blank')),e.filter((t=>r.get(t,'href').endsWith('.md')||r.get(t,'href').endsWith('/'))).forEach((e=>GSEvents.attach(e,e,'click',t.#Sc.bind(t))))}#Sc(t){const e=this,s=t.target,n=r.get(s,'href');if(n.startsWith('#'))return;GSEvents.prevent(t),s.href=e.#o(n);return GSEvents.send(e,'link',s.href,!1,!1,!0)?(e.#dc(s.href),e.#sc(s.href),!1):void 0}#uc(){const t=this;if(0===t.#$.length)return t.#Dr;const e=t.#$.pop();return e&&e===t.#$r?t.#uc():e}#dc(t){const e=this;e.#$.length>=e.history&&(e.#$=e.#$.slice(1)),e.#$r!=t&&(e.#$.push(t),e.#$r=t,e.#Dr||(e.#Dr=t))}#pc(t){return this.#lc.makeHtml(t)}async#cc(){if(globalThis.showdown)return;const t=document.createElement('script'),e=GSEvents.wait(t,'load',0,!1);t.type='text/javascript',t.src=GSMarkdownElement.URL_LIB,i.appendChild(document.head,t),await e}static{this.define('gs-markdown')}}class GSMonacoElement extends GSElement{static get URL_LIB(){return globalThis.GS_URL_MONACO||'https://unpkg.com/monaco-editor@latest/min/'}static properties={url:{},theme:{},target:{},language:{}};#oc=b();#bc=null;constructor(){super(),this.language='',this.theme='vs-dark'}async connectedCallback(){await GSMonacoElement.#nt(),super.connectedCallback()}createRenderRoot(){return this}firstUpdated(){this.#vc(),super.firstUpdated()}willUpdate(t){const e=this;e.#bc&&(t.has('theme')&&e.#ge(e.theme),t.has('target')&&e.#ec(e.target),t.has('url')&&e.#sc(e.url),t.has('language')&&e.#ur(e.language))}renderUI(){return G`<div ${A(this.#oc)} class="${S(this.renderClass())}"><div/>`}get monaco(){return window.monaco}get editor(){return this.#bc}get model(){return this.#bc.getModel()}get code(){return this.#bc?.getValue()||''}set code(t=''){this.#bc&&this.#bc.setValue(t)}get selection(){return this.model.getValueInRange(this.editor.getSelection())}get owner(){return this.parentElement}#ur(t){const e=this;e.monaco&&t&&e.monaco.editor.setModelLanguage(e.model,t)}#ge(t){this.monaco&&t&&this.monaco.editor.setTheme(t)}#ec(t){const e=t?i.query(t):null;if(!e)return this.code=`Element with id ${t} not found!`;this.code=e.innerHTML}async#sc(t){const e=this,s=t?await GSLoader.load(t):null;if(!s)return e.code=`Code URL ${t} unreachable!`;e.code='',e.#ur(e.language),e.code=s}#vc(){const t=this,e={value:'',language:t.language,theme:t.theme,automaticLayout:!0,minimap:{enabled:!1}};t.#bc=t.monaco?.editor?.create(t.#hc,e),t.attachEvent(window,'resize',t.#P.bind(t));try{t.url?t.#sc(t.url):t.target&&t.#ec(t.target)}finally{requestAnimationFrame((()=>t.emit('initialized'))),t.#P()}}#P(t){const e=this;e.#bc?.layout({width:0,height:0}),requestAnimationFrame((()=>{const t=e.owner.getBoundingClientRect();e.#bc?.layout({width:t.width,height:t.height})}))}get#hc(){return this.#oc.value}static#wc;static async#cc(){if(globalThis.monaco)return;const t=document.createElement('script'),e=GSEvents.wait(t,'load',0,!1);t.type='text/javascript',t.src=`${GSMonacoElement.URL_LIB}vs/loader.js`,i.appendChild(document.head,t),await e}static#Ec(){const t=GSMonacoElement.URL_LIB;window.MonacoEnvironment={baseUrl:`${t}`,getWorkerUrl:(e,s)=>`data:text/javascript;charset=utf-8,${encodeURIComponent(`\n                globalThis.MonacoEnvironment = {baseUrl: '${t}'};\n                importScripts('${t}vs/base/worker/workerMain.js');`)}`}}static#Gc(){return new Promise(((t,e)=>{require.config({paths:{vs:`${GSMonacoElement.URL_LIB}/vs`},'vs/css':{disabled:!1}}),require(['vs/editor/editor.main'],t)}))}static async#nt(){const t=GSMonacoElement;t.#wc||(t.#Ec(),await t.#cc(),await t.#Gc(),t.#wc=!0)}static{this.define('gs-monaco')}}export{AbstractTreeController,AdoptedController,AttributeController,BinaryTree,BinaryTreeNode,ButtonTypes,H as ColorTypes,ContentController,CopySelectController,DataController,DoublyLinkedList,ElementMoveController,ElementNavigationController,j as EnvironmentTypes,a as GSAbortController,GSAbstractReadWrite,GSAccordionElement,GSAccordionItemElement,GSAdoptedEngine,GSAlertElement,r as GSAttr,GSAttributeHandler,GSBreadcrumbElement,GSBreadcrumbItemElement,GSButtonElement,n as GSCSSMap,GSCacheStyles,GSCalendarElement,GSCardElement,GSCenterElement,GSChartElement,GSComboExt,GSCompareElement,GSControllerElement,GSCopyrightElement,GSCurrencyFormat,GSDContextElement,i as GSDOM,GSDOMObserver,GSData,GSDataHandler,GSDataListExt,GSDate,GSDateFormat,GSDialogElement,GSDrawerElement,GSDropdownElement,GSDynamicStyle,GSElement,GSEmailElement,GSEnvironment,GSEvent,GSEventBus,GSEvents,GSFormElement,GSFormGroupElement,GSFormPanelElement,s as GSFunction,GSGesture,GSGroupElement,GSHighlightElement,GSID,GSIconElement,GSImageElement,GSIndentElement,GSInputElement,GSItem,GSLayoutElement,GSLinklement,GSListElement,GSListItemElement,GSLoader,u as GSLocalization,GSLog,GSMarkdownElement,GSMenuElement,GSMonacoElement,GSNavElement,GSNavItemElement,GSNotificationElement,GSOverlayElement,GSPagerElement,GSPopper,GSPopupElement,GSProgressElement,GSPromise,GSQuery,GSQueryCSS,GSReadWrite,h as GSReadWriteRegistry,GSSpinnerElement,GSSplitterElement,GSStepStyle,GSTabGroupElement,GSTabItemElement,GSTabPanelElement,GSTableElement,GSTemplateCache,GSTemplateElement,GSTextElement,GSTheme,GSTimeFormat,GSToastElement,GSTooltipElement,GSTreeElement,GSTreeItemElement,e as GSUtil,GSYearFormat,_ as InputTypes,ListController,MaskController,W as NavTypes,Node,NumberController,OrientationController,OrientationTypes,PasswordController,PlacementTypes,PositionTypes,Q as ProtocolTypes,Queue,ReactiveInput,tt as SizeTypes,Stack,TemplateController,TextController,ThemeController,Tree,TreeController,B as buttonType,z as color,P as cssMap,F as dataset,q as environment,t as gsstyles,V as inputType,literalTemplate,Y as nav,notEmpty,numGE0,numGT0,numLE0,numLT0,J as orientation,K as placement,X as position,Z as protocol,et as size,st as stringArrayConverter};
//# sourceMappingURL=io.greenscreens.components.all.min.js.map
