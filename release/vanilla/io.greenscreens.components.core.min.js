class GSBase extends HTMLElement{static#t=0;#e='';static get observedAttributes(){return[]}static nextID(){return GSBase.#t++,`GSHID_${GSBase.#t}`}static hashCode(t){let e=0,n=t.length,r=0;if(n>0)for(;r<n;)e=(e<<5)-e+t.charCodeAt(r++)|0;return e}static sendEvent(t=document,e,n='',r=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:n,bubbles:r,composed:s,cancelable:i});return t.dispatchEvent(a)}static sendSuspendedEvent(t=document,e,n=''){requestAnimationFrame((()=>{GSBase.sendEvent(t,e,n)}))}connectedCallback(){const t=this;if(t.url&&t.isRenderable()){const e=GSBase.hashCode(t.url);if(document.querySelector(`[data-hash="${e}"]`))return void t.remove();const n=t.render();n&&!(n instanceof Promise)&&(n.dataset.hash=e,t.isHead?document.head.appendChild(n):t.insertAdjacentElement('afterend',n),t.isAuto&&(n.id=n.id?n.id:GSBase.nextID(),t.#e=n.id))}t.isAuto||t.remove()}disconnectedCallback(){const t=this;if(t.isAuto&&t.#e){const e=document.querySelector(`#${t.#e}`);e&&e.remove()}t.dispose()}attributeChangedCallback(t,e,n){const r=this;requestAnimationFrame((()=>{r.attributeCallback(t,e,n)}))}attributeCallback(t,e,n){}render(){}dispose(){}get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}get isProtocol(){const t=this.protocol;if(!t)return!0;const e=location.protocol.replace(':','');return'http'===t&&e===t||'https'===t&&e===t}get isAsset(){return this.isTarget('GreenScreens')}isTarget(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((n=>{n.brand.toLowerCase().includes(e)&&(t=!0)})),t}const n=new RegExp(`${t}`,'i');return!!navigator.userAgent.match(n)}isRenderable(){const t=this,e=t.isMobile,n=t.isAsset,r=t.isProtocol,s=t.target,i=t.env;return!!r&&(('assets'!==i||!1!==n)&&(('browser'!==i||!0!==n)&&(('mobile'!==i||!1!==e)&&(('desktop'!==i||!0!==e)&&!!t.isTarget(s)))))}get env(){return this.getAttribute('env')||''}get target(){return this.getAttribute('target')||''}get url(){const t=this;let e=t.getAttribute('url')||'';if('assets'===t.env)return'**'+e;if(t.#n)try{let t=`${location.origin}${location.pathname}`;e.startsWith('/')&&(t=location.origin),e.startsWith('http')&&(t=void 0);const n=new URL(e,t);n.searchParams.append('_dc',Date.now()),e=n.href}catch(t){}return e}get type(){const t=this;let e=t.getAttribute('type')||'';return e||(t.url.indexOf('.js')>0?e='text/javascript':t.url.indexOf('.css')>0&&(e='text/css')),e}get async(){return this.getAttributeBool('async','false')}get defer(){return this.getAttributeBool('defer','false')}get isHead(){return this.getAttributeBool('head')}get isAuto(){return this.getAttributeBool('auto')}get protocol(){return this.getAttribute('protocol')||''}get nonce(){return this.getAttribute('nonce')||''}get crossorigin(){return this.getAttribute('crossorigin')}get fetchpriority(){return this.getAttribute('fetchpriority')||'auto'}get integrity(){return this.getAttribute('integrity')}get referrerpolicy(){return this.getAttribute('referrerpolicy')}getAttributeBool(t='',e='true'){return'true'===(this.getAttribute(t)||e)}get#n(){return'GS_NO_CACHE'in globalThis?globalThis.GS_NO_CACHE:!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static{Object.seal(GSBase)}}class GSCacheStyles{static#r=new Map;static set(t,e){const n=this;if(e instanceof CSSStyleSheet&&n.#r.set(t,e),'string'==typeof e){const r=new CSSStyleSheet;r.replaceSync(e),n.#r.set(t,r)}return n.get(t)}static remove(t){return this.#r.delete(t)}static get(t){return this.#r.get(t)}static getOrSet(t,e){if(e&&0===e.cssRules.length)return;const n=GSCacheStyles,r=n.get(t);return r||n.set(t,e)}static get styles(){return Array.from(new Map([...GSCacheStyles.#r].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static injectStyle(t='',e=0){if(t)try{e=e||GSBase.hashCode(t);const n=new CSSStyleSheet;n.replaceSync(t),GSCacheStyles.getOrSet(e,n),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){}}static{Object.freeze(GSCacheStyles),window.GSCacheStyles=GSCacheStyles;const t='.gs-hide{display:none !important;}.gs-hide-orientation,.gs-render{display:none !important;}gs-item{display:none !important;}';GSCacheStyles.injectStyle(t)}}class GSLinkExt extends HTMLLinkElement{#s=null;constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.isCSS&&(t.#s=setInterval(t.#i.bind(t),1))}connectedCallback(){}disconnectedCallback(){if(!this.isCSS)return;const t=GSCacheStyles.remove(this.order);GSBase.sendSuspendedEvent(document,'gs-style',t)}#i(){const t=this;if(!t.sheet)return;clearInterval(t.#s),GSCacheStyles.injectStyle(t.asText,t.order);const e=GSCacheStyles.get(t.order);GSBase.sendSuspendedEvent(document,'gs-style',e)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join('')}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get isCSS(){return'stylesheet'===this.rel||this.href.includes('.css')}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}static{customElements.define('gs-ext-link',GSLinkExt,{extends:'link'}),Object.freeze(GSLinkExt)}}class GSStyleExt extends HTMLStyleElement{#s=null;constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.#s=setInterval(t.#i.bind(t),1)}connectedCallback(){}disconnectedCallback(){const t=GSCacheStyles.remove(this.order);GSBase.sendSuspendedEvent(document,'gs-style',t)}#i(){const t=this;if(!t.sheet)return;clearInterval(t.#s),GSCacheStyles.injectStyle(t.asText,t.order);const e=GSCacheStyles.get(t.order);GSBase.sendSuspendedEvent(document,'gs-style',e)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join('')}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}static{Object.freeze(GSStyleExt),customElements.define('gs-ext-style',GSStyleExt,{extends:'style'})}}class GSCSS extends GSBase{static get observedAttributes(){return['disabled'].concat(super.observedAttributes)}attributeCallback(t,e,n){const r=this;if('disabled'===t)return r.isDisabled?r.dispose():r.render()}constructor(){super();const t=this;t.disabled=0==t.notheme&&t.theme!==GSCSS.activeTheme}async render(){const t=this;if(!t.isDisabled){t.order||(t.order=GSBase.nextID());try{const e=await fetch(t.url);if(!e.ok)return;const n=await e.text();GSCacheStyles.injectStyle(n,t.order);const r=GSCacheStyles.get(t.order);r&&GSBase.sendSuspendedEvent(document,'gs-style',r)}catch(e){GSCacheStyles.remove(t.order)}}}dispose(){const t=this;if(!t.isAuto)return;const e=GSCacheStyles.get(t.order);GSCacheStyles.remove(t.order),GSBase.sendSuspendedEvent(document,'gs-style',e),document.adoptedStyleSheets=GSCacheStyles.styles}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}get notheme(){return'true'===this.getAttribute('notheme')}get disabled(){return this.getAttribute('disabled')}set disabled(t=''){return this.setAttribute('disabled',''+t=='true')}get isDisabled(){return'true'===this.disabled}get theme(){return this.getAttribute('theme')||'default'}static get activeTheme(){return new URLSearchParams(location.hash.slice(1)).get('theme')||'default'}static#a(t){const e=GSCSS.activeTheme;Array.from(document.querySelectorAll('gs-css')).filter((t=>0==t.notheme)).forEach((t=>t.disabled=t.theme!==e))}static{Object.freeze(GSCSS),customElements.define('gs-css',GSCSS),window.addEventListener('hashchange',GSCSS.#a,!1)}}class GSScript extends GSBase{render(){const t=this,e=document.createElement('script');return e.src=t.url,t.getAttributeNames().filter((t=>'url'!==t)).forEach((n=>e.setAttribute(n,t.getAttribute(n)))),e}static{customElements.define('gs-script',GSScript),Object.freeze(GSScript)}}class GSLink extends GSBase{render(){const t=this,e=document.createElement('link');return e.href=t.url,t.getAttributeNames().filter((t=>'url'!==t)).forEach((n=>e.setAttribute(n,t.getAttribute(n)))),t.shadow&&'stylesheet'===e.rel&&e.setAttribute('is','gs-ext-link'),e}get rel(){const t=this;let e=t.getAttribute('rel')||'';return e||t.url.includes('.css')&&(e='stylesheet'),e}get shadow(){return'true'===this.getAttribute('shadow')}static{customElements.define('gs-link',GSLink),Object.freeze(GSLink)}}class GSLog{static logging=!0;static info(t,e){this.#o(t,e,!0,'info')}static warn(t,e){this.#o(t,e,!0,'warn')}static error(t,e){this.#o(t,e,!0,'error')}static log(t,e,n){this.#o(t,e,n)}static#o(t,e,n,r){if(!n&&!this.logging)return;let s=console[r||'log'];if(s='function'==typeof s?s:console.log,t)return s(`${t.nodeName} -> ${t.id}: ${e}`);s(e)}static{Object.seal(GSLog)}}class GSID{static#t=0;static reset(){this.#t=0}static next(t='GSId-'){return`${t}${this.#t++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let n=0,r=0;if(0===e)return n;for(;r<e;)n=(n<<5)-n+t.charCodeAt(r++)|0;return n}static{Object.freeze(GSID)}}class GSUtil{static#l=0;static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asNum=(t=0,e=0)=>GSUtil.isNumber(t)?parseFloat(t):e;static asBool=(t=!1)=>'true'===t.toString().trim().toLowerCase();static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,n)=>e[n]));static capitalize=(t='')=>t[0].toUpperCase()+t.slice(1).toLowerCase();static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.includes('<')&&t.includes('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return Array.isArray(t)||'object'==typeof t}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t=''){return GSUtil.isJsonString(t)?JSON.parse(t):GSUtil.isJsonType(t)?t:(GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),null)}static normalize(t,e=''){return(t??e).toString().trim()}static textTransform(t='',e=''){switch(t){case'lowercase':e=e.toLowerCase();break;case'uppercase':e=e.toUpperCase();break;case'capitalize':e=GSUtil.capitalizeAll(e)}return e}static fromTemplateLiteral(t,e){const n=Object.keys(e),r=Object.values(e);return new Function(...n,`return \`${t}\`;`)(...r)}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,n=null;return t.trim().split('.').forEach(((t,r,s)=>{if(e)return r<s.length-1?e=e[t]:void(n=e[t])})),n}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return!!GSUtil.isString(t)&&0===t.trim().length}static isStringMatch(t,e){const n=GSUtil.isStringNonEmpty(t),r=GSUtil.isStringNonEmpty(e);return n&&r?t.trim().toLowerCase()==e.trim().toLowerCase():n===r}static async timeout(t=0){return new Promise((e=>{setTimeout(e.bind(null,!0),t)}))}static requestAnimationFrame(t){if('function'==typeof t)return GSUtil.#l>0?t():(GSUtil.#l++,globalThis.requestAnimationFrame((()=>{try{t()}catch(t){}finally{GSUtil.#l--}})))}static async export(t,e,n='octet/stream'){const r=new Blob(t,{type:n}),s=URL.createObjectURL(r);try{const t=document.createElement('a');t.href=s,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(s)}}static register(t,e,n,r=!0,s=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:n?.toLowerCase()}),r&&!Object.isSealed(e)&&Object.seal(e),s&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),n=URL.createObjectURL(e);try{return await import(n)}finally{URL.revokeObjectURL(n)}}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}}class GSFunction{static isFunction=t=>'function'==typeof t;static isFunctionNative(t){return GSFunction.isFunction(t)&&t.toString().indexOf('native code')>0}static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){try{return await t(e)}catch(t){return t}}static callFunctionSync(t,e){try{return t(e)}catch(t){return t}}static callFunction(t,e,n=!0){if(GSFunction.isFunction(t)&&(n||!GSFunction.isFunctionNative(t)))return GSFunction.isFunctionAsync(t)?GSFunction.callFunctionAsync(t,e):GSFunction.callFunctionSync(t,e)}static parseFunction(t){const e=GSUtil.parseValue(t);return GSFunction.isFunction(e)?e:null}static{Object.seal(GSFunction)}}class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,n=!1){GSAttr.isHTMLElement(t)&&(n?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,e,n){GSAttr.isHTMLElement(t)&&(GSUtil.normalize(n)?t.setAttribute(e,n):t.removeAttribute(e))}static get(t,e='',n=''){if(!GSAttr.isHTMLElement(t))return n;const r=t.getAttribute(e)||n;return GSUtil.normalize(r)}static getAsBool(t,e='',n='false'){const r=GSAttr.get(t,e,n);return GSUtil.asBool(r,n)}static getAsNum(t,e='',n='0'){const r=GSAttr.get(t,e,n);return GSUtil.asNum(r,n)}static getAsJson(t,e='',n='0'){const r=GSAttr.get(t,e,n,{});return JSON.parse(r)}static setAsBool(t,e='',n='false'){return GSAttr.set(t,e,GSUtil.asBool(n),!1)}static setAsNum(t,e='',n='0'){return GSAttr.set(t,e,GSUtil.asNum(n),NaN)}static setAsJson(t,e='',n='0'){return GSAttr.set(t,e,JSON.stringify(n),'{}')}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}}let t=class GSCSSMap{static#c=!!globalThis.document?.body?.computedStyleMap;#u;constructor(t){this.#u=GSCSSMap.#d(t)}get(t){const e=this;if(e.#u)return GSCSSMap.#c?e.#u.get(t):e.#u[GSUtil.capitalizeAttr(t)]}asText(t){return(this.get(t)||'')?.toString()}asBool(t){const e=this.get(t);return GSUtil.asBool(GSCSSMap.#c?e?.value:e)}asNum(t){let e=this.get(t);return GSCSSMap.#c&&GSFunction.isFunction(e?.to)&&'number'!==e.unit&&(e=e.to('px')),GSUtil.asNum(GSCSSMap.#c?e?.value:e.match(/\d*/g).filter((t=>GSUtil.isNumber(t))).pop())}matches(t,e){return this.asText(t)==e}static#d(t){return GSCSSMap.#c?t.computedStyleMap():globalThis.window?.getComputedStyle?globalThis.window.getComputedStyle(t):null}static styleValue(t,e){return GSCSSMap.getComputedStyledMap(t).get(e)}static getComputedStyledMap(t){return new GSCSSMap(t)}static#S(t){return t?(t=String(t).replace(/\s*([>~+])\s*/g,' $1 ')).replace(/(\s+)/g,' ').trim():''}static#m(t,e){return t.split(e).map((t=>t.trim())).filter((t=>t))}static#h(t,e){return!!t&&e.some((e=>t.indexOf(e)>=0))}static findRule(t){const e=GSCSSMap,n=e.#m(e.#S(t),',');return Array.from(globalThis.document.styleSheets).map((t=>Array.from(t.cssRules||[]))).reduce(((t,e)=>t.concat(e)),[]).filter((t=>e.#h(e.#S(t.selectorText),n)))}static{Object.seal(GSCSSMap),globalThis.GSCSSMap=GSCSSMap}};class GSDOM{static QUERY_FOCUSABLE='a[href]:not([tabindex=\'-1\']),area[href]:not([tabindex=\'-1\']),input:not([disabled]):not([tabindex=\'-1\']),select:not([disabled]):not([tabindex=\'-1\']),textarea:not([disabled]):not([tabindex=\'-1\']),button:not([disabled]):not([tabindex=\'-1\']),iframe:not([tabindex=\'-1\']),[tabindex]:not([tabindex=\'-1\']),[contentEditable=true]:not([tabindex=\'-1\'])';static QUERY_INPUT='input:not([type=\'hidden\']):not(disabled):not(readonly),select:not([type=\'hidden\']):not(disabled):not(readonly),textarea:not([type=\'hidden\']):not(disabled):not(readonly)';static SPEED=300;static get activeElement(){return GSDOM.active(document.activeElement)}static active(t){return t.shadowRoot?.activeElement?GSDOM.active(t.shadowRoot?.activeElement):t}static isVisible(e){if(!GSDOM.isHTMLElement(e))return!1;const n=t.getComputedStyledMap(e),r=!n.matches('visibility','hidden'),s=!n.matches('display','none'),i=n.asNum('opacity')>0,a=e.getBoundingClientRect();return a.width>0&&a.height>0&&i&&r&&s}static parse(t='',e=!1,n='text/html'){try{const r=(new DOMParser).parseFromString(t,n);return e?r?.head?.firstElementChild||r?.body?.firstElementChild:r}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',n=!1){const r=GSDOM.parse(e),s=GSDOM.#g(r.head.children).concat(GSDOM.#g(r.body.children)),i=n||1!==s.length,a=GSDOM.wrap(t,i?null:s.shift());for(;s.length>0;)a.appendChild(s.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#g(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const e=GSUtil.isString(t)?t:t?.tagName;return['INPUT','SELECT','TEXTAREA','BUTTON'].indexOf(e)>-1}static isElement(t,e){if(!(e&&t))return!1;if(!GSUtil.isString(e))return t instanceof e;const n=customElements.get(e.toLowerCase());if(n&&t instanceof n)return t;const r=GSDOM.inheritance(t);for(let n of r)if(n?.constructor?.name===e)return t;return e.toUpperCase()===t.tagName&&t}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const n=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),r=GSDOM.isHTMLElement(t)&&n,s=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!r||s)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,n){const r=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),s=t===e&&t.parentNode===e;return!(!r||s)&&t.insertAdjacentElement(n,e)}static removeElement(t){return GSDOM.parent(t)?.removeChild(t)}static walk(t,e=!1,n=!1,r=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,n,r)}static*childAll(t,e=!1,n=!0,r=!1){if(!t)return;r&&(yield t),n&&(yield*GSDOM.childAll(t.shadowRoot,e,n,!0));const s=e?t.childNodes:t.children;if(s)for(let t of s)yield*GSDOM.childAll(t,e,n,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static getRoot(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.body,e);if(!t||!e)return null;const n=GSDOM.walk(t,!1);for(let t of n)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM.closest(document.body,e);if(!t||!e)return null;const n=GSDOM.walk(t,!0);for(let t of n)if(GSDOM.matches(t,e))return t;return null}static query(t,e,n=!1,r=!0){if('string'==typeof t)return GSDOM.query(document.body,t,n,r);if(!t||!e)return null;if(GSDOM.matches(t,e))return t;const s=GSDOM.walk(t,!1,n,r);for(let t of s)if(GSDOM.matches(t,e))return t;return null}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static queryAll(t,e,n=!1,r=!0){if('string'==typeof t)return GSDOM.queryAll(document.body,t,n,r);const s=[];if(!t||!e)return s;const i=GSDOM.walk(t,!1,n,r);for(let t of i)GSDOM.matches(t,e)&&s.push(t);return s}static setHTML(t,e=''){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(t.innerHTML=e)}static setText(t,e=''){t&&(t.textContent=e)}static css(t,e){if(GSUtil.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[].concat(t)),!(Array.isArray(t)&&t.length>0))return!1;requestAnimationFrame((()=>{t.forEach((t=>{Object.entries(e).forEach((e=>{t.style[e[0]]=e[1]}))}))}))}static toggleClass(t,e,n){return GSUtil.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[].concat(t)),!!(Array.isArray(t)&&t.length>0)&&(!(!e||0==e.trim().length)&&(e=e.split(' ').filter((t=>t&&t.trim().length>0)),GSUtil.isNull(n)?e.forEach((e=>{t.forEach((t=>t.classList.toggle(e)))})):(t.forEach((t=>{n?t.classList.add.apply(t.classList,e):t.classList.remove.apply(t.classList,e)})),!0)))}static toggle(t,e){return GSDOM.toggleClass(t,'d-none',GSUtil.isNull(e)?e:!e)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea'){const n=GSDOM.unwrap(t);requestAnimationFrame((()=>{n.querySelectorAll(e).forEach((t=>t.value=''))}))}static toValue(e){if(!GSDOM.isHTMLElement(e))return;if('checkbox'===e.type)return e.checked;let n=e.value;if('text'===e.type){const r=t.styleValue(e,'text-transform');r&&(n=GSUtil.textTransform(r.value,n))}return n}static fromValue(t,e){GSDOM.isHTMLElement(t)&&('checkbox'===t.type?t.checked=1==e:t.value=e)}static toObject(t,e='input, textarea, select',n=!0){const r=GSDOM.unwrap(t),s={},i=GSDOM.queryAll(r,e);return Array.from(i).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!n||t.checkValidity())).forEach((t=>{s[t.name]=GSDOM.toValue(t)})),s}static fromObject(t,e,n='input, textarea, select'){if(!e)return;const r=GSDOM.unwrap(t),s=GSDOM.queryAll(r,n);Array.from(s).filter((t=>t.name&&t.name in e)).forEach((t=>GSDOM.fromValue(t,e[t.name])))}static toJson(t,e=!0){const n={};if(!GSDOM.isHTMLElement(t))return n;if(n['#tagName']=t.tagName.toLowerCase(),Array.from(t.attributes).forEach((t=>n[t.name]=t.value)),e){const e=Array.from(t.children);e.length>0&&(n.items=[],e.forEach((t=>n.items.push(GSDOM.toJson(t)))))}return n}static fromJson(t,e='gs-item',n=!1){return n?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t)));const n=t['#tagName']||e,r=document.createElement(n);return Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>r.setAttribute(e,t[e]))),Array.isArray(t.items)&&t.items.forEach((t=>{const n=GSDOM.fromJsonAsDOM(t,e);r.appendChild(n)})),r}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const n=t['#tagName']||e,r=[];return r.push(`<${n} `),Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>r.push(` ${e}="${t[e]}" `))),r.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const n=GSDOM.fromJsonAsString(t,e);r.push(n)})),r.push(`</${n}>`),r.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').filter((t=>t.length>1)).forEach((e=>{const n=e.split('=');GSDOM.setValue(`input[name=${n[0]}]`,n[1],t)}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,e='input, select, .btn'){GSDOM.queryAll(t,e).forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, .btn'){GSDOM.queryAll(el,e).forEach((t=>t.setAttribute('disabled',!0)))}static setValue(t,e,n){GSDOM.queryAll(n,t).forEach((t=>GSDOM.fromValue(t,e)))}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),n=[];let r;for(;r=e.nextNode();)n.push(r);return n}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(/(\n*\t*)*(?=\n\t*)/g,'')))}static validate(t,e,n,r=!1){if(t.tagName!==e){if(r)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),n))return!0;if(r)return!1;const s=GSDOM.toValidationError(t,n);throw new Error(s)}static isAllowed(t,e){return Array.isArray(t)?0===t.filter((t=>GSDOM.isAllowed(t,e))).length:!(t instanceof Text||t instanceof Comment||e.includes(t.tagName))}static toValidationError(t,e){const n=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${n}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let n=!0;try{const n=await fetch(e);if(!n.ok)return;const r=await n.text(),s=new CSSStyleSheet;s.replaceSync(r),t.shadowRoot.adoptedStyleSheets=[s]}catch(t){n=!1}return n}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM}}class GSEvents{static#p=new Map;static#G=!1;static protect(){GSEvents.listen(globalThis,null,'contextmenu',(t=>GSEvents.prevent(t))),GSEvents.listen(globalThis.document,null,'keydown',GSEvents.#f)}static#f(t){const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}static async waitPageLoad(t,e='loaded',n,r=100){GSEvents.#G||await GSEvents.wait(globalThis.window,'load'),GSEvents.#G=!0,await GSUtil.timeout(r),GSFunction.callFunction(n),GSEvents.sendSuspended(t,e)}static async waitAnimationFrame(t){return new Promise(((e,n)=>{requestAnimationFrame((()=>{try{e(),'function'==typeof t&&t()}catch(t){n(t)}}))}))}static listen(t,e,n,r,s=!1){return!e&&t?t.addEventListener(n,r,s):GSDOM.queryAll(t,e).map((t=>t.addEventListener(n,r,s)))}static unlisten(t,e,n,r){return!e&&t?t.removeEventListener(n,r):GSDOM.queryAll(t,e).map((t=>t.removeEventListener(n,r)))}static on=GSEvents.listen;static off=GSEvents.unlisten;static once(t,e,n,r){return GSEvents.listen(t,e,n,r,{once:!0})}static wait(t,e=''){return new Promise(((n,r)=>{if(!e)return r('Event undefined!');GSEvents.once(t,null,e,(t=>n(t.detail)))}))}static prevent(t){GSFunction.hasFunction(t,'preventDefault')&&t.preventDefault(),GSFunction.hasFunction(t,'stopPropagation')&&t.stopPropagation()}static send(t=document,e,n='',r=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:n,bubbles:r,composed:s,cancelable:i});return t?.dispatchEvent(a)}static toEvent(t,e){let n=null;switch(t){case'copy':case'cut':case'paste':n=new ClipboardEvent(t,e);break;case'blur':case'focus':case'focusin':case'focusout':n=new FocusEvent(t,e);break;case'input':case'beforeinput':n=new InputEvent(t,e);break;case'keydown':case'keyup':case'keypress':n=new KeyboardEvent(t,e);break;case'dblclick':case'mousedown':case'mouseenter':case'mouseleave':case'mousemove':case'mouseout':case'mouseover':case'mouseup':n=new MouseEvent(t,e);break;case'submit':n=new SubmitEvent(t,e);break;case'touchstart':case'touchend':case'touchmove':case'touchcancel':n=new TouchEvent(t,e);break;case'whell':n=new WheelEvent(t,e);break;case'pointerover':case'pointerenter':case'pointerdown':case'pointermove':case'pointerup':case'pointercancel':case'pointerout':case'pointerleave':case'pointerrawupdate':case'gotpointercapture':case'lostpointercapture':n=new PointerEvent(t,e);break;default:n=new CustomEvent(t,e)}return n}static sendSuspended(t=document,e,n='',r=!1,s=!1,i=!1){requestAnimationFrame((()=>{GSEvents.send(t,e,n,r,s,i)}))}static sendDelayed(t=1,e=document,n,r='',s=!1,i=!1,a=!1){setTimeout((()=>GSEvents.send(e,n,r,s,i,a)),t)}static attach(t,e,n='',r,s=!1,i=!1){if(!e)return!1;if(e.offline)return!1;if(!GSFunction.isFunction(r))return!1;if(!GSFunction.hasFunction(e,'addEventListener'))return!1;const a=this,o=a.#y(t,e,n,r),l=a.#b(t);return a.#A(l,o.key).set(o.fnkey,o),o.capture=i,s&&(o.once=t=>{try{o.fn(t)}finally{a.remove(o.own,o.el,o.name,o.once)}},Object.defineProperty(o.once,'gsid',{value:r.gsid,writable:!1})),e.addEventListener(n,s?o.once:o.fn,{once:s,capture:i}),!0}static remove(t,e,n='',r){const s=this,i=s.#y(t,e,n,r),a=s.#b(t),o=s.#A(a,i.key),l=o.get(i.fnkey);if(l)o.delete(l.fnkey),s.#v(l);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),s.#v(t);0===o.size&&a.delete(i.key),0===a.size&&s.#p.delete(t)}static deattachListeners(t){const e=this,n=e.#E(t);if(!n)return;const r=n.values();for(let t of r){for(let n of t.values())e.#v(n);t.clear()}n.clear()}static#y(t,e,n='',r=''){if(!e)return!1;const s=this.#O(e),i=this.#M(r);return{own:t,fn:r,el:e,name:n,key:GSID.hashCode(`${s}${n}`),fnkey:GSID.hashCode(`${s}${n}${i||''}`)}}static#A(t,e){let n=t.get(e);return n||(n=new Map,t.set(e,n)),n}static#M(t){return GSFunction.isFunction(t)?(t.gsid||Object.defineProperty(t,'gsid',{value:GSID.next(),writable:!1}),t.gsid):null}static#O(t){let e=GSAttr.get(t,'data-gselid');return e||(e=GSID.next(),GSAttr.set(t,'data-gselid',e)),e}static#b(t){return this.#A(this.#p,t)}static#E(t){const e=this.#p.get(t);if(e)return this.#p.delete(t),e}static#v(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static{Object.freeze(GSEvents),globalThis.GSEvents=GSEvents}}class GSEvent extends EventTarget{#w=new Set;#D(t='',e){const n=Array.from(this.#w);return this.#T(e)?n.filter((n=>n.type===t&&n.listener===e)):n.filter((e=>e.type===t))}#T(t){return'function'==typeof t}on(t='',e){return this.addEventListener(t,e)}once(t,e){const n=this,wrap=t=>{e(t),n.#w.delete(wrap)};return wrap.type=t,wrap.listener=e,n.addEventListener(t,wrap,{once:!0})}off(t='',e){this.removeEventListener(t,e)}emit(t='',e){const n=new CustomEvent(t,{detail:e});return this.dispatchEvent(n)}wait(t=''){if(!t)return e('Event undefined!');const n=this;return new Promise(((e,r)=>{n.once(t,(t=>e(t)))}))}listen(t,e){this.on(t,e)}unlisten(t,e){this.off(t,e)}unbind(){Array.from(this.#w).forEach((t=>{super.removeEventListener(t.type,t.listener)})),this.#w.clear()}addEventListener(t,e,n){return!!this.#T(e)&&(this.#w.add({type:t,listener:e}),super.addEventListener(t,e,n))}removeEventListener(t,e){const n=this,r=n.#D(t,e);r.forEach((t=>super.removeEventListener(t.type,t.listener))),r.forEach((t=>n.#w.delete(t)))}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSEventBus{static#C=new Map;static send(t='',e='',n){return GSEventBus.register(t).emit(e,n)}static exist(t=''){return t&&GSEventBus.#C.has(t)}static register(t=''){return GSEventBus.exist(t)||GSEventBus.#C.set(t,new GSEvent),GSEventBus.#C.get(t)}static unregister(t=''){const e=GSEventBus.#C.get(t);return e?.unbind&&e.unbind(),GSEventBus.#C.delete(t)}static{Object.freeze(GSEventBus),globalThis.GSEventBus=GSEventBus}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((n=>{n.brand.toLowerCase().includes(e)&&(t=!0)})),t}const n=navigator.userAgent.toLocaleLowerCase()||'',r=n.indexOf('edg')>0;return!(!r||!e.startsWith('edg'))||!r&&n.indexOf(e)>0}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSDOMObserver extends MutationObserver{static#x=new Map;static#L=new Map;observe(t,e){const n=e||{childList:!0,subtree:!0};return super.observe(t,n)}static create(t){const e=new GSDOMObserver(GSDOMObserver.#F);return e.observe(t),e}static#k(t=!1){return t?GSDOMObserver.#L:GSDOMObserver.#x}static get#I(){return GSDOMObserver.#U||GSDOMObserver.#j}static get#U(){return GSDOMObserver.#x.size>0}static get#j(){return GSDOMObserver.#L.size>0}static#F(t){GSDOMObserver.#I&&t.forEach((t=>{GSDOMObserver.#U&&t.addedNodes.forEach((t=>GSDOMObserver.#N(t,GSDOMObserver.#x))),GSDOMObserver.#j&&t.removedNodes.forEach((t=>GSDOMObserver.#N(t,GSDOMObserver.#L)))}))}static#N(t,e){return 0!==e.size&&(GSDOMObserver.#H(t,e),t.childNodes.forEach((t=>GSDOMObserver.#N(t,e))),!0)}static#H(t,e){e.forEach(((e,n)=>{try{n(t)&&e(t)}catch(t){}}))}static#B(t,e,n){if(t instanceof HTMLElement==0)return!1;const r=new Map;return r.set(e,n),GSDOMObserver.#N(t,r)}static#T(t){return'function'==typeof t}static#R(t,e){return GSDOMObserver.#T(t)&&GSDOMObserver.#T(e)}static registerFilter(t,e,n=!1,r){return!!GSDOMObserver.#R(t,e)&&(GSDOMObserver.#k(n).set(t,e),n||GSDOMObserver.#B(r||document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#T(t)&&GSDOMObserver.#k(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver;const t=GSDOMObserver.create(document.documentElement);globalThis.addEventListener('unload',(()=>{t.disconnect()}))}}class GSComponents{static#p=new Set;static store(t){GSComponents.#p.add(t)}static remove(t){GSComponents.#p.delete(t)}static get(t=''){if(!t)return null;const e=Array.from(this.#p).filter((e=>e.id===t));return 0===e.length?null:e[0]}static#$(t='',e=0,n){const fn=e=>{const r=e.detail;if(t.startsWith('gs-')&&r.tagName===t.toUpperCase()||r.id===t)return GSEvents.unlisten(document.body,null,'componentready',fn),n(r)},r={once:!1,capture:!1};e>0&&(r.signal=AbortSignal.timeout(e)),GSEvents.listen(document.body,null,'componentready',fn,r)}static waitFor(t='',e=0){return new Promise(((n,r)=>{let s=GSComponents.find(t)||GSComponents.get(t);return s?n(s):GSComponents.#$(t,e,n)}))}static notifyFor(t='',e){if(!GSFunction.isFunction(e))return!1;const callback=n=>{const r=n.composedPath().shift();return r.id===t||r.tagName===t?e(r,n):void 0},n=GSComponents.find(t)||GSComponents.get(t);return n?e(n):(GSEvents.listen(document.body,null,'componentready',callback),callback)}static findAll(t='',e=!0,n=!0){let r=Array.from(GSComponents.#p);return t&&(r=r.filter((e=>e&&GSDOM.matches(e,t)))),e||(r=r.filter((t=>t.shadowRoot))),n||(r=r.filter((t=>!t.shadowRoot))),r}static find(t='',e=!0,n=!0){return GSComponents.findAll(t,e,n).shift()}static getOwner(t,e){if(!(GSDOM.isGSElement(t)||GSDOM.isHTMLElement(t)))return null;const n=GSDOM.parentAll(t);for(let t of n){if(!t)break;if(t instanceof ShadowRoot){const n=GSDOM.parent(t);return e?GSDOM.isElement(n,e)?n:GSComponents.getOwner(n,e):n}if(GSDOM.isElement(t,e))return t}return e?null:document.body}static hasGetter(t,e){return GSComponents.hasFunc(t,e,'get')}static hasSetter(t,e){return GSComponents.hasFunc(t,e,'set')}static hasFunc(t,e,n){const r=Reflect.getOwnPropertyDescriptor(t.__proto__,e);return r&&'function'==typeof r[n]}static listenStyles(){GSComponents.#P||(document.addEventListener('gs-style',GSComponents.#z),GSComponents.#P=!0)}static unlistenStyles(){document.removeEventListener('gs-style',GSComponents.#z),GSComponents.#P=!1}static#P=!1;static#z(){requestAnimationFrame((()=>{GSComponents.findAll(null,!1,!0).filter((t=>t.shadowRoot)).forEach((t=>t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles))}))}static{Object.freeze(GSComponents),GSComponents.listenStyles(),globalThis.GSComponents=GSComponents}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let n=null;const r=location.pathname.split('/').pop(-1).includes('.'),s=t.includes('extension:/');n=t.startsWith('http')||s?t:t.startsWith('/')?`${location.origin}/${t}`:r?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,n=n.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(n);return!e&&GSLoader.NO_CACHE&&i.searchParams.append('_dc',Date.now()),i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM.query(document.documentElement,t);return e?e.innerHTML:t}return GSUtil.isHTML(t)?t:(t=GSLoader.#_(t),GSLoader.loadSafe(t))}static#_(t=''){return t=t.startsWith('//')?GSLoader.#q+'/'+t:t,GSLoader.normalizeURL(t)}static get#q(){return GSLoader.normalizeURL(GSLoader.#V,!0)}static get#V(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const n=GSLoader.#_(t);return await GSLoader.load(n,e)}static async load(t='',e='GET',n,r=!1){let s=null;const i='Content-Type';(n=n||{})[i]=r?'application/json':n[i]||'text/plain';const a=GSLoader.normalizeURL(t,!0),o=await fetch(a,{method:e,headers:n});return o.ok&&(s=r?await o.json():await o.text()),s}static async loadSafe(t='',e='GET',n,r=!1,s){try{if(t)return GSLoader.load(t,e,n,r)}catch(t){GSLog.error(this,t)}return s||(r?{}:'')}static async loadData(t=''){const e=GSUtil.isJson(t),n=!e&&GSFunction.parseFunction(t),r=n&&GSFunction.isFunction(n);if((!r&&GSUtil.parseValue(t)||e)&&(t=GSUtil.toJson(t)),r){t=GSFunction.isFunctionAsync(n)?await GSFunction.callFunctionAsync(n,this):GSFunction.callFunction(n)}if(GSUtil.isJsonType(t))return t}static{Object.seal(GSLoader)}}class GSData{static uniqe(t){return Array.from(new Set(t))}static arraysEqual(t,e){if(t===e)return!0;if(!Array.isArray(t))return!1;if(!Array.isArray(e))return!1;t.sort(),e.sort();for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static mergeArrays(t=[],e=[]){return t.concat(e).filter(((t,e,n)=>n.indexOf(t)===e))}static filterData(t,e,n){return 0===t.length?e:e.filter((e=>GSData.filterRecord(e,t,n)))}static filterRecord(t,e,n){return'string'==typeof e?GSData.filterSimple(t,e,n):GSData.filterComplex(t,e)}static filterSimple(t,e='',n){e=e.toLowerCase(),n=n||Object.keys(t);let r=null;for(let s of n)if(r=t[s],(''+r).toString().toLowerCase().includes(e))return!0;return!1}static filterComplex(t,e){let n=!0,r=null;for(let s of e)if(r=s?.value?.toLowerCase(),n=n&&(''+t[s.name]).toLocaleLowerCase().includes(r),!n)break;return n}static sortData(t,e){return 0===t.length?e:e.sort(((e,n)=>GSData.sortPair(e,n,t)))}static sortPair(t,e,n){const r=Array.isArray(t);let s=0;return n.forEach(((n,i)=>{if(!n)return;const a=n.col||i,o=r?a:n.name,l=t[o],c=e[o];s=GSData.compare(l,c,n.ord,s)})),s}static compare(t,e,n,r){return GSUtil.isNumber(t)&&GSUtil.isNumber(e)?r||GSData.compareNum(t,e,n):GSUtil.isString(t)||GSUtil.isString(e)?r||GSData.compareString(t,e,n):r}static compareString(t,e,n){const r=(t||'').toString(),s=(e||'').toString();return n<0?s.localeCompare(r):r.localeCompare(s)}static compareNum(t,e,n){return n<0?e-t:t-e}static{Object.seal(GSData)}}class GSPopper{static getOffset(t){const e=t.getBoundingClientRect(),n=window.scrollX,r=window.scrollY,s={left:e.left+n,right:e.right+n,top:e.top+r,bottom:e.bottom+r,height:e.height,width:e.width,x:e.x+n,y:e.y+r};return s.centerX=s.left+s.width/2,s.centerY=s.top+s.height/2,s}static boundingRect(t,e){const n=t.getBoundingClientRect(),r=GSPopper.elementPadding(e?t:null),s=r.x,i=r.y,a=t.clientWidth-s,o=t.clientHeight-i,l=n.left+r.left,c=n.top+r.top;return{width:a,height:o,top:c,left:l,x:l,y:c,centerX:a/2+l,centerY:c+o/2}}static elementPadding(e){const n={left:0,right:0,top:0,bottom:0,x:0,y:0};if(!(e instanceof HTMLElement))return n;const r=t.getComputedStyledMap(e);return n.left=r.asNum('padding-left'),n.right=r.asNum('padding-right'),n.top=r.asNum('padding-top'),n.bottom=r.asNum('padding-bottom'),n.x=n.left+n.right,n.y=n.top+n.bottom,n}static popupFixed(t='top',e,n,r){if(!e)return!1;if(!n)return!1;const s=GSPopper.#W(t);if(!GSPopper.#J(s))return void GSLog.warn(e,`Invalid popover position: ${t}!`);e.style.position='fixed',e.style.top='0px',e.style.left='0px',e.style.margin='0px',e.style.padding='0px';const i=e.clientHeight/2,a=e.clientWidth/2,o=GSPopper.boundingRect(n,r instanceof HTMLElement),l=GSPopper.#Q(e,r,s),c={x:o.centerX,y:o.centerY,offH:i,offW:a,srcH:e.clientHeight,srcW:e.clientWidth};GSPopper.#K(s,c,o,l),e.style.transform=`translate(${c.x}px, ${c.y}px)`}static popupAbsolute(t='top',e,n,r){if(!e)return!1;if(!n)return!1;const s=GSPopper.#W(t);if(!GSPopper.#J(s))return void GSLog.warn(e,`Invalid popover position: ${t}!`);r.style.position='absolute',e.style.position='absolute',e.style.margin='0px',e.style.inset=GSPopper.#X(s);const i=e.getBoundingClientRect(),a=r.getBoundingClientRect(),o=GSPopper.getOffset(n),l={x:o.centerX,y:o.centerY},c={x:i.width/2-a.width/2,y:i.height/2-a.height/2};GSPopper.#Y(s,l,c,i,a,o),e.style.transform=`translate(${l.x}px, ${l.y}px)`,r.style.transform=`translate(${c.x}px, ${c.y}px)`,r.style.top=c.top?c.top:'',r.style.left=c.left?c.left:''}static#Y(t,e,n,r,s,i){t.isTop?(n.y=0,n.left='0px',e.x=e.x-r.width/2,e.y=-1*(r.bottom-i.top+s.height)):t.isBottom?(n.y=0,n.left='0px',e.x=e.x-r.width/2,e.y=i.bottom+s.height):t.isStart?(n.x=0,n.top='0px',e.x=-1*(r.right-i.left+s.width),e.y=e.y-r.height/2):t.isEnd&&(n.x=0,n.top='0px',e.x=i.right+s.width,e.y=e.y-r.height/2)}static#K(t,e,n,r){t.isTop?(e.y=n.top-e.srcH-r.size,e.x=e.x-e.offW):t.isBottom?(e.y=n.top+n.height+r.size,e.x=e.x-e.offW):t.isStart?(e.x=n.left-e.srcW-r.size,e.y=e.y-e.offH+r.size):t.isEnd&&(e.x=n.left+n.width+r.size,e.y=e.y-e.offH+r.size)}static#X(t){return t.isTop?'auto auto 0px 0px':t.isBottom?'0px auto auto 0px':t.isStart?'0px 0px auto auto':t.isEnd?'0px auto auto 0px':void 0}static#J(t){return t.isStart||t.isEnd||t.isTop||t.isBottom}static#W(t){return{isStart:'start'==t||'left'==t,isEnd:'end'==t||'right'==t,isTop:'top'==t,isBottom:'bottom'==t}}static#Q(t,e,n){if(!e)return{x:0,y:0,size:0,width:0,height:0};let r=0;const s=GSPopper.boundingRect(t),i=GSPopper.boundingRect(e),a=n.isStart||n.isEnd?i.width:i.height,o=s.width/2-a/2,l=s.height/2-a/2;return i.size=a,e.style.position='absolute',n.isStart||n.isEnd?(e.style.left=null,e.style.top='0px',r=n.isStart?a:-1*a,e.style.transform=`translate(${r}px, ${l/2}px)`):(e.style.top=null,e.style.left='0px',r=n.isTop?a:-1*a,e.style.transform=`translate(${o}px, ${r}px)`),i}static{Object.seal(GSPopper),globalThis.GSPopper=GSPopper}}class GSItem extends HTMLElement{static#Z='data-bs-dismiss';static#tt='data-bs-target';static#et='data-bs-toggle';static#nt='data-action';static#rt='data-inject';static#st='data-selectable';static#it=['GS-ITEM','TEMPLATE'];static{customElements.define('gs-item',GSItem),Object.seal(GSItem)}constructor(){super(),GSItem.validate(this)}static validate(t,e='GS-ITEM'){return GSDOM.validate(t,e,GSItem.#it)}static getBody(t,e=!1){let n=GSItem.getTemplate(t);const r=GSItem.getFlat(t),s=GSItem.getAnchor(t),i=r||e?`anchor="${s}" flat="true"`:'',a=GSAttr.get(t,'css-template','');return n?`<gs-template ${i} href="${n}" class="${a}"></gs-template>`:(n=t.querySelector('template'),n?.innerHTML||'')}static genericItems(t){return GSDOM.isHTMLElement(t)?Array.from(t.children).filter((t=>'GS-ITEM'==t.tagName)):[]}static getAttrs(t){return[GSItem.getDismissAttr(t),GSItem.getTargetAttr(t),GSItem.getToggleAttr(t),GSItem.getActionAttr(t),GSItem.getInjectAttr(t)].join(' ')}static getDismissAttr(t){const e=GSItem.getDismiss(t);return e?`${GSItem.#Z}="${e}"`:''}static getTargetAttr(t){const e=GSItem.getTarget(t);return e?`${GSItem.#tt}="${e}"`:''}static getToggleAttr(t){const e=GSItem.getToggle(t);return e?`${GSItem.#et}="${e}"`:''}static getActionAttr(t){const e=GSItem.getAction(t);return e?`${GSItem.#nt}="${e}"`:''}static getInjectAttr(t){const e=GSItem.getInject(t);return e?`${GSItem.#rt}="${e}"`:''}static getSelectableAttr(t){const e=GSItem.getSelectable(t);return e?'':`${GSItem.#st}="${e}"`}static getActive(t){return GSAttr.getAsBool(t,'active')}static getAction(t){return GSAttr.get(t,'action')}static getDismiss(t){return GSAttr.get(t,'dismiss')}static getTarget(t){return GSAttr.get(t,'target')}static getToggle(t){return GSAttr.get(t,'toggle')}static getInject(t){return GSAttr.get(t,'inject')}static getIcon(t){return GSAttr.get(t,'icon')}static getSelectable(t){return GSAttr.getAsBool(t,'selectable',!0)}static getAnchor(t){return GSAttr.get(t,'anchor','afterend@self')}static getFlat(t){return GSAttr.getAsBool(t,'flat',!1)}static getName(t){return GSAttr.get(t,'name','')}static getHref(t){return GSAttr.get(t,'href','#')}static getGroup(t){return GSAttr.get(t,'group')}static getSelected(t){return t.hasAttribute('selected')}static getCSS(t){return GSAttr.get(t,'css','')}static getTemplate(t){return GSAttr.get(t,'template','')}get dismissAttr(){return GSItem.getDismissAttr(this)}get targetAttr(){return GSItem.getTargetAttr(this)}get toggleAttr(){return GSItem.getToggleAttr(this)}get actionAttr(){return GSItem.getActionAttr(this)}get injectAttr(){return GSItem.getInjectAttr(this)}get action(){return GSItem.getAction(this)}get dismiss(){return GSItem.getDismiss(this)}get target(){return GSItem.getTarget(this)}get toggle(){return GSItem.getToggle(this)}get inject(){return GSItem.getInject(this)}get selectable(){return GSItem.getSelectable(this)}get flat(){return GSItem.getFlat(this)}get name(){return GSItem.getName(this)}get css(){return GSItem.getCSS(this)}get active(){return GSItem.getActive(this)}get template(){return GSItem.getTemplate(this)}get body(){return GSItem.getBody(this)}get href(){return GSItem.getHref(this)}get group(){return GSItem.getGroup(this)}get selected(){return GSItem.getSelected(this)}get html(){const t=this;if(GSUtil.isStringEmpty(t.group))return t.name;const e=GSID.id;return`<input id="${e}" ${t.selected?'checked':''} type="radio" name="${t.group}"><label class="ms-2" for="${e}">${t.name}</label>`}}class GSBlock extends HTMLElement{constructor(){super()}connectedCallback(){this.id||this.setAttribute('id',GSID.id)}disconnectedCallback(){const t=GSDOM.query(document.body,this.proxy);t&&t.remove()}get proxy(){return GSAttr.get(this,'proxy')}static{customElements.define('gs-block',GSBlock),Object.seal(GSBlock)}}class GSElement extends HTMLElement{#at=!1;#ot=!1;#lt=null;#ct=null;#ut=!1;#dt=null;constructor(){super()}static observeAttributes(t){return GSData.mergeArrays(t,GSElement.observedAttributes)}static get observedAttributes(){return['orientation','id','visible']}get clazzName(){return this.constructor.name}get template(){return GSAttr.get(this,'template','')}set template(t){GSAttr.set(this,'template',t)}get isFlat(){return GSUtil.FLAT||GSAttr.getAsBool(this,'flat')}get isProxy(){return this.#ut}get proxy(){return GSAttr.get(this,'proxy')}get environment(){return GSAttr.get(this,'environment','')}set environment(t){GSAttr.set(this,'environment',t)}get os(){return GSAttr.get(this,'os','')}set os(t){GSAttr.set(this,'os',t)}get browser(){return GSAttr.get(this,'browser','')}set browser(t){GSAttr.set(this,'browser',t)}get protocol(){return GSAttr.get(this,'protocol','')}set protocol(t){GSAttr.set(this,'protocol',t)}get orientation(){return GSAttr.get(this,'orientation','')}set orientation(t){GSAttr.set(this,'orientation',t)}get onready(){return GSAttr.get(this,'onready','')}set onready(t){GSAttr.set(this,'onready',t)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get owner(){return GSComponents.getOwner(this)}get offline(){return this.#ot}get online(){return!this.#ot}get ready(){return this.#at}get anchor(){const t='beforeend@self';return this.proxy?t:GSAttr.get(this,'anchor',t)}get self(){const t=this;return t.isProxy&&t.#lt instanceof GSElement?t.#lt.self:t.#lt}get visible(){return this.hasAttribute('visible')}set visible(t=!0){GSAttr.setAsBool(this,'visible',t)}updateUI(){const t=this;t.shadowRoot&&(t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles,GSEvents.send(document.body,'i18n',t.shadowRoot))}getStyle(){return GSAttr.get(this,'style','')}getByID(t=''){return GSDOM.getByID(this,t)}closest(t=''){return GSDOM.closest(this,t)}query(t='',e=!1){const n=this,r=GSDOM.query(n.self,t,!1,!0);return n.isProxy||r?r:GSDOM.query(n,t,!1,e)}queryAll(t='',e=!1){const n=this,r=GSDOM.queryAll(n.self,t,!1,!0);return n.isProxy||r.length>0?r:GSDOM.queryAll(n,t,!1,e)}async getTemplate(t=''){if(t)return GSLoader.getTemplate(t);const e=this.query('template');return e?e.innerHTML:''}hide(t=!1){GSDOM.hide(this,t)}show(t=!1){GSDOM.show(this,t)}async waitEvent(t=''){if(!t)throw new Error('Event undefined!');const e=this;return new Promise(((n,r)=>{e.once(t,(t=>n(t.detail)))}))}once(t,e){return this.listen(t,e,!0)}on(t,e,n=!1){return this.listen(t,e,n)}off(t,e){return this.unlisten(t,e)}listen(t,e,n=!1){return this.attachEvent(this,t,e,n)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',n,r=!1){return GSEvents.attach(this,t,e,n,r)}removeEvent(t,e='',n){return GSEvents.remove(this,t,e,n)}get isAllowRender(){const t=this;return t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS&&t.isValidProtocol}connectedCallback(){const t=this;if(!t.#St()){if(!t.isAllowRender)return t.remove();t.id||(t.id=GSID.id),t.#dt=t.#mt(),t.#ut=t.#dt.ref,GSComponents.store(t),requestAnimationFrame((()=>t.#ht()))}}disconnectedCallback(){const t=this;t.#ot=!0,t.#ct?.disconnect(),GSComponents.remove(t),GSEvents.deattachListeners(t),t.#gt(),t.#ct=null,t.#lt=null,t.#dt=null}attributeChangedCallback(t,e,n){const r=this;'orientation'===t&&r.#pt(),'id'===t&&(GSComponents.remove(e),GSComponents.store(r)),'visible'===t&&GSDOM.toggleClass(r,'gs-hide','false'===n),r.#at&&GSUtil.requestAnimationFrame((()=>{r.attributeCallback(t,e,n)}))}attributeCallback(t,e,n){}onReady(){const t=this;if(t.offline)return;t.#at=!0;const e=GSFunction.parseFunction(t.onready);GSFunction.callFunction(e),GSEvents.send(t,'ready',{}),GSEvents.send(document.body,'componentready',t)}#pt(t){const e=this;GSUtil.requestAnimationFrame((()=>{e.offline||(e.isValidOrientation?e.show(!0):e.hide(!0))}))}#St(){const t=GSComponents.getOwner(this,GSElement);return t&&t.isProxy}#Gt(){const t=this;GSUtil.requestAnimationFrame((()=>{t.updateUI()}))}get#ft(){const t=this;return t.shadowRoot||(t.attachShadow({mode:'open'}),t.#ct=GSDOMObserver.create(t.#ft),t.updateUI()),t.shadowRoot}get#yt(){const t=this;return t.#ut&&t.isFlat||!t.#ut}async#bt(){const t=this;if(t.offline)return;const e=t.#yt,n=e?await t.getTemplate(t.template):t.outerHTML;await GSEvents.waitAnimationFrame((()=>{if(t.offline)return;const r=t.#dt;if(t.#ut)return e?t.#lt=GSDOM.parseWrapped(t,n,!0):(t.#lt=GSDOM.parse(n,!0),t.#lt.id=t.id,t.id=GSID.id),GSDOM.link(t,t.#lt),void GSDOM.insertAdjacent(r.target,t.#lt,r.anchor);if(r.target!==t){if(r.target===t.parentElement)return t.#lt=t.isFlat?t:t.#ft,void GSDOM.setHTML(t.#lt,n);t.#lt=GSDOM.parseWrapped(t,n,!0),GSDOM.link(t,t.#lt),GSDOM.insertAdjacent(r.target,t.#lt,r.anchor)}else if(t.isFlat)if(n){const e=GSDOM.parseWrapped(t,n,!1);t.#lt=e,GSDOM.insertAdjacent(r.target,e,r.anchor)}else t.#lt=t;else t.#lt=t.#ft,GSDOM.setHTML(t.#lt,n)})),t.updateUI()}#mt(){const t=this,e=t.anchor,n=e.indexOf('@');let r=n>0?e.slice(0,n):e,s=n>0?e.slice(n+1):'self';'self'!==r&&'parent'!==r||(s=s||r,r=null),r=GSUtil.normalize(r,'beforeend'),s=GSUtil.normalize(s,'self');let i=null;switch(s){case'self':i=t;break;case'parent':i=t.parentElement;break;default:i=GSDOM.query(document.documentElement,s)}if(!i){const e=`Injection point not available!\nElement: ${t.tagName}, Id:${t.id}, tgt:${s}`;throw GSLog.error(t,e),new Error(e)}return{anchor:r,target:i,ref:!(i===t||i===t.parentElement)}}#gt(){const t=this;t.#lt&&t.#lt.remove&&(t.#lt.remove(),t.#lt=null)}async#ht(){const t=this;await t.#bt();try{if(t.offline)return;if(!t.#yt)return;t.isFlat||t.attachEvent(document,'gs-style',t.#Gt.bind(t)),t.attachEvent(screen.orientation,'change',t.#pt.bind(t))}finally{GSUtil.requestAnimationFrame((()=>t.onReady()))}}static define(t,e,n){if(!customElements.get(t))return customElements.GSDefine?customElements.GSDefine(t,e,n):customElements.define(t,e,n)}static{customElements.define('gs-element',GSElement),customElements.GSDefine||(customElements.GSDefine=customElements.define,customElements.define=GSElement.define,Object.freeze(customElements))}}class GSi18n extends HTMLElement{static#At=/\{\w+\}/g;static#vt=!1;#Et=new Map;#p=new Set;#Ot=!1;#Mt=0;#wt=!1;#Dt=this.#Tt.bind(this);#s=this.#Ct.bind(this);static{customElements.define('gs-i18n',GSi18n),Object.seal(GSi18n),document.body.addEventListener('i18n',(t=>{GSi18n.default&&GSi18n.default.translateDOM(t.detail)}))}static get observedAttributes(){return['lang','auto']}static get default(){return GSi18n.#vt}constructor(){super()}connectedCallback(){const t=this;t.id=t.id?t.id:GSID.id,t.#wt=!!GSComponents.find(this.tagName),t.#wt||(GSi18n.#vt=t,GSComponents.store(t),t.#xt())}disconnectedCallback(){const t=this;clearInterval(t.#Mt),GSDOMObserver.unregisterFilter(t.#Dt,t.#s),GSComponents.remove(t),t.#Et.clear(),t.#Et=null,t.#s=null,t.#Dt=null,t.#wt||(GSi18n.#vt=null)}attributeChangedCallback(t='',e='',n=''){this.#Lt(t,e,n)}async#Lt(t='',e='',n=''){const r=this;'lang'===t&&(r.#Et.has(n)||await r.#Ft(n),r.translateDOM(document.documentElement,r.auto)),'auto'===t&&r.#xt()}#kt(t){return!(t instanceof HTMLScriptElement||t instanceof HTMLStyleElement||t instanceof HTMLLinkElement||t instanceof HTMLMetaElement||t instanceof Comment)}#Tt(t){const e=t instanceof Text;if(e&&0==t.textContent.trim().length)return!1;const n=e?t.parentElement:t;return this.#kt(n)&&this.#It(n)}#It(t){return'false'!==GSAttr.get(t,'translate')}#Ct(t){this.#p.add(t)}#Ut(){const t=this;t.#Ot||0!==t.#p.size&&requestAnimationFrame((()=>{try{Array.from(t.#p).forEach((e=>{t.#p.delete(e),t.#jt(e)}))}catch(t){}}))}#jt(t){const e=this;if(e.#Ot>0)return e.#p.add(t);if(t===document.documentElement)e.translateDOM(t,e.auto);else{t instanceof Text?e.#Nt(t):e.#Ht(t)}t.shadowRoot&&e.translateDOM(t.shadowRoot,e.auto)}#Ht(t){const e=this;e.list.forEach((n=>e.#Bt(t,n)))}#Bt(t,e){const n=`data-gs-i8n-${e}`;let r=GSAttr.get(t,n),s=GSAttr.get(t,e);r?s=r:s&&GSAttr.set(t,n,s),s&&GSAttr.set(t,e,this.translate(s))}#Nt(t){t.gsi18n=t.gsi18n||t.textContent,t.textContent=this.translate(t.gsi18n)}async#Ft(t=''){const e=this,n={'Cache-Control':'no-cache',Pragma:'no-cache'};let r=null;try{e.#Ot++;const s=GSLoader.normalizeURL(`${e.url}/${t}.json`);if(r=await GSLoader.load(s,'GET',n,!0),!r&&t.indexOf('_')>0&&(r=await e.#Ft(t.split('_')[0])),!r)return!1;e.#r(t,r)}finally{e.#Ot--}return e.auto||e.#Ut(),!0}#r(t,e){if(!e||!t)return!1;const n=this.#Rt(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0]);n.set(e,t[1])})),!0}#Rt(t=''){const e=this;return e.#Et.has(t)||(e.#Et.set(t,new Map),e.#Ft(t)),e.#Et.get(t)}#xt(){const t=this;t.auto?(GSDOMObserver.registerFilter(t.#Dt,t.#s),t.#Mt=setInterval(t.#Ut.bind(t),500)):(GSDOMObserver.unregisterFilter(t.#Dt,t.#s),clearInterval(t.#Mt))}translateDOM(t,e=!1){const n=this;t!==document.documentElement&&n.#p.add(t),Array.from(t.childNodes).filter((t=>n.#Tt(t))).forEach((t=>0==t.childNodes.length?n.#p.add(t):n.translateDOM(t,!0))),e||n.#Ut()}translate(t){if(GSUtil.isStringEmpty(t))return t;const e=this;let n=t,r=null,s=null,i=null;for(GSi18n.#At.lastIndex=-1;null!==(i=GSi18n.#At.exec(t));)r=i[0],s=e.find(r.slice(1,-1)),n=n.replace(r,s);return n}find(t){const e=GSID.hashCode(t);return this.#Rt(this.lang).get(e)||t}get auto(){return GSAttr.getAsBool(this,'auto',!0)}set auto(t=''){GSAttr.setAsBool(this,'auto',t)}get default(){return GSAttr.get(this,'default',document.documentElement.lang||navigator.language)}set default(t=''){GSAttr.set(this,'default',t)}get lang(){return GSAttr.get(this,'lang',this.default)}set lang(t=''){GSAttr.set(this,'lang',t)}get list(){return GSAttr.get(this,'list','title,comment').split(',')}set list(t=''){t=Array.isArray(t)?t.join(','):t,GSAttr.set(this,'list',t)}get url(){return GSAttr.get(this,'url',`${location.origin}/i18n/`)}set url(t=''){GSAttr.set(this,'url',t)}}class GSQueryCSS{#u=null;constructor(t){if(!GSDOM.isHTMLElement(t))throw new Error('Only HTMLElement type allowed!');this.#u=new GSCSSMap(t)}#$t(t){return GSFunction.hasFunction(this.#u,t)}get(t,e,n){return(r,s)=>{const i=this;return GSUtil.isNull(r)?i.#u.get(e):i.#$t(e)?i.#u[e](r,s):(t[e]=r,n)}}static wrap(t){return new Proxy(t.style,new GSQueryCSS(t))}}class GSQuery{#Pt=null;constructor(t){Array.isArray(t)||(this.#Pt=GSQueryCSS.wrap(t))}get(t,e){return'css'===e?this.#Pt:'query'===e?(e,n,r)=>{const s=GSDOM.query(t,e,n,r);return GSQuery.wrap(s)}:'queryAll'===e?(e,n,r)=>{const s=GSDOM.queryAll(t,e,n,r);return GSQuery.wrap(s)}:t[e]}set(t,e,n){if('css'===e)Array.isArray(t)?t.forEach((t=>t[e]=n)):GSDOM.css(t,n);else t[e]=n;return!0}static instance(t){return new Proxy(t,new GSQuery(t))}static wrap(t){return GSDOM.isHTMLElement(t)?GSQuery.instance(t):Array.isArray(t)?(t=t.map((t=>GSQuery.instance(t))),GSQuery.instance(t)):t}static all(t,e,n,r){return GSQuery.wrap(GSDOM.queryAll(t,e,n,r))}static first(t,e,n,r){return GSQuery.wrap(GSDOM.query(t,e,n,r))}static{Object.freeze(GSQuery),globalThis.GSQuery=GSQuery}}class GSCacheTemplate{static _store=new Map;static store(t,e){this._store.set(t,e)}static remove(t){return this._store.delete(t)}static load(t){return this._store.get(t)}static getOrCreate(t,e){const n=GSCacheTemplate;let r=n.load(t);return r||(r=n.create(e),n.store(t,r),r)}static create(t){const e=document.createElement('template');return GSDOM.setHTML(e,t),e}static clone(t){return GSDOM.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(t){const e=GSFunction.parseFunction(t);return!!GSFunction.isFunction(e)&&e}static isHTMLTemplate(t){const e=t?t.trim():'';return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():'';return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e='',n){const r=GSCacheTemplate;return t?r.getOrCreate(e,n):r.create(n)}static loadHTMLTemplate(t=!1,e='',n){const r=GSCacheTemplate,s=r.isHTMLTemplate(n);return s?r.initTemplate(t,e,s):s}static async loadURLTemplate(t=!1,e='',n){const r=GSCacheTemplate,s=n;try{let n=null;return t&&(n=r.load(s)),n?n:(n=await GSLoader.loadTemplate(s),r.initTemplate(t,e,n))}catch(t){GSLog.error(r,t)}return!1}static async loadFunctionTemplate(t=!1,e='',n){const r=GSCacheTemplate,s=r.isFunctionTemplate(n);if(!s)return s;try{let n=null;return r.cached&&(n=r.load(o)),n?n:(n=GSFunction.isFunctionAsync(s)?await s():s(),r.initTemplate(t,e,n))}catch(t){GSLog.error(r,t)}return s}static async loadTemplate(t=!1,e='',n){if(!e)return!1;if(!n)return!1;const r=GSCacheTemplate;let s=!1;return 0==n.indexOf('#')&&(s=document.getElementById(n.slice(1))),s||(s=r.loadHTMLTemplate(t,e,n)),s||(s=await r.loadFunctionTemplate(t,e,n)),s||(s=await r.loadURLTemplate(t,e,n)),s}}class GSTemplate extends HTMLElement{#zt=!1;#lt=null;#ct=null;static get observedAttributes(){return['href']}constructor(){super()}get id(){return GSAttr.get(this,'id')}set id(t){GSAttr.set(this,'id',t)}get href(){return GSAttr.get(this,'href')}set href(t){GSAttr.set(this,'href',t)}get isFlat(){return GSUtil.FLAT||GSAttr.getAsBool(this,'flat',!1)}get self(){return this.#lt||this.shadowRoot}get environment(){return GSAttr.get(this,'environment','')}set environment(t){GSAttr.set(this,'environment',t)}get os(){return GSAttr.get(this,'os','')}set os(t){GSAttr.set(this,'os',t)}get browser(){return GSAttr.get(this,'browser','')}set browser(t){GSAttr.set(this,'browser',t)}attributeChangedCallback(t,e,n){this.#zt&&'href'===t&&this.loadTemplate()}connectedCallback(){const t=this,e=t.parentElement;if(!e||'GS-ITEM'!=e.tagName){if(!(t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS))return t.remove();t.id||(t.id=GSID.id),t.#zt=!0,GSComponents.store(t),t.loadTemplate()}}disconnectedCallback(){const t=this;t.#zt=!1,t.#gt(),t.#ct&&t.#ct.disconnect(),GSComponents.remove(t),GSCacheTemplate.remove(t.id)}#gt(){const t=this;t.#lt&&(t.#lt.remove(),t.#lt=null)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get shadow(){const t=this;return!t.shadowRoot&&t.#zt&&(t.attachShadow({mode:'open'}),t.#ct=GSDOMObserver.create(t.shadowRoot)),t.shadowRoot}async loadTemplate(){const t=this,e=await GSCacheTemplate.loadTemplate(!0,t.id,t.href);return e?t.parentElement instanceof HTMLHeadElement?(GSEvents.sendSuspended(document,'gs-template',{id:t.id,href:t.href}),e):(await GSEvents.waitAnimationFrame((async()=>{if(t.#zt){if(t.isFlat){const n=GSDOM.parseWrapped(t,e.innerHTML);t.#lt=t.insertAdjacentElement('afterend',n)}else t.shadow.adoptedStyleSheets=GSCacheStyles.styles,GSDOM.setHTML(t.shadow,e.innerHTML);GSEvents.sendSuspended(t,'templateready',{id:t.id,href:t.href},!0,!0)}})),e):(GSLog.error(this,`Template not found for: Id=${t.id}; href=${t.href}`),!1)}waitWhenReady(t=''){return t&&(this.href=t),this.waitEvent('templateready')}waitEvent(t=''){const e=this;return new Promise(((n,r)=>{if(!t)return r('Event undefined!');GSEvents.once(e,null,t,(t=>n(t.detail)),{once:!0})}))}query(t=''){return GSDOM.query(this,t)}queryAll(t='',e=!1){return GSDOM.queryAll(this,t)}static{customElements.define('gs-template',GSTemplate),Object.seal(GSTemplate)}}
//# sourceMappingURL=io.greenscreens.components.core.min.js.map
