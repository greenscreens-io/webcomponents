class GSLog{static logging=!0;static tracing=!1;static info(t,e){this.#t(t,e,!0,'info')}static warn(t,e){this.#t(t,e,!0,'warn')}static error(t,e){this.#t(t,e,!0,'error')}static trace(t,e){GSLog.tracing&&this.#t(t,e,!1,'error')}static log(t,e,s){this.#t(t,e,s)}static#t(t,e,s,n){if(!s&&!this.logging)return;const r=t?`${t.nodeName} -> ${t.id}: ${e}`:e;let i=console[n||'log'];i='function'==typeof i?i:console.log,i(r),e instanceof Error&&i(e)}static{Object.seal(GSLog)}}class GSBase extends HTMLElement{static#e=0;#s='';static get observedAttributes(){return[]}static nextID(){return GSBase.#e++,`GSHID_${GSBase.#e}`}static hashCode(t){let e=0,s=t.length,n=0;if(s>0)for(;n<s;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}static sendEvent(t=document,e,s='',n=!1,r=!1,i=!1){const a=new CustomEvent(e,{detail:s,bubbles:n,composed:r,cancelable:i});return t.dispatchEvent(a)}static sendSuspendedEvent(t=document,e,s=''){requestAnimationFrame((()=>{GSBase.sendEvent(t,e,s)}))}connectedCallback(){const t=this;if(t.url&&t.isRenderable()){const e=GSBase.hashCode(t.url);if(document.querySelector(`[data-hash="${e}"]`))return void t.remove();const s=t.render();s&&!(s instanceof Promise)&&(s.dataset.hash=e,t.isHead?document.head.appendChild(s):t.insertAdjacentElement('afterend',s),t.isAuto&&(s.id=s.id?s.id:GSBase.nextID(),t.#s=s.id))}t.isAuto||t.remove()}disconnectedCallback(){const t=this;if(t.isAuto&&t.#s){const e=document.querySelector(`#${t.#s}`);e&&e.remove()}t.dispose()}attributeChangedCallback(t,e,s){const n=this;requestAnimationFrame((()=>{n.attributeCallback(t,e,s)}))}attributeCallback(t,e,s){}render(){}dispose(){}get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}get isProtocol(){const t=this.protocol;if(!t)return!0;const e=location.protocol.replace(':','');return'http'===t&&e===t||'https'===t&&e===t}get isAsset(){return this.isTarget('GreenScreens')}isTarget(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((s=>{s.brand.toLowerCase().includes(e)&&(t=!0)})),t}const s=new RegExp(`${t}`,'i');return!!navigator.userAgent.match(s)}isRenderable(){const t=this,e=t.isMobile,s=t.isAsset,n=t.isProtocol,r=t.target,i=t.env;return!!n&&(('assets'!==i||!1!==s)&&(('browser'!==i||!0!==s)&&(('mobile'!==i||!1!==e)&&(('desktop'!==i||!0!==e)&&!!t.isTarget(r)))))}get env(){return this.getAttribute('env')||''}get target(){return this.getAttribute('target')||''}get url(){const t=this;let e=t.getAttribute('url')||'';if('assets'===t.env)return'**'+e;if(t.#n)try{let t=`${location.origin}${location.pathname}`;e.startsWith('/')&&(t=location.origin),e.startsWith('http')&&(t=void 0);const s=new URL(e,t);s.searchParams.append('_dc',Date.now()),e=s.href}catch(t){GSLog.error(null,t)}return e}get type(){const t=this;let e=t.getAttribute('type')||'';return e||(t.url.includes('.js')?e='text/javascript':t.url.includes('.css')&&(e='text/css')),e}get async(){return this.hasAttribute('async')}get defer(){return this.hasAttribute('defer')}get isHead(){return this.hasAttribute('head')}get isAuto(){return this.hasAttribute('auto')}get protocol(){return this.getAttribute('protocol')||''}get nonce(){return this.getAttribute('nonce')||''}get crossorigin(){return this.getAttribute('crossorigin')}get fetchpriority(){return this.getAttribute('fetchpriority')||'auto'}get integrity(){return this.getAttribute('integrity')}get referrerpolicy(){return this.getAttribute('referrerpolicy')}get#n(){return'GS_NO_CACHE'in globalThis?globalThis.GS_NO_CACHE:!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static{Object.seal(GSBase)}}class GSDynamicStyle extends CSSStyleSheet{constructor(t){super(),this.id=t||GSBase.nextID()}deleteRule(t=''){const e=this;Array.from(e.cssRules).map(((e,s)=>e.selectorText===`.${t}`?s:-1)).filter((t=>t>-1)).forEach((t=>e.deleteRule(t)))}getRule(t=''){return Array.from(this.cssRules).filter((e=>e.selectorText===`.${t}`)).pop()}setRule(t,e='',s=!1){const n=this;if(!t)return;let r=n.getRule(t);if(!r)return n.insertRule(`.${t} {}`),n.setRule(t,e,s);if(!e)return r;let i=[];return i='string'==typeof e?e.replaceAll('\n','').split(';').map((t=>t.trim().split(':'))).filter((t=>2===t.length)):Object.entries(e),s?i.forEach((t=>n.#r(r,t[0],t[1]))):requestAnimationFrame((()=>{i.forEach((t=>n.#r(r,t[0],t[1])))})),r}#r(t,e='',s=''){const n=(s=s||'').includes('!important');s=s.replace('!important',''),e=e.trim(),t.style.setProperty(e,s,n?'important':'')}}let t=class GSCacheStyles{static#i=new Map;static create(t){const e=new GSDynamicStyle(t);return this.#i.set(t,e),e}static set(t,e){const s=this;if(e instanceof CSSStyleSheet&&s.#i.set(t,e),e&&'string'==typeof e){GSCacheStyles.create(t).replaceSync(e)}return s.get(t)}static remove(t){return this.#i.delete(t)}static get(t){return this.#i.get(t)}static get dynamic(){const t='gs-dynamic';let e=GSCacheStyles.get(t);return e||(e=GSCacheStyles.create(t),document.adoptedStyleSheets=GSCacheStyles.styles),e}static getRule(t=''){return GSCacheStyles.dynamic.getRule(t)}static setRule(t='',e='',s=!1){return GSCacheStyles.dynamic.setRule(t,e,s)}static deleteRule(t=''){GSCacheStyles.dynamic.deleteRule(t)}static get styles(){return Array.from(new Map([...GSCacheStyles.#i].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static adopt(t='',e=0){if(t)try{e=e||GSBase.hashCode(t),GSCacheStyles.set(e,t),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){GSLog.error(null,t)}}static get#a(){return'.z-10k{z-index:10000 !important;}.gs-hide{display:none !important;}.gs-hide-orientation,.gs-render{display:none !important;}gs-item{display:none !important;}'}static{Object.freeze(GSCacheStyles),globalThis.GSCacheStyles=GSCacheStyles,GSCacheStyles.adopt(GSCacheStyles.#a)}};class GSLinkExt extends HTMLLinkElement{#o=null;constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.isCSS&&(t.#o=setInterval(t.#l.bind(t),1))}connectedCallback(){}disconnectedCallback(){const e=this;if(clearInterval(e.#o),!e.isCSS)return;const s=t.remove(e.order);GSBase.sendSuspendedEvent(document,'gs-style',s)}#l(){const e=this;if(!e.sheet)return;clearInterval(e.#o),t.adopt(e.asText,e.order);const s=t.get(e.order);GSBase.sendSuspendedEvent(document,'gs-style',s)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join('')}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get isCSS(){return'stylesheet'===this.rel||this.href.includes('.css')}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}static{customElements.define('gs-ext-link',GSLinkExt,{extends:'link'}),Object.freeze(GSLinkExt)}}class GSStyleExt extends HTMLStyleElement{constructor(){super();this.order||(this.order=GSBase.nextID())}connectedCallback(){const e=this;if(!e.sheet)return;t.adopt(e.asText,e.order);const s=t.get(e.order);GSBase.sendSuspendedEvent(document,'gs-style',s)}disconnectedCallback(){const e=t.remove(this.order);GSBase.sendSuspendedEvent(document,'gs-style',e)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join('')}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}static{Object.freeze(GSStyleExt),customElements.define('gs-ext-style',GSStyleExt,{extends:'style'})}}class GSCSS extends GSBase{static get observedAttributes(){return['disabled',...super.observedAttributes]}attributeCallback(t,e,s){const n=this;if('disabled'===t)return n.disabled?n.dispose():n.render()}constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.disabled=0==t.notheme&&t.theme!==GSCSS.activeTheme}async render(){const e=this;if(!e.disabled)try{const s=await fetch(e.url);if(!s.ok)return;const n=await s.text();t.adopt(n,e.order);const r=t.get(e.order);r&&GSBase.sendSuspendedEvent(document,'gs-style',r)}catch(s){t.remove(e.order),GSLog.error(null,s)}}dispose(){const e=this;if(!e.isAuto)return;const s=t.get(e.order);t.remove(e.order),GSBase.sendSuspendedEvent(document,'gs-style',s),document.adoptedStyleSheets=t.styles}get order(){return this.getAttribute('order')}set order(t=''){return this.setAttribute('order',t)}get notheme(){return'true'===this.getAttribute('notheme')}get disabled(){return this.hasAttribute('disabled')}set disabled(t=!1){return t?this.setAttribute('disabled',''):this.removeAttribute('disabled')}get theme(){return this.getAttribute('theme')||'default'}static get activeTheme(){return new URLSearchParams(location.hash.slice(1)).get('theme')||'default'}static#c(t){const e=GSCSS.activeTheme;Array.from(document.querySelectorAll('gs-css')).filter((t=>0==t.notheme)).forEach((t=>t.disabled=t.theme!==e))}static{Object.freeze(GSCSS),customElements.define('gs-css',GSCSS),window.addEventListener('hashchange',GSCSS.#c,!1)}}class GSScript extends GSBase{render(){const t=this,e=document.createElement('script');return e.src=t.url,t.getAttributeNames().filter((t=>'url'!==t)).forEach((s=>e.setAttribute(s,t.getAttribute(s)))),e}static{customElements.define('gs-script',GSScript),Object.freeze(GSScript)}}class GSLink extends GSBase{render(){const t=this,e=document.createElement('link');return e.href=t.url,t.getAttributeNames().filter((t=>'url'!==t)).forEach((s=>e.setAttribute(s,t.getAttribute(s)))),t.shadow&&'stylesheet'===e.rel&&e.setAttribute('is','gs-ext-link'),e}get rel(){const t=this;let e=t.getAttribute('rel')||'';return e||t.url.includes('.css')&&(e='stylesheet'),e}get shadow(){return this.hasAttribute('shadow')}static{customElements.define('gs-link',GSLink),Object.freeze(GSLink)}}class GSVersion{get version(){return'1.9.5'}get build(){return 20241227}}class GSID{static#e=0;static reset(){this.#e=0}static next(t='GSId-'){return`${t}${this.#e++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let s=0,n=0;if(0===e)return s;for(;n<e;)s=(s<<5)-s+t.charCodeAt(n++)|0;return s}static setIf(t){t&&(t.id='string'!=typeof t.id?GSID.id:t.id||GSID.id)}static{Object.freeze(GSID)}}let e=class GSUtil{static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static#u=/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asNum=(t=0,e=0)=>GSUtil.isNumber(t)?parseFloat(t):e;static asBool=(t=!1)=>'true'===t?.toString().trim().toLowerCase();static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,s)=>e[s]));static capitalize=(t='')=>t?t[0].toUpperCase()+t.slice(1).toLowerCase():'';static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isInstance=t=>t instanceof t.constructor;static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.trim().startsWith('<')&&t.trim().endsWith('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return!GSUtil.isNull(t)&&(Array.isArray(t)||'object'==typeof t)}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t='',e={},s=!0){return GSUtil.isJsonString(t)?JSON.parse(s?GSUtil.normalizeJson(t):t):GSUtil.isJsonType(t)?t:(t&&GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),e)}static normalizeJson(t=''){return t?.replace(GSUtil.#u,'"$2": ')}static normalize(t,e=''){return(t??e).toString().trim()}static textTransform(t='',e=''){switch(t){case'lowercase':e=e.toLowerCase();break;case'uppercase':e=e.toUpperCase();break;case'capitalize':e=GSUtil.capitalizeAll(e)}return e}static sanitize(t=''){const e={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#x27;','/':'&#x2F;'};return t.replace(/[&<>"'/]/gi,(t=>e[t]))}static fromTemplateLiteral(t,e){const s=Object.keys(e),n=Object.values(e);return new Function(...s,`return \`${t}\`;`)(...n)}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,s=null;return t.trim().split('.').forEach(((t,n,r)=>{if(e)return n<r.length-1?e=e[t]:void(s=e[t])})),s}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return 0===GSUtil.normalize(t).trim().length}static isStringMatch(t,e){const s=GSUtil.isStringNonEmpty(t),n=GSUtil.isStringNonEmpty(e);return s&&n?t.trim().toLowerCase()==e.trim().toLowerCase():s===n}static async timeout(t=0,e){return e=GSUtil.isNumber(e)?AbortSignal.timeout(e):e,new Promise(((s,n)=>{const r=setTimeout(s.bind(null,!0),t);e instanceof AbortSignal&&e.addEventListener('abort',(()=>{clearTimeout(r),n(new Error('aborted timeout'))}))}))}static async export(t,e,s='octet/stream'){const n=new Blob(t,{type:s}),r=URL.createObjectURL(n);try{const t=document.createElement('a');t.href=r,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(r)}}static register(t,e,s,n=!0,r=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:s?.toLowerCase()}),n&&!Object.isSealed(e)&&Object.seal(e),r&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),s=URL.createObjectURL(e);try{return await import(s)}finally{URL.revokeObjectURL(s)}}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}},s=class GSFunction{static isFunction=t=>'function'==typeof t;static isFunctionNative(t){return GSFunction.isFunction(t)&&t.toString().includes('native code')}static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static isFunctionDefined(t,e,s){const n=!!t&&Reflect.getOwnPropertyDescriptor(t.__proto__,e);return n&&'function'==typeof n[s]}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){const s=arguments?Array.from(arguments).slice(2):[];return await t.apply(e||null,s)}static callFunctionSync(t,e){const s=arguments?Array.from(arguments).slice(2):[];return t.apply(e||null,s)}static async callFunction(t,s,n=!0){if(t=e.isString(t)?GSFunction.parseFunction(t):t,!GSFunction.isFunction(t))return;if(!n&&GSFunction.isFunctionNative(t))return;const r=arguments?Array.from(arguments).slice(3):[];return GSFunction.isFunctionAsync(t)?await GSFunction.callFunctionAsync(t,s,...r):GSFunction.callFunctionSync(t,s,...r)}static parseFunction(t){const s=e.parseValue(t);return GSFunction.isFunction(s)?s:null}static async#d(t,e,s){if(!GSFunction.isFunction(t))return;return GSFunction.isFunctionAsync(t)?await t.apply(e,s):t.apply(e,s)}static callOnceFifo(t,e){let s=!1;return async(...n)=>{if(s)return;s=!0;const r=e||this;return await GSFunction.#d(t,r,n)}}static callOnceLifo(t,e){let s=0;return(...n)=>{if(s<0)return;s++;const r=e||this;return new Promise(((e,i)=>{queueMicrotask((async()=>{if(!(s<=0)&&(s--,0===s))try{const s=await GSFunction.#d(t,r,n);e(s)}catch(t){i(t)}finally{s=-1}}))}))}}static{Object.seal(GSFunction),globalThis.GSFunction=GSFunction}},n=class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,s=!1){GSAttr.isHTMLElement(t)&&(s?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,s,n){GSAttr.isHTMLElement(t)&&(e.normalize(n)?t.setAttribute(s,n):t.removeAttribute(s))}static get(t,s='',n=''){if(!GSAttr.isHTMLElement(t))return n;if(!e.isInstance(t))return;const r=t.getAttribute(s)||n;return e.normalize(r)}static getAsBool(t,s='',n='false'){const r=GSAttr.get(t,s,n);return e.asBool(r,n)}static getAsNum(t,s='',n='0'){const r=GSAttr.get(t,s,n);return e.asNum(r,n)}static getAsJson(t,s='',n='0'){const r=GSAttr.get(t,s,n,{});return e.toJson(r)}static setAsBool(t,s='',n='false'){GSAttr.set(t,s,e.asBool(n),!1)}static setAsNum(t,s='',n='0'){GSAttr.set(t,s,e.asNum(n),NaN)}static setAsJson(t,e='',s='0'){GSAttr.set(t,e,JSON.stringify(s),'{}')}static flattenJson(t){return Object.entries(t||{}).map((t=>`${t[0]}=${t[1]}`)).join(' ')}static jsonToAttr(t,e){GSAttr.isHTMLElement(e)&&Object.entries(t||{}).map((t=>GSAttr.set(e,t[0],t[1])))}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static flatten(t,e=' '){return Array.from(t?.attributes||[]).map((t=>`${t.name}="${t.value}"`)).join(e)}static proxify(t,s={}){return new Proxy(t,{set(t,n,r){if('self'===n)return;if('dataset'===n)return t.dataset=r;const i=s[n]?.type;switch(n=s[n]?.attribute||n,i){case Boolean:GSAttr.toggle(t,n,e.asBool(r));break;case Number:GSAttr.setAsNum(t,n,r);break;case Object:case Array:GSAttr.set(t,n,JSON.stringify(r));default:GSAttr.set(t,n,r)}return!0},get(t,n){if('dataset'===n)return t.dataset;if('self'===n)return t;const r=s[n]?.type,i=!0===s[n]?.multi;n=s[n]?.attribute||n;let a=GSAttr.get(t,n);switch(r){case Boolean:return t.hasAttribute(n);case Number:return e.asNum(a,0);case Object:return e.toJson(a,{});case Array:return e.toJson(a,[]);default:return a=a||'',i?e.toStringArray(a):a}}})}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}},r=class GSCSSMap{static#h=!!globalThis.document?.body?.computedStyleMap;#g;constructor(t){this.#g=GSCSSMap.#m(t)}get(t){const s=this;if(s.#g)return GSCSSMap.#h?s.#g.get(t):s.#g[e.capitalizeAttr(t)]}asText(t){return(this.get(t)||'')?.toString()}asBool(t){const s=this.get(t);return e.asBool(GSCSSMap.#h?s?.value:s)}asNum(t){let n=this.get(t);return GSCSSMap.#h&&s.isFunction(n?.to)&&'number'!==n.unit&&(n=n.to('px')),e.asNum(GSCSSMap.#h?n?.value:n.match(/\d*(\.\d*)?/g).filter((t=>e.isNumber(t))).shift())}matches(t,e){return this.asText(t)==e}static#m(t){return GSCSSMap.#h?t.computedStyleMap():globalThis.window?.getComputedStyle?globalThis.window.getComputedStyle(t):null}static styleValue(t,e){return GSCSSMap.getComputedStyledMap(t).get(e)}static getComputedStyledMap(t){return new GSCSSMap(t)}static#p(t){return t?(t=String(t).replace(/\s*([>~+])\s*/g,' $1 ')).replace(/(\s+)/g,' ').trim():''}static#f(t,e){return t.split(e).map((t=>t.trim())).filter((t=>t))}static#b(t,e){return!!t&&e.some((e=>t.includes(e)))}static findRule(t){const e=GSCSSMap,s=e.#f(e.#p(t),',');return Array.from(globalThis.document.styleSheets).map((t=>Array.from(t.cssRules||[]))).reduce(((t,e)=>t.concat(e)),[]).filter((t=>e.#b(e.#p(t.selectorText),s)))}static{Object.seal(GSCSSMap),globalThis.GSCSSMap=GSCSSMap}};class GSData{static uniqe(t){return Array.from(new Set(t))}static compareArrays=(t,e)=>t.length===e.length&&t.every(((t,s)=>t===e[s]));static arraysEqual(t,e){return!!Array.isArray(t)&&(!!Array.isArray(e)&&(t===e||(t=t.toSorted(),e=e.toSorted(),GSData.compareArrays(t,e))))}static mergeArrays(t=[],e=[]){return[...t,...e].filter(((t,e,s)=>s.indexOf(t)===e))}static filterData(t,e,s){return e=Array.isArray(e)?e:[],0===t.length?e:e.filter((e=>GSData.filterRecord(e,t,s)))}static filterRecord(t,e,s){return'string'==typeof e?GSData.filterSimple(t,e,s):GSData.filterComplex(t,e)}static filterSimple(t,e='',s){e=e.toLowerCase(),s=s||Object.keys(t);let n=null;for(let r of s)if(n=t[r],(''+n).toString().toLowerCase().includes(e))return!0;return!1}static filterComplex(t,e){let s=!0,n=null;for(let r of e)if(n=r?.value?.toString().toLowerCase(),s=s&&(''+t[r.name]).toLocaleLowerCase().includes(n),!s)break;return s}static sortData(t,e){return 0===t.length?e:e.toSorted(((e,s)=>GSData.sortPair(e,s,t)))}static sortPair(t,s,n){const r=Array.isArray(t);let i=0;return n.forEach(((n,a)=>{if(!n)return;const o=e.isNumber(n)?n:n.ord,l=e.isNumber(n.col)?n.col:a,c=r?l:n.name,u=t[c],d=s[c];i=GSData.compare(u,d,o,i)})),i}static compare(t,s,n,r){return e.isNumber(t)&&e.isNumber(s)?r||GSData.compareNum(t,s,n):e.isString(t)||e.isString(s)?r||GSData.compareString(t,s,n):e.isBool(t)||e.isBool(s)?r||GSData.compareBool(t,s,n):r}static compareBool(t,e,s){return t=t?1:0,e=e?1:0,GSData.compareNum(t,e,s)}static compareString(t,e,s){const n=(t||'').toString(),r=(e||'').toString();return s<0?r.localeCompare(n):n.localeCompare(r)}static compareNum(t,e,s){return s<0?e-t:t-e}static writeToOject(t,s,n,r=!0){if(r&&e.isNull(n))return;const i=s.split('.');if(1===i.length)return GSData.#S(t,s,n);const a=i.slice(0,-1),o=i.slice(-1)[0];return a.forEach((e=>{t.hasOwnProperty(e)||(t[e]={}),t=t[e]})),GSData.#S(t,o,n)}static#S(t,e,s){return t.hasOwnProperty(e)?(Array.isArray(t[e])||(t[e]=[t[e]]),Array.isArray(s)?t[e]=t[e].concat(s):t[e].push(s)):t[e]=s,t}static readFromProperty(t,s){if(e.isNull(t))return;const n=/\[\d+\]$/g;let r=s,i='';return n.test(s)?(r=s.replace(n,''),i=s.match(n).shift().match(/\d+/).shift(),i=e.asNum(i),t=t.hasOwnProperty(r)?t=t[r][i]:null):t=t.hasOwnProperty(r)?t=t[r]:null,t}static readFromObject(t,e){return e?e.split('.').reduce(((t,e)=>GSData.readFromProperty(t,e)),t):void 0}static objectPathExist(t,e){return void 0!==GSData.readFromObject(t,e)}static{Object.seal(GSData),globalThis.GSData=GSData}}let i=class GSDOM{static QUERY_FOCUSABLE='a[href]:not([tabindex=\'-1\']),area[href]:not([tabindex=\'-1\']),input:not([disabled]):not([tabindex=\'-1\']),select:not([disabled]):not([tabindex=\'-1\']),textarea:not([disabled]):not([tabindex=\'-1\']),button:not([disabled]):not([tabindex=\'-1\']),iframe:not([tabindex=\'-1\']),[tabindex]:not([tabindex=\'-1\']),[contentEditable=true]:not([tabindex=\'-1\'])';static QUERY_INPUT='input:not([type=\'hidden\']):not(disabled):not(readonly),select:not([type=\'hidden\']):not(disabled):not(readonly),textarea:not([type=\'hidden\']):not(disabled):not(readonly)';static#v=['INPUT','SELECT','TEXTAREA','OUTPUT'];static#y=/(?:\n+\t*)+/g;static SPEED=300;static get activeElement(){return GSDOM.active(document.activeElement)}static active(t){return t.shadowRoot?.activeElement?GSDOM.active(t.shadowRoot?.activeElement):t}static isVisible(t){if(!GSDOM.isHTMLElement(t))return!1;const e=r.getComputedStyledMap(t),s=!e.matches('visibility','hidden'),n=!e.matches('display','none'),i=e.asNum('opacity')>0,a=t.getBoundingClientRect();return a.width>0&&a.height>0&&i&&s&&n}static parse(t='',e=!1,s='text/html'){try{const n=(new DOMParser).parseFromString(t,s);return e?n?.head?.firstElementChild||n?.body?.firstElementChild:n}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',s=!1){const n=GSDOM.parse(e),r=[...GSDOM.#G(n.head.children),...GSDOM.#G(n.body.children)],i=s||1!==r.length,a=GSDOM.wrap(t,i?null:r.shift());for(;r.length>0;)a.appendChild(r.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#G(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const s=e.isString(t)?t:t?.tagName;return GSDOM.#v.includes(s)}static isButtonElement(t){return t instanceof HTMLButtonElement||'GS-BUTTON'===t?.tagName||GSDOM.hasClass(t,'btn')}static isElement(t,s){if(!(s&&t))return!1;if(!e.isString(s))return t instanceof s;const n=customElements.get(s.toLowerCase());if(n&&t instanceof n)return t;const r=GSDOM.inheritance(t);for(let e of r)if(e?.constructor?.name===s)return t;return s.toUpperCase()===t.tagName&&t}static isSelect(t){return t instanceof HTMLSelectElement}static isSlotElement(t){return t instanceof HTMLSlotElement}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const s=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),n=GSDOM.isHTMLElement(t)&&s,r=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!n||r)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,s){const n=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),r=t===e&&t.parentNode===e;return!(!n||r)&&t.insertAdjacentElement(s,e)}static removeElement(t){return GSDOM.parent(t)?.removeChild(t)}static walk(t,e=!1,s=!1,n=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,s,n)}static*childAll(t,e=!1,s=!0,n=!1){if(!t)return;n&&(yield t),s&&(yield*GSDOM.childAll(t.shadowRoot,e,s,!0));const r=e?t.childNodes:t.children;if(r)for(let t of r)yield*GSDOM.childAll(t,e,s,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static offsetParent(t){let e=t?.offsetParent;if(e)return e;const s=GSDOM.parentAll(t);for(const t of s)if(e=t.offsetParent,e)break;return e}static root(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static getElementIndex(t){if(!GSDOM.isHTMLElement(t))return 0;let e=0;for(;t=t.previousElementSibling;)e++;return e}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.documentElement,t);if(!t||!e)return null;const s=GSDOM.walk(t,!1);for(let t of s)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM.closest(document.documentElement,e);if(!t||!e)return null;const s=GSDOM.walk(t,!0);for(let t of s)if(GSDOM.matches(t,e))return t;return null}static query(t,e,s=!1,n=!0){if('string'==typeof t)return GSDOM.query(document.documentElement,t,s,n);if(!t||!e)return null;if(GSDOM.matches(t,e))return GSDOM.#E(t);const r=GSDOM.walk(t,!1,s,n);for(let t of r)if(GSDOM.matches(t,e))return GSDOM.#E(t);return null}static queryAll(t,e,s=!1,n=!0){if('string'==typeof t)return GSDOM.queryAll(document.documentElement,t,s,n);const r=[];if(!t||!e)return r;const i=GSDOM.walk(t,!1,s,n);for(let t of i)GSDOM.matches(t,e)&&r.push(GSDOM.#E(t));return r}static#E(t){return'FORM'!==t.tagName?t:GSDOM.isHTMLElement(t.id)?new Proxy(t,{get:(t,e,s)=>{if('_owner_'===e)return t;if('id'===e)return t.getAttribute('id');const n=Reflect.get(t,e);return GSFunction.isFunction(n)?n.bind(t):n},set:(t,e,s)=>t[e]=s}):t}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static setHTML(t,e='',s=!1,n){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(s&&t?.setHTML?n?t.setHTML(e,{sanitizer:n}):t.setHTML(e):t.innerHTML=e instanceof Document?e.body.innerHTML:e)}static setText(t,e=''){t&&(t.textContent=e)}static css(t,s){if(e.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!(Array.isArray(t)&&t.length>0))return!1;requestAnimationFrame((()=>{t.forEach((t=>{Object.entries(s).forEach((e=>{t.style[e[0]]=e[1]}))}))}))}static toggleClass(t,s,n){return e.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!!(Array.isArray(t)&&t.length>0)&&(!(!s||0==s.trim().length)&&(s=s.split(' ').filter((t=>t&&t.trim().length>0)),e.isNull(n)?s.forEach((e=>{t.forEach((t=>t.classList.toggle(e)))})):(t.forEach((t=>{n?t.classList.add.apply(t.classList,s):t.classList.remove.apply(t.classList,s)})),!0)))}static toggle(t,s){return GSDOM.toggleClass(t,'d-none',e.isNull(s)?s:!s)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea, output'){const s=GSDOM.unwrap(t);requestAnimationFrame((()=>{s.querySelectorAll(e).forEach((t=>t.value=''))}))}static getValue(t,s=!1){let n=null;switch(t.type){case'datetime-local':case'number':n=t.value?t.valueAsNumber:t.value;break;case'select-multiple':n=Array.from(t.selectedOptions).map((t=>t.value));break;case'checkbox':n=t.hasAttribute('value')&&t.value?t.checked?t.value:null:t.checked;break;default:n=t.value}return e.isNull(n)&&s&&(n=t.defaultValue),n}static toValue(t,s=!1){if(!GSDOM.isHTMLElement(t))return;let n=GSDOM.getValue(t,s);if('text'===t.type){const s=r.styleValue(t,'text-transform');s&&(n=e.textTransform(s.value,n))}return n}static fromValue(t,s,n=!1){if(!GSDOM.isHTMLElement(t))return;const r=Array.isArray(s)?s[0]||'':s;if('checkbox'===t.type)t.hasAttribute('value')?t.checked=r===t.value:t.checked=1==r,n&&(t.defaultValue=t.checked);else t.value=e.normalize(r),n&&(t.defaultValue=t.value)}static toObject(t,e='input, textarea, select, output',s=!0,n=!1){const r=GSDOM.unwrap(t),i={};return GSDOM.queryAll(r,e).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!s||t.checkValidity())).forEach((t=>GSDOM.fromElement2Object(t,i,n))),i}static fromObject(t,s,n='input, textarea, select, output',r=!1){s=e.toJson(s);const i=GSDOM.unwrap(t),a=GSDOM.queryAll(i,n);Array.from(a).forEach((t=>GSDOM.fromObject2Element(t,s,r)))}static fromObject2Element(t,e,s=!1){if(!GSData.objectPathExist(e,t?.name))return;const n=GSData.readFromObject(e,t.name);'radio'!==t.type?GSDOM.fromValue(t,n,s):t.value===n&&(t.checked=!0)}static fromElement2Object(t,e,s=!1){('radio'!==t.type||t.checked)&&GSData.writeToOject(e,t.name,GSDOM.toValue(t,s))}static toJson(t,e=!0,s=!1,n){if(Array.isArray(t))return t.map((t=>GSDOM.toJson(t,e,s,n)));const r={};if(!GSDOM.isHTMLElement(t))return r;s||(r['#tagName']=t.tagName.toLowerCase()),r.$text=t.innerText;const i=n||GSDOM.allProperties(t);if(Array.from(t.attributes).forEach((e=>{const s=i[e.name]?.type;switch(s){case Boolean:r[e.name]=t.hasAttribute(e.name);break;case Number:r[e.name]=GSAttr.getAsNum(t,e.name);break;default:r[e.name]=e.value}})),e){const i=Array.from(t.children).map((t=>GSDOM.toJson(t,e,s,n)));i.length>0&&(r.items=i)}return r}static fromJson(t,e='gs-item',s=!1){return s?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,s='gs-item'){if(!t)return null;if(e.isNumber(t)||e.isString(t))return GSDOM.fromJsonAsDOM({title:t},s);if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t,s)));const n=t['#tagName']||s,r=document.createElement(n);return Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>r.setAttribute(e,t[e]))),Array.isArray(t.items)&&t.items.forEach((t=>{const e=GSDOM.fromJsonAsDOM(t,s);r.appendChild(e)})),r}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const s=t['#tagName']||e,n=[];return n.push(`<${s} `),Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.push(` ${e}="${t[e]}" `))),n.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const s=GSDOM.fromJsonAsString(t,e);n.push(s)})),n.push(`</${s}>`),n.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').filter((t=>t.length>1)).forEach((e=>{const s=e.split('=');GSDOM.setValue(`input[name=${s[0]}]`,s[1],t)}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,s='input, select, textarea, .btn',n=!0,r=''){let i=GSDOM.queryAll(t,s);!n&&r&&(i=i.filter((t=>e.asBool(t.dataset[r])))),i.forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, textarea, .btn',s=!0,n=''){GSDOM.queryAll(t,e).filter((t=>!!s||!t.disabled)).forEach((t=>{t.setAttribute('disabled',!0),n&&(t.dataset[n]=!0)}))}static setValue(t,e,s,n=!1){GSDOM.queryAll(s,t).forEach((t=>GSDOM.fromValue(t,e,n)))}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),s=[];let n;for(;n=e.nextNode();)s.push(n);return s}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(GSDOM.#y,'')))}static validate(t,e,s,n=!1){if(t.tagName!==e){if(n)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),s))return!0;if(n)return!1;const r=GSDOM.toValidationError(t,s);throw new Error(r)}static isAllowed(t,e){return Array.isArray(t)?0===t.filter((t=>GSDOM.isAllowed(t,e))).length:!(t instanceof Text||t instanceof Comment||e.includes(t.tagName))}static toValidationError(t,e){const s=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${s}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let s=!0;try{const s=await fetch(e);if(!s.ok)return;const n=await s.text(),r=new CSSStyleSheet;r.replaceSync(n),t.shadowRoot.adoptedStyleSheets=[r]}catch(t){GSLog.error(null,t),s=!1}return s}static reset(t){if(GSDOM.isFormElement(t)&&!GSDOM.resetSelect(t))return t.dataset.typed=!1,t.value=t.defaultValue,GSDOM.#w(t),!0}static resetSelect(t){if(GSDOM.isSelect(t))return Array.from(t.options).forEach((t=>t.selected=t.hasAttribute('selected'))),GSDOM.#w(t),!0}static#w(t){t.dispatchEvent(new Event('change',{bubbles:!0,composed:!0}))}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM}};class GSEvents{static#A=!1;static#C=new Map;static#x=!1;static#T=0;get altContext(){return GSEvents.#A}set altContext(t){GSEvents.#A=e.asBool(t,!0)}static protect(){GSEvents.listen(globalThis,null,'contextmenu',GSEvents.#k),GSEvents.listen(globalThis.document,null,'keydown',GSEvents.#$)}static#k(t){!GSEvents.#A&&t.shiftKey||GSEvents.prevent(t)}static#$(t){const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}static async waitPageLoad(t,e='loaded',n,r=100,i=!0){if(!GSEvents.#x)try{await GSEvents.wait(globalThis.window,'load',r,i),GSEvents.#x=!0}catch(t){GSLog.error(null,t)}await s.callFunction(n),GSEvents.sendSuspended(t,e)}static wait(t,s='',n=0,r=!0){if(e.isStringEmpty(s))throw new Error('Event undefined!');if(!e.isNumber(n))throw new Error('Invalid timeout value!');return n>0?GSEvents.once(t,null,s,null,n):new Promise((e=>{GSEvents.once(t,null,s,(t=>{r&&GSEvents.prevent(t),e(t)}),n)}))}static async waitAnimationFrame(t,e=!1){if(e){if('function'!=typeof t)return;if(GSEvents.#T>0)return s.callFunction(t);GSEvents.#T++}return new Promise(((n,r)=>{requestAnimationFrame((async()=>{try{const e=await s.callFunction(t);n(e)}catch(t){r(t)}finally{e&&GSEvents.#T>0&&GSEvents.#T--}}))}))}static listen(t,e,s,n,r=!1){return!e&&t?t.addEventListener(s,n,r):i.queryAll(t,e).map((t=>t.addEventListener(s,n,r)))}static unlisten(t,e,s,n){return!e&&t?t.removeEventListener(s,n):i.queryAll(t,e).map((t=>t.removeEventListener(s,n)))}static on=GSEvents.listen;static off=GSEvents.unlisten;static once(t,e,s,n,r=0){const i=GSEvents.#D(r);return i&&i.internal?new Promise(((r,a)=>{GSEvents.listen(t,e,s,n||r,{once:!0,signal:i}),i.addEventListener('abort',a)})):GSEvents.listen(t,e,s,n,{once:!0,signal:i})}static prevent(t,e=!0){s.hasFunction(t,'preventDefault')&&t.preventDefault(),s.hasFunction(t,'stopPropagation')&&t.stopPropagation(),e&&s.hasFunction(t,'stopImmediatePropagation')&&t.stopImmediatePropagation()}static send(t=document,e,s='',n=!1,r=!1,i=!1){const a=new CustomEvent(e,{detail:s,bubbles:n,composed:r,cancelable:i});return t?.dispatchEvent(a)}static toEvent(t,e){let s=null;switch(t){case'copy':case'cut':case'paste':s=new ClipboardEvent(t,e);break;case'blur':case'focus':case'focusin':case'focusout':s=new FocusEvent(t,e);break;case'input':case'beforeinput':s=new InputEvent(t,e);break;case'keydown':case'keyup':case'keypress':s=new KeyboardEvent(t,e);break;case'dblclick':case'mousedown':case'mouseenter':case'mouseleave':case'mousemove':case'mouseout':case'mouseover':case'mouseup':s=new MouseEvent(t,e);break;case'submit':s=new SubmitEvent(t,e);break;case'touchstart':case'touchend':case'touchmove':case'touchcancel':s=new TouchEvent(t,e);break;case'whell':s=new WheelEvent(t,e);break;case'pointerover':case'pointerenter':case'pointerdown':case'pointermove':case'pointerup':case'pointercancel':case'pointerout':case'pointerleave':case'pointerrawupdate':case'gotpointercapture':case'lostpointercapture':s=new PointerEvent(t,e);break;default:s=new CustomEvent(t,e)}return s}static isMouseOrPointerEvent(t){return t instanceof MouseEvent||t instanceof PointerEvent}static sendSuspended(t=document,e,s='',n=!1,r=!1,i=!1){return requestAnimationFrame((()=>{GSEvents.send(t,e,s,n,r,i)}))}static sendDelayed(t=1,e=document,s,n='',r=!1,i=!1,a=!1){return setTimeout((()=>GSEvents.send(e,s,n,r,i,a)),t)}static attach(t,e,n='',r,i=!1,a=!1){if(!e)return!1;if(!(window instanceof Window||e.isConnected))return!1;if(!s.isFunction(r))return!1;if(!s.hasFunction(e,'addEventListener'))return!1;const o=this,l=o.#M(t,e,n,r),c=o.#L(t);return o.#O(c,l.key).set(l.fnkey,l),l.capture=a,i&&(l.once=t=>{try{l.fn(t)}finally{o.remove(l.own,l.el,l.name,l.once)}},Object.defineProperty(l.once,'gsid',{value:r.gsid,writable:!1})),e.addEventListener(n,i?l.once:l.fn,{once:i,capture:a}),!0}static remove(t,e,s='',n){const r=this,i=r.#M(t,e,s,n),a=r.#L(t),o=r.#O(a,i.key),l=o.get(i.fnkey);if(l)o.delete(l.fnkey),r.#I(l);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),r.#I(t);0===o.size&&a.delete(i.key),0===a.size&&r.#C.delete(t)}static deattachListeners(t){const e=this,s=e.#R(t);if(!s)return;const n=s.values();for(let t of n){for(let s of t.values())e.#I(s);t.clear()}s.clear()}static#M(t,e,s='',n=''){if(!e)return!1;const r=this.#N(e),i=this.#F(n);return{own:t,fn:n,el:e,name:s,key:GSID.hashCode(`${r}${s}`),fnkey:GSID.hashCode(`${r}${s}${i||''}`)}}static#O(t,e){let s=t.get(e);return s||(s=new Map,t.set(e,s)),s}static#F(t){return s.isFunction(t)?(t.gsid||Object.defineProperty(t,'gsid',{value:GSID.next(),writable:!1}),t.gsid):null}static#N(t){const e=t instanceof Window;let s=e?t.gselid:n.get(t,'data-gselid');return s||(s=GSID.id,e?t.gselid=s:n.set(t,'data-gselid',s)),s}static#L(t){return this.#O(this.#C,t)}static#R(t){const e=this.#C.get(t);if(e)return this.#C.delete(t),e}static#I(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static#D(t=0){return e.isNumber(t)&&t>0?((t=AbortSignal.timeout(t)).internal=!0,t):t instanceof AbortSignal?t:void 0}static monitorAction(t,e){t.on('action',(async s=>{const n=t,r=s.detail,i=r.action||r.data?.action;await GSEvents.onAction(n,i,e,s)}))}static async onAction(t,e,n,r){const i=GSEvents.findAction(t,e,n);if(!i)return;GSEvents.prevent(r);let a=!1;try{a=s.isFunctionAsync(i)?await i(r):i(r)}catch(e){if(a=e,!s.isFunction(t.onError))throw e;t.onError(e)}return a}static findAction(t,n='',r=''){let i=!1;if(!n)return i;const a=t;n=e.capitalizeAttr(e.capitalize(n));const o=`on${r=e.capitalizeAttr(e.capitalize(r))}${n}`;globalThis.GS_LOG_ACTION&&GSLog.warn(t,`Action : ${o}`);const l=a[o];return i=s.isFunction(l),i=i&&!s.isFunctionNative(l),i?a[o].bind(a):null}static{Object.freeze(GSEvents),globalThis.GSEvents=GSEvents}}let a=class GSPromise{#B;#o;#H;#q;#j;#P;constructor(t,s){const n=this;n.#o=t,n.#B=s instanceof AbortSignal?s:null,n.#B=e.isNumber(s)?AbortSignal.timeout(s):n.#B,n.#H={abort:n.#z.bind(n)}}await(){const t=this;return t.#P||(t.#B?.addEventListener('abort',t.#H.abort),t.#P=new Promise(t.#U.bind(t))),t.#P}get aborted(){return!0===this.#B?.aborted}#U(t,e){const s=this;s.#q=t,s.#j=e;try{s.#o(s.#V.bind(s),s.#_.bind(s))}catch(t){s.#W(),e(t)}}#z(){this.#W(),this.#j(new Error('Promise aborted!'))}#V(t){const e=this;return e.#W(),e.aborted?null:e.#q(t)}#_(t){const e=this;return e.#W(),e.aborted?null:e.#j(t)}#W(){this.#B?.removeEventListener('abort',this.#H.abort)}static{globalThis.GSPromise=GSPromise}};class GSEvent extends EventTarget{#J=new Set;#Y(t='',e){const s=Array.from(this.#J);return this.#K(e)?s.filter((s=>s.type===t&&s.listener===e)):s.filter((e=>e.type===t))}#K(t){return'function'==typeof t}on(t='',e,s=0,n=!1){if(!t)return reject('Event undefined!');let r=null;r=n instanceof AbortController?n:n?new GSAbortController(s):null;const i=r||0==s?r?.signal:AbortSignal.timeout(s);return this.addEventListener(t,e,{signal:i}),r||i}once(t,e,s=0,n=!1){if(!t)return reject('Event undefined!');const r=this,wrap=t=>{e(t),r.#J.delete(wrap)};return wrap.type=t,wrap.listener=e,wrap.timeout=s,n instanceof AbortController?wrap.controller=n:wrap.controller=n?new GSAbortController(s):null,wrap.signal=wrap.controller||0==s?wrap.controller?.signal:AbortSignal.timeout(s),r.addEventListener(t,wrap,{once:!0,signal:wrap.signal}),wrap.controller||wrap.signal}off(t='',e){this.removeEventListener(t,e)}emit(t='',s,n=0){const r=this;return(n=e.asNum(n,0))<=0?r.#Q(t,s):setTimeout((()=>r.#Q(t,s)),n)}#Q(t='',e){const s=new CustomEvent(t,{detail:e});return this.dispatchEvent(s)}wait(t='',e){const s=this;return new a(((e,n)=>{s.once(t,e)}),e).await()}listen(t,e){this.on(t,e)}unlisten(t,e){this.off(t,e)}unbind(){Array.from(this.#J).forEach((t=>{super.removeEventListener(t.type,t.listener)})),this.#J.clear()}addEventListener(t,e,s){return!!this.#K(e)&&(this.#J.add({type:t,listener:e}),super.addEventListener(t,e,s))}removeEventListener(t,e){const s=this,n=s.#Y(t,e);n.forEach((t=>super.removeEventListener(t.type,t.listener))),n.forEach((t=>s.#J.delete(t)))}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSEventBus{static#X=new Map;static send(t='',e='',s){return GSEventBus.register(t).emit(e,s)}static exist(t=''){return t&&GSEventBus.#X.has(t)}static register(t=''){return GSEventBus.exist(t)||GSEventBus.#X.set(t,new GSEvent),GSEventBus.#X.get(t)}static unregister(t=''){const e=GSEventBus.#X.get(t);return e?.unbind&&e.unbind(),GSEventBus.#X.delete(t)}static{Object.freeze(GSEventBus),globalThis.GSEventBus=GSEventBus}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((s=>{s.brand.toLowerCase().includes(e)&&(t=!0)})),t}const s=navigator.userAgent.toLocaleLowerCase()||'',n=s.includes('edg');return!(!n||!e.startsWith('edg'))||!n&&s.includes(e)}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSDOMObserver extends MutationObserver{static#Z=new Map;static#tt=new Map;observe(t,e){const s=e||{childList:!0,subtree:!0};return super.observe(t,s)}static create(t){const e=new GSDOMObserver(GSDOMObserver.#et);return e.observe(t),e}static#st(t=!1){return t?GSDOMObserver.#tt:GSDOMObserver.#Z}static get#nt(){return GSDOMObserver.#rt||GSDOMObserver.#it}static get#rt(){return GSDOMObserver.#Z.size>0}static get#it(){return GSDOMObserver.#tt.size>0}static#et(t){GSDOMObserver.#nt&&t.forEach((t=>{GSDOMObserver.#rt&&t.addedNodes.forEach((t=>GSDOMObserver.#at(t,GSDOMObserver.#Z))),GSDOMObserver.#it&&t.removedNodes.forEach((t=>GSDOMObserver.#at(t,GSDOMObserver.#tt)))}))}static#at(t,e){return 0!==e.size&&(GSDOMObserver.#ot(t,e),t.childNodes.forEach((t=>GSDOMObserver.#at(t,e))),!0)}static#ot(t,e){e.forEach(((e,s)=>{try{s(t)&&e(t)}catch(t){GSLog.error(null,t)}}))}static#lt(t,e,s){if(t instanceof HTMLElement==0)return!1;const n=new Map;return n.set(e,s),GSDOMObserver.#at(t,n)}static#K(t){return'function'==typeof t}static#ct(t,e){return GSDOMObserver.#K(t)&&GSDOMObserver.#K(e)}static registerFilter(t,e,s=!1,n){return!!GSDOMObserver.#ct(t,e)&&(GSDOMObserver.#st(s).set(t,e),s||GSDOMObserver.#lt(n||document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#K(t)&&GSDOMObserver.#st(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver,GSDOMObserver.create(document.documentElement)}}let l=class GSComponents{static#C=new Set;static store(t){GSComponents.#C.add(t)}static remove(t){GSComponents.#C.delete(t)}static get(t=''){if(!t)return null;const e=Array.from(this.#C).filter((e=>e.id===t));return 0===e.length?null:e[0]}static#ut(t='',e=0,s){const fn=e=>{const n=e.detail;if(t.startsWith('gs-')&&n.tagName===t.toUpperCase()||n.id===t)return GSEvents.unlisten(document.body,null,'componentready',fn),s(n)},n={once:!1,capture:!1};e>0&&(n.signal=AbortSignal.timeout(e)),GSEvents.listen(document.body,null,'componentready',fn,n)}static waitFor(t='',e=0){return new Promise(((s,n)=>{let r=GSComponents.find(t)||GSComponents.get(t);return r?s(r):GSComponents.#ut(t,e,s)}))}static notifyFor(t='',e){if(!s.isFunction(e))return!1;const callback=s=>{const n=s.composedPath().shift();return n.id===t||n.tagName===t?e(n,s):void 0},n=GSComponents.find(t)||GSComponents.get(t);return n?e(n):(GSEvents.listen(document.body,null,'componentready',callback),callback)}static findAll(t='',e=!0,s=!0){let n=Array.from(GSComponents.#C);return t&&(n=n.filter((e=>e&&i.matches(e,t)))),e||(n=n.filter((t=>t.shadowRoot))),s||(n=n.filter((t=>!t.shadowRoot))),n}static find(t='',e=!0,s=!0){return GSComponents.findAll(t,e,s).shift()}static getOwner(t,e){if(!(i.isGSElement(t)||i.isHTMLElement(t)))return null;const s=i.parentAll(t);for(let t of s){if(!t)break;if(t instanceof ShadowRoot){const s=i.parent(t);return e?i.isElement(s,e)?s:GSComponents.getOwner(s,e):s}if(i.isElement(t,e))return t}return e?null:document.body}static hasGetter(t,e){return s.isFunctionDefined(t,e,'get')}static hasSetter(t,e){return s.isFunctionDefined(t,e,'get')}static hasFunc(t,e,n){return s.isFunctionDefined(t,e,n)}static listenStyles(){GSComponents.#dt||(document.addEventListener('gs-style',GSComponents.#ht),GSComponents.#dt=!0)}static unlistenStyles(){document.removeEventListener('gs-style',GSComponents.#ht),GSComponents.#dt=!1}static#dt=!1;static#ht(){requestAnimationFrame((()=>{GSComponents.findAll(null,!1,!0).filter((t=>t.shadowRoot&&!0!==t.unstyled)).forEach((e=>e.shadowRoot.adoptedStyleSheets=t.styles))}))}static{Object.freeze(GSComponents),GSComponents.listenStyles(),globalThis.GSComponents=GSComponents}};class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static UNIQUE=GSVersion.build;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let s=null;const n=location.pathname.split('/').pop(-1).includes('.'),r=t.includes('extension:/');s=t.startsWith('http')||r?t:t.startsWith('/')?`${location.origin}/${t}`:n?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,s=s.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(s);if(!e){const t=GSLoader.NO_CACHE?Date.now():GSLoader.UNIQUE;i.searchParams.append('_dc',t)}return i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')+'/'}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=i.query(document.documentElement,t);return e?e.innerHTML:t}return e.isHTML(t)?t:(t=GSLoader.#gt(t),GSLoader.loadSafe(t))}static#gt(t=''){return t=t.startsWith('//')?GSLoader.#mt+'/'+t:t,GSLoader.normalizeURL(t)}static get#mt(){return GSLoader.normalizeURL(GSLoader.#pt,!0)}static get#pt(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const s=GSLoader.#gt(t);return await GSLoader.load(s,e)}static async load(t='',e='GET',s,n=!1,r){let i=null;const a='Content-Type';(s={...s})[a]=n?'application/json; utf-8':s[a]||'text/plain',s.Accept='application/json';const o=GSLoader.normalizeURL(t,!0),l={method:e,headers:s};('POST'===e||'PUT'===e&&r)&&(l.body=JSON.stringify(r));const c=await fetch(o,l);return c.ok&&(i=n?await c.json():await c.text()),i}static async loadSafe(t='',e='GET',s,n=!1,r,i){try{if(t)return GSLoader.load(t,e,s,n,i)}catch(t){GSLog.error(null,t)}return r||(n?{}:'')}static async loadData(t=''){const n=e.isJson(t),r=!n&&s.parseFunction(t),i=r&&s.isFunction(r);if((!i&&e.parseValue(t)||n)&&(t=e.toJson(t)),i&&(t=await s.callFunction(r)),e.isJsonType(t))return t}static{Object.seal(GSLoader),globalThis.GSLoader=GSLoader}}class GSDate extends Date{static DEFAULT_FORMAT='YYYY-MM-DDTHH:mm:ssZ';static REGEX_FORMAT=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;#ft=navigator.locale;format(t=GSDate.DEFAULT_FORMAT,e){this.locale=e;const s=this.asJSON();return t.replace(GSDate.REGEX_FORMAT,((t,e)=>e||s[t]))}build(){const t=this,e=t.last.getDate(),s=t.first.getDay(),n=t.#bt(),r=0===s?[]:' '.repeat(s+(n?-2:-1)).split(' ');let i=1;for(;i<=e;)r.push(i.toString()),i++;for(;r.length%7!=0;)r.push('');return r}get locale(){return this.#ft}set locale(t){this.#ft=t||navigator.language}get year(){return this.getFullYear()}set year(t=0){this.setFullYear(t)}get month(){return this.getMonth()}set month(t=0){this.setMonth(t)}get day(){return this.getDate()}set day(t=0){this.setDate(t)}get first(){return new GSDate(this.getFullYear(),this.getMonth(),1)}get last(){return new GSDate(this.getFullYear(),this.getMonth()+1,0)}get YY(){return String(this.YYYY).slice(-2)}get YYYY(){return this.getFullYear()}get M(){return this.getMonth()+1}get MM(){return this.M.toString().padStart(2,'0')}get MMM(){return this.#St({month:'short'})}get MMMM(){return this.#St({month:'long'})}get D(){return this.getDate().toString()}get DD(){return this.D.padStart(2,'0')}get d(){return this.getDay().toString()}get dd(){return this.ddd.slice(0,2)}get ddd(){return this.#St({weekday:'short'})}get dddd(){return this.#St({weekday:'long'})}get H(){return this.getHours().toString()}get HH(){return this.H.padStart(2,'0')}get h(){return this.#vt(1)}get hh(){return this.#vt(2)}get a(){return this.#yt(!0)}get A(){return this.#yt(!1)}get m(){return this.getMinutes().toString()}get mm(){return this.m.padStart(2,'0')}get s(){return this.getSeconds().toString()}get ss(){return this.s.padStart(2,'0')}get SSS(){return this.getMilliseconds().toString().padStart(3,'0')}get Z(){return this.#Gt()}get ZZ(){return this.Z.replace(':','')}get Q(){return Math.ceil(this.M/3)}get k(){return(this.getHours()+1).toString()}get kk(){return this.k.padStart(2,'0')}get W(){const t=new Date(this.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)}get WW(){return this.W.toString().padStart(2,'0')}get x(){return this.getTime()}get X(){return Math.floor(this.x/1e3)}asJSON(){const t=this;return{YY:t.YY,YYYY:t.YYYY,M:t.M,MM:t.MM,MMM:t.MMM,MMMM:t.MMMM,D:t.D,DD:t.DD,d:t.d,dd:t.dd,ddd:t.ddd,dddd:t.dddd,H:t.H,HH:t.HH,h:t.h,hh:t.hh,a:t.a,A:t.A,m:t.m,mm:t.mm,s:t.s,ss:t.ss,SSS:t.SSS,Z:t.Z,ZZ:t.ZZ,Q:t.Q,k:t.k,kk:t.kk,W:t.W,WW:t.WW,x:t.x,X:t.X}}static monthList(t=!1,e=navigator.locale,s=!0){const n=new GSDate;n.locale=e,n.setDate(1),n.setMonth(0);const r=[];let i=null,a=12;for(;a--;)i=t?n.MMM:n.MMMM,i=s?n.#Et(i):i,r.push(i),n.setMonth(n.getMonth()+1);return r}static dayList(t=!1,e=navigator.locale,s=!0){const n=new GSDate;n.locale=e;const r=n.#bt()?1:0;n.setDate(n.getDate()-n.getDay()+r);const i=[];let a=null,o=7;for(;o--;)a=t?n.ddd:n.dddd,a=s?n.#Et(a):a,i.push(a),n.setDate(n.getDate()+1);return i}#bt(){return 1===new Intl.Locale(this.#ft)?.weekInfo?.firstDay}#Et(t=''){return t.charAt(0).toUpperCase()+t.slice(1)}#St(t){return this.toLocaleString(this.#ft,t)}#vt(t){return(this.getHours()%12||12).toString().padStart(t,'0')}#yt(t){const e=this.#St({hour:'2-digit',hour12:!0}).split(' ').pop(-1);return t?e.toLowerCase():e}#Gt(){const t=-1*this.getTimezoneOffset(),e=Math.abs(t),s=e%60;return`${t<=0?'+':'-'}${Math.floor(e/60).toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`}}class GSPopper{static getOffset(t){const e=t.getBoundingClientRect(),s=window.scrollX,n=window.scrollY,r={left:e.left+s,right:e.right+s,top:e.top+n,bottom:e.bottom+n,height:e.height,width:e.width,x:e.x+s,y:e.y+n};return r.centerX=r.left+r.width/2,r.centerY=r.top+r.height/2,r}static boundingRect(t,e){const s=t.getBoundingClientRect(),n=GSPopper.elementPadding(e?t:null),r=n.x,i=n.y,a=t.clientWidth-r,o=t.clientHeight-i,l=s.left+n.left,c=s.top+n.top;return{width:a,height:o,top:c,left:l,x:l,y:c,centerX:a/2+l,centerY:c+o/2}}static elementPadding(t){const e={left:0,right:0,top:0,bottom:0,x:0,y:0};if(!(t instanceof HTMLElement))return e;const s=r.getComputedStyledMap(t);return e.left=s.asNum('padding-left'),e.right=s.asNum('padding-right'),e.top=s.asNum('padding-top'),e.bottom=s.asNum('padding-bottom'),e.x=e.left+e.right,e.y=e.top+e.bottom,e}static popupFixed(e='top',s,n,r){if(!s||!n)return!1;const i=GSPopper.#wt(e);if(!GSPopper.#At(i))return void GSLog.warn(s,`Invalid popover position: ${e}!`);const a=s.dataset.cssId?{}:s.style;a.position='fixed',a.top='0px',a.left='0px',a.margin='0px',a.padding='0px',a.transform='',t.setRule(s.dataset.cssId,a,!0);const o=s.clientHeight/2,l=s.clientWidth/2,c=GSPopper.boundingRect(n,r instanceof HTMLElement),u=GSPopper.#Ct(s,r,i),d={x:c.centerX,y:c.centerY,offH:o,offW:l,srcH:s.clientHeight,srcW:s.clientWidth};GSPopper.#xt(i,d,c,u),a.transform=`translate(${d.x}px, ${d.y}px)`,t.setRule(s.dataset.cssId,a)}static popupAbsolute(e='top',s,n,r){if(!s||!n)return!1;const i=GSPopper.#wt(e);if(!GSPopper.#At(i))return void GSLog.warn(s,`Invalid popover position: ${e}!`);const a=s.dataset.cssId?{}:s.style,o=r.dataset.cssId?{}:r.style;o.position='absolute',a.position='absolute',a.margin='0px',a.transform='',a.inset=GSPopper.#Tt(i),t.setRule(s.dataset.cssId,a,!0);const l=s.getBoundingClientRect(),c=r.getBoundingClientRect(),u=GSPopper.getOffset(n),d={x:u.centerX,y:u.centerY},h={x:l.width/2-c.width/2,y:l.height/2-c.height/2};GSPopper.#kt(i,d,h,l,c,u),a.transform=`translate(${d.x}px, ${d.y}px)`,o.transform=`translate(${h.x}px, ${h.y}px)`,o.top=h.top?h.top:'',o.left=h.left?h.left:'',t.setRule(s.dataset.cssId,a),t.setRule(r.dataset.cssId,o)}static#kt(t,e,s,n,r,i){t.isTop?(s.y=0,s.left='0px',e.x=e.x-n.width/2,e.y=-1*(n.bottom-i.top+r.height)):t.isBottom?(s.y=0,s.left='0px',e.x=e.x-n.width/2,e.y=i.bottom+r.height):t.isStart?(s.x=0,s.top='0px',e.x=-1*(n.right-i.left+r.width),e.y=e.y-n.height/2):t.isEnd&&(s.x=0,s.top='0px',e.x=i.right+r.width,e.y=e.y-n.height/2)}static#xt(t,e,s,n){t.isTop?(e.y=s.top-e.srcH-n.size,e.x=e.x-e.offW):t.isBottom?(e.y=s.top+s.height+n.size,e.x=e.x-e.offW):t.isStart?(e.x=s.left-e.srcW-n.size,e.y=e.y-e.offH+n.size):t.isEnd&&(e.x=s.left+s.width+n.size,e.y=e.y-e.offH+n.size)}static#Tt(t){return t.isTop?'auto auto 0px 0px':t.isBottom?'0px auto auto 0px':t.isStart?'0px 0px auto auto':t.isEnd?'0px auto auto 0px':void 0}static#At(t){return t.isStart||t.isEnd||t.isTop||t.isBottom}static#wt(t){return{isStart:'start'==t||'left'==t,isEnd:'end'==t||'right'==t,isTop:'top'==t,isBottom:'bottom'==t}}static#Ct(e,s,n){if(!s)return{x:0,y:0,size:0,width:0,height:0};let r=0;const i=GSPopper.boundingRect(e),a=GSPopper.boundingRect(s),o=n.isStart||n.isEnd?a.width:a.height,l=i.width/2-o/2,c=i.height/2-o/2;a.size=o;const u=s.dataset.cssId?{}:s.style;return u.position='absolute',n.isStart||n.isEnd?(u.left='',u.top='0px',r=n.isStart?o:-1*o,u.transform=`translate(${r}px, ${c/2}px)`):(u.top='',u.left='0px',r=n.isTop?o:-1*o,u.transform=`translate(${l}px, ${r}px)`),t.setRule(s.dataset.cssId,u),a}static{Object.seal(GSPopper),globalThis.GSPopper=GSPopper}}class GSItem extends HTMLElement{static#$t='data-bs-dismiss';static#Dt='data-bs-target';static#Mt='data-bs-toggle';static#Lt='data-action';static#Ot='data-inject';static#It='data-attr';static#Rt='data-selectable';static#Nt=['GS-ITEM','TEMPLATE'];static{customElements.define('gs-item',GSItem),Object.seal(GSItem)}#E;constructor(){super(),GSItem.validate(this)}static validate(t,e='GS-ITEM'){return i.validate(t,e,GSItem.#Nt)}static getBody(t,e=!1){let s=GSItem.getTemplate(t);const r=GSItem.getFlat(t),i=GSItem.getAnchor(t),a=r||e?`anchor="${i}" flat="true"`:'',o=n.get(t,'css-template','');return s?`<gs-template ${a} href="${s}" class="${o}"></gs-template>`:(s=t.querySelector('template'),s?.innerHTML||'')}static genericItems(t){return i.isHTMLElement(t)?Array.from(t.children).filter((t=>'GS-ITEM'==t.tagName)):[]}static getAttrs(t){return[GSItem.getDismissAttr(t),GSItem.getTargetAttr(t),GSItem.getToggleAttr(t),GSItem.getActionAttr(t),GSItem.getInjectAttr(t),GSItem.getInjectAttributesAttr(t)].join(' ')}static getDismissAttr(t){const e=GSItem.getDismiss(t);return e?`${GSItem.#$t}="${e}"`:''}static getTargetAttr(t){const e=GSItem.getTarget(t);return e?`${GSItem.#Dt}="${e}"`:''}static getToggleAttr(t){const e=GSItem.getToggle(t);return e?`${GSItem.#Mt}="${e}"`:''}static getActionAttr(t){const e=GSItem.getAction(t);return e?`${GSItem.#Lt}="${e}"`:''}static getInjectAttr(t){const e=GSItem.getInject(t);return e?`${GSItem.#Ot}="${e}"`:''}static getInjectAttributesAttr(t){const e=t?.dataset?.attr;return e?`${GSItem.#It}="${e}"`:''}static getSelectableAttr(t){const e=GSItem.getSelectable(t);return e?'':`${GSItem.#Rt}="${e}"`}static getActive(t){return n.getAsBool(t,'active')}static getAction(t){return n.get(t,'action')}static getDismiss(t){return n.get(t,'dismiss')}static getTarget(t){return n.get(t,'target')}static getToggle(t){return n.get(t,'toggle')}static getInject(t){return n.get(t,'inject')}static getIcon(t,e=''){return n.get(t,'icon',e)}static getSelectable(t){return n.getAsBool(t,'selectable',!0)}static getAnchor(t){return n.get(t,'anchor','afterend@self')}static getFlat(t){return n.getAsBool(t,'flat',!1)}static getName(t){return n.get(t,'name','')}static getHref(t){return n.get(t,'href','#')}static getGroup(t){return n.get(t,'group')}static getSelected(t){return t.hasAttribute('selected')}static getCSS(t){return n.get(t,'css','')}static getTemplate(t){return n.get(t,'template','')}static getType(t){return n.get(t,'type')}get proxy(){return this.#E}get dismissAttr(){return GSItem.getDismissAttr(this)}get targetAttr(){return GSItem.getTargetAttr(this)}get toggleAttr(){return GSItem.getToggleAttr(this)}get type(){return GSItem.getType(this)}get actionAttr(){return GSItem.getActionAttr(this)}get injectAttr(){return GSItem.getInjectAttr(this)}get injectAttributesAttr(){return GSItem.getInjectAttributesAttr(this)}get action(){return GSItem.getAction(this)}get dismiss(){return GSItem.getDismiss(this)}get target(){return GSItem.getTarget(this)}get toggle(){return GSItem.getToggle(this)}get inject(){return GSItem.getInject(this)}get injectAttributes(){return this.dataset.attr}get selectable(){return GSItem.getSelectable(this)}get flat(){return GSItem.getFlat(this)}get name(){return GSItem.getName(this)}get css(){return GSItem.getCSS(this)}get active(){return GSItem.getActive(this)}get template(){return GSItem.getTemplate(this)}get body(){return GSItem.getBody(this)}get href(){return GSItem.getHref(this)}get group(){return GSItem.getGroup(this)}get selected(){return GSItem.getSelected(this)}get html(){const t=this;if(e.isStringEmpty(t.group))return t.name;const s=GSID.id;return`<input id="${s}" ${t.selected?'checked':''} type="radio" name="${t.group}"><label class="ms-2" for="${s}">${t.name}</label>`}asJSON(t=!0){return i.toJson(this,t)}}class GSBlock extends HTMLElement{constructor(){super()}connectedCallback(){GSID.setIf(this)}disconnectedCallback(){this.owner?.remove()}get proxy(){return n.get(this,'proxy')}get owner(){return i.query(document.documentElement,this.proxy)}static{customElements.define('gs-block',GSBlock),Object.seal(GSBlock)}}class OrientationController{static#Ft=new Set;#Bt;constructor(t){const e=this;e.#Bt=t,e.#Bt.addController(e)}hostConnected(){OrientationController.#Ft.add(this)}hostDisconnected(){OrientationController.#Ft.delete(this)}attributeCallback(t,e,s){'orientation'===t&&this.handle()}handle(){const t=this.#Bt;t.offline||(t.isValidOrientation?t.show(!0):t.hide(!0))}static#o(t){requestAnimationFrame((()=>{OrientationController.#Ft.forEach((t=>t.handle()))}))}static{GSEvents.attach(window,screen.orientation,'change',OrientationController.#o)}}class GSElement extends HTMLElement{#Ht=!1;#qt=!1;#jt=null;#Pt=null;#zt=!1;#Ut=null;#Vt;#_t=[];#Ft=null;#Wt=null;constructor(){super(),this.#Wt=new OrientationController(this)}static observeAttributes(t){return GSData.mergeArrays(t,GSElement.observedAttributes)}static get observedAttributes(){return['orientation','id','visible']}get clazzName(){return this.constructor.name}get template(){return n.get(this,'template','')}set template(t){n.set(this,'template',t)}get isWrap(){return!0}get isFlat(){return e.FLAT||n.getAsBool(this,'flat')}get isProxy(){return this.#zt}get proxy(){return n.get(this,'proxy')}get environment(){return n.get(this,'environment','')}set environment(t){n.set(this,'environment',t)}get os(){return n.get(this,'os','')}set os(t){n.set(this,'os',t)}get browser(){return n.get(this,'browser','')}set browser(t){n.set(this,'browser',t)}get protocol(){return n.get(this,'protocol','')}set protocol(t){n.set(this,'protocol',t)}get orientation(){return n.get(this,'orientation','')}set orientation(t){n.set(this,'orientation',t)}get onready(){return n.get(this,'onready','')}set onready(t){n.set(this,'onready',t)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get owner(){return l.getOwner(this)}get offline(){return this.#qt}get online(){return!this.#qt}get ready(){return this.#Ht}get anchor(){const t='beforeend@self';return this.proxy?t:n.get(this,'anchor',t)}get self(){const t=this;return t.isProxy&&t.#jt instanceof GSElement?t.#jt.self:t.#jt}get visible(){return this.hasAttribute('visible')}set visible(t=!0){n.setAsBool(this,'visible',t)}get unstyled(){return this.hasAttribute('unstyled')}updateUI(){const e=this;!e.unstyled&&e.shadowRoot&&(e.shadowRoot.adoptedStyleSheets=t.styles,GSEvents.send(document.body,'i18n',e.shadowRoot))}getStyle(){return n.get(this,'style','')}get styleID(){return`${this.tagName}-${this.id}`.toLocaleLowerCase()}#Jt(){const e=this;t.deleteRule(e.styleID),t.setRule(e.styleID,e.getStyle())}getByID(t=''){return i.getByID(this,t)}closest(t=''){return i.closest(this,t)}query(t='',e=!1){const s=this,n=i.query(s.self,t,!1,!0);return s.isProxy||n?n:i.query(s,t,!1,e)}queryAll(t='',e=!1){const s=this,n=i.queryAll(s.self,t,!1,!0);return s.isProxy||n.length>0?n:i.queryAll(s,t,!1,e)}async getTemplate(t=''){if(t)return GSLoader.getTemplate(t);const e=this.query('template');return e?e.innerHTML:''}hide(t=!1){return i.hide(this,t)}show(t=!1){return i.show(this,t)}emit(t,e='',s=!1,n=!1,r=!1){return GSEvents.send(this,t,e,s,n,r)}waitEvent(t='',e=0){return GSEvents.wait(this,t,e)}once(t,e){return this.listen(t,e,!0)}on(t,e,s=!1){return this.listen(t,e,s)}off(t,e){return this.unlisten(t,e)}listen(t,e,s=!1){return this.attachEvent(this,t,e,s)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',s,n=!1){return GSEvents.attach(this,t,e,s,n)}removeEvent(t,e='',s){return GSEvents.remove(this,t,e,s)}get isAllowRender(){const t=this;return t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS&&t.isValidProtocol}connectedCallback(){const t=this;if(!t.#Yt()){if(!t.isAllowRender)return t.remove();GSID.setIf(t),t.#Ut=t.#Kt(),t.#zt=t.#Ut.ref,l.store(t),t.#Ft?.forEach((t=>t.hostConnected?.())),requestAnimationFrame((()=>t.#Qt()))}}disconnectedCallback(){const e=this;e.#qt=!0,e.#Ft?.forEach((t=>t.hostDisconnected?.())),e.#Pt?.disconnect(),l.remove(e),GSEvents.deattachListeners(e),t.deleteRule(e.styleID),e.#Xt(),e.#Pt=null,e.#jt=null,e.#Ut=null,e.#Ft=null}addController(t){const e=this;(e.#Ft??=new Set).add(t),e.isConnected&&void 0!==e.self&&t.hostConnected?.()}removeController(t){this.#Ft?.delete(t)}repaint(){const t=this;t.disconnectedCallback(),t.#qt=!1,t.#Ht=!1,t.connectedCallback()}attributeChangedCallback(t,e,s){const n=this;n.#_t.push(arguments),n.#Vt||(n.#Vt=!0,queueMicrotask((()=>{GSEvents.waitAnimationFrame((()=>{for(;n.#_t.length>0;)try{n.#Zt(...n.#_t.shift())}catch(t){GSLog.error(null,t)}n.#Vt=!1}))})))}#Zt(t,e,s){const n=this;'id'===t&&(l.remove(e),l.store(n)),'visible'===t&&i.toggleClass(n,'gs-hide','false'===s),n.attributeCallback(t,e,s),n.#Ft?.forEach((t=>t.attributeCallback?.()))}attributeCallback(t,e,s){}onReady(){}async onBeforeReady(){}async#te(){const t=this;if(!t.#Ht&&!t.offline){t.#Ht=!0,await t.onBeforeReady();try{t.#Ft?.forEach((t=>t.onReady?.())),s.callFunction(t.onready,t),t.emit('ready'),GSEvents.send(document.body,'componentready',t)}finally{t.onReady()}}}#Yt(){const t=l.getOwner(this,GSElement);return t&&t.isProxy}get#ee(){const t=this;return t.shadowRoot||(t.attachShadow({mode:'open'}),t.#Pt=GSDOMObserver.create(t.#ee),t.updateUI()),t.shadowRoot}get#se(){const t=this;return t.#zt&&t.isFlat||!t.#zt}async#ne(){const t=this;if(t.offline)return;const e=t.#se,s=e?await t.getTemplate(t.template):t.outerHTML;await GSEvents.waitAnimationFrame((()=>{if(t.offline)return;t.#Jt();const n=t.#Ut;if(t.#zt)return e?t.#jt=t.isWrap?i.parseWrapped(t,s,!0):i.parse(s,!0):(t.#jt=i.parse(s,!0),t.#jt.id=t.id,t.id=GSID.id),i.link(t,t.#jt),void i.insertAdjacent(n.target,t.#jt,n.anchor);if(n.target!==t){if(n.target===t.parentElement)return t.#jt=t.isFlat?t:t.#ee,void i.setHTML(t.#jt,s);t.#jt=i.parseWrapped(t,s,!0),i.link(t,t.#jt),i.insertAdjacent(n.target,t.#jt,n.anchor)}else if(t.isFlat)if(s){const e=i.parseWrapped(t,s,!1);t.#jt=e,i.insertAdjacent(n.target,e,n.anchor)}else t.#jt=t;else t.#jt=t.#ee,i.setHTML(t.#jt,s)})),t.updateUI()}#Kt(){const t=this,s=t.anchor,n=s.indexOf('@');let r=n>0?s.slice(0,n):s,a=n>0?s.slice(n+1):'self';'self'!==r&&'parent'!==r||(a=a||r,r=null),r=e.normalize(r,'beforeend'),a=e.normalize(a,'self');let o=null;switch(a){case'self':o=t;break;case'parent':o=t.parentElement;break;default:o=i.query(t.owner,a)||i.query(document.documentElement,a)}if(!o){const e=`Injection point not available!\nElement: ${t.tagName}, Id:${t.id}, tgt:${a}`;throw GSLog.error(t,e),new Error(e)}return{anchor:r,target:o,ref:!(o===t||o===t.parentElement)}}#Xt(){const t=this;t.#jt&&t.#jt.remove&&(t.#jt.remove(),t.#jt=null)}async#Qt(){const t=this;await t.#ne(),GSEvents.waitAnimationFrame((()=>t.#te()),!0)}static define(t,e,s){if(!customElements.get(t))return customElements.GSDefine?customElements.GSDefine(t,e,s):customElements.define(t,e,s)}static{customElements.define('gs-element',GSElement),customElements.GSDefine||(customElements.GSDefine=customElements.define,customElements.define=GSElement.define,Object.freeze(customElements))}}class GSi18n extends HTMLElement{static#re=/\{\w+\}/g;static#ie=!1;#ae=new Map;#C=new Set;#oe=!1;#le=0;#ce=!1;#ue=this.#de.bind(this);#o=this.#he.bind(this);static{customElements.define('gs-i18n',GSi18n),Object.seal(GSi18n),document.body.addEventListener('i18n',(t=>{GSi18n.default&&GSi18n.default.translateDOM(t.detail)}))}static get observedAttributes(){return['lang','auto']}static get default(){return GSi18n.#ie}constructor(){super()}connectedCallback(){const t=this;if(GSID.setIf(t),t.#ce=!!l.find(this.tagName),t.#ce)return GSLog.error(null,`${t.tagName} ID: ${t.id} is ignored, i18n is already in use by another instance!`);GSi18n.#ie=t,l.store(t),t.#ge()}disconnectedCallback(){const t=this;clearInterval(t.#le),GSDOMObserver.unregisterFilter(t.#ue,t.#o),l.remove(t),t.#ae.clear(),t.#ae=null,t.#o=null,t.#ue=null,t.#ce||(GSi18n.#ie=null)}attributeChangedCallback(t='',e='',s=''){this.#me(t,e,s)}async#me(t='',e='',s=''){const n=this;'lang'===t&&(n.#ae.has(s)||await n.#pe(s),n.translateDOM(document.documentElement,n.auto)),'auto'===t&&n.#ge()}#fe(t){return!(t instanceof HTMLScriptElement||t instanceof HTMLStyleElement||t instanceof HTMLLinkElement||t instanceof HTMLMetaElement||t instanceof Comment)}#de(t){const e=t instanceof Text;if(e&&0==t.textContent.trim().length)return!1;const s=e?t.parentElement:t;return this.#fe(s)&&this.#be(s)}#be(t){return'false'!==n.get(t,'translate')}#he(t){this.#C.add(t)}#Se(){const t=this;t.#oe||0!==t.#C.size&&requestAnimationFrame((()=>{try{Array.from(t.#C).forEach((e=>{t.#C.delete(e),t.#ve(e)}))}catch(e){GSLog.error(t,e)}}))}#ve(t){const e=this;if(e.#oe>0)return e.#C.add(t);if(t===document.documentElement)e.translateDOM(t,e.auto);else{t instanceof Text?e.#ye(t):e.#Ge(t)}t.shadowRoot&&e.translateDOM(t.shadowRoot,e.auto)}#Ge(t){const e=this;e.list.forEach((s=>e.#Ee(t,s)))}#Ee(t,e){const s=`data-gs-i8n-${e}`;let r=n.get(t,s),i=n.get(t,e);r?i=r:i&&n.set(t,s,i),i&&n.set(t,e,this.translate(i))}#ye(t){t.gsi18n=t.gsi18n||t.textContent,t.textContent=this.translate(t.gsi18n)}async#pe(t=''){const e=this,s={'Cache-Control':'no-cache',Pragma:'no-cache'};let n=null;try{e.#oe++;const r=GSLoader.normalizeURL(`${e.url}/${t}.json`);if(n=await GSLoader.load(r,'GET',s,!0),!n&&t.indexOf('_')>0&&(n=await e.#pe(t.split('_')[0])),!n)return!1;e.#i(t,n)}finally{e.#oe--}return e.auto||e.#Se(),!0}#i(t,e){if(!e||!t)return!1;const s=this.#we(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0]);s.set(e,t[1])})),!0}#we(t=''){const e=this;return e.#ae.has(t)||(e.#ae.set(t,new Map),e.#pe(t)),e.#ae.get(t)}#ge(){const t=this;t.auto?(GSDOMObserver.registerFilter(t.#ue,t.#o),t.#le=setInterval(t.#Se.bind(t),500)):(GSDOMObserver.unregisterFilter(t.#ue,t.#o),clearInterval(t.#le))}translateDOM(t,e=!1){const s=this;t!==document.documentElement&&s.#C.add(t),Array.from(t.childNodes).filter((t=>s.#de(t))).forEach((t=>0==t.childNodes.length?s.#C.add(t):s.translateDOM(t,!0))),e||s.#Se()}translate(t){if(e.isStringEmpty(t))return t;const s=this;let n=t,r=null,i=null,a=null;for(GSi18n.#re.lastIndex=-1;null!==(a=GSi18n.#re.exec(t));)r=a[0],i=s.find(r.slice(1,-1)),n=n.replace(r,i);return n}find(t){const e=GSID.hashCode(t);return this.#we(this.lang).get(e)||t}get auto(){return n.getAsBool(this,'auto',!0)}set auto(t=''){n.setAsBool(this,'auto',t)}get default(){return n.get(this,'default',document.documentElement.lang||navigator.language)}set default(t=''){n.set(this,'default',t)}get lang(){return n.get(this,'lang',this.default)}set lang(t=''){n.set(this,'lang',t)}get list(){return n.get(this,'list','title,comment, placeholder').split(',')}set list(t=''){t=Array.isArray(t)?t.join(','):t,n.set(this,'list',t)}get url(){return n.get(this,'url',`${location.origin}/i18n/`)}set url(t=''){n.set(this,'url',t)}}class GSQueryCSS{#g=null;constructor(t){if(!i.isHTMLElement(t))throw new Error('Only HTMLElement type allowed!');this.#g=new GSCSSMap(t)}#Ae(t){return s.hasFunction(this.#g,t)}get(t,s,n){return(r,i)=>{const a=this;return e.isNull(r)?a.#g.get(s):a.#Ae(s)?a.#g[s](r,i):(t[s]=r,n)}}static wrap(t){return new Proxy(t.style,new GSQueryCSS(t))}}class GSQuery{#a=null;constructor(t){Array.isArray(t)||(this.#a=GSQueryCSS.wrap(t))}get(t,e){return'css'===e?this.#a:'query'===e?(e,s,n)=>{const r=i.query(t,e,s,n);return GSQuery.wrap(r)}:'queryAll'===e?(e,s,n)=>{const r=i.queryAll(t,e,s,n);return GSQuery.wrap(r)}:t[e]}set(t,e,s){if('css'===e)Array.isArray(t)?t.forEach((t=>t[e]=s)):i.css(t,s);else t[e]=s;return!0}static instance(t){return new Proxy(t,new GSQuery(t))}static wrap(t){return i.isHTMLElement(t)?GSQuery.instance(t):Array.isArray(t)?(t=t.map((t=>GSQuery.wrap(t))),GSQuery.instance(t)):t}static all(t,e,s,n){return GSQuery.wrap(i.queryAll(t,e,s,n))}static first(t,e,s,n){return GSQuery.wrap(i.query(t,e,s,n))}static{Object.freeze(GSQuery),globalThis.GSQuery=GSQuery}}class GSGesture{#Ce=0;#xe=0;#Te=null;#ke=null;#$e=null;#De=null;#Me=!1;#Le=!1;#Oe=!1;#Ie=0;static timeout=1500;constructor(t,e,s,n){const r=this;r.#Me=e,r.#Le=s,r.#Oe=n,r.#Te=null,r.#ke=null,r.#$e='string'==typeof t?document.querySelector(t):t,r.#De={move:r.#Re.bind(r),start:r.#Ne.bind(r),end:r.#Fe.bind(r)},GSEvents.attach(r.#$e,r.#$e,'touchmove',r.#De.move,!1),GSEvents.attach(r.#$e,r.#$e,'touchstart',r.#De.start,!1),GSEvents.attach(r.#$e,r.#$e,'touchend',r.#De.end,!1)}unbind(){const t=this;GSEvents.remove(t.#$e,t.#$e,'touchmove',t.#De.move),GSEvents.remove(t.#$e,t.#$e,'touchstart',t.#De.start),GSEvents.remove(t.#$e,t.#$e,'touchend',t.#De.end)}#Ne(t){const e=this;e.#Te=t.touches[0].clientX,e.#ke=t.touches[0].clientY,e.#Oe&&setTimeout(e.#Be.bind(e),GSGesture.timeout)}#Fe(t){clearTimeout(this.#Ie)}#Re(t){const e=this;if(!e.#Te||!e.#ke)return;if(!e.#Me)return;const s=t.touches[0].clientX,n=t.touches[0].clientY;if(e.#Oe){Math.abs(e.#Ce)>10&&Math.abs(e.#xe)>10&&clearTimeout(e.#Ie)}e.#Ce=e.#Te-s,e.#xe=e.#ke-n;let r='';r=Math.abs(e.#Ce)>Math.abs(e.#xe)?e.#Ce>0?'swipe-left':'swipe-right':e.#xe>0?'swipe-up':'swipe-down',GSEvents.send(e.#$e,r,t),e.#Te=null,e.#ke=null}#Be(){GSEvents.send(me.#$e,'long-press')}static fingers(t){return t.detail.touches?.length}static attach(t,e=!0,s=!1,n=!1){return new GSGesture(t,e,s,n)}}class GSReadWriteRegistryImpl extends GSEvent{static#He=null;static#qe=Symbol();#g=new Map;constructor(t){if(t!=GSReadWriteRegistryImpl.#qe)throw new Error('Creating new instance not allowed.');super()}register(t){const e=this;e.#je(t);const s=e.find(t.id);if(s!=t){if(s)throw new Error(`Key (${t.id}) already exist in read/write registry!`);e.#g.set(t.id,t),e.emit(`register-${t.id}`,t),e.emit('register',t)}}unregister(t){const s=this;e.isString(t)&&(t=s.find(t)),s.#je(t);const n=s.#g.delete(t.id);return n&&(s.emit(`unregister-${t.id}`,t),s.emit('unregister',t)),n}find(t){return this.#g.get(t)}async wait(t='',e,s=!0){if(!t)throw new Error('GSReadWrite ID not valid.');const n=this;if(s){const e=n.find(t);if(e)return e}const r=s?'register':'unregister';return await super.wait(`${r}-${t}`,e),n.find(t)}#je(t){}static get#Pe(){return GSReadWriteRegistryImpl.#He||(GSReadWriteRegistryImpl.#He=new GSReadWriteRegistryImpl(GSReadWriteRegistryImpl.#qe)),GSReadWriteRegistryImpl.#He}static{Object.seal(GSReadWriteRegistryImpl),globalThis.GSReadWriteRegistry=GSReadWriteRegistryImpl.#Pe}}const c=globalThis.GSReadWriteRegistry;class GSAbstractReadWrite extends GSEvent{#e=null;constructor(t,e=!0){super();this.#e=t||GSID.next(),e&&this.enable()}get id(){return this.#e}enable(){c.register(this),this.emit('enabled')}disable(){c.unregister(this),this.emit('disabled')}get isRegistered(){return!!c.find(this.id)}async read(t){const e=this;let s=null;try{s=await e.onRead(t),s&&e.emit('read',{owner:t,data:s})}catch(n){throw e.emit('error',{type:'read',error:n,owner:t,data:s}),n}return s}async write(t,e){const s=this;let n=null;try{n=await s.onWrite(t,e),n&&s.emit('write',{owner:t,data:e,result:n})}catch(n){throw s.emit('error',{type:'write',error:n,owner:t,data:e}),n}return n}async onRead(t){throw new Error('Extend base GSAbstractReadWrite to implement read operation')}async onWrite(t,e){throw new Error('Extend base GSAbstractReadWrite to implement write operation')}}class GSReadWrite extends GSAbstractReadWrite{static#ze=['','rest','query','quark'];static#Ue=['GET','PUT','POST','DELETE'];#Ve='';#_e={};#We='GET';#Je='POST';#Lt='';#Ye='';#Ke=0;#Qe=0;#Xe=[];#ue=[];constructor(t,e){super(t,e)}get mode(){return e.normalize(this.#Ye)}set mode(t){const s=this;t=e.normalize(t);if(!GSReadWrite.#ze.includes(t))throw new Error(null,`Invalid mode, allowed: ${GSReadWrite.#ze}`);return'quark'===s.#Ye&&s.#Ye!=t&&(s.#We='GET',s.#Je='POST'),this.#Ye=t}get reader(){return this.#We}set reader(t){if(!(!!this.isQuark||GSReadWrite.#Ue.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#Ue}`);return this.#We=t}get writer(){return this.#Je}set writer(t){if(!(!!this.isQuark||GSReadWrite.#Ue.includes(t)))throw new Error(null,`Invalid method, allowed: ${GSReadWrite.#Ue}`);return this.#Je=t}get headers(){return{...this.#_e}}set headers(t={}){t=e.toJson(t);this.#_e={...t}}get src(){return this.#Ve}set src(t=''){this.#Ve=t}get limit(){return this.#Qe}set limit(t=10){this.#Qe=e.asNum(t,10)}get skip(){return this.#Ke}set skip(t=0){this.#Ke=e.asNum(t,0)}get filter(){return this.#ue}set filter(t){this.#ue=e.isJson(t)?e.toJson(t):t}get sort(){return this.#Xe}set sort(t){this.#Xe=e.isString(t)?JSON.parse(t):t}get action(){let t='';switch(this.mode){case'query':t='?limit=${limit}&skip=${skip}&sort=${sort}&filter=${filter}';break;case'rest':t='/${limit}/${skip}?sort=${sort}&filter=${filter}'}return this.#Lt||t}set action(t=''){this.#Lt=t}get url(){const t=this;return t.#Ze(t.#Ve,t.#Ke,t.#Qe,t.#ue,t.#Xe)}#Ze(t,s,n,r,i){if(e.isStringEmpty(t))throw new Error('Attribute "src" not set!');i=i?JSON.stringify(i):'',r=r?JSON.stringify(r):'';const a={limit:n,skip:s,sort:encodeURIComponent(i),filter:encodeURIComponent(r)};return t+e.fromLiteral(this.action,a)}get isOffline(){return''===this.mode}get isQuark(){return'quark'===this.mode}get isRemote(){return['rest','query'].includes(this.mode)}async onRead(t){const e=this;if(e.isOffline)return;if(!e.#We)return super.onRead(t);if(e.isRemote)return await GSLoader.load(e.url,e.#We,e.#_e,!0);if(!e.isQuark)return;const n=s.parseFunction(e.#We);if(!n)throw new Error('Reader quark function not found!');return n(e.skip,e.limit,e.filter,e.sort)}async onWrite(t,e){const n=this;if(n.isOffline)return;if(!n.#Je)return super.onWrite(t);if(!n.isRemote)return await GSLoader.load(n.url,n.#Je,n.#_e,!0,e);if(!n.isQuark)return;const r=s.parseFunction(n.#We);if(!r)throw new Error('Writer quark function not found!');return r(e)}static register(t){return new GSReadWrite(t,!0)}}class StyleController{static#Ft=new Set;#Bt;constructor(t){const e=this;e.#Bt=t,e.#Bt.addController(e)}hostConnected(){StyleController.#Ft.add(this)}hostDisconnected(){StyleController.#Ft.delete(this)}attributeCallback(t,e,s){'orientation'===t&&this.handle()}handle(){this.#Bt?.updateUI()}static#o(t){requestAnimationFrame((()=>{StyleController.#Ft.forEach((t=>t.handle()))}))}static{GSEvents.attach(window,document,'gs-style',StyleController.#o)}}class GSCacheTemplate{static#i=new Map;static store(t,e){this.#i.set(t,e)}static remove(t){return this.#i.delete(t)}static load(t){return this.#i.get(t)}static getOrCreate(t,e){const s=GSCacheTemplate;let n=s.load(t);return n||(n=s.create(e),s.store(t,n),n)}static create(t){const e=document.createElement('template');return i.setHTML(e,t),e}static clone(t){return i.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(t){const e=s.parseFunction(t);return!!s.isFunction(e)&&e}static isHTMLTemplate(t){const e=t?t.trim():'';return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():'';return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e='',s){const n=GSCacheTemplate;return t?n.getOrCreate(e,s):n.create(s)}static loadHTMLTemplate(t=!1,e='',s){const n=GSCacheTemplate,r=n.isHTMLTemplate(s);return r?n.initTemplate(t,e,r):r}static async loadURLTemplate(t=!1,e='',s){const n=GSCacheTemplate;try{let r=null;return t&&(r=n.load(s)),r?r:(r=await GSLoader.loadTemplate(s),n.initTemplate(t,e,r))}catch(t){GSLog.error(null,t)}return!1}static async loadFunctionTemplate(t=!1,e='',n){const r=GSCacheTemplate,i=r.isFunctionTemplate(n);if(!i)return i;try{let n=null;return r.cached&&(n=r.load(o)),n?n:(n=s.isFunctionAsync(i)?await i():i(),r.initTemplate(t,e,n))}catch(t){GSLog.error(null,t)}return i}static async loadTemplate(t=!1,e='',s){if(!e)return!1;if(!s)return!1;const n=GSCacheTemplate;let r=!1;return 0==s.indexOf('#')&&(r=document.getElementById(s.slice(1))),r||(r=n.loadHTMLTemplate(t,e,s)),r||(r=await n.loadFunctionTemplate(t,e,s)),r||(r=await n.loadURLTemplate(t,e,s)),r}}class GSTemplate extends HTMLElement{#ts=!1;#jt=null;#Pt=null;static get observedAttributes(){return['href']}constructor(){super()}get id(){return n.get(this,'id')}set id(t){n.set(this,'id',t)}get href(){return n.get(this,'href')}set href(t){n.set(this,'href',t)}get isFlat(){return e.FLAT||n.getAsBool(this,'flat',!1)}get self(){return this.#jt||this.shadowRoot}get environment(){return n.get(this,'environment','')}set environment(t){n.set(this,'environment',t)}get os(){return n.get(this,'os','')}set os(t){n.set(this,'os',t)}get browser(){return n.get(this,'browser','')}set browser(t){n.set(this,'browser',t)}attributeChangedCallback(t,e,s){this.#ts&&'href'===t&&this.loadTemplate()}connectedCallback(){const t=this,e=t.parentElement;if(!e||'GS-ITEM'!=e.tagName){if(!(t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS))return t.remove();t.id||(t.id=GSID.id),t.#ts=!0,l.store(t),t.loadTemplate()}}disconnectedCallback(){const t=this;t.#ts=!1,t.#Xt(),t.#Pt&&t.#Pt.disconnect(),l.remove(t),GSCacheTemplate.remove(t.id)}#Xt(){const t=this;t.#jt&&(t.#jt.remove(),t.#jt=null)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get shadow(){const t=this;return!t.shadowRoot&&t.#ts&&(t.attachShadow({mode:'open'}),t.#Pt=GSDOMObserver.create(t.shadowRoot)),t.shadowRoot}async loadTemplate(){const e=this,s=await GSCacheTemplate.loadTemplate(!0,e.id,e.href);return s?e.parentElement instanceof HTMLHeadElement?(GSEvents.sendSuspended(document,'gs-template',{id:e.id,href:e.href}),s):(await GSEvents.waitAnimationFrame((async()=>{if(e.#ts){if(e.isFlat){const t=i.parseWrapped(e,s.innerHTML);e.#jt=e.insertAdjacentElement('afterend',t)}else e.shadow.adoptedStyleSheets=t.styles,i.setHTML(e.shadow,s.innerHTML);GSEvents.sendSuspended(e,'templateready',{id:e.id,href:e.href},!0,!0)}})),s):(GSLog.error(this,`Template not found for: Id=${e.id}; href=${e.href}`),!1)}waitWhenReady(t=''){return t&&(this.href=t),this.waitEvent('templateready')}waitEvent(t=''){const e=this;return new Promise(((s,n)=>{if(!t)return n('Event undefined!');GSEvents.once(e,null,t,(t=>s(t.detail)),{once:!0})}))}query(t=''){return i.query(this,t)}queryAll(t='',e=!1){return i.queryAll(this,t)}static{customElements.define('gs-template',GSTemplate),Object.seal(GSTemplate)}}class GSAccessibility{static KEYS=['Space','Enter','ArrowUp','ArrowDown','ArrowLeft','ArrowRight'];static#es=!1;static#$(t){const e=GSAccessibility.KEYS.indexOf(t.code);if(e<0)return;const s=i.activeElement;if(!s.matches(i.QUERY_FOCUSABLE))return;if(e<2)return GSAccessibility.click(s,t);if(!(['INPUT','SELECT','TEXTAREA'].indexOf(s.tagName)>-1)||!t.altKey)return;GSEvents.prevent(t);const n=GSAccessibility.idxToDir(e),r=GSAccessibility.#ss(s,n);r?.focus()}static idxToDir(t){return 2===t||4===t?-1:1}static click(t,e){if('BUTTON'===t?.tagName)return;const s=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!0,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.ctrlKey});return t.dispatchEvent(s)}static#ss(t,e){const s=i.queryAll(i.QUERY_FOCUSABLE).filter((t=>i.isVisible(t)));let n=s.indexOf(t)+e;return n=n>=s.length?0:n,n=n<0?s.length-1:n,s[n]}static start(){if(!GSAccessibility.#es)return GSEvents.listen(document.body,null,'keydown',GSAccessibility.#$),GSAccessibility.#es=!0,GSAccessibility.#es}static stop(){if(GSAccessibility.#es)return GSEvents.unlisten(document.body,null,'keydown',GSAccessibility.#$),GSAccessibility.#es=!1,GSAccessibility.#es}static get active(){return GSAccessibility.#es}static set active(t){return e.asBool(t)?GSAccessibility.start():GSAccessibility.stop()}static{GSAccessibility.start()}}class GSComboExt extends HTMLSelectElement{static{customElements.define('gs-ext-select',GSComboExt,{extends:'select'}),Object.seal(GSComboExt)}constructor(){super()}static get observedAttributes(){return['data']}attributeChangedCallback(t,e,s){'data'===t&&this.load(s)}connectedCallback(){GSID.setIf(this),l.store(this)}disconnectedCallback(){l.remove(this)}get owner(){const t=l.getOwner(this);return i.unwrap(t)}async load(t=''){if(!t)return;const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}apply(t){if(!Array.isArray(t))return!1;const e=this;return requestAnimationFrame((()=>{const s=[];t.forEach((t=>{s.push(e.#ns(t))})),i.setHTML(e,s.join('\n'))})),!0}#ns(t){const e=['<option'];return Object.entries(t).forEach((t=>{const s=t[0],n=t[1];if('text'!==s)return'selected'===s?e.push(s):void e.push(`${s}="${n}"`)})),e.push('>'),e.push(t.text),e.push('</option>'),e.join(' ')}reset(){i.resetSelect(this)}}class GSDataAttr{static#rs='offcanvas|collapse|dropdown|button|tab|pill|popover|modal|dialog|popup';static#is='offcanvas|modal|alert|popup|dialog';static{GSDataAttr.observe()}static observe(t){GSDOMObserver.registerFilter(GSDataAttr.#as,GSDataAttr.#os,!1,t),GSDOMObserver.registerFilter(GSDataAttr.#as,GSDataAttr.#ls,!0,t)}static#as(t){return!i.isGSElement(t)&&(!!i.isHTMLElement(t)&&('true'!==t.dataset.gsAttrMon&&(GSDataAttr.#cs(t)&&t.classList.add('collapsible'),t.dataset.bsDismiss||t.dataset.bsToggle||t.dataset.inject)))}static#os(t){GSID.setIf(t),t.dataset.gsAttrMon=!0,GSEvents.attach(t,t,'click',GSDataAttr.#us.bind(t))}static#ls(t){GSEvents.deattachListeners(t)}static#ds(t){if(t)return t.dataset?.bsToggle||t.dataset?.bsDismiss||t.dataset?.inject?t:GSDataAttr.#ds(t.parentElement)}static#us(t){const e=GSDataAttr.#ds(t.target),s=e?.dataset?.inject,n=e?.dataset?.bsDismiss,r=GSDataAttr.getTarget(e),i=e?.dataset?.bsToggle;GSDataAttr.#hs(e,r,i),GSDataAttr.#gs(e,r,n),GSDataAttr.#ms(e,r,s)}static#ps(t,e,s){switch(s){case'alert':case'collapse':case'dropdown':case'modal':case'dialog':case'offcanvas':case'pill':case'popover':case'poup':case'tab':break;case'button':if(!e)return{list:[t],comps:[]};break;case'tooltip':return{list:[],comps:[]}}let n=i.queryAll(document.documentElement,`gs-${s}`);const r=e||`.${s}`;if(e)n=n.filter((t=>t.matches(r)));else if(t=t.closest(r)){const e=n.filter((e=>e.self.firstElementChild===t));return{list:0===e.length?[t]:[],comps:e}}const a=i.queryAll(document.documentElement,r).filter((t=>!(t instanceof HTMLTemplateElement)));n=GSData.mergeArrays(a.filter((t=>t instanceof GSElement)),n);const o=a.filter((t=>!n.includes(t))).filter((t=>0===n.filter((e=>e.self.firstElementChild===t)).length));return{list:Array.from(new Set(o)),comps:n}}static#fs(t,e){return t.filter((t=>GSDataAttr.#bs(t,e)))}static#Ss(t){return t.filter((t=>GSDataAttr.#vs(t)))}static#ys(t,e){return t.filter((t=>!e.includes(t)))}static#bs(t,e){return e.split(' ').filter((t=>t.trim())).map((t=>'button'===t?'btn':t)).filter((e=>t.classList.contains(e))).length>0}static#vs(t){if(t.matches('.hide,.fade,.collapse')&&!t.matches('.show'))return!0;return r.getComputedStyledMap(t).matches('display','none')}static#cs(t){return t.matches('.collapse')&&!t.matches('.accordion-collapse')}static#Gs(t){return t.matches('.fade')}static#Es(t,e,s){i.toggleClass(t,e,!0),i.toggleClass(t,s,!1)}static#ws(t){const e=GSDataAttr.#cs(t)?'':'fade';GSDataAttr.#Es(t,e,'show')}static#As(t){const e=GSDataAttr.#cs(t)?'gsanim':'fade';GSDataAttr.#Es(t,'show',e)}static#Mt(t,e){t.list.filter((t=>t.toggle)).forEach((t=>t.toggle())),t.list=t.list.filter((t=>!t.toggle));const s=GSDataAttr.#fs(t.list,e),n=GSDataAttr.#Ss(s);GSDataAttr.#ys(s,n).forEach((t=>GSDataAttr.#ws(t))),n.forEach((t=>GSDataAttr.#As(t)))}static async#Cs(t){i.toggleClass(t,'show',!1),GSDataAttr.#Gs(t)&&await e.timeout(i.SPEED),t.remove()}static#xs(t){t.list.forEach((t=>GSDataAttr.#Cs(t)))}static#ms(t,s,r){if(!r)return;const a=r.toLowerCase().startsWith('gs-'),o=i.queryAll(document.documentElement,s),l=t?.dataset?.css||'',c=n.flattenJson(e.toJson(t.dataset.attr)),u=a?`<${r} ${c}></${r}>`:`<gs-template href="${r}" class="${l}"></gs-template>`;o.forEach((t=>i.setHTML(t,u)))}static#hs(t,e,n){if(!GSDataAttr.#Ts(n))return;const r=GSDataAttr.#ps(t,e,n);r.comps.filter((t=>s.isFunction(t.toggle))).forEach((e=>e.toggle(t))),GSDataAttr.#ks(t,e,n,r),GSDataAttr.#Mt(r,n),GSDataAttr.#$s(t,e,n,r)}static#ks(t,e,s,n){return GSDataAttr.#Ds(t,e,s,n,!0)}static#$s(t,e,s,n){return GSDataAttr.#Ds(t,e,s,n,!1)}static#Ds(t,e,s,r,a){switch(s){case'button':break;case'collapse':a?r.list.filter((t=>t.classList.contains('accordion-collapse'))).forEach((t=>{Array.from(t.closest('.accordion').querySelectorAll('.accordion-collapse')).filter((e=>e!=t&&n.get(e,'data-bs-parent'))).forEach((t=>i.toggleClass(t,'show',!1)))})):i.toggleClass(t,'collapsed',null);break;case'dropdown':a?r.list=r.list.map((t=>t.querySelector('.dropdown-menu'))).filter((t=>null!=t)):(r.list.forEach((t=>t.classList.toggle('show'))),r.list.filter((t=>t.classList.contains('show'))).forEach((t=>GSDataAttr.#Ms(t))))}}static#Ms(t){GSEvents.once(t,null,'mouseleave',(e=>t.classList.remove('show')))}static#gs(t,e,n){if(!GSDataAttr.#Ls(n))return;const r=GSDataAttr.#ps(t,e,n);switch(r.comps.filter((t=>s.isFunction(t.close))).forEach((t=>t.close())),r.comps.filter((t=>s.isFunction(t.dismiss))).forEach((t=>t.dismiss())),n){case'alert':GSDataAttr.#xs(r,n);break;case'modal':case'offcanvas':case'popup':GSDataAttr.#Mt(r,n)}}static#Ls(t){return t&&GSDataAttr.#is.includes(t)}static#Ts(t){return t&&GSDataAttr.#rs.includes(t)}static getTarget(t){const e=t?.dataset?.bsTarget||n.get(t,'href');return'#'===e?'':e}static getDismiss(t){return t?.dataset?.bsDismiss||''}static getToggle(t){return t?.dataset?.bsToggle||''}static getInject(t){return t?.dataset?.inject||''}static isDismiss(t){return!!t?.dataset?.bsDismiss}static isToggle(t){return!!t?.dataset?.bsToggle}}class GSDataListExt extends HTMLDataListElement{static{customElements.define('gs-ext-datalist',GSDataListExt,{extends:'datalist'}),Object.seal(GSDataListExt)}constructor(){super()}static get observedAttributes(){return['data']}attributeChangedCallback(t,e,s){'data'===t&&this.load(s)}connectedCallback(){GSID.setIf(this),l.store(this)}disconnectedCallback(){l.remove(this)}get owner(){const t=l.getOwner(this);return i.unwrap(t)}async load(t=''){if(!t)return;const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}apply(t){if(!Array.isArray(t))return!1;const e=this;return requestAnimationFrame((()=>{const s=[];t.forEach((t=>{s.push(e.#ns(t))})),i.setHTML(e,s.join('\n'))})),!0}#ns(t){const s=['<option'];return e.isString(t)&&(t={value:t}),Object.entries(t).forEach((t=>{const e=t[0],n=t[1];if('text'!==e)return'selected'===e?s.push(e):void s.push(`${e}="${n}"`)})),s.push(t.text),s.push('>'),s.join(' ')}}class GSFormExt extends HTMLFormElement{static{customElements.define('gs-ext-form',GSFormExt,{extends:'form'}),Object.seal(GSFormExt),GSDOMObserver.registerFilter(GSFormExt.#as,GSFormExt.#os)}static#as(t){return!e.asBool(t.dataset?.gsIgnore)&&(t instanceof HTMLFormElement&&t instanceof GSFormExt==!1)}static#os(t){const e=document.createElement('form',{is:'gs-ext-form'});n.set(e,'is','gs-ext-form'),Array.from(t.attributes).forEach((t=>n.set(e,t.name,t.value))),Array.from(t?.childNodes||[]).forEach((t=>i.appendChild(e,t))),i.insertAdjacent(t,e,'afterend'),i.removeElement(t)}static observeAttributes(t){return GSData.mergeArrays(t,GSFormExt.observedAttributes)}static get observedAttributes(){return['storage']}#Os;#Is;#We;#Vt;#_t=[];constructor(){super(),this.#We=this.#Rs.bind(this)}connectedCallback(){const t=this;GSID.setIf(t),t.#Ns(t),GSEvents.sendSuspended(t,'form',{type:'init',data:t},!0,!0)}disconnectedCallback(){const t=this;GSEvents.deattachListeners(t),t.#Is?.abort(),t.#Is=null,t.#Os=null,t.#We=null}attributeChangedCallback(t,e,s){const n=this;this.#_t.push(arguments),n.#Vt||(n.#Vt=!0,queueMicrotask((()=>{for(;n.#_t.length>0;)try{n.attributeCallback(...n.#_t.shift())}catch(t){GSLog.error(null,t)}n.#Vt=!1})))}attributeCallback(t,e,s){if('storage'===t)return this.#Fs(e,s)}disable(){i.disableInput(this,'input, textarea, select, .btn',!1,'gsForm')}enable(){i.enableInput(this,'input, textarea, select, .btn',!1,'gsForm')}reset(){super.reset();this.elements.forEach((t=>i.reset(t))),this.read()}submit(){return this.#Bs()}onError(t){GSLog.error(this,t)}validate(){const t=this,e=t.checkValidity()&&t.isValid;return e||t.reportValidity(),e}get elements(){return i.queryAll(this,'input,select,output,textarea')}get storage(){return n.get(this,'storage','')}set storage(t=''){n.set(this,'storage',t)}set asJSON(t){const e=this;return e.#Os=t,i.fromObject(e,t),e.validate()}get asJSON(){return i.toObject(this)}set data(t){return this.asJSON=t}get data(){return this.asJSON}get#Hs(){return c.find(this.storage)}async#Fs(t,e){if(e==t)return;const s=this;s.#Is?.abort();const n=c.find(t);GSEvents.remove(s,n,'read',s.#We),e&&(s.#Is=new AbortController,await c.wait(e,s.#Is.signal),GSEvents.attach(s,s.#Hs,'read',s.#We),s.read())}async read(){await(this.#Hs?.read(this))}async write(){const t=this;t.#Hs?.write(t,t.asJSON)}#Ns(t){t.action='#',GSEvents.attach(t,t,'submit',t.#Bs.bind(t)),GSEvents.attach(t,t,'reset',t.read.bind(t)),GSEvents.attach(t,t,'form-field',t.#qs.bind(t))}#qs(t){const e=this,s=t.detail;s&&e.#Os&&i.fromObject2Element(s,e.#Os)}#Rs(t){t.detail.data&&(this.asJSON=t.detail.data)}#Bs(t){GSEvents.prevent(t,!0);const e=this,s=e.validate();s&&e.write();const n={type:'submit',data:e.asJSON,source:t,valid:s};return GSEvents.send(e,'form',n,!0,!0),s}get isValid(){return 0===i.queryAll(this,'input,select,textarea').filter((t=>i.isVisible(t))).map((t=>t.checkValidity())).filter((t=>!1===t)).length}}class GSInputExt extends HTMLInputElement{static#js=['KeyC','KeyV','KeyX','KeyA'];static#Ps=['KeyC','KeyX'];static#zs='.^$*+?()[]{}|';static#Us={n:/[0-9]/g,x:/[0-9a-fA-F]/g,y:/[0-9]/g,m:/[0-9]/g,d:/[0-9]/g,'#':/[a-zA-Z]/g,'*':/[0-9a-zA-Z]/g,_:/./g};#Vs=!1;#_s=!1;#Ws=[];static{customElements.define('gs-ext-input',GSInputExt,{extends:'input'}),Object.seal(GSInputExt),GSDOMObserver.registerFilter(GSInputExt.#as,GSInputExt.#os)}static#as(t){return i.isFormElement(t)}static#os(t){GSEvents.send(t,'form-field',t,!0,!0,!0)}constructor(){super()}static get observedAttributes(){return['mask','pattern']}connectedCallback(){const t=this;GSID.setIf(t),0===t.placeholder.length&&t.mask&&(t.placeholder=t.mask),t.#Js(),t.#Ns(),l.store(t),t.autofocus&&t.focus(),setTimeout(t.#Ys.bind(t),250)}disconnectedCallback(){const t=this;t.#Ws=[],l.remove(t),GSEvents.deattachListeners(t)}attributeChangedCallback(t,e,s){'mask'!==t&&'pattern'!==t||this.#Js()}get owner(){const t=l.getOwner(this);return i.unwrap(t)}get list(){const t=n.get(this,'list');return i.getByID(this.owner,t)}get filter(){const t=n.get(this,'data-filter');return i.getByID(this.owner,t)}get mask(){return n.get(this,'mask','')}get strict(){return n.get(this,'strict','')}get optimized(){const t=this.mask.split(''),e=[];let s=0;return t.forEach(((t,n)=>{if(e[e.length-1]===t)return s++;s>0&&e.push(`{${++s}}`),s=0,GSInputExt.#zs.includes(t)&&e.push('\\'),e.push(t)})),s>0&&e.push(`{${++s}}`),e.join('')}get autocopy(){return this.hasAttribute('autocopy')}get autoselect(){return this.hasAttribute('autoselect')}get reveal(){return this.hasAttribute('reveal')}#Js(){const t=this;if(t.pattern.length>0)return;if(0===t.mask.length)return;const e=t.mask.split(''),s=['^'];let n=0;e.forEach(((t,r)=>{const i=GSInputExt.#Us[t.toLowerCase()];return i?(e[r]=new RegExp(i,'g'),0===s.length?s.push(i.source):s[s.length-1]===i.source?n++:(n>0&&s.push(`{${++n}}`),n=0,void s.push(i.source))):(n>0&&s.push(`{${++n}}`),n=0,GSInputExt.#zs.includes(t)&&s.push('\\'),s.push(t))})),n>0&&s.push(`{${++n}}`),s.push('$'),t.#Ws=e,t.pattern=s.join(''),t.maxLength=t.mask.length}#Ns(){const t=this;GSEvents.attach(t,t,'keydown',t.#$.bind(t)),GSEvents.attach(t,t,'keyup',t.#Ks.bind(t)),GSEvents.attach(t,t,'keydown',t.#Qs.bind(t)),GSEvents.attach(t,t,'input',t.#Xs.bind(t)),GSEvents.attach(t,t,'change',t.#Zs.bind(t)),GSEvents.attach(t,t,'paste',t.#tn.bind(t)),GSEvents.attach(t,t,'blur',t.#en.bind(t)),GSEvents.attach(t,t,'click',t.#us.bind(t)),requestAnimationFrame((()=>{t.list&&(GSEvents.attach(t,t,'change',t.#Ys.bind(t)),GSEvents.attach(t,t.filter,'change',t.#sn.bind(t)))}))}#nn(t,e='',s=''){const r=n.get(t,`data-${e}`,'').split(/[,;;]/),a=s.length>0&&r.includes(s);i.isFormElement(t)||i.isButtonElement(t)?n.toggle(t,'disabled',!a):a?i.show(t):i.hide(t),i.queryAll(t.closest('form'),'input,textarea,select').forEach((t=>n.set(t,'data-ignore',!a||null)))}isInList(){const t=this,e=t.list;if(!e)return!0;if(!t.strict)return!0;if(!e.querySelector('option'))return!0;return null!=e.querySelector(`option[value="${t.value}"]`)}#Ys(t){const e=this,s=e.owner;let r=i.query(e.list,`option[value="${e.value}"]`),a=!1;r||(r=e.list?.querySelector('option'),a=!0);const o=r?.dataset||{};Object.entries(o).forEach((t=>{const r=a?'':t[1],o=t[0];if(e.setAttribute(`data-${o}`,t[1]),'id'===o||'group'===o)return;const l=`[data-${o}]:not([data-${o}=""]`;Array.from(i.queryAll(s,l)).filter((t=>'OPTION'!==t.tagName)).filter((t=>t!==e)).filter((t=>0===n.get(t,'list').length)).forEach((t=>e.#nn(t,o,r)))}))}#sn(t){const e=this,s=e.list;e.value='';const r=n.get(e.filter,'data-group');i.queryAll(s,'option').forEach((t=>n.set(t,'disabled',!0)));const a=r?`option[data-group="${r}"]`:`option[data-id="${t.target.value}"]`;i.queryAll(s,a).forEach((t=>n.set(t,'disabled')))}#us(t){const e=this;e.autocopy&&navigator.clipboard.writeText(e.value),e.autoselect&&e.select()}#en(t){const e=this;if(e.mask&&e.value===e.mask&&(e.value=''),!e.checkValidity())return e.reportValidity();try{e.mask&&e.#Vs&&GSEvents.send(e,'change',{},!0,!0,!0),e.isInList()||GSEvents.send(e,'strict',{ok:!1,source:t})}finally{e.#Vs=!1}}#tn(t){GSEvents.prevent(t);const e=t.clipboardData.getData('text');this.value=this.formatMask(e)}#rn(t){return this.reveal&&'Shift'===t.key&&t.altKey&&t.shiftKey&&'password'===this.type}#Ks(t){const e=this;'Shift'===t.key&&e.#_s&&(e.type='password')}#$(t){const e=this;if(e.#rn(t)&&(e.#_s=!0,e.type='text'),!e.mask)return;if('Tab'===t.code)return void(e.checkValidity()||(GSEvents.prevent(t),e.reportValidity()));if(t.ctrlKey){const s=GSInputExt.#js.includes(t.code),n=GSInputExt.#Ps.includes(t.code);if(s)return n&&!e.checkValidity()?(e.reportValidity(),GSEvents.prevent(t)):void 0}const s=e.value.split('');let n=e.selectionStart,r=e.selectionEnd,i=!1,a=n;if('Delete'===t.code){if(r===s.length)return;for(i=!0;a<=r;)s[a]=e.mask[a],a++;a=n}if('Backspace'===t.code){if(0===n)return;for(i=!0;r>=n;)r--,r>=0&&(s[r]=e.mask[r]);a=n-1}i&&(e.value=e.formatMask(s.join('')),e.setSelectionRange(a,a),e.#Vs=!0)}#Qs(t){const e=this;if(!e.mask)return;if(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||1!==t.key.length)return;const s=e.value.split('');let n=e.selectionStart,r=e.selectionEnd;const i=e.#Ws[n];if(i instanceof RegExp){if(i.lastIndex=0,!i.test(t.key))return GSEvents.prevent(t),!1;s[n]=t.key}else s[n]=e.mask[n];for(;r>n;)s[r]=e.mask[r],r--;e.value=e.formatMask(s.join('')),e.setSelectionRange(n+1,n+1),e.#Vs=!0}#Zs(t){const e=this;'range'===e.type&&(e.title=e.value)}#Xs(t){const e=this;return'number'===e.type?e.#in(t):e.mask?void 0:'text'===e.type?e.#an(t):void 0}#in(t){const e=this;e.maxLength>0&&e.value.length>e.maxLength&&(e.value=e.value.substring(0,e.maxLength))}#an(t){const e=this;e.value=e.#on(e.value)}formatMask(t=''){const s=this;if(!s.mask)return t;const n=t.split(''),r=[];let i=!1;return s.mask.split('').every(((t,a)=>{const o=s.#Ws[a];if(e.isString(o)&&(r.push(o),n[0]===o&&n.shift()),o instanceof RegExp){o.lastIndex=0;const e=n.shift();i=e&&o.test(e),r.push(i?e:t)}return!0})),s.#on(r.join(''))}reset(){i.reset(this)}#on(t=''){const s=r.styleValue(this,'text-transform');return s&&(t=e.textTransform(s.value,t)),t}}class GSNavLinkExt extends HTMLAnchorElement{static CSS_TAB_ACTIVE='text-bg-primary';static CSS_TAB_INACTIVE='text-bg-secondary';static{customElements.define('gs-ext-navlink',GSNavLinkExt,{extends:'a'}),Object.seal(GSNavLinkExt),GSDOMObserver.registerFilter(GSNavLinkExt.#as,GSNavLinkExt.#os),GSDOMObserver.registerFilter(GSNavLinkExt.#as,GSNavLinkExt.#ls,!0)}static#as(t){let e=t instanceof HTMLElement&&'gs-ext-navlink'!==n.get(t,'is');if(e){const s=t.classList;e=!t.hasAttribute('ignore')&&(s.contains('nav-link')||s.contains('list-group-item'))}return e}static#os(t){GSNavLinkExt.#Ns(t)}static#ls(t){GSEvents.deattachListeners(t)}constructor(){super()}connectedCallback(){GSID.setIf(this),GSNavLinkExt.#Ns(this)}disconnectedCallback(){GSEvents.deattachListeners(this)}static#Ns(t){GSEvents.attach(t,t,'click',GSNavLinkExt.#us.bind(t)),GSEvents.attach(t,t,'keydown',GSNavLinkExt.#$.bind(t))}static#$(t,e){switch(t.code){case'Space':case'Enter':GSNavLinkExt.#us(t,this)}}static#us(t,e){const s=e||this;if('false'===s.dataset.selectable)return GSNavLinkExt.#ln(t,s);const n=GSNavLinkExt.#cn(s),r=GSNavLinkExt.#Y(s),a=GSNavLinkExt.#un(s),o=GSNavLinkExt.#dn(s);requestAnimationFrame((()=>{r&&r.querySelectorAll('.list-group-item').forEach((t=>i.toggleClass(t,'active',!1))),n&&n.querySelectorAll('.nav-link').forEach((t=>i.toggleClass(t,'active',!1))),a&&a.querySelectorAll('.tab-pane').forEach((t=>i.toggleClass(t,'active show',!1))),i.toggleClass(s,'active',!0),i.toggleClass(o,'active show',!0),GSNavLinkExt.#ln(t,s)}))}static#ln(t,e){const s=GSNavLinkExt.#hn(e),n={type:'active',data:e.dataset,source:t};GSEvents.send(s,'action',n,!0,!0,!0)}static#Y(t){return t.closest('.list-group')}static#cn(t){return t.closest('.nav')}static#un(t){const e=GSNavLinkExt.#dn(t);return e?e.closest('.tab-content'):null}static#dn(t){const e=GSNavLinkExt.#cn(t),s=t?.dataset.bsTarget;return s?GSNavLinkExt.#hn(e).querySelector(s):null}static#hn(t){const e=l.getOwner(t);return i.unwrap(e)}}class GSUListExt extends HTMLUListElement{connectedCallback(){const t=this;GSID.setIf(t),GSEvents.attach(t,t,'keydown',t.#$.bind(t))}disconnectedCallback(){GSEvents.deattachListeners(this)}#$(t){const e=GSAccessibility.KEYS.indexOf(t.code);if(e<0)return;GSEvents.prevent(t);const s=this;let n=s.#gn;return n?e<2?GSAccessibility.click(s.#Dt(n),t):void(s.#mn(n,e)||(n=s.#ss(n,e),s.#Dt(n)?.focus())):void 0}#Dt(t){return t?.querySelector(i.QUERY_FOCUSABLE)}#ss(t,e){const s=GSAccessibility.idxToDir(e),n=Array.from(this.children).filter((t=>t.matches('li:not([data-inert="true"])')));let r=n.indexOf(t)+s;return r=r>=n.length?0:r,r=r<0?n.length-1:r,n[r]}get#gn(){const t=i.activeElement;return'LI'===t.tagName?t:t.closest('li')}get isSubmenu(){return this.matches('.submenu')}#mn(t,e){if(e<4)return!1;const s=GSAccessibility.idxToDir(e);let n=t.querySelector('.submenu')||this;if(!n.matches('.submenu'))return!1;const r=GSUtil.asBool(n.dataset.start),a=GSUtil.asBool(n.dataset.end),o=r&&s<0||a&&s>0;return i.toggleClass(n,'show',o),n=o?n:n.parentElement,n.querySelector(i.QUERY_FOCUSABLE)?.focus(),!0}static{customElements.define('gs-ext-ul',GSUListExt,{extends:'ul'}),Object.seal(GSUListExt)}}class GSTimeFormat extends GSElement{#e=0;static get observedAttributes(){return['interval']}attributeChanged(t='',e='',s=''){const n=this;n.stop(),n.start(),n.#pn()}onReady(){super.onReady();this.#pn(),this.start()}disconnectedCallback(){this.stop()}#pn(){const t=this,e=new Date,s=e.toLocaleTimeString(t.locale);return i.setHTML(t.self,s),t.emit('time',{date:e},!0,!0),0}start(){const t=this;t.#e=t.interval>0?setInterval(t.#pn.bind(t),1e3*t.interval):t.#pn()}stop(){clearInterval(this.#e)}get isFlat(){return!0}get interval(){return n.getAsNum(this,'interval',1)}set interval(t=60){return n.setAsNum(this,'interval',t)}get locale(){return n.get(this,'locale',e.locale)}set locale(t=''){return n.set(this,'locale',t)}static{customElements.define('gs-time-format',GSTimeFormat),Object.seal(GSTimeFormat)}}class GSDateFormat extends HTMLElement{static observedAttributes=['value','locale','format'];#e=0;connectedCallback(){this.#pn()}attributeChangedCallback(t='',e='',s=''){this.#pn()}#pn(){const t=this;t.#e>0||(t.#e=setTimeout((()=>{i.setHTML(t,t.result),t.#e=0}),50))}get result(){const t=this,e=t.value;return t.format?e.format(t.format):new Intl.DateTimeFormat(t.locale,t.dataset).format(e)}get format(){return n.get(this,'format')}set format(t=''){return n.set(this,'format',t)}get value(){const t=Date.parse(n.get(this,'value',new Date)),e=new GSDate(t);return e.locale=this.locale,e}set value(t=''){n.set(this,'value',t)}get locale(){return n.get(this,'locale',navigator.locale)}set locale(t=''){n.set(this,'locale',t)}static{customElements.define('gs-date-format',GSDateFormat),Object.seal(GSDateFormat)}}class GSYearFormat extends HTMLElement{static observedAttributes=['offset'];connectedCallback(){this.#pn()}attributeChangedCallback(t='',e='',s=''){this.#pn()}#pn(){i.setHTML(this,this.value)}get value(){return this.current+this.offset}get current(){return(new Date).getFullYear()}get offset(){return n.getAsNum(this,'offset',0)}set offset(t='0'){n.setAsNum(this,'offset',t)}static{customElements.define('gs-year-format',GSYearFormat),Object.seal(GSYearFormat)}}class GSCurrencyFormat extends HTMLElement{static observedAttributes=['value','locale','currency'];#e=0;connectedCallback(){this.#pn()}attributeChangedCallback(t='',e='',s=''){this.#pn()}#pn(){const t=this;t.#e>0||(t.#e=setTimeout((()=>{i.setHTML(t,t.format),t.#e=0}),50))}get#fn(){return Object.apply(this.dataset,{style:'currency',currency:this.currency})}get format(){const t=this;return new Intl.NumberFormat(t.locale,t.#fn).format(t.value)}get value(){return n.getAsNum(this,'value',0)}set value(t=''){n.setAsNum(this,'value',t)}get locale(){return n.get(this,'locale',navigator.language)}set locale(t=''){n.set(this,'locale',t)}get currency(){return n.get(this,'currency','')}set currency(t=''){n.set(this,'currency',t)}static{customElements.define('gs-currency-format',GSCurrencyFormat),Object.seal(GSCurrencyFormat)}}class GSDataHandler extends HTMLElement{static{customElements.define('gs-data-handler',GSDataHandler),Object.seal(GSDataHandler)}static observeAttributes(t){return GSData.mergeArrays(t,GSDataHandler.observedAttributes)}static get observedAttributes(){return['src','limit','skip','action','mode','reader','writer']}#Hs=null;#We=null;#Je=null;#bn=null;#Sn=null;#vn=null;#yn=!1;constructor(){super();const t=this;if(!t.id)throw new Error('Element ID is required attribute!');t.#Gn(),t.#We=t.#Rs.bind(this),t.#Je=t.#En.bind(this),t.#bn=t.#wn.bind(this)}connectedCallback(){const t=this;l.store(t),t.#vn=requestAnimationFrame((()=>{t.#vn=null,t.#An()}))}disconnectedCallback(){const t=this;l.remove(t),GSEvents.deattachListeners(t),t.#vn&&cancelAnimationFrame(t.#vn),t.#yn||t.#Hs?.disable(),t.#vn=null,t.#Hs=null,t.#We=null,t.#Je=null,t.#bn=null,t.#Sn=null}attributeChangedCallback(t,e,s){const n=this;if(e!==s&&l.hasSetter(n.#Hs,t))try{if(n.#Hs[t]=s,'mode'===t&&(n.writer=n.#Hs.writer,n.reader=n.#Hs.reader),'writer'===t)return;n.isRegistered&&n.#Sn()}catch(s){n[t]=e,GSLog.error(this,s)}}async waitEvent(t='',e){const s=this;return new GSPromise(((e,n)=>{s.once(t,(t=>e(t.detail)))}),e).await()}once(t,e){return this.attachEvent(this,t,e,!0)}on(t,e){return this.attachEvent(this,t,e)}off(t,e){this.removeEvent(this,t,e)}listen(t,e){return this.on(t,e)}unlisten(t,e){this.off(t,e)}attachEvent(t,e='',s,n=!1){return GSEvents.attach(this,t,e,s,n)}removeEvent(t,e='',s){GSEvents.remove(this,t,e,s)}async#An(){const t=this;t.#Hs?.disable(),t.#Cn(),t.#xn?t.#Hs=new GSReadWrite(t.id,!t.isOffline):(t.#Hs=await c.wait(t.id),t.#yn=!0),t.#Tn(),t.#kn(),GSEvents.send(t,'ready',{},!0,!0)}get#xn(){const t=this;return t.src||t.mode||t.reader||t.writer}#Tn(){const t=this;t.#Hs&&(t.#Hs.src=t.src,t.#Hs.mode=t.mode,t.#Hs.action=t.action,t.#Hs.reader=t.reader,t.#Hs.writer=t.writer,t.#Hs.limit=t.limit,t.#Hs.skip=t.skip,t.#Hs.sort=t.sort,t.#Hs.filter=t.filter)}#kn(){const t=this;t.attachEvent(t.#Hs,'read',t.#We),t.attachEvent(t.#Hs,'write',t.#Je),t.attachEvent(t.#Hs,'error',t.#bn)}#Cn(){const t=this;t.removeEvent(t.#Hs,'read',t.#We),t.removeEvent(t.#Hs,'write',t.#Je),t.removeEvent(t.#Hs,'error',t.#bn)}#$n(){if(!this.isOffline&&!this.isRegistered)throw new Error('Data handler not initialized!')}#Rs(t){const e=this;e.dataset.gsDebug&&GSLog.log(e,JSON.stringify(t.detail)),e.isRegistered&&e.onRead(t.detail.data)}#En(t){const e=this;e.dataset.gsDebug&&GSLog.log(e,JSON.stringify(t.detail)),e.isRegistered&&e.onWrite(t.detail.data)}#wn(t){const e=this;e.dataset.gsDebug&&GSLog.log(e,JSON.stringify(t.detail)),e.isRegistered&&e.onError(t.detail)}#Gn(){const t=this;t.#Sn=s.callOnceLifo(t.#Dn,t)}#Dn(){return this.#Gn(),this.#Mn()}#Mn(){const t=this;return t.#$n(),t.#Hs?.read(t)}#Ln(t){return'quark'===this.mode?t||'':t||'GET'}#On(t){return'quark'===this.mode?t||'':t||'POST'}onRead(t){}onWrite(t){}onError(t){}read(){return this.#Sn()}write(t){const e=this;e.#$n(),e.#Hs?.write(e,t)}load(){return this.read()}save(t){return this.write(t)}get isRegistered(){return!0===this.#Hs?.isRegistered}get isOffline(){return this.#Hs?.isOffline}get src(){return n.get(this,'src','')}set src(t=''){return n.set(this,'src',t)}get action(){return n.get(this,'action')}set action(t=''){return n.set(this,'action',t)}get mode(){return n.get(this,'mode',this.src?'query':'')}set mode(t){return n.set(this,'mode',t||'query')}get reader(){return n.get(this,'reader',this.#Ln())}set reader(t){return n.set(this,'reader',this.#Ln(t))}get writer(){return n.get(this,'writer',this.#On())}set writer(t){return n.set(this,'writer',this.#On(t))}get limit(){return n.getAsNum(this,'limit',0)}set limit(t=0){return n.setAsNum(this,'limit',t,0)}get skip(){return n.getAsNum(this,'skip',0)}set skip(t=0){return n.setAsNum(this,'skip',t,0)}get filter(){return this.#Hs?.filter}set filter(t){const s=this;s.#Hs&&(t=e.isJsonString(t)?JSON.parse(t):t,s.#Hs.filter=t)}get sort(){return this.#Hs?.sort}set sort(t){const s=this;s.#Hs&&(t=e.isString(t)?JSON.parse(t):t,s.#Hs.sort=t)}get isExternal(){return this.#yn}}class GSAccordion extends GSElement{static{customElements.define('gs-accordion',GSAccordion),Object.seal(GSAccordion)}static get observedAttributes(){return GSElement.observeAttributes(['css','css-item','css-header','css-body','data'])}attributeCallback(t='',e='',s=''){const n=this;if('data'===t)return n.load(s);let r=null;switch(t){case'css':r='.accordion';break;case'css-item':r='.accordion-item';break;case'css-head':r='.accordion-button';break;case'css-body':r='.accordion-collapse'}r&&n.queryAll(r).forEach((t=>{i.toggleClass(t,e,!1),i.toggleClass(t,s,!0)}))}async getTemplate(t=''){const e=GSID.id,s=await this.#Qt(e);return`<div class="accordion ${this.css}" id="#${e}">${s}</div>`}async#Qt(t){const e=this,s=GSItem.genericItems(e).map((s=>e.#In(t,s)));return(await Promise.all(s)).join('')}get css(){return n.get(this,'css','')}set css(t=''){n.set(this,'css',t)}get cssItem(){return n.get(this,'css-item','')}set cssItem(t=''){n.set(this,'css-item',t)}get cssHead(){return n.get(this,'css-head')}set cssHead(t=''){return n.set(this,'css-head',t)}get cssBody(){return n.get(this,'css-body')}set cssBody(t=''){return n.set(this,'css-body',t)}async#In(t,e){const s=this,n=GSID.id,r=GSItem.getBody(e),i=s.#Rn(e),a=s.#Nn(e),o=s.#Fn(e)?`data-bs-parent=#${t}`:'',l=s.#Bn(e);return`\n       <div class="accordion-item ${s.cssItem}">\n         <slot name="content">\n             <h2 class="accordion-header">\n               <button class="accordion-button ${s.cssHead} ${l?'':'collapsed'}" type="button" data-bs-toggle="collapse" data-bs-target="#${n}">\n                 ${i}\n               </button>\n             </h2>\n             <div class="accordion-collapse collapse ${s.cssBody} ${l?'show':''}" id="${n}" ${o}>\n               <div class="accordion-body">\n                   ${r||a}\n               </div>\n             </div>      \n         </slot>\n     </div>\n     `}#Rn(t){return n.get(t,'title')}#Nn(t){return n.get(t,'message')}#Bn(t){return n.getAsBool(t,'visible',!1)}#Fn(t){return n.getAsBool(t,'autoclose',!0)}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this;GSEvents.deattachListeners(n);const r=i.fromJsonAsString(s);return i.setHTML(n,r),n.connectedCallback(),s}}class GSAlert extends GSElement{#Hn='<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>';#qn=!1;#jn=!1;#le=0;#Os=0;static{customElements.define('gs-alert',GSAlert),Object.seal(GSAlert)}static get observedAttributes(){return GSElement.observeAttributes(['css','message','active'])}constructor(){super(),GSItem.validate(this,this.tagName)}disconnectedCallback(){clearInterval(this.#le),super.disconnectedCallback()}#us(t){this.emit('action',{type:'alert',source:t},!0),this.dismiss()}#Pn(){const t=this,e=GSItem.genericItems(t);0!==e.length&&(t.message?t.#Os=-1:t.message=e[0].title,t.#le=setInterval((()=>{t.#jn||(t.#Os++,t.#Os>=e.length&&(t.#Os=0),t.message=e[t.#Os].title)}),1e3*t.delay),t.attachEvent(t.self,'mouseover',(()=>t.#jn=!0)),t.attachEvent(t.self,'mouseout',(()=>t.#jn=!1)))}async onBeforeReady(){await super.onBeforeReady();const t=this,e=t.query('.btn-close');t.attachEvent(e,'click',t.#us.bind(t)),t.#Pn()}attributeCallback(t='',e='',s=''){const n=this,r=n.self?.firstElementChild;'message'==t&&i.setHTML(n.query('slot'),n.message),'css'==t&&(i.toggleClass(r,e,!1),i.toggleClass(r,s,!0)),'active'==t&&i.toggleClass(r,activeCSS,!n.#qn)}get template(){const t=this;return`\n        <div class="alert ${t.css} ${this.styleID}" data-css-id="${this.styleID}" role="class">\n            <slot>${t.message}</slot>\n            ${t.dismissible?t.#Hn:''}\n        </div>`}get css(){const t=this.dismissible?'alert-dismissible fade show':'';return n.get(this,'css')+` ${t}`}set css(t=''){return n.set(this,'css',t)}get activeCSS(){return n.get(this,'css-active','d-none')}set activeCSS(t=''){return n.get(this,'css-active',t)}get message(){return n.get(this,'message')}set message(t=''){return n.set(this,'message',t)}get dismissible(){return n.getAsBool(this,'dismissible',!1)}set dismissible(t=''){return n.setAsBool(this,'dismissible',t)}get delay(){return n.getAsNum(this,'delay',5)}set delay(t=5){return n.setAsNumt(this,'delay',t)}async#$t(){return i.toggleClass(this.query('.alert'),'show',!1),await e.timeout(i.SPEED),this.remove()}dismiss(){return this.#$t()}toggle(){this.active=!this.active}get isFlat(){return n.getAsBool(this,'flat',!0)}get anchor(){return'self'}}class GSButton extends GSElement{#qn=!1;static{customElements.define('gs-button',GSButton),Object.seal(GSButton)}static get observedAttributes(){return GSElement.observeAttributes(['css','dismiss','target','toggle','title','active','disable'])}constructor(){super()}#us(t){const e=this;if(e.disable)return!1;e.emit('action',{type:'button',action:e.action,source:t},!0,!0,!0),e.active&&(e.#qn=!e.#qn,i.toggleClass(e.firstElementChild,'active',e.#qn)),e.select||e.#zn?.blur()}onReady(){super.onReady();const t=this;t.attachEvent(t.#zn,'click',t.#us.bind(t))}attributeCallback(t='',e='',s=''){const r=this.firstElementChild;this.#pn(t,e,s),n.set(r,`data-bs-${t}`,s)}get#zn(){return this.query('button')}#pn(t='',s='',r=''){const a=this,o=a.firstElementChild;return'title'==t?i.setHTML(o,a.title):('css'==t&&(i.toggleClass(o,s,!1),i.toggleClass(o,r,!0)),'active'==t?i.toggleClass(o,'active',a.#qn):'disable'==t?n.set(a.firstElementChild,'disabled',e.asBool(r)?r:null):void 0)}get template(){const t=this,e=t.disable?'disabled':'',s=`${t.icon?`<gs-icon icon="${t.icon}" hover="${t.hover}"></gs-icon>`:''} ${t.title}`,n=GSItem.getAttrs(t);return`<button type="${t.type}" class="btn ${t.css}" ${n} ${e} title="${t.comment}" aria-label="${t.ariaLabel}">${s}</button>`}get icon(){return n.get(this,'icon')}set icon(t=''){return n.set(this,'icon',t)}get hover(){return n.get(this,'hover')}set hover(t=''){return n.set(this,'hover',t)}get css(){const t=this.#qn?'active':'';return n.get(this,'css')+` ${t}`}set css(t=''){return n.set(this,'css',t)}get action(){return n.get(this,'action')}set action(t=''){return n.set(this,'action',t)}get dismiss(){return n.get(this,'dismiss')}set dismiss(t=''){return n.set(this,'dismiss',t)}get target(){return n.get(this,'target')}set target(t=''){return n.set(this,'target',t)}get toggle(){return n.get(this,'toggle')}set toggle(t=''){return n.set(this,'toggle',t)}get comment(){return n.get(this,'comment')}set comment(t=''){return n.set(this,'comment',t)}get title(){return n.get(this,'title')}set title(t=''){return n.set(this,'title',t)}get active(){return n.getAsBool(this,'active',!1)}set active(t=''){return this.#qn=e.asBool(t),n.set(this,'active',this.#qn)}get disable(){return n.getAsBool(this,'disable',!1)}set disable(t=''){return n.getAsBool(this,'disable',t)}get select(){return n.getAsBool(this,'select',!0)}set select(t=''){return n.setAsBool(this,'select',t)}get type(){return n.get(this,'type','button')}set type(t=''){return n.set(this,'type',t)}toggle(){this.active=!this.active}get isFlat(){return!0}get anchor(){return'self'}}class GSCalendar extends GSElement{#Un=null;static{customElements.define('gs-calendar',GSCalendar),Object.seal(GSCalendar)}static get observedAttributes(){return GSElement.observeAttributes(['format','locale','date'])}constructor(){super(),this.#Un=new GSDate,this.#Un.locale=this.locale}attributeChanged(t='',e='',s=''){const n=this;'locale'===t&&(n.#Un.locale=n.locale),'date'===t&&(n.#Un=new GSDate(s),n.#Un.locale=n.locale),'format'===t&&(n.#Un.format=s),n.#pn()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.#Un=null}async onBeforeReady(){await super.onBeforeReady();const t=this;t.#pn(),t.attachEvent(t.query('.header'),'click',t.#Vn.bind(t)),t.attachEvent(t.query('div'),'click',t.#_n.bind(t)),t.attachEvent(t.query,'change',t.#Wn.bind(t)),t.attachEvent(t.monthEl,'change',t.#Jn.bind(t))}async getTemplate(t=''){return this.#Yn()}get date(){return n.get(this,'date',this.#Un.toISOString())}set date(t=''){n.set(this,'date',t)}get target(){return n.get(this,'target')}set target(t=''){n.set(this,'target',t)}get format(){return n.get(this,'format')}set format(t=''){n.set(this,'format',t)}get locale(){return n.get(this,'locale',e.locale)}set locale(t=''){n.set(this,'locale',t)}get css(){return n.get(this,'css')}set css(t=''){n.set(this,'css',t)}get cssHeader(){return n.get(this,'css-header')}set cssHeader(t=''){n.set(this,'css-header',t)}get cssMonth(){return n.get(this,'css-month','form-control fs-3 fw-bold border-0 text-center m-1 p-0')}set cssMonth(t=''){n.set(this,'css-month',t)}get cssYear(){return n.get(this,'css-year','form-control fs-5 fw-bold border-0 text-center m-1 p-0')}set cssYear(t=''){n.set(this,'css-year',t)}get cssNav(){return n.get(this,'css-nav','btn-light')}set cssNav(t=''){n.set(this,'css-nav',t)}get cssWeeks(){return n.get(this,'css-weeks','fw-bold text-bg-dark')}set cssWeeks(t=''){n.set(this,'css-weeks',t)}get cssDays(){return n.get(this,'css-days')}set cssDays(t=''){n.set(this,'css-days',t)}get cssSelected(){return n.get(this,'css-selected','btn-primary')}set cssSelected(t=''){n.set(this,'css-selected',t)}get cssToday(){return n.get(this,'css-today','btn-secondary')}set cssToday(t=''){n.set(this,'css-today',t)}get monthEl(){return this.query('.month')}get yearEl(){return this.query('.year')}get prevEl(){return this.query('.prev')}get nextEl(){return this.query('.next')}get arrowsEl(){return this.query('.arrow')}get arrowNext(){return n.get(this,'arrow-next','&#10095;')}set arrowNext(t){return n.set(this,'arrow-next',t)}get arrowPrev(){return n.get(this,'arrow-prev','&#10094;')}set arrowPrev(t){return n.set(this,'arrow-prev',t)}get minYear(){return n.getAsNum(this,'year-min','1900')}set minYear(t){return n.setAsNum(this,'year-min',t)}get maxYear(){return n.getAsNum(this,'year-max','2100')}set maxYear(t){return n.setAsNum(this,'year-max',t)}formatted(t){const e=this;return(t||e.#Un).format(e.format,e.locale)}#Wn(t){const e=this;e.#Un.year=e.yearEl.value,e.#pn()}#Jn(t){const e=this;e.#Un.month=e.monthEl.selectedIndex,e.#pn()}#_n(t){const s=this,n=t.composedPath().shift();if(!i.hasClass(n,'day'))return;const r=e.asNum(n.innerText.trim());requestAnimationFrame((()=>{s.queryAll('.day').forEach((t=>i.toggleClass(t,s.cssSelected,!1))),i.toggleClass(n,s.cssSelected,!0)}));const a=new GSDate(s.#Un);a.day=r,s.#Kn(a),s.emit('date',{type:'calendar',date:a,val:s.formatted(a)},!0,!0)}#Vn(t){const e=this,s=t.composedPath().shift();if(!i.hasClass(s,'arrow'))return;s.blur();i.hasClass(s,'prev')?e.#Un.month--:e.#Un.month++,e.#pn()}#Kn(t){const e=this;if(!e.target)return;const s=i.query(document.documentElement,e.target);return s?s instanceof HTMLInputElement?'date'===s.type?s.valueAsDate=t:s.value=e.formatted(t):void i.setHTML(s,e.formatted(t)):void 0}#pn(){const t=this;t.queryAll('.days').forEach((t=>t.remove())),t.query('.weeks').insertAdjacentHTML('afterend',t.#Qn()),t.monthEl.selectedIndex=t.#Un.month,t.yearEl.value=t.#Un.getFullYear()}#Xn(t,s){const n=this;return t&&e.asNum(t)===n.#Un.day&&s.month===n.#Un.month&&n.#Un.year===s.year}#Qn(){const t=this,e=new GSDate;e.locale=t.locale;const s=t.#Un.build(t.locale).map((s=>`<div class="col p-0">${s?`<a href="#" class="btn ${t.#Xn(s,e)?t.cssToday:''} day">${s}</a>`:''}</div>`)).map(((t,e)=>{if(0===e)return`<div class="row days">${t}`;return e%7==0?`</div><div class="row days">${t}`:t}));return s.push('</div>'),s.join('')}#Zn(){const t=this,e=t.#Un.monthName,s=GSDate.monthList(!1,t.locale).map(((t,s)=>`<option value="${s}" ${e==t?'selected':''}>${t}</option>`)).join('\n');return`<select class="month ${t.cssMonth}" value="${e}">\n                    ${s}\n                </select>`}#tr(){const t=this;return`<input class="year ${t.cssYear}" value="${t.#Un.getFullYear()}" type="number" min="${t.minYear}" max="${t.maxYear}">`}#Yn(){const t=this,e=GSDate.dayList(!0,t.locale).map((t=>`<div class="col">${t}</div>`)).join(''),s=t.#Zn(),n=t.#tr();return`<style>\n                .year::-webkit-outer-spin-button,\n                .year::-webkit-inner-spin-button {\n                  -webkit-appearance: none;\n                  margin: 0;\n                }                \n                .year {\n                  -moz-appearance: textfield;\n                }                \n                </style>\n                <div class="container-fluid text-center ${t.css}">\n                <div class="row align-items-center ${t.cssHeader} header">\n                    <div class="col-auto">\n                        <a href="#" class="btn ${t.cssNav} arrow prev">${t.arrowPrev}</a>\n                    </div>\n                    <div class="col"></div>\n                    <div class="col-auto">\n                        ${s}\n                        ${n}\n                    </div>\n                    <div class="col"></div>\n                    <div class="col-auto">\n                        <a href="#" class="btn ${t.cssNav} arrow next">${t.arrowNext}</a>\n                    </div>\n                </div>\n                <div class="row weeks ${t.cssWeeks}">${e}</div>                \n            </div>`.replace(/\n/g,'')}}class GSCenter extends GSElement{static{customElements.define('gs-center',GSCenter),Object.seal(GSCenter)}static get observedAttributes(){return GSElement.observeAttributes(['css'])}attributeCallback(t='',e='',s=''){if('css'===t){const t=this.query('div');i.toggleClass(t,e,!1),i.toggleClass(t,s,!0)}}async getTemplate(){return`<div class="position-absolute top-50 start-50 translate-middle ${this.css} ${this.styleID}"  data-css-id="${this.styleID}"><slot></slot></div>`}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}}class GSMenu extends GSUListExt{#er=null;#sr=0;static{customElements.define('gs-menu',GSMenu,{extends:'ul'}),Object.seal(GSMenu)}constructor(){super();i.validate(this,this.tagName,'LI')}connectedCallback(){super.connectedCallback();const t=this;i.toggleClass(t,t.id,!0),t.#nr(),t.#rr(),t.#ir(),t.attachEvent(document,'keydown',t.#$.bind(t))}disconnectedCallback(){const e=this;for(GSEvents.deattachListeners(e),t.deleteRule(e.id);e.#sr>-1;)t.deleteRule(`${e.id}-${e.#sr--}`);super.disconnectedCallback()}attachEvent(t,e='',s,n=!1){return GSEvents.attach(this,t,e,s,n)}removeEvent(t,e='',s){return GSEvents.remove(this,t,e,s)}get visible(){return this.matches('.show')}get isSubmenu(){return this.matches('.submenu')}get closable(){return e.asBool(this.dataset.closable)||this.isSubmenu}popup(e=0,s=0,n){const r=this;if(GSEvents.isMouseOrPointerEvent(e)){const t=e;s=t.clientY,e=t.clientX;let n=i.offsetParent(r);n=n?n.getBoundingClientRect():null,e-=n?.left||0,s-=n?.top||0}const a={clientX:e,clientY:s,target:e.target||n};requestAnimationFrame((()=>{const e={position:'fixed',top:'0px',left:'0px',translate:`${a.clientX}px ${a.clientY}px`};t.setRule(r.id,e,!0),r.open(a)}))}close(e){GSEvents.prevent(e,!1);const s=this;if(!s.closable)return!1;if(!s.visible)return!1;s.#ar(),i.toggleClass(s,'show',!1);t.setRule(s.id,{left:'',top:''},!0),s.#er?.focus(),s.#er=null,GSEvents.send(s,'close',e)}open(t){const e=this;e.#er=t?.target,i.toggleClass(e,'show',!0),e.#ir(),e.#or(t),i.query(e,'a,input,[tabindex="0"]')?.focus(),GSEvents.send(e,'open')}toggle(t){const e=this;e.visible?e.close(t):e.open(t)}get#lr(){return i.queryAll(this,'.dropdown-item')}get#cr(){return i.queryAll(this,'.submenu')}#ar(){this.#cr.forEach((t=>i.toggleClass(t,'show',!1)))}#ir(){const e=this,s=e.getBoundingClientRect();if(!s)return;const n=s.width,r=s.left,i=parseInt(window.innerWidth,10),a=s.top,o=s.height,l=parseInt(window.innerHeight,10),c=e.#ur;requestAnimationFrame((()=>{let s={};if(r+n>i){let t=r-(r+n-i);c&&(t-=c.x.value),s.left=`${t}px`}if(a+o>l){let t=a-(a+o-l);c&&(t-=c.y.value),s.top=`${t}px`}t.setRule(e.id,s,!0)}))}get#ur(){return globalThis.CSSTranslate?Array.from(r.styleValue(this,'transform')).filter((t=>t instanceof CSSTranslate)).pop():null}#dr(t){const e=this;t.dataset.cssId||(t.dataset.cssId=`${e.id}-${++e.#sr}`,t.classList.add(t.dataset.cssId))}#or(e){const s=this;requestAnimationFrame((()=>{const n=s.getBoundingClientRect();if(!n)return;let r=e?.clientX||n.left,a=e?.clientY||n.top;const o=r+n.width+5>window.innerWidth,l=a+n.height+5>window.innerHeight;o&&(r=window.innerWidth-n.width),l&&(a=window.innerHeight-n.height),s.#cr.forEach((e=>{s.#dr(e);let n=!0;const r={position:'absolute',left:'inherit',right:'inherit',top:'inherit'};o?(r.right='100%',n=!1):(r.left='100%',n=!0),t.setRule(e.dataset.cssId,r,!0),e.dataset.end=n,e.dataset.start=!n,i.toggleClass(s,'dropstart',!n),i.toggleClass(s,'dropend',n)}))}))}#nr(){const t=this;t.#lr.filter((t=>t.dataset.action)).forEach((e=>t.attachEvent(e,'click',t.#us.bind(t))))}#rr(){const t=this;t.isSubmenu||(t.#lr.forEach((e=>t.attachEvent(e,'mouseover',t.#mn.bind(t)))),t.attachEvent(t,'mouseleave',t.close.bind(t)))}#$(t){const e=this;if('Escape'===t.key)e.close(t)}async#us(t){const e=this,s=e.#er;e.close(t),e.#ar(),e.#hr(t);const n=t.target.dataset,r={type:'menu',action:n.action,option:t.target,caller:s,data:n};GSEvents.sendDelayed(1,e,'action',r,!0,!0,!0)}#hr(t){const e=t?.target?.previousSibling;if(!(e instanceof HTMLInputElement))return;i.queryAll(this,`input[name="${e.name}"]`).forEach((t=>t.checked=!1)),e.checked=!0}#mn(e){GSEvents.prevent(e);const s=this,n=i.closest(e.target,'li'),r=i.closest(n,'ul'),a=i.query(n,'.submenu');requestAnimationFrame((()=>{if(i.queryAll(r,'.submenu').forEach((t=>i.toggleClass(t,'show',!1))),a){s.#dr(a);const e={top:`${a.parentElement.offsetTop}px`};t.setRule(a.dataset.cssId,e,!0),i.toggleClass(a,'show',!0)}}))}static fromJSON(t=[],e){const s=[];return t.forEach((t=>{if('-'===t)return s.push('<li><hr class="dropdown-divider"/></li>');const n=Array.isArray(t.menu);if(s.push('<li>'),s.push('<a class="dropdown-item" href="#" '),t.title&&s.push(` title="${t.title}" `),s.push('>'),s.push(`${t.name} ${n?'&raquo;':''}`),s.push('</a>'),n){const n=GSMenu.fromJSON(t.menu,e);s.push(`<ul is="gs-ext-ul" class="submenu dropdown-menu ${e}">`),s.push(n.join('\n')),s.push('</ul>')}s.push('</li>')})),s}static fromDOM(t,e=0,s='',n=!1){const r=GSMenu,i=[],a=0===e?'dropend position-fixed':'submenu',o=0===e?'gs-menu':'gs-ext-ul';return i.push(`<ul is="${o}" data-closable="${n}" class="${a} dropdown-menu ${s}" >`),Array.from(t).forEach((t=>{const o=t.childElementCount>0;o&&i.push(r.#gr(t));const l=o?r.fromDOM(t.children,++e,s,n):r.#mr(t);i.push(l),a&&i.push('</li>')})),i.push('</ul>'),i.join('')}static#gr(t){const e=n.get(t,'name');return`<li><a class="dropdown-item dropdown-toggle" href="#"><div class="d-inline-block w-100" ${t?.title?` title="${t.title}"`:''}>${e}</div></a>`}static#mr(t){const e=n.get(t,'header');if(e)return`<li data-inert="true"><h6 class="dropdown-header"/>${e}</h6></li>`;if(!t.name)return'<li data-inert="true"><hr class="dropdown-divider"/></li>';const s=t.title?` title="${t.title}"`:'';if(t.action)return`<li><a class="dropdown-item" href="#" data-action="${t.action}" ${s}>${t.html}</a></li>`;if(t.toggle)return`<li><a class="dropdown-item" href="#" data-bs-toggle="${t.toggle}" data-bs-target="${t.target}" ${s}>${t.name}</a></li>`;if(t.inject)return`<li><a class="dropdown-item" href="#" data-attr="${t.injectAttributes}" data-inject="${t.inject}" data-bs-target="${t.target}" ${s}>${t.name}</a></li>`;if(t.href)return`<li><a class="dropdown-item" href="${t.href}" target="${t.target}" ${s}>${t.name}</a></li>`;const r=GSItem.getAttrs(t).trim();return r?`<li><a class="dropdown-item" href="#" ${r} >${t.name}</a></li>`:''}}class GSContext extends GSElement{#pr=!1;#Ht=!1;#fr=!1;static{customElements.define('gs-context',GSContext),Object.seal(GSContext)}static get observedAttributes(){return GSElement.observeAttributes(['title','css','data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){return!t&&this.childElementCount>0?this.#br():super.getTemplate(t)}connectedCallback(){super.connectedCallback();this.#pr=!0}disconnectedCallback(){this.#pr=!1,super.disconnectedCallback()}onReady(){const t=this;t.#Ht||(t.#Ht=!0,t.close(),t.attachEvent(t.#Sr,'action',t.#vr.bind(t)),t.attachEvent(t.#Sr,'open',(e=>t.emit('open',e.detail))),t.attachEvent(t.#Sr,'close',(e=>t.emit('close',e.detail))),t.attachEvent(document,'gs-component',t.#yr.bind(t)),t.attachEvent(window,'resize',t.#Gr.bind(t)),t.#yr(),super.onReady())}reattach(){const t=this;t.#fr=!1,t.removeEvent(document,'contextmenu'),i.queryAll(document.documentElement,t.target).forEach((e=>t.removeEvent(e,'contextmenu'))),t.#yr()}get disabled(){return this.hasAttribute('disabled')}set disabled(t){return n.toggle(this,'disabled',e.asBool(t))}get dark(){return n.getAsBool(this,'dark')}get target(){return n.get(this,'target')}get altContext(){return this.hasAttribute('altctx')}set altContext(t){n.toggle(this,'altctx',e.asBool(t))}close(t){'contextmenu'===t?.type&&t?.shiftKey&&this.altContext||(GSEvents.prevent(t),this.#Sr?.close())}open(){this.#Sr?.open()}toggle(){return!this.disabled&&this.#Sr?.toggle()}popup(t=0,e=0,s){return!this.disabled&&this.#Sr?.popup(t,e,s)}createMenu(t=[]){if(!Array.isArray(t))return!1;if(0===t.length)return!1;const e=this.dark?'dropdown-menu-dark':'',s=GSMenu.fromJSON(t,e);return i.setHTML(this.#Sr,s.join('')),!0}#br(){const t=this.dark?'dropdown-menu-dark':'';return GSMenu.fromDOM(this.children,0,t,!0)}get#Sr(){return this.query('.dropdown-menu')}#Gr(t){this.close()}#vr(t){t.detail.type='context'}#Er(t){const e=this;return t.composedPath().filter((t=>t.matches)).filter((t=>t.matches(e.target)))}async#wr(t){const e=this;if(t.shiftKey&&e.altContext)return;return 0!==e.#Er(t).length?(GSEvents.prevent(t),e.popup(t),!0):void 0}async#yr(){const t=this;if(!t.target)return;if(t.#fr)return;const s=i.queryAll(document.documentElement,t.target);0!==s.length?(t.#fr=!0,s.forEach((e=>{t.attachEvent(e,'contextmenu',t.#wr.bind(t))})),t.removeEvent(document,'gs-components'),t.attachEvent(document,'contextmenu',t.close.bind(t))):t.#pr&&(await e.timeout(1e3),requestAnimationFrame((()=>{t.#yr()})))}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this;n.#Ht=!1,n.#fr=!1,GSEvents.deattachListeners(n);const r=i.fromJsonAsString(s);return i.setHTML(n,r),n.connectedCallback(),s}onError(t){GSLog.error(null,t)}}class GSCopyright extends GSElement{#a='fixed-bottom d-flex justify-content-center align-items-center mt-1 p-2 text-muted';static{customElements.define('gs-copyright',GSCopyright),Object.seal(GSCopyright)}constructor(){super()}get template(){const t=this;if(!t.isCompany||!t.isYear)return'';const e=(new Date).getFullYear();return`\n        <div class="${t.css}">\n            <small>&copy; ${t.company} ${t.year}. - ${e}.</small>\n        </div>`}get css(){return n.get(this,'css',this.#a)}get company(){return n.get(this,'company','')}get isCompany(){return e.isStringNonEmpty(this.company)}get isYear(){return e.isStringNonEmpty(this.year)}get year(){return n.get(this,'year','')}get isFlat(){return!0}get anchor(){return'self'}}class GSDialog extends GSElement{static CSS='rounded shadow-sm';static HEADER_CSS='p-3';static TITLE_CSS='fs-5 fw-bold text-muted';static#Ar=['ok','cancel'];static#Cr=[];#xr=!1;static{customElements.define('gs-dialog',GSDialog),Object.seal(GSDialog)}static get observedAttributes(){return GSElement.observeAttributes(['cancelable','closable','title','visible','button-ok','button-cancel'])}static#Tr(){GSDialog.#Cr=GSDialog.#Cr.filter((t=>t.isConnected))}static get size(){return GSDialog.#Cr.length}static get top(){return GSDialog.#Tr(),0===GSDialog.size?null:GSDialog.#Cr[GSDialog.size-1]}static get opened(){return GSDialog.#Tr(),Array.from(GSDialog.#Cr)}constructor(){super()}disconnectedCallback(){super.disconnectedCallback(),GSDialog.#Tr()}attributeCallback(t='',e='',s=''){const n=this;if(n.#pn(),'visible'===t){const t=n.#kr;if(!t)return;const e={type:'dialog',ok:n.visible};n.visible&&!t.open?(t.showModal(),GSDialog.#Cr.push(n),n.emit('change'),n.#$r(e)):!n.visible&&t.open&&(t?.close(),GSDialog.#Cr.pop(),n.#$r(e))}}async onBeforeReady(){await super.onBeforeReady();const t=this;GSEvents.monitorAction(t,'dialog'),t.attachEvent(t,'click',t.#us.bind(t)),t.attachEvent(t,'form',t.#Dr.bind(t)),t.attachEvent(t,'change',t.#Zs.bind(t)),t.attachEvent(t,'visible',t.#Mr.bind(t)),t.attachEvent(t.#kr,'keydown',t.#Lr.bind(t)),t.attachEvent(t.#kr,'close',t.#Or.bind(t)),t.attachEvent(t.#kr,'cancel',t.#Ir.bind(t)),t.visible&&t.open()}async onFormInit(t,e){t?.reset(),t&&e&&(t.data=e)}#$r(t){const e=this;GSEvents.waitAnimationFrame((()=>{e.emit('visible',t,!0,!0)}))}#Zs(t){this.#Rr.disabled=this.forms.filter((t=>!t.isValid)).length>0}#Mr(t){const e=this;e.visible?e.afterOpen():e.afterClose()}#Dr(t){GSEvents.prevent(t);const e=this,s=t.detail.data;if('init'===t.detail.type)return e.onFormInit(s);const n=t.detail.valid,r=n?'data':'error',i=e.emit(r,{type:'dialog',data:s,evt:t},!0,!0,!0);n&&i&&e.close()}#Lr(t){const e=this;'Escape'===t.key&&(GSEvents.prevent(t),(e.cancelable||e.escapable)&&e.close())}#Or(t){this.visible=!1}#Ir(t){this.visible=!1}#us(t){const e=this,s=e.#Nr(t);if(!s)return;const n='ok'===s;e.emit('action',{action:s,ok:n,evt:t},!0,!0,!0),e.emit('postaction',{action:s,ok:n,evt:t})}onDialogCancel(){this.cancel()}onDialogOk(){this.ok()}cancel(){this.close(null,!1)}ok(){const t=this;if(t.#xr)return;const e=t.forms;0==e?.length?t.close(null,!0):e.forEach((t=>t.submit()))}disable(){const t=this;t.#xr=!0;const e=t.#Rr;e&&(e.disabled=!0),t.forms?.forEach((t=>i.disableInput(t,'input, select, .btn',!1,'gsForm')))}enable(){const t=this;t.#xr=!1;const e=t.#Rr;e&&(e.disabled=!1),t.forms?.forEach((t=>i.enableInput(t,'input, select, .btn',!1,'gsForm')))}#Fr(t){const e=t.composedPath().shift();return e?.dataset?.action||t.detail.action||e?.type}#Nr(t){const e=this.#Fr(t),s=GSDialog.#Ar.includes(e);return s&&GSEvents.prevent(t),s?e:null}info(t='',e='',s=!1,n=!1){const r=this;if(r.title=t,r.body=e,r.cancelable=n,r.closable=s,r.open(),s||n)return r.waitEvent('postaction')}confirm(t='',e=''){return this.info(t,e,!0,!1)}prompt(t='',e=''){return this.info(t,e,!0,!0)}reset(t,s=0){this.forms.forEach((e=>{e.reset(),i.fromObject(e,t)}));const n=this.query('GS-TAB');n&&s>-1&&(n.index=e.asNum(s,0))}async open(t){GSEvents.prevent(t);const e=this;if(!await e.beforeOpen())return;const s={type:'dialog',isOk:!0,data:t};e.emit('beforeopen',s,!0,!0,!0)&&(e.visible=!0)}async close(t,e=!1){GSEvents.prevent(t);const s=this;if(!await s.beforeClose(t,e))return;const n={type:'dialog',isOk:e,data:t};s.emit('beforeclose',n,!0,!0,!0)&&(s.visible=!1)}toggle(){this.visible=!this.visible}focusable(){const t=this,e=t.queryAll(i.QUERY_INPUT,!0).filter((t=>i.isVisible(t))).shift();return e||(t.cancelable?t.#Br:t.closable?t.#Rr:t)}async beforeOpen(){return!0}async beforeClose(t,e){return!0}async afterOpen(){}async afterClose(){}get#Rr(){return this.query('.dialog-ok')}get#Br(){return this.query('.dialog-cancel')}#pn(){const t=this;i.toggle(t.#Rr,t.closable),i.toggle(t.#Br,t.cancelable);const e=`justify-content-${t.align}`,s=t.query('.card-footer');i.toggleClass(s,e,!0),t.#Rr&&(t.#Rr.innerText=t.buttonOk),t.#Br&&(t.#Br.innerText=t.buttonCancel);const n=0==t.cancelable&&0==t.closable;i.toggleClass(s,'d-none',n)}#Hr(t='',e=''){let s=t?this.self.querySelector(`slot[name="${t}"]`):null;return s||(s=this.self.querySelector(e)),s}large(){}extra(){}get#kr(){return this.query('dialog')}get active(){return GSDialog.top}get form(){return i.query(this,'form')}get forms(){return i.queryAll(this,'form')}get title(){return this.query('slot[name="title"]')}set title(t=''){i.setHTML(this.title,t)}get body(){return this.query('.card-body')}set body(t=''){i.setHTML(this.body,t)}get visible(){return n.getAsBool(this,'visible',!1)}set visible(t=!1){this.#xr&&!1===t||n.setAsBool(this,'visible',t)}get closable(){return n.getAsBool(this,'closable',!0)}set closable(t=!0){n.setAsBool(this,'closable',t),this.#pn()}get cancelable(){return n.getAsBool(this,'cancelable',!0)}set cancelable(t=!0){n.setAsBool(this,'cancelable',t),this.#pn()}get escapable(){return this.hasAttribute('escapable')}get align(){return n.get(this,'button-align','end')}set align(t='end'){n.set(this,'button-align',t),this.#pn()}get buttonOk(){return n.get(this,'button-ok','Ok')}set buttonOk(t='Ok'){n.set(this,'button-ok',t)}get buttonCancel(){return n.get(this,'button-cancel','Cancel')}set buttonCancel(t='Cancel'){n.set(this,'button-cancel',t)}get cssButtonOk(){return n.get(this,'css-button-ok','btn-primary')}get cssButtonCancel(){return n.get(this,'css-button-cancel','btn-secondary')}get css(){return n.get(this,'css',GSDialog.CSS)}get cssContent(){return n.get(this,'css-content','')}get cssHeader(){return n.get(this,'css-header',GSDialog.HEADER_CSS)}get cssTitle(){return n.get(this,'css-title',GSDialog.TITLE_CSS)}get cssBody(){return n.get(this,'css-body','p-0')}get cssFooter(){return n.get(this,'css-footer','')}set css(t=''){return n.set(this,'css',t)}set cssContent(t=''){return n.set(this,'css-content',t)}set cssHeader(t=''){return n.set(this,'css-header',t)}set cssTitle(t=''){return n.set(this,'css-title',t)}set cssBody(t=''){return n.set(this,'css-body',t)}set cssFooter(t=''){return n.set(this,'css-footer',t)}async getTemplate(t=''){if(t)return super.getTemplate(t);const e=this;return`\n        <dialog class="dialog p-0 border-0 ${e.css}">\n        <div class="card ${e.cssContent}">\n            <div class="card-header user-select-none ${e.cssHeader}">\n              <div class="card-title ${e.cssTitle}">\n                <slot name="title"></slot>\n              </div>\n            </div>\n            <div class="card-body ${e.cssBody}">\n              <slot name="body"></slot>\n            </div>\n            <div class="card-footer d-flex user-select-none justify-content-${e.align} ${e.cssFooter}">\n              <button class="btn ${e.cssButtonCancel} dialog-cancel" data-action="cancel">${e.buttonCancel}</button>\n              &nbsp;\n              <button class="btn ${e.cssButtonOk} dialog-ok" data-action="ok">${e.buttonOk}</button>\n            </div>\n        </div>\n        <slot name="extra"></slot>\n        <div class="toast-container position-fixed"></slot></div>        \n        </dialog>\n     `}}class GSDropdown extends GSElement{#Ht=!1;static{customElements.define('gs-dropdown',GSDropdown),Object.seal(GSDropdown)}static get observedAttributes(){return GSElement.observeAttributes(['title','css','data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){const n=this;if('data'===t)return this.load(s);'css'===t&&(i.toggleClass(n.#zn,e,!1),i.toggleClass(n.#zn,s,!0)),'visible'===t&&(n.visible||n.close()),'title'===t&&n.#zn&&i.setHTML(n.#zn,s)}async getTemplate(t=''){return!t&&this.childElementCount>0?this.#br():super.getTemplate(t)}onReady(){const t=this;t.#Ht||(t.#Ht=!0,t.close(),GSEvents.monitorAction(t,'dropdown'),super.onReady())}get css(){return n.get(this,'css')}set css(t=''){return n.set(this,'css',t)}get title(){return n.get(this,'title')}set title(t=''){return n.set(this,'title',t)}get dark(){return n.getAsBool(this,'dark')}get isFlat(){return n.getAsBool(this,'flat',!this.title)}get anchor(){return'afterend@self'}close(){this.#Sr?.close()}open(){this.#Sr?.open()}toggle(){this.#Sr?.toggle()}createMenu(t=[]){if(!Array.isArray(t))return!1;if(0===t.length)return!1;const e=this.dark?'dropdown-menu-dark':'',s=GSMenu.fromJSON(t,e);return i.setHTML(this.#Sr,s.join('')),!0}get#Sr(){return this.query('.dropdown-menu')}get#zn(){return this.query('.dropdown-toggle')}#br(t){const e=this;t=t||e.children;const s=[];e.title&&(s.push('<div class="dropdown">'),s.push(`<button class="btn dropdown-toggle ${e.css}" type="button" data-bs-toggle="dropdown">`),s.push(e.title),s.push('</button>'));const n=e.dark?'dropdown-menu-dark':'',r=GSMenu.fromDOM(t,0,n,!0);return s.push(r),e.title&&s.push('</div>'),s.join('')}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this;GSEvents.deattachListeners(n);const r=i.fromJsonAsString(s);return i.setHTML(n,r),n.connectedCallback(),s}onError(t){GSLog.error(null,t)}}class GSFormGroup extends GSElement{static CSS_LABEL_CELL='col-md-4 col-sm-4 col-xs-2 text-md-end';static CSS_LABEL='user-select-none fw-small fw-light text-secondary';static CSS_ICON='bi bi-info-circle-fill text-primary me-2 fs-5';#qr=[];static{customElements.define('gs-form-group',GSFormGroup),Object.seal(GSFormGroup)}static get observedAttributes(){return GSElement.observeAttributes(['value','label','disabled'])}constructor(){super(),this.#jr()}connectedCallback(){this.#qr=GSItem.genericItems(this).filter((t=>t.dataset.pattern)).map((t=>new RegExp(t.dataset.pattern))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback();this.#qr=null}attributeCallback(t='',s='',n=''){const r=this;'label'===t&&r.#Pr&&(r.#Pr.innerHTML=n),'value'===t&&r.#zr&&(r.#zr.value=n),'disabled'===t&&r.#zr&&(r.#zr.disabled=!e.isNull(n))}onReady(){super.onReady();const t=this;t.attachEvent(t.#zr,'blur',t.#en.bind(t)),t.#Ur&&(t.attachEvent(t.#zr,'input',t.#Vr.bind(t)),t.#Vr())}#Vr(t){const e=this.#_r;e&&(e.innerHTML=this.#zr?.value||'')}async#en(t){const s=this,n=s.#zr;if(0===n.value.length||0===s.#qr.length)return;let r=!1;for(const t of s.#qr)if(r=t.test(n.value),r)break;r||(n.setCustomValidity('Invalid input'),n.reportValidity(),s.#zr.focus(),await e.timeout(2e3),n.setCustomValidity(''))}#jr(){const t=this,e=['header','body','footer'];let s=Array.from(t.children).filter((t=>t.slot&&!e.includes(t.slot)));if(s.length>0)throw new Error(`Custom element injection must contain slot="header|body|footer" attribute! Element: ${t.tagName}, ID: ${t.id}`);s=Array.from(t.children).filter((t=>!t.slot));const n=['TEMPLATE','GS-ITEM'];if(!GSDOM.isAllowed(s,n))throw new Error(GSDOM.toValidationError(t,n))}get isFlat(){return!this.hasAttribute('flat')||super.isFlat}async getTemplate(){const t=this;switch(t.layout){case'floating':return t.#Wr();case'vertical':return t.#Jr();default:return t.#Yr()}}#Wr(){const t=this;return`\n      <div class="row ${t.css}">\n         <div class="form-floating ${t.#Kr} ${t.cellField}">\n            ${t.#Qr}\n            ${t.#Xr}\n            ${t.#Zr}\n         </div>\n         ${t.#ti}\n      </div>`}#Jr(){const t=this;return`\n      <div class="row ${t.css}">\n        <div class="col-12">\n            ${t.#Zr}\n        </div>\n         <div class="${t.#Kr} ${t.cellField}">\n            ${t.#Qr}\n            ${t.#Xr}\n         </div>\n         ${t.#ti}   \n      </div>      \n      `}#Yr(){const t=this;return`\n      <div class="row form-group ${t.css}">\n         <slot name="header"></slot>\n         ${t.#ei}\n         ${t.#si}\n         ${t.#ti}\n         <slot name="footer"></slot>\n      </div>`}get#_r(){return this.query('input').nextElementSibling}get#zr(){return this.query('input')}get#Pr(){return this.query('label')}get#ni(){return'radio'===this.type&&this.#ri.includes(',')}get#Qr(){const t=this,e=t.query('template');if(e)return e.innerHTML;const s=t.autoid?`id="${t.name}"`:'',n=t.#ni?t.value.split(','):t.#ri;if(Array.isArray(n)){const e='vertical'===t.dataset.radioLayout?'div':'span';return n.map(((e,s)=>({v:e,h:`value="${e}"`,id:`id="${t.name}_${s}"`}))).map(((s,n)=>t.#ii(t.name+n,s.v,t.#ai(s.id,t.name,s.h,s.v),e))).join('')}return t.#ai(s,t.name,t.#ri,t.value)}#ai(t,e,s,r){const i=this,a=n.get(i,'checked'),o=i.#oi&&i.checked&&r&&r==a?'checked':'';return`<input is="gs-ext-input" class="${i.#li} ${i.cssField}" \n               ${t} name="${e}" type="${i.#ci}" ${i.#ui}\n               ${i.#di} ${i.#hi} ${i.#gi}\n               ${i.#mi} ${i.#pi} ${i.#fi} ${o}\n               ${i.#bi} ${i.#Si} ${s} ${i.#Y} ${i.#vi}\n               ${i.#yi} ${i.#Gi} ${i.#Ei} \n               ${i.#wi} ${i.#Ai} title="${i.description}"\n               ${i.#Ci} ${i.#xi} ${i.#xr} ${i.#Ti}\n               >`}#ii(t,e,s,n='span'){return`<${n} class="me-3">\n               ${s}\n               <label for="${t}" class="ms-1">${e}</label>\n              </${n}>`}get#Zr(){const t=this;return`<label class="${t.#ki} ${t.cssLabel} user-select-none" for="${t.name}">${t.label}</label>`}get#ei(){return`<div class="${this.cellLabel}">${this.#Zr}</div>`}get#li(){return this.#oi?'form-check-input ms-0':this.#Ur?'form-range':'form-control'}get#ki(){const t=this;return t.#oi?'form-check-label':'floating'===t.layout?'ms-2':t.#$i?'form-label':''}get#Kr(){const t=this;return t.#oi?t.#Di?'form-check form-switch ps-3 fs-5':t.#ni?'':'form-check':''}get#si(){const t=this;return`\n      <div class="${t.#Kr} ${t.cellField}">\n         <slot name="body">${t.#Qr}${t.#Xr}</slot>\n      </div>`}get#Xr(){return this.#Ur?`<span class="position-absolute px-1">${this.value}</span>`:''}get#ti(){const t=this;return t.#Mi&&t.#Li?t.hasIcon?`\n      <div class="col-auto">\n         ${t.#Li}\n         ${t.#Oi}\n      </div>`:t.#Li:''}get#di(){return this.autocopy?'autocopy':''}get#gi(){return this.autofocus?'autofocus':''}get#hi(){return this.autoselect?'autocopy':''}get hasIcon(){return'false'!==n.get(this,'icon')}get#Oi(){return this.hasIcon?`<i class="${this.icon}"></i>`:''}get#ci(){return this.#Di?'checkbox':this.type}get#oi(){const t=this;return t.#Ii||t.#Ri||t.#Di}get#Mi(){return customElements.get('gs-tooltip')}get#Li(){const t=this,e=t.hasIcon?'':`target="${t.name}"`;return t.description.trim()?`<gs-tooltip placement="${t.placement}" title="${t.description}" ${e}></gs-tooltip>`:''}get#ui(){return this.placeholder?`placeholder="${this.placeholder}"`:''}get#Si(){const t=this;return t.#Ni&&t.pattern?`pattern="${t.pattern}"`:''}get#bi(){const t=this;return t.#Ni&&t.mask?`mask="${t.mask}"`:''}get#Ti(){return this.reveal?'reveal':''}get#xr(){return this.disabled?'disabled':''}get#Fi(){return this.#oi&&this.checked?'checked':''}get#$i(){return'vertical'===this.layout}get#Ii(){return'checkbox'===this.type}get#Ri(){return'radio'===this.type}get#Di(){return'switch'===this.type}get#Bi(){return'number'===this.type}get#Ur(){return'range'===this.type}get#Ni(){return'text'===this.type}get#Hi(){return'passsword'===this.type}get#qi(){return'email'===this.type}get#ji(){return'url'===this.type}get#Pi(){return'file'===this.type}get#fi(){return this.multiple?'multiple':''}get#Ci(){return this.readonly?'readonly':''}get#xi(){return this.required?'required':''}get#vi(){const t=this;return t.#Pi&&t.accept?`accept="${t.accept}"`:''}get#pi(){return this.autocapitalize?`autocapitalize="${this.autocapitalize}"`:''}get#mi(){return this.autocomplete?`autocomplete="${this.autocomplete}"`:''}get#ri(){return this.value?`value="${this.value}"`:''}get#Y(){return this.list?`list="${this.list}"`:''}get#Ei(){return isNaN(this.max)?'':`max="${this.max}"`}get#Gi(){return isNaN(this.min)?'':`min="${this.min}"`}get#Ai(){return isNaN(this.maxlength)?'':`maxlength="${this.maxlength}"`}get#wi(){return isNaN(this.minlength)?'':`minlength="${this.minlength}"`}get#yi(){return isNaN(this.step)?'':`step="${this.step}"`}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}get cellLabel(){return n.get(this,'cell-label',GSFormGroup.CSS_LABEL_CELL)}set cellLabel(t=''){return n.set(this,'cell-label',t)}get cellField(){const t='horizontal'===this.layout?'6':'11';return n.get(this,'cell-field',`col-md-${t} col-sm-${t} col-xs-11`)}set cellField(t=''){return n.set(this,'cell-field',t)}get cssLabel(){return n.get(this,'css-label',GSFormGroup.CSS_LABEL)}set cssLabel(t=''){return n.set(this,'css-label',t)}get cssField(){return(this.mask?.trim().length>0?' font-monospace ':'')+n.get(this,'css-field','')}set cssField(t=''){return n.set(this,'css-field',t)}get layout(){return n.get(this,'layout','horizontal')}set layout(t=''){return n.set(this,'layout',t)}get description(){return n.get(this,'description','')}set description(t=''){return n.set(this,'description',t)}get placement(){const t=this.hasIcon?'right':'top';return n.get(this,'placement',t)}set placement(t=''){return n.set(this,'placement',t)}get icon(){return n.get(this,'icon',GSFormGroup.CSS_ICON)}set icon(t=''){return n.set(this,'icon',t)}get label(){return n.get(this,'label','')}set label(t=''){return n.set(this,'label',t)}get placeholder(){return n.get(this,'placeholder','')}set placeholder(t=''){return n.set(this,'placeholder',t)}get name(){return n.get(this,'name','')}set name(t=''){return n.set(this,'name',t)}get type(){return n.get(this,'type','text')}set type(t=''){return n.set(this,'type',t)}get pattern(){return n.get(this,'pattern','')}set pattern(t=''){return n.set(this,'pattern',t)}get mask(){return n.get(this,'mask','')}set mask(t=''){return n.set(this,'mask',t)}get reveal(){return this.hasAttribute('reveal')}set reveal(t=''){return n.toggle(this,'reveal',e.asBool(t))}get disabled(){return this.hasAttribute('disabled')}set disabled(t=''){return n.toggle(this,'disabled',e.asBool(t))}get checked(){return this.hasAttribute('checked')}set checked(t=''){return n.toggle(this,'checked',e.asBool(t))}get multiple(){return this.hasAttribute('multiple')}set multiple(t=''){return n.toggle(this,'multiple',e.asBool(t))}get readonly(){return this.hasAttribute('readonly')}set readonly(t=''){return n.toggle(this,'readonly',e.asBool(t))}get required(){return this.hasAttribute('required')}set required(t=''){return n.toggle(this,'required',e.asBool(t))}get accept(){return n.get(this,'accept','')}set accept(t=''){return n.set(this,'accept',t)}get autocopy(){return this.hasAttribute('autocopy')}get autofocus(){return this.hasAttribute('autofocus')}get autoselect(){return this.hasAttribute('autoselect')}get autocapitalize(){return n.get(this,'autocapitalize','')}set autocapitalize(t=''){return n.set(this,'autocapitalize',t)}get autocomplete(){return n.get(this,'autocomplete','')}set autocomplete(t=''){return n.set(this,'autocomplete',t)}get value(){return n.get(this,'value','')}set value(t=''){return n.set(this,'value',t)}get list(){return n.get(this,'list','')}set list(t=''){return n.set(this,'list',t)}get maxlength(){return n.getAsNum(this,'maxlength',NaN)}set maxlength(t=''){return n.setAsNum(this,'maxlength',t)}get minlength(){return n.getAsNum(this,'minlength',NaN)}set minlength(t=''){return n.setAsNum(this,'minlength',t)}get max(){return n.get(this,'max',NaN)}set max(t=''){return n.setAsNum(this,'max',t)}get min(){return n.get(this,'min',NaN)}set min(t=''){return n.setAsNum(this,'min',t)}get step(){return n.getAsNum(this,'step',NaN)}set step(t=''){return n.setAsNum(this,'step',t)}get autoid(){return this.hasAttribute('autoid')}}class GSIcon extends GSElement{static{customElements.define('gs-icon',GSIcon),Object.seal(GSIcon)}static get observedAttributes(){return GSElement.observeAttributes([])}constructor(){super()}onReady(){super.onReady();const t=this;t.hover&&(t.attachEvent(t.self,'mouseover',t.#zi.bind(t)),t.attachEvent(t.self,'mouseout',t.#Ui.bind(t))),t.click&&t.attachEvent(t.self,'click',t.#Vi.bind(t))}async#Vi(t){const s=this,n=e.asNum(s.dataset.delay,0);i.toggleClass(s.self,s.hover,!1),i.toggleClass(s.self,s.click,!1),i.toggleClass(s.self,s.click,!0),n>0&&(await e.timeout(1e3*n),i.toggleClass(s.self,s.click,!1))}#zi(t){const e=this;i.toggleClass(e.self,e.click,!1),i.toggleClass(e.self,e.hover,!0)}#Ui(t){i.toggleClass(this.self,this.hover,!1)}get template(){const t=this;return`<i class="bi bi-${t.icon} ${t.#_i} ${t.css}"></i>`}get#_i(){return this.size>0?`fs fs-${this.size}`:''}get css(){return n.get(this,'css')}set css(t=''){return n.set(this,'css',t)}get icon(){return n.get(this,'icon')}set icon(t=''){return n.set(this,'icon',t)}get size(){return n.getAsNum(this,'size')}set size(t=0){return n.setAsNum(this,'size',t)}get hover(){return n.get(this,'hover')}set hover(t=''){return n.set(this,'hover',t)}get click(){return n.get(this,'click')}set click(t=''){return n.set(this,'click',t)}get isFlat(){return!0}get anchor(){return'self'}}class GSLayout extends GSElement{static{customElements.define('gs-layout',GSLayout),Object.seal(GSLayout)}constructor(){super(),GSItem.validate(this,this.tagName)}disconnectedCallback(){GSItem.genericItems(this).forEach((t=>GSCacheStyles.deleteRule(t.dataset.cssId))),super.disconnectedCallback()}async getTemplate(t=''){const e=this,s=GSItem.genericItems(e).map(((t,s)=>e.#Wi(t,s))),n=await Promise.all(s),r=e.isVertical?'flex-column':'flex-row';return`<div class="${e.isFlat?'':'vh-100'} d-flex flex-fill ${r} ${e.css}  ${e.styleID}"  data-css-id="${e.styleID}">${n.join('')}</div>`}get isFlat(){const t=this;if(t.owner instanceof GSLayout)return!0;const e=t.closest('gs-layout');if(e&&e!==t)return!0;const s=GSComponents.getOwner(t),n=r.getComputedStyledMap(s);return n.matches('display','flex')&&!n.matches('flexGrow','0')}get anchor(){return'afterend@self'}async#Wi(t,e){const s=this;t.dataset.cssId=`${s.id}-${e}`;const r=s.#Ji(t),i=n.get(t,'id'),a=n.get(t,'name'),o=GSItem.getBody(t,s.isFlat),l=s.#Yi(t);GSCacheStyles.setRule(t.dataset.cssId,l);const c=l.length>10,u=`<div class="${s.#Ki(t,c)} ${t.dataset.cssId}" data-css-id="${t.dataset.cssId}" id="${a||GSID.id}">${o}</div>`;if(r){const e=s.#Qi(t);if(0==e)return u;let n='';n=e>0?s.isVertical?'top':'start':s.isVertical?'bottom':'end';const r=`<gs-splitter resize="${n}" split="${s.isVertical?'horizontal':'vertical'}" id="${i}"></gs-splitter>`;return 1==e?[u,r].join(''):[r,u].join('')}return u}#Yi(t){const e=this.isVertical?'height':'width',s=n.getAsNum(t,'max',0),r=n.getAsNum(t,'min',0),i=n.getAsNum(t,'size',0);return[i>0?`${e}: ${i}px;`:'',s>0?`max-${e}: ${s}px;`:'',r>0?`min-${e}: ${r}px;`:''].join('')}#Ki(t,e=!1){const s=this.#Ji(t),r=n.get(t,'css');let i=n.get(t,'v-pos'),a=n.get(t,'h-pos');a=a?`justify-content-${a}`:'',i=i?`align-items-${i}`:'';const o=['d-flex',a,i];return 0==s&&0==e&&o.push('flex-fill'),o.push(r),o.join(' ')}#Qi(t){const e=t.previousElementSibling,s=t.nextElementSibling;return s||e?s?e&&this.#Ji(s)?this.#Ji(e)?0:-1:1:-1:0}#Ji(t){return n.getAsBool(t,'resizable',!1)}get isVertical(){return'vertical'===n.get(this,'type','vertical')}get css(){return n.get(this,'css')}set css(t=''){return n.set(this,'css',t)}}class GSList extends GSElement{static{customElements.define('gs-list',GSList),Object.seal(GSList)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){const e=await this.#Qt();return`<div class="list-group ${this.css}">${e}</div>`}async#Qt(){const t=this;return GSItem.genericItems(t).map((e=>t.#In(e))).join('')}#In(t){const e=this,s=e.#Xi(t),r=GSItem.getBody(t),i=GSItem.getCSS(t),a=GSItem.getHref(t),o=n.dataToString(t),l=GSItem.getAttrs(t),c=GSItem.getIcon(t),u=c?`<i class="${c}"></i>`:'',d=e.#Zi(t)?'active':'';return`<a  ${e.selectable?'is="gs-ext-navlink"':'ignore'} class="list-group-item list-group-item-action ${d} ${i}"\n                href="${a}" ${a&&'#'!==a?`target=${GSItem.getTarget(t)}`:''} ${l} ${o}>${u} ${r||s}</a>`}#Xi(t){return n.get(t,'title')}#Zi(t){return n.getAsBool(t,'active')}get selectable(){return n.getAsBool(this,'selectable',!0)}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this,r=i.fromJsonAsString(s);return i.setHTML(n,r),n.disconnectedCallback(),n.connectedCallback(),s}}class GSModal extends GSElement{static#Ar=['ok','cancel'];#xr=!1;static{customElements.define('gs-modal',GSModal),Object.seal(GSModal)}static get observedAttributes(){return GSElement.observeAttributes(['cancelable','closable','title','visible','button-ok','button-cancel'])}attributeCallback(t='',e='',s=''){const n=this;n.#pn(),'visible'===t&&(n.visible?(n.#ta('.modal'),n.#ta('.modal-backdrop'),n.focusable()?.focus()):(n.#ea('.modal'),n.#ea('.modal-backdrop'),n.normal()),n.emit('visible',{type:'modal',ok:n.visible},!0,!0))}async onBeforeReady(){await super.onBeforeReady();const t=this;GSEvents.monitorAction(t,'modal'),t.attachEvent(t,'click',t.#us.bind(t)),t.attachEvent(t,'form',t.#Dr.bind(t)),t.attachEvent(document,'keyup',t.#Lr.bind(t)),t.visible&&t.open()}#Dr(t){GSEvents.prevent(t);const e=t.detail.data,s=t.detail.valid,n=s?'data':'error',r=this.emit(n,{type:'modal',data:e,evt:t},!0,!0,!0);s&&r&&this.close()}#Lr(t){const e=this;'Escape'===t.key&&((e.cancelable||e.escapable)&&e.close(),GSEvents.prevent(t))}#us(t){const e=this,s=e.#Nr(t);if(!s)return;const n='ok'===s;e.emit('action',{action:s,ok:n,evt:t},!0,!0,!0),e.emit('postaction',{action:s,ok:n,evt:t})}onModalCancel(){this.cancel()}onModalOk(){this.ok()}cancel(){this.close(null,!1)}ok(){const t=this;if(t.#xr)return;const e=t.forms;0==e.length?t.close(null,!0):e.forEach((t=>t.submit()))}disable(){this.#xr=!0,i.disableInput(this)}enable(){this.#xr=!1,i.enableInput(this)}#Fr(t){const e=t.composedPath().shift();return e?.dataset?.action||t.detail.action||e?.type}#Nr(t){const e=this.#Fr(t),s=GSModal.#Ar.includes(e);return s&&GSEvents.prevent(t),s?e:null}get#sa(){switch(this.size){case'extra':return'modal-xl';case'large':return'modal-lg'}return''}#na(t=''){const e=this.query('.modal-dialog');e&&requestAnimationFrame((()=>{e.classList.remove('modal-xl','modal-lg'),t&&e.classList.add(t)}))}large(){this.#na('modal-lg')}extra(){this.#na('modal-xl')}normal(){this.#na()}info(t='',e='',s=!1,n=!1){const r=this;if(r.title=t,r.body=e,r.cancelable=n,r.closable=s,r.open(),s||n)return r.waitEvent('postaction')}confirm(t='',e=''){return this.info(t,e,!0,!1)}prompt(t='',e=''){return this.info(t,e,!0,!0)}reset(t,e=0){this.forms.forEach((e=>{e.reset(),i.fromObject(e,t)}));const s=this.query('GS-TAB');s&&e>-1&&(s.index=GSUtil.asNum(e,0))}async open(t){GSEvents.prevent(t);const e=this;if(!await e.beforeOpen())return;const s={type:'modal',isOk:!0,data:t};e.emit('beforeopen',s,!0,!0,!0)&&(e.visible=!0)}async close(t,e=!1){GSEvents.prevent(t);const s=this;if(!await s.beforeClose(t,e))return;s.emit('beforeclose',{type:'modal',isOk:e},!0,!0,!0)&&(s.visible=!1)}async beforeOpen(){return!0}async beforeClose(t,e){return!0}toggle(){this.visible=!this.visible}focusable(){const t=this,e=t.queryAll(i.QUERY_INPUT,!0).filter((t=>i.isVisible(t))).shift();return e||(t.cancelable?t.#Br:t.closable?t.#Rr:t)}get#Rr(){return this.query('.modal-ok')}get#Br(){return this.query('.modal-cancel')}#ta(t){const e=this.query(t);e&&(e.classList.remove('d-none'),e.classList.add('show','d-block'))}#ea(t){const e=this.query(t);e&&(e.classList.add('d-none'),e.classList.remove('show','d-block'))}#pn(){const t=this;i.toggle(t.#Rr,t.closable),i.toggle(t.#Br,t.cancelable);const e=`justify-content-${t.align}`,s=t.query('.modal-footer');i.toggleClass(s,e,!0),t.#Rr&&(t.#Rr.innerText=t.buttonOk),t.#Br&&(t.#Br.innerText=t.buttonCancel);const n=0==t.cancelable&&0==t.closable;i.toggleClass(s,'d-none',n)}#Hr(t='',e=''){let s=t?this.self.querySelector(`slot[name="${t}"]`):null;return s||(s=this.self.querySelector(e)),s}get form(){return i.query(this,'form')}get forms(){return i.queryAll(this,'form')}get size(){return n.get(this,'size','')}set size(t=''){n.set(this,'size',t)}get title(){return this.query('.modal-title')}set title(t=''){i.setHTML(this.title,t)}get body(){return this.query('.modal-body')}set body(t=''){i.setHTML(this.body,t)}get visible(){return n.getAsBool(this,'visible',!1)}set visible(t=!1){this.#xr&&!1===t||n.setAsBool(this,'visible',t)}get closable(){return n.getAsBool(this,'closable',!0)}set closable(t=!0){n.setAsBool(this,'closable',t),this.#pn()}get cancelable(){return n.getAsBool(this,'cancelable',!0)}set cancelable(t=!0){n.setAsBool(this,'cancelable',t),this.#pn()}get escapable(){return this.hasAttribute('escapable')}get align(){return n.get(this,'button-align','end')}set align(t='end'){n.set(this,'button-align',t),this.#pn()}get buttonOk(){return n.get(this,'button-ok','Ok')}set buttonOk(t='Ok'){n.set(this,'button-ok',t)}get buttonCancel(){return n.get(this,'button-cancel','Cancel')}set buttonCancel(t='Cancel'){n.set(this,'button-cancel',t)}get cssButtonOk(){return n.get(this,'css-button-ok','btn-primary')}get cssButtonCancel(){return n.get(this,'css-button-cancel','btn-secondary')}get cssModal(){return n.get(this,'css-modal','')}get cssContent(){return n.get(this,'css-content','')}get cssHeader(){return n.get(this,'css-header','')}get cssTitle(){return n.get(this,'css-title','')}get cssBody(){return n.get(this,'css-body','')}get cssFooter(){return n.get(this,'css-footer','')}set cssModal(t=''){return n.set(this,'css-modal',t)}set cssContent(t=''){return n.set(this,'css-content',t)}set cssHeader(t=''){return n.set(this,'css-header',t)}set cssTitle(t=''){return n.set(this,'css-title',t)}set cssBody(t=''){return n.set(this,'css-body',t)}set cssFooter(t=''){return n.set(this,'css-footer',t)}async getTemplate(t=''){if(t)return super.getTemplate(t);const e=this;return`\n         <div class="modal d-none fade ${e.cssModal}">\n         <div class="modal-dialog modal-dialog-centered ${e.#sa}">\n           <div class="modal-content ${e.cssContent}">\n             <div class="modal-header border-0 user-select-none ${e.cssHeader}">\n               <div class="modal-title ${e.cssTitle}">\n                 <slot name="title"></slot>\n               </div>\n             </div>\n             <div class="modal-body ${e.cssBody}">\n               <slot name="body"></slot>\n             </div>\n             <div class="modal-footer border-0 user-select-none justify-content-${e.align} ${e.cssFooter}">\n               <button class="btn ${e.cssButtonCancel} modal-cancel" data-action="cancel">${e.buttonCancel}</button>\n               <button class="btn ${e.cssButtonOk} modal-ok" data-action="ok">${e.buttonOk}</button>\n             </div>\n           </div>\n         </div>\n       </div>\n       <div class="modal-backdrop d-none fade "></div>    \n     `}}class GSNav extends GSElement{static{customElements.define('gs-nav',GSNav),Object.seal(GSNav)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){const e=this,s=GSItem.genericItems(e).map((t=>e.#ra(t)));return`\n          <ul is="gs-ext-ul" class="nav ${e.#ia?'':'flex-column'} ${e.#aa}">\n            ${s.join('')}\n          </ul>\n        `}#ra(t){return this.#U(t)}get#aa(){return this.#oa(this)}get#ia(){return n.getAsBool(this,'bar',!0)}#U(t){return`<li class="nav-item ${this.#la(t)}">${this.#ca(t)}</li>`}#ca(t){const e=this,s=n.dataToString(t),r=e.#oa(t),i=e.#ua(t),a=e.#Rn(t),o=GSItem.getIcon(t),l=GSItem.getHref(t),c=`${o?`<i class="${o}"></i>`:''} ${a}`,u=l&&'#'!==l?`target=${GSItem.getTarget(t)}`:'',d=GSItem.getAttrs(t);return`<a tabindex="0" type="button" role="nav" is="gs-ext-navlink" class="nav-link ${r} ${i}" \n                href="${l}" ${u} id="${GSID.id}-nav" ${d} ${s}>${c}</a>`}#la(t){return n.get(t,'css-nav-wrap')}#oa(t){return n.get(t,'css-nav')}#ua(t){return this.#Zi(t)?'active':''}#Zi(t){return n.getAsBool(t,'active')}#Rn(t){return n.get(t,'title')}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this;GSEvents.deattachListeners(n);const r=i.fromJsonAsString(s);i.setHTML(n,r),n.connectedCallback()}}class GSOffcanvas extends GSElement{#da=null;#De=null;static{customElements.define('gs-offcanvas',GSOffcanvas),Object.seal(GSOffcanvas)}static get observedAttributes(){return GSElement.observeAttributes(['title','expanded','backdrop','placement','css','closable'])}constructor(){super();const t=this;t.css=t.css||'border shadow-sm',t.#De={left:t.onSwipeLeft.bind(t),right:t.onSwipeRight.bind(t),up:t.onSwipeUp.bind(t),down:t.onSwipeDown.bind(t)}}connectedCallback(){this.#ha(),super.connectedCallback()}disconnectedCallback(){const t=this;t.#ga(),t.#da=null,t.#De=null,super.disconnectedCallback()}attributeCallback(t='',s='',n=''){this.#pn(t,s,n),'expanded'===t&&this.emit('action',{type:'offcanvas',ok:e.asBool(n)})}async getTemplate(t=''){return t?super.getTemplate(t):this.#In()}async onBeforeReady(){await super.onBeforeReady();const t=this;t.attachEvent(t.#ma,'click',t.close.bind(t)),t.attachEvent(t.#pa,'mouseleave',t.#fa.bind(t)),t.attachEvent(t.#pa,'mouseenter',t.#ba.bind(t)),t.#pn(null,!0,!1)}#fa(){this.autoclose&&this.close()}#ba(){this.min>0&&this.open()}#pn(t='',e='',s=''){if(e===s)return;const n=this;n.#Sa&&i.setHTML(n.#Sa,n.title),i.toggleClass(n.#pa,'visible',!0),i.toggleClass(n.#va,'invisible',!n.closable),i.toggleClass(n.#ma,'show',n.backdrop&&n.expanded),n.#ya(),n.#Ga(),n.#Ea(),n.#wa(t,e,s),n.#Aa(t,e,s)}#ya(){const s=this,n=s.expanded,r=s.isHorizontal?'width':'height',i=n?s.max:s.min,a={'transition-property':`${r} !important`,'transition-duration':`${s.transitionDuration}s  !important`,'transition-timing-function':`${s.transitionFunction} !important`};e.isNumber(i)?a[r]=`${i}px !important`:a[r]=`${i} !important`,t.setRule(s.styleID,a)}#Ga(){const t=this;if(0===t.min&&t.expanded)return i.toggleClass(t.#pa,'show',t.expanded);setTimeout((()=>{i.toggleClass(t.#pa,0===t.min?t.expanded:'show',!0)}),i.SPEED)}#Ea(){const t=this;setTimeout((()=>{i.toggleClass(t.#ma,'invisible',!(t.backdrop&&t.expanded))}),i.SPEED)}#wa(t='',e='',s=''){if('placement'!==t)return;i.toggleClass(this.#pa,`offcanvas-${e}`,!1),i.toggleClass(this.#pa,`offcanvas-${s}`,!0)}#Aa(t='',e='',s=''){if('css'!==t)return;i.toggleClass(this.#pa,e,!1),i.toggleClass(this.#pa,s,!0)}#ha(){const t=this;t.#da=GSGesture.attach(document),t.#De&&(GSEvents.attach(document,document,'swipe-left',t.#De.left,!1),GSEvents.attach(document,document,'swipe-right',t.#De.right,!1),GSEvents.attach(document,document,'swipe-up',t.#De.up,!1),GSEvents.attach(document,document,'swipe-down',t.#De.down,!1))}#ga(){const t=this;t.#da?.unbind(),t.#da=null,t.#De&&(GSEvents.remove(document,document,'swipe-left',t.#De.left),GSEvents.remove(document,document,'swipe-right',t.#De.right),GSEvents.remove(document,document,'swipe-up',t.#De.up),GSEvents.remove(document,document,'swipe-down',t.#De.down))}onSwipeLeft(t){const e=this;if(e.#Ca(t))switch(e.placement){case'start':e.close();break;case'end':e.open()}}onSwipeRight(t){const e=this;if(e.#Ca(t))switch(e.placement){case'start':e.open();break;case'end':e.close()}}onSwipeUp(t){const e=this;if(e.#Ca(t))switch(e.placement){case'top':e.close();break;case'bottom':e.open()}}onSwipeDown(t){const e=this;if(e.#Ca(t))switch(e.placement){case'top':e.open();break;case'bottom':e.close()}}#Ca(t){return GSGesture.fingers(t)===this.fingers}get isVertical(){return!this.isHorizontal}get isHorizontal(){return'start'===this.placement||'end'===this.placement}open(){this.expanded=!0}close(){this.expanded=!1}toggle(){this.expanded=!this.expanded}get fingers(){return n.getAsNum(this,'fingers',2)}set fingers(t=2){n.setAsNum(this,'fingers',t)}get css(){return n.get(this,'css','')}set css(t=''){n.set(this,'css',t)}get cssTitle(){return n.get(this,'css-title','fs-5')}set cssTitle(t=''){n.set(this,'css-title',t)}get cssHead(){return n.get(this,'css-head','')}set cssHead(t=''){n.set(this,'css-head',t)}get cssBody(){return n.get(this,'css-body','')}set cssBody(t=''){n.set(this,'css-body',t)}get transitionDuration(){return n.getAsNum(this,'duration','0.2')}set transitionDuration(t=''){n.set(this,'duration',t)}get transitionFunction(){return n.get(this,'transition','linear')}set transitionFunction(t=''){n.set(this,'transition',t)}get title(){return n.get(this,'title')}set title(t=''){n.set(this,'title',t)}get expanded(){return n.getAsBool(this,'expanded',!1)}set expanded(t=!1){n.setAsBool(this,'expanded',t)}get autoclose(){return n.getAsBool(this,'autoclose',!1)}set autoclose(t=!1){n.setAsBool(this,'autoclose',t)}get closable(){return n.getAsBool(this,'closable',!0)}set closable(t=!0){n.setAsBool(this,'closable',t),this.#pn()}get placement(){return n.get(this,'placement',this.target?.dataset?.bsPlacement||'start')}set placement(t=''){return n.set(this,'placement',t)}get backdrop(){return n.getAsBool(this,'backdrop',this.target?.dataset?.bsBackdrop||'false')}set backdrop(t=''){return n.set(this,'backdrop',t)}get scroll(){return n.getAsBool(this,'scroll',this.target?.dataset?.bsScroll||'false')}set scroll(t=''){return n.set(this,'scroll',t)}get min(){return n.getAsNum(this,'min',0)}set min(t=!1){n.set(this,'min',e.asNum(t))}get max(){return n.get(this,'max','auto')}set max(t=!1){n.set(this,'max',t)}get#pa(){return this.query('.offcanvas')}get#Sa(){return this.query('.offcanvas-title')}get#ma(){return this.query('.offcanvas-backdrop')}get#va(){return this.query('.btn-close[data-bs-dismiss="offcanvas"]')}get#xa(){return this.querySelector('[slot="header"]')}#In(){const t=this,e=t.title?`<div class="offcanvas-title ${t.cssTitle}">${t.title}</div>`:'',s=t.closable?'<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>':'',n=e||s||t.#xa?`<div class="offcanvas-header ${t.cssHead}"><slot name="header">${e}${s}</slot></div>`:'';return`\n      <div class="offcanvas offcanvas-${t.placement} overflow-hidden ${t.css} ${t.styleID}" data-bs-scroll="${t.scroll}" data-bs-backdrop="${t.backdrop}" tabindex="-1">      \n      ${n}\n      <div class="offcanvas-body  ${t.cssBody}">\n        <slot name="body"></slot>\n      </div>\n    </div>\n    <div class="offcanvas-backdrop fade ${t.backdrop&&t.expanded?'show':'invisible'}"></div>\n    `}}class GSOverlay extends GSElement{static#It=['target','opacity','color','radius','padding'];#Ta=0;#ka=GSID.id;static{customElements.define('gs-overlay',GSOverlay),Object.seal(GSOverlay)}static get attributes(){return GSOverlay.#It}static get observedAttributes(){return GSElement.observeAttributes(GSOverlay.#It)}attributeCallback(t='',e='',s=''){const n=this;GSOverlay.attributes.includes(t)&&('target'===t?n.#$a(e,s):n.#$a('',n.target))}connectedCallback(){const t=this;t.attachEvent(window,'resize',t.#Gr.bind(t)),super.connectedCallback()}disconnectedCallback(){this.svg?.remove(),super.disconnectedCallback()}get isFlat(){return!0}get autoremove(){return this.hasAttribute('autoremove')}set autoremove(t){return n.toggle(this,'autoremove',e.asBool(t))}get target(){return n.get(this,'target','')}set target(t=''){return n.set(this,'target',t)}get overlayPadding(){return n.getAsNum(this,'padding',1)}set overlayPadding(t=1){return n.setAsNum(this,'padding',t)}get overlayRadius(){return n.getAsNum(this,'radius',6)}set overlayRadius(t=6){return n.setAsNum(this,'radius',t)}get overlayColor(){return n.get(this,'color','rgb(0,0,0)')}set overlayColor(t=''){return n.set(this,'color',t)}get overlayOpacity(){return n.getAsNum(this,'opacity',.7)}set overlayOpacity(t=.7){return n.setAsNum(this,'opacity',t)}get svg(){return i.getByID(this.#ka)}get path(){return i.query(this.svg,'path')}open(){this.#$a('',this.target)}close(){const t=this.svg;this.removeEvent(t,'click'),t?.remove()}reset(){this.autoremove&&this.close()}#Gr(){const t=this;t.close(),clearTimeout(t.#Ta),t.#Ta=setTimeout((()=>t.open()),200)}#$a(t='',e=''){const s=this;if(t===e)return;if(!e)return s.svg?.remove();const n=i.query(e);if(!n)return;const r=s.svg||s.#Da(),a=s.path||s.#Ma(),o=s.#La(n);r.setAttribute('viewBox',s.#Oa),a.setAttribute('d',o),s.svg||(r.appendChild(a),document.body.appendChild(r),s.attachEvent(r,'click',s.reset.bind(s)))}get#Oa(){return`0 0 ${window.innerWidth} ${window.innerHeight}`}#Da(){const t=document.createElementNS('http://www.w3.org/2000/svg','svg');return t.id=this.#ka,t.classList.add('gs-overlay','gs-overlay-animated'),t.setAttribute('viewBox',this.#Oa),t.setAttribute('xmlSpace','preserve'),t.setAttribute('xmlnsXlink','http://www.w3.org/1999/xlink'),t.setAttribute('version','1.1'),t.setAttribute('preserveAspectRatio','xMinYMin slice'),t.style.fillRule='evenodd',t.style.clipRule='evenodd',t.style.strokeLinejoin='round',t.style.strokeMiterlimit='2',t.style.zIndex='10000',t.style.position='fixed',t.style.top='0',t.style.left='0',t.style.width='100%',t.style.height='100%',t}#Ma(){const t=document.createElementNS('http://www.w3.org/2000/svg','path');return t.style.fill=this.overlayColor,t.style.opacity=this.overlayOpacity,t.style.pointerEvents='auto',t.style.cursor='auto',t}#La(t){const e=window.innerWidth,s=window.innerHeight,n=t.getBoundingClientRect(),r=this.overlayPadding,i=this.overlayRadius,a=n.width+2*r,o=n.height+2*r,l=Math.min(i,a/2,o/2),c=Math.floor(Math.max(l,0)),u=a-2*c,d=o-2*c;return`M${e},0L0,0L0,${s}L${e},${s}L${e},0Z\n          M${n.x-r+c},${n.y-r} \n          h${u} \n          a${c},${c} 0 0 1 ${c},${c} \n          v${d} \n          a${c},${c} 0 0 1 -${c},${c} \n          h-${u} \n          a${c},${c} 0 0 1 -${c},-${c} \n          v-${d} \n          a${c},${c} 0 0 1 ${c},-${c} z`}}class GSPopover extends GSElement{static{customElements.define('gs-popover',GSPopover),Object.seal(GSPopover),GSDOMObserver.registerFilter(GSPopover.#as,GSPopover.#os)}static#as(t){return t instanceof HTMLElement&&((!t.tagName||!t.tagName.startsWith('GS-'))&&(GSPopover.#Ia(t)&&!GSPopover.#Ra(t)))}static async#os(t){return await e.timeout(1e3),GSEvents.waitAnimationFrame((async()=>{GSID.setIf(t);const e=document.createElement('gs-popover');e.ref=`#${t.id}`,t.parentElement.insertAdjacentElement('beforeend',e)}),!0)}constructor(){super(),this.innerHTML=this.innerHTML.trim()}disconnectedCallback(){t.deleteRule(this.#Na),super.disconnectedCallback()}async onBeforeReady(){await super.onBeforeReady();const t=this;t.#Qt(t.#Fa),t.#Ns()}attributeCallback(t='',e='',s=''){const n=this;'visible'===t&&(n.visible&&n.#Qt(n.#Fa),i.toggleClass(n.#Fa,'show',n.visible))}get target(){const t=this;if(t.ref){let e=t.owner;return e=i.isGSElement(t.owner)?e.self:e,e.querySelector(t.ref)}return t.previousElementSibling||t.parentElement}get css(){return n.get(this,'css')}set css(t=''){return n.set(this,'css',t)}get cssHead(){return n.get(this,'css-head','fs-3')}set cssHead(t=''){return n.set(this,'css-head',t)}get ref(){return n.get(this,'ref')}set ref(t=''){return n.set(this,'ref',t)}get title(){return n.get(this,'title')||n.get(this.target,'title')}set title(t=''){return n.set(this,'title',t)}get placement(){return n.get(this,'placement',this.target?.dataset?.bsPlacement||'top')}set placement(t=''){return n.set(this,'placement',t)}get content(){return n.get(this,'content',this.target?.dataset?.bsContent||'')}set content(t=''){return n.set(this,'content',t)}get trigger(){return n.get(this,'trigger',this.target?.dataset?.bsTrigger||'hover focus')}set trigger(t=''){return n.set(this,'trigger',t)}get isFocusTrigger(){return this.trigger.includes('focus')}get isHoverTrigger(){return this.trigger.includes('hover')}get visible(){return n.getAsBool(this,'visible',!1)}set visible(t=''){return n.setAsBool(this,'visible',t)}get isFlat(){return super.isFlat}get anchor(){return super.anchor}async getTemplate(t=''){const e=await super.getTemplate(t),s=this,n=s.title?`<div class="popover-header ${s.cssHead}">${s.title}</div>`:'';return`\n        <div class="popover bs-popover-auto fade ${s.css} ${this.styleID}" data-popper-placement="${s.placement}" data-css-id="${this.styleID}" role="tooltip">\n            <div class="popover-arrow ${s.#Na}" data-css-id="${s.#Na}"></div>\n            ${n}\n            <div class="popover-body">\n                <slot>${e||s.content}</slot>\n            </div>\n        </div>            \n        `}show(t){GSEvents.prevent(t),this.visible=!0}hide(t){GSEvents.prevent(t),this.visible=!1}toggle(t){GSEvents.prevent(t);this.visible=!this.visible}get#Fa(){return this.self.firstElementChild}get#Na(){return`${this.styleID}-arrow`}#Ns(){const t=this;t.isHoverTrigger&&(GSEvents.attach(t,t.target,'mouseover',t.show.bind(t)),GSEvents.attach(t,t.target,'mouseleave',t.hide.bind(t))),t.isFocusTrigger&&(GSEvents.attach(t,t.target,'click',t.toggle.bind(t)),GSEvents.attach(t,t.#Fa,'mouseleave',t.hide.bind(t)),GSEvents.attach(t,document.body,'click',t.hide.bind(t)))}#Qt(t){const e=this,s=(t=t||e.self.firstElementChild).querySelector('div.popover-arrow');return GSPopper.popupAbsolute(e.placement,t,e.target,s),t}static#Ra(t){return(t?.firstElementChild||t?.nextElementSibling)instanceof GSPopover}static#Ia(t){return t?.dataset?.bsContent&&'popover'===t?.dataset?.bsToggle}}class GSPopup extends GSElement{#er=null;#pr=!1;#Ht=!1;#fr=!1;static{customElements.define('gs-popup',GSPopup),Object.seal(GSPopup)}static get observedAttributes(){return GSElement.observeAttributes(['visible','css'])}attributeCallback(t='',e='',s=''){const n=this;'visible'===t&&(n.#Ba(),i.toggleClass(n.#un,'invisible',!n.visible))}connectedCallback(){super.connectedCallback();const t=this;t.#pr=!0,t.attachEvent(t,'form',t.#Dr.bind(t))}disconnectedCallback(){this.#er=null,this.#pr=!1,super.disconnectedCallback()}async getTemplate(t=''){const e=this,s=await super.getTemplate(t),n=e.visible?'':'invisible';return s&&requestAnimationFrame((()=>{const t=i.parse(s);for(let s of t.body.children)i.appendChild(e,s)})),`<div class="position-${e.position} ${e.css} ${n} ${e.styleID}"  data-css-id="${this.styleID}"><slot></slot></div>`}async onBeforeReady(){const t=this;t.#Ht||(t.#Ht=!0,t.#Ha(),await super.onBeforeReady())}get isFlat(){return this.parentElement!==document.body}get anchor(){return'beforeend@body'}get#un(){return this.query('div')}get css(){return n.get(this,'css')}set css(t=''){return n.set(this,'css',t)}get trigger(){return n.get(this,'trigger','click')}set trigger(t=''){return n.set(this,'trigger',t)}get placement(){return n.get(this,'placement',this?.target?.datalist?.bsPlacement||'')}set placement(t=''){return n.set(this,'placement',t)}get position(){return n.get(this,'position','absolute')}set position(t=''){return n.set(this,'position',t)}get target(){return n.get(this,'target')}set target(t=''){return n.set(this,'target',t)}get visible(){return n.getAsBool(this,'visible',!1)}set visible(t=''){return n.setAsBool(this,'visible',t)}get autoclose(){return n.getAsBool(this,'autoclose',!0)}set autoclose(t=''){return n.getAsBool(this,'autoclose',t)}get hPos(){return n.getAsNum(this,'h-pos')}set hPos(t=''){return n.setAsNum(this,'h-pos',t)}get vPos(){return n.getAsNum(this,'v-pos')}set vPos(t=''){return n.setAsNum(this,'v-pos',t)}set wMax(t=''){return n.setAsNum(this,'w-max',t)}get wMax(){return n.getAsNum(this,'w-max')}set wMin(t=''){return n.setAsNum(this,'w-min',t)}get wMin(){return n.getAsNum(this,'w-min')}set hMax(t=''){return n.setAsNum(this,'h-max',t)}get hMax(){return n.getAsNum(this,'h-max')}set hMin(t=''){return n.setAsNum(this,'h-min',t)}get hMin(){return n.getAsNum(this,'h-min')}close(t){const e=this;if(e.visible=!1,t instanceof Event){GSEvents.prevent(t);const s={type:'popup',option:t.target,caller:e.#er,data:null};e.emit('action',s,!0,!0)}}open(){this.visible=!0}toggle(t){const e=this;if(t)return e.#wr(t);e.visible=!e.visible}popup(t=0,e=0){const s=this;requestAnimationFrame((()=>{s.visible=!0;const n={top:'0px',left:'0px',translate:`${t}px ${e}px`};s.#Ba(n)}))}#Ba(e={}){const s=this,n=s.#un;n&&(s.wMax&&(e['max-width']=`${s.wMax}px`),s.wMin&&(e['min-width']=`${s.wMin}px`),s.hMax&&(e['max-height']=`${s.hMax}px`),s.hMin&&(e['min-height']=`${s.hMin}px`),t.setRule(n.dataset.cssId,e))}#Gr(t){this.close()}#wr(t){const e=this;if(e.#er=t,t instanceof Event&&(GSEvents.prevent(t),e.#er=t.composedPath().filter((t=>!(t instanceof HTMLSlotElement))).shift()),e.placement)return GSPopper.popupFixed(e.placement,e.#un,e.#er),void(e.visible=!0);let s=t.clientX,n=t.clientY;const r=e.#un.getBoundingClientRect(),i=s+r.width>window.innerWidth,a=n+r.height>window.innerHeight;return i&&(s=window.innerWidth-r.width),a&&(n=window.innerHeight-r.height),e.popup(s,n),!0}async#yr(){const t=this;if(!t.target)return;if(t.#fr)return;const s=i.queryAll(document.documentElement,t.target);0!==s.length?(t.#fr=!0,t.trigger.split(' ').forEach((e=>{s.forEach((s=>t.attachEvent(s,e,t.#wr.bind(t))))})),t.removeEvent(document,'gs-components')):t.#pr&&(await e.timeout(1e3),requestAnimationFrame((()=>{t.#yr()})))}#Ha(){const t=this;t.#yr(),t.attachEvent(document,'gs-component',t.#yr.bind(t)),t.attachEvent(window,'resize',t.#Gr.bind(t)),t.#Ba(),t.autoclose&&t.attachEvent(t.#un,'mouseleave',t.close.bind(t)),t.visible&&t.popup(t.hPos,t.vPos)}#Dr(t){const e=this;let s=e.#qa(t,t.target,'submit','GS-POPUP');s&&(GSEvents.prevent(t),s=e.emit('data',{type:'popup',data:t.detail.data,evt:t},!0,!0,!0),s&&e.close())}#qa(t,e,s,n){if(t.detail.type!==s)return!1;return l.getOwner(e,n)==this}}class GSProgress extends GSElement{static{customElements.define('gs-progress',GSProgress),Object.seal(GSProgress)}static get observedAttributes(){return GSElement.observeAttributes(['min','max','value'])}constructor(){super()}attributeCallback(t='',e='',s=''){const r=this.#ja;r&&(n.set(r,`data-${t}`,s),this.#Pa())}disconnectedCallback(){t.deleteRule(this.#za),super.disconnectedCallback()}#Pa(){const e=this,s=e.#ja,n=t.getRule(e.#za);n&&(n.style.width=`${e.percentage}%`),e.label&&s&&i.setHTML(s,e.#Ua())}#Ua(){const t=this,s={value:t.value,min:t.min,max:t.max,percentage:t.percentage};return e.fromTemplateLiteral(t.label,s)}get#za(){return`${this.styleID}-bar`}async getTemplate(s=''){const n=this,r=n.label?e.fromTemplateLiteral(n.label,{value:n.value,min:n.min,max:n.max,percentage:n.percentage}):'';return t.setRule(`${n.#za}`,`width:${n.percentage}%`),`\n        <div class="progress ${this.styleID}"  data-css-id="${this.styleID}">\n            <div class="progress-bar ${n.css} ${n.#za}" data-rule-id="${this.#za}" role="progressbar" data-value="${n.value}" data-min="${n.min}" data-max="${n.max}">${r}</div>\n        </div>    \n        `}onReady(){super.onReady(),this.#Pa()}get#ja(){return this.query('.progress-bar')}get isFlat(){return!0}get anchor(){return'self'}get percentage(){return Math.trunc(this.value/this.max*100)}get value(){return n.getAsNum(this,'value',0)}set value(t=''){if(!e.isNumber(t))return!1;const s=this;let r=e.asNum(t);return r>s.max&&(r=s.max),r<s.min&&(r=s.min),n.setAsNum(s,'value',r)}get min(){return n.getAsNum(this,'min',0)}set min(t=''){return n.setAsNum(this,'min',0)}get max(){return n.getAsNum(this,'max',100)}set max(t=''){return n.setAsNum(this,'max',100)}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}get label(){return n.get(this,'label','')}set label(t=''){return n.set(this,'label',t)}increase(t=1){return this.value=this.value+t,!0}decrease(t=1){return this.value=this.value-t,!0}}class GSSplitter extends GSElement{#Va=0;#_a=!1;static{customElements.define('gs-splitter',GSSplitter),Object.seal(GSSplitter)}constructor(){super()}disconnectedCallback(){t.deleteRule(this.#Wa),super.disconnectedCallback()}get#Wa(){return`${this.styleID}-dynamic`}get#Ja(){const t=this,e=t.isVertical?'width':'height',s=t.isVertical?'height':'width',n=t.isVertical?'w-resize':'n-resize';return`\n            ${e}: ${t.size}px;\n            ${s}: 100%;\n            border-width: 1px;\n            cursor: ${n};\n            border-color: darkgray;\n            border-style: solid;\n            background-color: lightgray;\n        `}async getTemplate(e=''){const s=this;return t.setRule(s.#Wa,s.#Ja),`<div class="splitter ${s.css} ${s.styleID} ${s.#Wa}" data-css-id="${this.styleID}" data-rule-id="${this.#Wa}"></div>`}get isVertical(){return'vertical'===n.get(this,'split','vertical')}get css(){return n.get(this,'css')}set css(t=''){return n.set(this,'css',t)}get size(){return n.getAsNum(this,'size',8)}set size(t=''){return n.setAsNum(this,'size',t)}get resize(){return n.get(this,'resize','start')}set resize(t=''){return n.set(this,'resize',t)}get start(){return this.previousElementSibling}get end(){return this.nextElementSibling}get target(){const t=this;let e=t.#Ya?t.start:t.end;return e=e||t.parentElement,e=i.isGSElement(e)?e.self:e,e instanceof ShadowRoot&&(e=Array.from(e.children).filter((t=>!i.isStyleValue(t,'display','none'))).pop()),e}connectedCallback(){this.#_a=!!this.id,super.connectedCallback()}async onBeforeReady(){await super.onBeforeReady();this.#pe(),this.#Ka()}get#Ya(){const t=this.resize;return'start'===t||'top'===t}get#Qi(){return this.query('div')}#pe(){const t=this;if(!t.#_a)return;const s=GSID.hashCode(location.origin+location.pathname);let n=localStorage.getItem(`gs-splitter-${s}-${t.id}`);n=e.asNum(n),t.#pn(n)}#Qa(){const t=this,e=r.getComputedStyledMap(t.target),s=t.isVertical?e.get('width'):e.get('height');if(!s)return;const n=GSID.hashCode(location.origin+location.pathname);localStorage.setItem(`gs-splitter-${n}-${t.id}`,s)}#Ka(){const t=this,e=t.#Qi;t.attachEvent(e,'mousedown',t.#Xa.bind(t),!0),t.attachEvent(e,'dblclick',t.#Za.bind(t))}#Za(t){const s=this;let n=0,i='';s.isVertical?(i='width',n=s.target.clientWidth):(i='height',n=s.target.clientHeight);let a=r.styleValue(s.target,`min-${i}`),o=r.styleValue(s.target,`max-${i}`);a=e.asNum(a.value),o=e.asNum(o.value),n=(o-a)/2>n?o:a,s.#pn(n)}#Xa(t){const e=this;GSEvents.prevent(t),e.#Va=e.isVertical?t.clientX:t.clientY,e.attachEvent(document,'mouseup',e.#to.bind(e),!0),e.attachEvent(document,'mousemove',e.#eo.bind(e)),e.#so(!0),GSEvents.send(globalThis,'gs-split',{start:!0})}#to(t){const e=this;GSEvents.prevent(t),GSEvents.deattachListeners(e),e.#Qa(),e.#Ka(),e.#so(!1),GSEvents.send(globalThis,'gs-split',{stop:!0})}#eo(t){GSEvents.prevent(t);const e=this.isVertical?t.clientX:t.clientY;this.#no(e)}#so(t=!0){const e=this,s='pe-none';t?e.#ro.filter((t=>!i.hasClass(t,'pe-none'))).forEach((t=>{i.toggleClass(t,s,!0),t.dataset.gsSplitter=!0})):e.#ro.filter((t=>t.dataset.gsSplitter)).forEach((t=>{i.toggleClass(t,s,!1),delete t.dataset.gsSplitter}))}get#ro(){const t='iframe,embed,portal';return[...i.queryAll(this.previousElementSibling,t),...i.queryAll(this.nextElementSibling,t)]}#no(t){const e=this;requestAnimationFrame((()=>{e.isVertical?e.#io(t):e.#ao(t)}))}#io(t){const e=this,s=e.target,n=e.#Ya?1:-1;let r=(t-e.#Va)*n;r+=s.clientWidth,r=r<0?0:r,e.#oo.width=r+'px',e.#Va=t}#ao(t){const e=this,s=e.target,n=e.#Ya?1:-1;let r=(t-e.#Va)*n;r+=s.clientHeight,r=r<0?0:r,e.#oo.height=r+'px',e.#Va=t}#pn(t=0){if(t<=0)return;const e=this;e.#Va=t,e.isVertical?e.#oo.width=t+'px':e.#oo.height=t+'px'}get#oo(){const e=this.target,s=t.getRule(e.dataset.cssId||e.id);return s?.style||e.style}}class GSTab extends GSElement{static CSS_PANE='';static CSS_NAV='';static CSS_NAV_WRAP='';static{customElements.define('gs-tab',GSTab),Object.seal(GSTab)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){const e=this,s=GSItem.genericItems(e);s.forEach((t=>GSID.setIf(t)));const n=s.map((t=>e.#lo(t))).join(''),r=s.map((t=>e.#co(t))).join(''),i=e.#uo(r),a=e.#$i?e.#do(n):e.#ho(n);return`<div class="${e.#$i?`d-flex align-items-start ${e.#a}`:e.#a}">${e.#go?i+a:a+i}</div>`}get#go(){return'end'===this.#mo||'bottom'===this.#mo}get#$i(){return'start'===this.#mo||'end'===this.#mo}get#mo(){return n.get(this,'placement','top')}get#aa(){return n.get(this,'css-nav','nav-tabs')}get#po(){return n.get(this,'css-pane')}#do(t){return`\n      <div class="nav flex-column user-select-none ${GSTab.CSS_NAV} ${this.#aa}" role="tablist" aria-orientation="vertical">\n        ${t}\n      </div>\n    `}#ho(t){return`\n      <ul is="gs-ext-ul" class="nav user-select-none ${GSTab.CSS_NAV} ${this.#aa}" "role="tablist">\n        ${t}\n      </ul>      \n      `}#uo(t){return`     \n        <div class="tab-content flex-fill ${GSTab.CSS_PANE} ${this.#po}">\n          ${t}\n        </div>  \n      `}#lo(t){const e=this,s=e.#$i?'':`<li class="nav-item ${GSTab.CSS_NAV_WRAP} ${e.#fo(t)}" role="presentation">`,n=e.#Xi(t),r=e.#Oi(t),i=`${r?`<i class="${r}"></i>`:''} ${n}`,a=e.#bo(t);return`${s}\n          <a type="button" role="tab" is="gs-ext-navlink"\n              tabindex="0"\n              id="${t.id}-tab" \n              class="nav-link ${e.#So(t)} ${a}" \n              aria-controls="${t.id}-tab"                 \n              data-bs-target="#${t.id}-pane" \n              data-bs-toggle="tab">${i}</a>\n          ${s?'</li>':''}\n      `}#co(t){const e=this,s=e.#vo(t);let r=GSItem.getBody(t,e.isFlat);if(!e.isFlat){const s=i.parseWrapped(e,r);n.set(s,'slot',t.id),i.appendChild(e,s),r=`<slot name="${t.id}"></slot>`}return`\n      <div  id="${t.id}-pane" aria-labelledby="${t.id}-tab" \n          class="tab-pane fade ${e.#yo(t)}  ${s}" \n          role="tabpanel">\n          ${r}\n      </div>        \n      `}#es(t){return n.getAsBool(t,'active')}#bo(t){return this.#es(t)?'active':''}#vo(t){return this.#es(t)?'active show':''}#Xi(t){return n.get(t,'title')}#Oi(t){return n.get(t,'icon')}#yo(t){return n.get(t,'css-pane')}#So(t){return n.get(t,'css-nav')}#fo(t){return n.get(t,'css-nav-wrap')}get#a(){return n.get(this,'css','')}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this,r=i.fromJsonAsString(s);i.setHTML(n,r),GSEvents.deattachListeners(n),n.disconnectedCallback(),n.connectedCallback()}get tab(){return this.query('.nav')}get tabs(){return this.queryAll('.nav-item')}get active(){return this.query('.nav-item > .active').closest('.nav-item')}get index(){return Array.from(this.tab.children).indexOf(this.active)}set index(t=0){t=e.asNum(t,0);const s=this.tabs;let n=t<0?s[s.length-1]:s[t>=s.length?0:t];n?.querySelector('a').click()}next(){this.index++}previous(){this.index--}}class GSTag extends GSElement{static#Go=['Enter','NumpadEnter','Comma','Space'];static{GSCacheStyles.adopt(GSTag.#Eo),customElements.define('gs-tag',GSTag),Object.seal(GSTag)}static get#Eo(){return'\n        .tag-input:focus-visible {\n            outline:none;\n        }\n        .tag .btn-close {\n            background: none;\n        }            \n        .tag .btn-close::after {\n            content: \'x\';\n        }'}constructor(){super(),GSItem.validate(this,this.tagName)}async getTemplate(t=''){const e=this,s=e.#wo(),n=e.#Ao();return`\n        <div class="d-flex flex-wrap align-items-center gap-1 ${e.css}">\n            ${n}\n            <input list="${e.name}_list" name="${e.name}" type="text" class="form-control d-flex w-auto flex-grow-1" placeholder="${e.placeholder}">\n            <datalist id="${e.name}_list">${s}</datalist>\n        </div>`}onReady(){super.onReady();const t=this;t.attachEvent(t.query('div'),'click',t.#us.bind(t)),t.attachEvent(t.#Qr,'keydown',t.#$.bind(t)),t.attachEvent(t.#Qr,'input',t.#Xs.bind(t))}#Xs(t){t.inputType||this.#Co(t)}#$(t){GSTag.#Go.includes(t.code)&&this.#Co(t)}#us(t){t.srcElement===t.target&&t.target instanceof HTMLButtonElement&&this.#xo(t.target.parentElement)}#Co(t){GSEvents.prevent(t);this.#To(this.#ko)}get#$o(){const t=this;return t.max>0&&t.#Do.length>=t.max}get#Do(){return this.queryAll('.tag').map((t=>t.dataset.value))}get#fn(){return Array.from(this.#Mo.children)}get#ko(){const t=this;return t.#fn.filter((e=>e.value.toLowerCase()===t.#Qr.value.toLowerCase())).pop()}get#ce(){const t=this.#Qr.value.toLowerCase();return this.values.filter((e=>e.toLowerCase()===t)).length>0}#To(t){const e=this,s=e.#Qr;if(e.#$o||!t&&0==e.allowAdd)return void(s.value='');if(e.#ce)return;const n=e.#Lo(s.value),r=i.parse(n,!0);s.insertAdjacentElement('beforebegin',r),s.value='',t?.remove(),e.values=e.#Do.join(',')}#xo(t){if(!t)return;const e=this,s=document.createElement('option');s.value=t.dataset.value,e.#Mo.appendChild(s),t.remove(),e.values=e.#Do.join(',')}#wo(){return GSItem.genericItems(this).map((t=>`<option value="${t.name}">`)).join('')}#Ao(){const t=this;return t.values.map((e=>t.#Lo(e))).join('')}#Lo(t=''){if(!t)return'';return`<div class="badge tag ${this.cssTag}" data-value="${t}">${t}<button type="button" class="btn-close ms-1 ${this.cssClose}"></button></div>`}get#Qr(){return this.query('input')}get#Mo(){return this.query('datalist')}get allowAdd(){return n.getAsBool(this,'allowadd',!1)}set allowAdd(t=!1){return n.betAsBool(this,'allowadd',t)}get max(){return n.getAsNum(this,'max',0)}set max(t=0){return n.setAsNum(this,'max',t)}get values(){return n.get(this,'values','').split(',').map((t=>t.trim()))}set values(t=''){return n.set(this,'values',t)}get placeholder(){const t=this.max>0?`Add max ${this.max} tags...`:'';return n.get(this,'placeholder',t)}set placeholder(t=''){return n.set(this,'placeholder',t)}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}get cssTag(){return n.get(this,'css-tag','bg-secondary')}set cssTag(t=''){return n.set(this,'css-tag',t)}get cssClose(){return n.get(this,'css-close','text-bg-light')}set cssClose(t=''){return n.set(this,'css-close',t)}}class GSTooltip extends GSElement{static{customElements.define('gs-tooltip',GSTooltip),Object.seal(GSTooltip),GSDOMObserver.registerFilter(GSTooltip.#as,GSTooltip.#os)}static#as(t){return t instanceof HTMLElement&&((!t.tagName||!t.tagName.startsWith('GS-'))&&(GSTooltip.#Oo(t)&&!GSTooltip.#Mi(t)))}static async#os(t){return await e.timeout(1e3),GSEvents.waitAnimationFrame((()=>{GSID.setIf(t);const e=document.createElement('gs-tooltip');e.ref=`#${t.id}`,t.parentElement.insertAdjacentElement('beforeend',e)}),!0)}constructor(){super()}disconnectedCallback(){t.deleteRule(this.#Na),super.disconnectedCallback()}onReady(){super.onReady();this.#Ns()}#Ns(){const t=this;t.attachEvent(t.target,'mouseenter',t.show.bind(t)),t.attachEvent(t.target,'mouseleave',t.hide.bind(t))}#Io(){const t=this,e=t.querySelector('div.tooltip-arrow');return GSPopper.popupFixed(t.placement,t.firstElementChild,t.target,e),t.firstElementChild}get#Na(){return`${this.styleID}-arrow`}get#In(){const t=this;return`\n         <div class="tooltip bs-tooltip-auto fade " data-popper-placement="${t.placement}" role="tooltip">\n            <div class="tooltip-arrow ${t.#Na}" data-css-id="${t.#Na}"></div>\n            <div class="tooltip-inner">${t.title}</div>\n        </div>        \n        `}get target(){const t=this;if(t.ref){let e=t.owner;return e=i.isGSElement(t.owner)?e.self:e,e.querySelector(t.ref)}return t.previousElementSibling||t.parentElement}get ref(){return n.get(this,'ref')}set ref(t=''){return n.set(this,'ref',t)}get title(){return n.get(this,'title')||n.get(this.target,'title')}set title(t=''){return n.set(this,'title',t)}get placement(){return n.get(this,'placement',this.target?.dataset?.bsPlacement||'top')}set placement(t=''){return n.set(this,'placement',t)}get isFlat(){return!0}show(){const t=this;requestAnimationFrame((()=>{const e=i.parse(t.#In,!0);t.insertAdjacentElement('afterbegin',e),t.#Io(),i.toggleClass(t.firstElementChild,'show',!0)}))}hide(){const t=this;return setTimeout((()=>{Array.from(t.childNodes).forEach((t=>t.remove()))}),250),i.toggleClass(t.firstElementChild,'show',!1)}toggle(){const t=this;t.childElementCount>0?t.hide():t.show()}static#Mi(t){return(t?.firstElementChild||t?.nextElementSibling)instanceof GSTooltip}static#Oo(t){return t?.title&&'tooltip'===t?.dataset?.bsToggle}}class GSTree extends GSElement{#ko=null;#Ro=null;static{customElements.define('gs-tree',GSTree),Object.seal(GSTree)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}get itemIcon(){return n.get(this,'item-icon','bi bi-file-earmark')}set itemIcon(t=''){return n.set(this,'item-icon',t)}get openIcon(){return n.get(this,'open-icon','bi bi-folder2-open')}set openIcon(t=''){return n.set(this,'open-icon',t)}get closeIcon(){return n.get(this,'close-icon','bi bi-folder')}set closeIcon(t=''){return n.set(this,'close-icon',t)}get rootEl(){return this.query('.treeview')}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}connectedCallback(){const t=this;t.#Ro={},t.#Ro.click=t.#us.bind(t),t.#Ro.keydown=t.#$.bind(t),t.#Ro.keyup=t.#Ks.bind(t),super.connectedCallback()}disconnectedCallback(){const t=this,e=t.rootEl;GSEvents.unlisten(e,null,'click',t.#Ro?.click),GSEvents.unlisten(e,null,'keydown',t.#Ro?.keydown),GSEvents.unlisten(e,null,'keyup',t.#Ro?.keyup),t.#Ro=null,t.#ko=null,super.disconnectedCallback()}async onBeforeReady(){await super.onBeforeReady();const t=this,e=t.rootEl;GSEvents.listen(e,null,'click',t.#Ro.click),GSEvents.listen(e,null,'keydown',t.#Ro.keydown),GSEvents.listen(e,null,'keyup',t.#Ro.keyup)}async getTemplate(){const t=this.#Qt();return`\n        <style>\n        .treeview span.indent {\n             margin-left: 10px;\n             margin-right: 10px;\n         }\n        .treeview .list-group-item {\n            cursor: pointer;\n        }                    \n        </style>        \n        <div class="treeview ${this.css}" _tabindex="0">\n            <ul class="list-group">\n                ${t}\n            </ul>\n        </div>`}#Qt(){const t=this;return GSItem.genericItems(t).map(((e,s)=>t.#In(e,0,s))).join('')}#In(t,s=0,r=0,i='',a='',o=''){const l=this,c=t.name||t.title,u=`${a}/${c}`,d=t.childElementCount>0,h=n.getAsBool(t,'open',!1);0===s&&(o=d&&!h?'gs-hide':'');const g=e.isStringEmpty(i)?r:`${i}.${r}`,m=[];return m.push(`<li class="list-group-item ${0===s?'':o}" `),m.push(`data-folder="${d}" data-open="${h}" data-nodeid="${g}"  `),m.push(`data-path="${u}"  data-name="${c}">`),m.push(l.#No(t,s)),d&&Array.from(t.children).forEach(((t,e)=>m.push(l.#In(t,s+1,e,g,u,o)))),m.push('</li>'),m.join('')}#No(t,e){const s=this,r=n.get(t,'title'),i=t.childElementCount>0,a=n.getAsBool(t,'open',!1),o=GSItem.getHref(t),l=o&&'#'!==o?`target="${GSItem.getTarget(t)}"`:'',c=n.dataToString(t),u=GSItem.getAttrs(t);let d=GSItem.getIcon(t,s.itemIcon);i&&(d=a?n.get(t,'open-icon',s.openIcon):n.get(t,'close-icon',s.closeIcon));const h=[];for(;e--;)h.push('<span class="indent"></span>');return h.push(`<i class="fs-5 ${d}"></i>`),h.push(`<a href="${o}" ${l} ${u} ${c} class="ps-1">${r}</a>`),h.join('')}#Fo(t,e=!1){i.toggleClass(t||this.#ko,'active',e)}#pn(t,e){if(!t)return;const s=this;s.#Fo(),s.#ko=t,s.#Fo(t,!0);const n=s.#ko.querySelector('a');n?.focus(),s.emit('select',s.#ko);const r=n?.dataset?.action;if(!r)return;const i={type:'tree',action:r,data:t,evt:e};GSEvents.sendDelayed(1,s,'action',i)}#Bo(t){return'true'===(t||this.#ko)?.dataset.folder}#Ho(t){return'true'===(t||this.#ko)?.dataset.open}#qo(t=!1){const e=this;e.#Bo()&&(requestAnimationFrame((()=>{e.#ko.dataset.open=t;const s=e.#ko.dataset.nodeid,n=s.split('.').length;e.#jo(e.#ko,t);let r=e.#ko.nextElementSibling;for(;r;){const e=r.dataset.nodeid;if(!(e&&0===e.indexOf(s)))break;if(t){const s=e.split('.').length;if(s>n+1){r=r.nextElementSibling;continue}if(n+1!=s&&t)break}i.toggleClass(r,'gs-hide',!t),t||(r.dataset.open=t),r=r.nextElementSibling}})),e.emit(t?'open':'close',e.#ko))}#jo(t,e){const s=this;if(!s.#Bo(t))return;const r=t.querySelector('i');if(!r)return;const i=e?s.openIcon:s.closeIcon;n.set(r,'class',`fs-5 ${i}`)}#us(t){const e=this,s='list-group-item',n=i.hasClass(t.target,s)?t.target:t.target.closest('.'+s);if(e.#pn(n,t),'I'!==t.target.tagName)return;const r=e.#Ho();e.#qo(!r)}#Ks(t){const e=this;if('Tab'===t.code)e.#pn(t.target.closest('li'))}#$(t){const e=this;switch(t.code){case'ArrowUp':e.prev();break;case'ArrowDown':e.next();break;case'ArrowLeft':e.close();break;case'ArrowRight':e.open();break;case'Tab':e.#pn(t.target.closest('li'))}}#Po(t){return t.split('.').slice(0,-1).join('.')}#zo(t){let e=(t=t||this.#ko).dataset.nodeid;return e=this.#Po(e),t.parentElement.querySelector(`li[data-nodeid="${e}"]`)}#ss(t){for(t=t?.nextElementSibling;t&&t.classList.contains('gs-hide');)t=t.nextElementSibling;return t}#Uo(t){for(t=t?.previousElementSibling;t&&t.classList.contains('gs-hide');)t=t.previousElementSibling;return t}get level(){return this.#ko?.dataset.nodeid.split('.').length||-1}get path(){return this.#ko?.dataset.path}next(){const t=this;if(!t.#ko)return t.#pn(t.query('li:first-of-type'));const e=t.#ss(t.#ko);if(e)return t.#pn(e);t.#ko=null,t.next()}prev(){const t=this;if(!t.#ko)return t.#pn(t.query('li:last-of-type'));const e=t.#Uo(t.#ko);if(e)return t.#pn(e);t.#ko=null,t.prev()}open(t){const e=this,s=e.#Ho(),n=e.#Bo();if(s&&n)return e.next();e.#qo(!0)}close(t){const e=this,s=e.#Bo(),n=e.#Ho();if(!s||!n||!s)return e.#pn(e.#zo());e.#qo(!1)}async load(t=''){const s=await GSLoader.loadData(t);if(!e.isJsonType(s))return;const n=this;n.innerHTML='';let r=i.fromJson(t);return r=Array.isArray(r)?r:[r],r.forEach((t=>i.appendChild(n,t))),n.repaint(),s}}class GSAttachment{constructor(t,e){this.file=t,this.directory=e}static traverse(t,e){return GSAttachment.#Vo(t,e)}static from(t){return Array.from(t).filter((t=>t instanceof File)).map((t=>new GSAttachment(t)))}get fullPath(){const t=this;return t.directory?`${t.directory}/${t.file.name}`:t.file.name}isImage(){return['image/gif','image/png','image/jpg','image/jpeg','image/svg+xml'].includes(this.file.type)}isVideo(){return['video/mp4','video/quicktime'].includes(this.file.type)}static#Vo(t,e){return e&&GSAttachment.#_o(t)?GSAttachment.#Wo('',GSAttachment.#Jo(t)):Promise.resolve(GSAttachment.#Yo(Array.from(t.files||[])).map((t=>new GSAttachment(t))))}static#Ko(t){return t.name.startsWith('.')}static#Yo(t){return Array.from(t).filter((t=>!GSAttachment.#Ko(t)))}static#Qo(t){return new Promise(((e,s)=>{t.file(e,s)}))}static#Xo(t){return new Promise(((e,s)=>{const n=[],r=t.createReader(),read=()=>{r.readEntries((t=>{t.length>0?(n.push(...t),read()):e(n)}),s)};read()}))}static async#Wo(t,e){const s=[];for(const n of GSAttachment.#Yo(e))if(n.isDirectory){const t=await GSAttachment.#Xo(n),e=await GSAttachment.#Wo(n.fullPath,t);s.push(...e)}else{const e=await GSAttachment.#Qo(n);s.push(new GSAttachment(e,t))}return s}static#_o(t){return Array.from(t.items).some((t=>{const e=t.webkitGetAsEntry&&t.webkitGetAsEntry();return e&&e.isDirectory}))}static#Jo(t){return Array.from(t.items).map((t=>t.webkitGetAsEntry())).filter((t=>null!=t))}}class GSFileBox extends GSElement{static TITLE='Drop file/s here or click to select';static CSS='border-2 p-4 d-block text-center dash';#Zo=null;static#tl(){t.adopt('\n            .dash {\n                border-style: var(--gs-fieldbox-border, dashed) !important;\n                border-color: var(--gs-fieldbox-border-color, lightgrey);\n            }\n            input[type=file] {\n                color : var(--gs-fieldbox-color, transparent);\n            } \n            input[type=file]::file-selector-button {\n            }             \n            input[type=file]::file-selector-button:hover {\n            }')}async getTemplate(t=''){const e=this;return`\n        <div part="border" class="${e.css}">\n            <label part="label" class="${e.cssLabel}" for="${e.name}">${e.title}</label>\n            <input part="input" class="${e.cssInput}" type="file" accept="${e.accept}" id="${e.name}" name="${e.name}" ${e.multiple?'multiple':''} ${e.directory?'directory webkitdirectory':''} >\n            <pre part="list" class="${e.cssList}"></pre>\n        </div>\n        `}onReady(){const t=this,e=t.query('div');t.attachEvent(e,'click',t.#us.bind(t)),t.attachEvent(e,'dragenter',t.#el.bind(t)),t.attachEvent(e,'dragover',t.#el.bind(t)),t.attachEvent(e,'dragleave',t.#sl.bind(t)),t.attachEvent(e,'drop',t.#nl.bind(t)),t.attachEvent(e,'paste',t.#tn.bind(t)),t.attachEvent(e,'change',t.#Zs.bind(t)),super.onReady()}get listEl(){return this.query('pre')}get fileEl(){return this.query('input')}get css(){return n.get(this,'css',GSFileBox.CSS)}set css(t=''){return n.set(this,'css')}get cssList(){return n.get(this,'css-list','')}set cssList(t=''){return n.set(this,'css-list')}get cssLabel(){return n.get(this,'css-label','')}set cssLabel(t=''){return n.set(this,'css-label')}get cssInput(){return n.get(this,'css-input','d-none')}set cssInput(t=''){return n.set(this,'css-input')}get multiple(){return n.getAsBool(this,'multiple',!0)}set multiple(t=''){return n.setAsBool(this,'mulltiple',t)}get title(){return n.get(this,'title',GSFileBox.TITLE)}set title(t=''){return n.set(this,'title',GSFileBox.TITLE)}get name(){return n.get(this,'name','')}set name(t=''){return n.set(this,'name','')}get accept(){return n.get(this,'accept','')}set accept(t=''){return n.set(this,'accept')}get filter(){return n.get(this,'filter','^image/(gif|png|jpeg)$')}set filter(t=''){return n.set(this,'filter')}get directory(){return n.getAsBool(this,'directory',!1)}set directory(t=''){return n.setAsBool(this,'directory',val)}#us(t){this.fileEl.click()}#el(t){const e=this;e.#Zo&&clearTimeout(e.#Zo),e.#Zo=setTimeout((()=>e.removeAttribute('hover')),200);const s=t.dataTransfer;s&&e.#rl(s)&&(s.dropEffect='copy',e.setAttribute('hover',''),t.preventDefault())}#sl(t){t.dataTransfer&&(t.dataTransfer.dropEffect='none'),this.removeAttribute('hover'),GSEvents.prevent(t)}#nl(t){const e=this;e.removeAttribute('hover');const s=t.dataTransfer;s&&e.#rl(s)&&(e.#il(s),GSEvents.prevent(t))}#tn(t){if(!t.clipboardData)return;if(!t.clipboardData.items)return;const e=this.#al(t.clipboardData.items);if(!e)return;const s=[e];this.#il(s),t.preventDefault()}#Zs(t){const e=this.fileEl.files;e&&0!==e.length&&this.#il(e)}#rl(t){return Array.from(t.types).includes('Files')}#al(t){const e=this.filter?new RegExp(this.filter):null;for(const s of t)if('file'===s.kind){if(!e)return s.getAsFile();if(e.test(s.type))return s.getAsFile()}return null}#vi(t){const e=new DataTransfer;t.forEach((t=>e.items.add(t.file))),this.fileEl.files=e.files,this.listEl.textContent=t.map((t=>t.file.name)).join('\n')}async#il(t){const e=this,s=t instanceof DataTransfer?await GSAttachment.traverse(t,e.directory):GSAttachment.from(t);e.emit('accept',{attachments:s},!0,!1,!0)&&s.length&&(e.#vi(s),e.emit('accepted',{attachments:s},!0))}static{customElements.define('gs-filebox',GSFileBox),Object.seal(GSFileBox),GSFileBox.#tl()}}class GSStore extends GSDataHandler{#Do=[];#ol=1;#ll=0;static{customElements.define('gs-store',GSStore),Object.seal(GSStore)}static get observedAttributes(){return GSDataHandler.observeAttributes(['cached'])}constructor(){super(),GSItem.validate(this,this.tagName)}disconnectedCallback(){this.#Do=[],super.disconnectedCallback()}attributeChangedCallback(t,e,s){if(super.attributeChangedCallback(t,e,s),'cached'===t){const t=this;t.cached||t.clear()}}getField(t=''){return this.querySelector(`gs-item[name="${t}"]`)}get table(){return i.closest(this,'GS-TABLE')}get cached(){return this.hasAttribute('cached')}set cached(t=!1){return n.toggle(this,'cached',e.asBool(t))}get isCached(){return Array.isArray(this.#Do)&&this.#Do.length>0}get data(){return this.#Do}get total(){return this.#ll||this.#Do.length}get offset(){return(this.page-1)*this.limit}get page(){return this.#ol}set page(t=1){const s=this;t=e.asNum(t,1),t=(t=Math.min(Math.max(t,1),Number.MAX_VALUE))>s.pages?s.pages:t,s.#ol=t;const n=s.limit*(t-1);s.#cl(n,s.limit,s.filter,s.sort)}get pages(){const t=this;return 0===t.total||0===t.limit?1:Math.ceil(t.total/t.limit)}nextPage(){const t=this;if(t.page!==t.pages)return t.page=t.page+1,t.#ol}prevPage(){const t=this;if(1!==t.page)return t.page=t.page-1,t.#ol}lastPage(){const t=this;return t.page=0===t.limit?1:t.pages,t.#ol}firstPage(){return this.page=1,this.page}get filter(){return super.filter}set filter(t){t=this.#ul(t),super.filter=t}get sort(){return super.sort}set sort(t){t=this.#dl(t),super.sort=t}clear(){this.#ll=0,this.setData()}setData(t=[],e=!1){return this.#pn(t,e),this.read()}read(t=!1){const e=this;return t&&(e.#Do=[]),e.#cl(e.skip,e.limit,e.filter,e.sort)}async#cl(t=0,e=0,s,n){const r=this;let i=[];return r.#hl||r.isOffline?(i=r.#gl(t,e,s,n,r.#Do),r.#$r('data',i)):i=await super.read(),i}#gl(t=0,e=0,s,n,r){return r=GSData.filterData(s,r,this.#ml),r=GSData.sortData(n,r),e=0===e?r.length:e,r=r.slice(t,t+e)}get#hl(){return this.isCached&&this.cached}#pn(t=[],e=!1){const s=this;let n=[];n=Array.isArray(t)?t:Array.isArray(t.data)?t.data:[t],e?s.#Do=[...s.#Do,...n]:(s.#ol=1,s.#Do=n),s.#ll=s.#Do.length}#$r(t='data',e){GSEvents.sendDelayed(1,this,t,e,!0)}#ul(t){let e=[];return('string'==typeof t||Array.isArray(t))&&(e=t),e}#dl(t=''){let s;if('string'==typeof t)s=[{col:t}];else if(Array.isArray(t))s=t;else if(e.isNumber(t)){const e=Math.abs(t);s=new Array(e),s[e-1]={ord:t}}return s}get#ml(){const t=this.table?.header?.fields;return t||Array.from(this.querySelectorAll('gs-item')).map((t=>t.name))}onRead(t){const e=this;e.#pn(t),t=e.#gl(e.skip,e.limit,e.filter,e.sort,t),e.#$r('data',t)}}class GSColumn extends HTMLElement{static{customElements.define('gs-column',GSColumn)}#g=[];constructor(){super(),GSItem.validate(this,this.tagName)}connectedCallback(){this.#pl()}disconnectedCallback(){this.#g=[],t.deleteRule(this.dataset.cssId)}async#pl(){const t=await GSLoader.loadSafe(this.src,'GET',null,!0);this.#g=Array.isArray(t)?t:Object.entries(t)}render(){const e=this,s=e.sortable?'sorting':'',n=e.width?`width:${e.width};`:'',r=e.colspan?`colspan="${e.colspan}"`:'';return e.dataset.cssId=n?GSID.id:'',t.setRule(e.dataset.cssId,n),`<th tabindex="0" scope="col" name="${e.name}" ${r} \n            data-sortable="${e.sortable}" data-order="${e.#fl}" \n            class="${s} ${e.cssHeader} ${e.dataset.cssId}" \n            data-css-id="${e.dataset.cssId}">\n            ${e.title||e.name}</th>`}renderFilter(){const t=this;if(!t.filter)return'<th></th>';let e='';switch(t.list){case'fixed':e=t.#bl();break;case'flexi':e=t.#Sl();break;default:e=t.#vl()}return`<th css="${t.cssFilter}">${e}</th>`}#bl(){const t=this,e=t.#yl(!0);return`<select auto="${t.auto}" name="${t.name}" title="${t.title||t.name}" class="${t.cssField}" >${e}</select>`}#Sl(){const t=GSID.id;return this.#vl(t)+`<datalist id="${t}">${this.#yl(!1)}</datalist>`}#vl(t=''){const e=this;let s='';if('timestamp'===e.type)s='datetime-local';else s=e.type||'';return s&&(s=`type="${s}"`),`<input ${s} auto="${e.auto}" name="${e.name}" title="${e.title||e.name}" class="${e.cssField}" placeholder="${e.title||e.name}" list="${t}">`}#yl(t=!1){const e=[];return this.filters.forEach((s=>{const r=n.getAsBool(s,'default',!1),i=n.get(s,'value',''),a=n.get(s,'map',i);let o='';o=t?`<option value="${i}" ${r?'selected':''}>${a}</option>`:`<option value="${a}" data-value="${i}">`,e.push(o)})),e.join('')}get#fl(){const t=this;return t.sortable&&t.direction?'asc'===t.direction?1:-1:0}get table(){return i.closest(this,'GS-TABLE')}get store(){return this.table?.query('gs-store')}get#Gl(){return this.closest('gs-header')}get cssField(){const t=this,e=t.list?'form-select':'form-control',s=n.get(t,'css-field',e);return n.get(t.#Gl,'css-field',s)}get filter(){return n.getAsBool(this,'filter',!1)}get sortable(){const t=this;return!(!t.name||t.counter)&&n.getAsBool(t,'sortable',!0)}get direction(){return n.get(this,'direction','')}get cssFilter(){const t=n.get(this.#Gl,'css-filter','');return n.get(this,'css-filter',t)}get cssHeader(){const t=n.get(this.#Gl,'css-header','border-end');return n.get(this,'css-header',t)}get css(){return n.get(this,'css','')}get width(){return n.get(this,'width')}get name(){return n.get(this,'name','')}get title(){return n.get(this,'title','')}get counter(){return'#'===this.name}get index(){return n.getAsNum(this,'index',-1)}get format(){return n.get(this,'format')}get type(){const t=this,e=n.get(t,'type');return e||t.store?.getField(t.name)?.type}get colspan(){return n.get(this,'colspan','')}get list(){const t=n.get(this,'list','').toLowerCase(),e=['fixed','flexi'].includes(t);return e||this.auto?e?t:'':'flexi'}get items(){return GSItem.genericItems(this)}get filterDef(){return this.querySelector('gs-item[filter="true"]')}get mapDef(){return this.querySelector('gs-item[map="true"]')}get ref(){return n.get(this.mapDef,'ref')}get src(){return n.get(this.mapDef,'src')}get filters(){return GSItem.genericItems(this.filterDef)}get maps(){return GSItem.genericItems(this.mapDef)}get auto(){return 0===this.childElementCount}get#El(){const t=this;return t.src||0===t.#g.length&&(t.#g=t.maps.map((t=>[n.get(t,'value'),n.get(t,'map')]))),t.#g}toJSON(){const t=this;return{ref:t.ref,name:t.name,title:t.title,width:t.width,sortable:t.sortable,filter:t.filter,idx:t.index,type:t.type,format:t.format,css:t.css,colspan:t.colspan,map:t.#El}}}class GSHeader extends HTMLElement{static{customElements.define('gs-header',GSHeader)}get#wl(){return i.queryAll(this,'gs-column')}get#Al(){return i.queryAll(this,'gs-column[filter=true]')}get#Cl(){return i.queryAll(this,'gs-column').filter((t=>'false'===n.get(t,'hidden','false')))}render(){const t=this,e=t.table,s=t.#Al,n=t.#Cl,r=[];return r.push(`<thead class="${e.cssHeader}">`),s.length>0&&(r.push(`<tr is="gs-tablefilter" class="${e.cssFilter}">`),t.#wl.forEach((t=>r.push(t.renderFilter()))),r.push('</tr>')),r.push(`<tr is="gs-tablesort" class="${e.cssColumns}">`),n.forEach((t=>r.push(t.render()))),r.push('</tr>'),r.push('</thead>'),r.join('')}toJSON(){return this.#Cl.map((t=>t.toJSON()))}get table(){return i.closest(this,'GS-TABLE')}get fields(){return this.#Cl.map((t=>n.get(t,'name')))}}class GSTBody extends HTMLTableSectionElement{#xl=null;static{customElements.define('gs-tbody',GSTBody,{extends:'tbody'}),Object.seal(GSTBody)}connectedCallback(){const t=this;GSID.setIf(t),GSEvents.attach(t,t,'click',(e=>t.#us(e))),GSEvents.attach(t,t,'contextmenu',(e=>t.#Tl(e)),!1,!0),t.#xl=i.closest(t,'GS-TABLE')}disconnectedCallback(){this.#xl=null,GSEvents.deattachListeners(this)}get index(){return this.table.index}get cssCell(){return this.table.cssCell}get cssRow(){return this.table.cssRow}get cssSelect(){return this.table.cssSelect}get select(){return this.table.select}get multiselect(){return this.table.multiselect}get table(){return this.#xl||i.closest(this,'GS-TABLE')}render(t,e,s){const n=this;if(!Array.isArray(t))return;const r=[];let a='';if(e.forEach(((e,i)=>{r.push(`<tr tabindex="0" class="${n.cssRow}" data-index=${i}>`),a=Array.isArray(e)?n.#kl(t,e,i,s):n.#ns(t,e,s),r.push(a),r.push('</tr>')})),0===e.length&&n.table.noDataText){const e=t.map((t=>t.colspan?1|parseInt(t.colspan):1)).reduce(((t,e)=>t+e),0);r.push(n.#$l(e))}i.setHTML(n,r.join('')),i.queryAll(n,'tr').forEach((t=>{0===t.innerText.trim().length&&t.remove()}))}#$l(t){return`<tr data-ignore="true"><td colspan="${t}" class="text-center fw-bold text-muted">${this.table.noDataText}</td></tr>`}#kl(t,e,s,n){const r=this,i=[];return t.forEach((t=>{const a='#'===t.name?(s+1+n).toString():e[t.idx];i.push(`<td class="${r.cssCell}">${a||'&nbsp;'}</td>`)})),i.join('')}#ns(t,e,s){const n=this,r=[];return t.forEach(((t,i)=>{const a=n.#Dl(t,e,i+1+s);r.push(a)})),r.join('')}#Dl(t,e,s){let n='#'===t.name?s:e[t.name],r=t.ref?e[t.ref]:n;const i=t.map?.filter((t=>t[0]===''+r));n=i?.length>0&&i[0][1]||n,n=this.#Ml(t,n);const a=t.colspan?`colspan="${t.colspan}"`:'';return`<td class="${this.cssCell} ${t.css}" ${a}>${n?.toString()||'&nbsp;'}</td>`}#Ml(t,e){if(!t.format)return e;const s=this.#Ll(t,e),n=t.locale||navigator.locale;switch(s){case'timestamp':case'date':const s='true'==t.format?void 0:t.format;return e&&e>0?new GSDate(e).format(s,n):e;case'string':case'boolean':case'number':break;case'currency':const r={style:'currency',currency:t.currency};return new Intl.NumberFormat(n,r).format(e)}return e}#Ll(t,e){return t.type?t.type:e instanceof Date?'date':e instanceof Number?'number':e instanceof Boolean?'boolean':typeof e}#Tl(t){}#us(t){const e=this,s=t.target,n=t.shiftKey&e.multiselect;'TD'!==!s.tagName&&e.select&&requestAnimationFrame((()=>{e.#Ol(s.closest('tr'),n,t)}))}#Ol(t,e=!1,s){const r=this,a=n.getAsBool(t,'selected');if(e||i.queryAll(r,'tr').forEach((t=>{n.set(t,'class',null),n.set(t,'selected',null)})),'true'===t.dataset.ignore)return;n.set(t,'class',a?null:r.cssSelect),n.set(t,'selected',!a||null);const o=[];i.queryAll(r,'tr[selected=true]').forEach((t=>o.push(parseInt(t.dataset.index)))),GSEvents.send(r,'select',{data:o,evt:s},!0)}}class GSTable extends GSElement{static#Il=['GS-HEADER','GS-STORE'];#Fo=!0;#Rl=!1;#_e=[];#Do=[];#ko=[];#i=null;#g={css:'table','css-header':'table thead','css-row':'table tbody tr','css-cell':'table tbody td'};#Nl='bg-dark text-light fw-bold';#Fl='table table-hover table-striped user-select-none m-0';#Bl='user-select-none table-light';#Hl='';#ql='col';#jl=0;#Pl=0;#zl=0;#Ta=0;static{customElements.define('gs-table',GSTable),Object.seal(GSTable)}static get observedAttributes(){return GSElement.observeAttributes(['src','select','multiselect','css','css-header','css-filter','css-columns','css-row','css-cell','css-select'])}constructor(){super(),this.#jr()}#jr(){const t=this;let e=Array.from(t.children).filter((t=>t.slot&&'extra'!==t.slot));if(e.length>0)throw new Error(`Custom element injection must contain slot="extra" attribute! Element: ${t.tagName}, ID: ${t.id}`);e=Array.from(t.childNodes).filter((t=>!t.slot));if(!i.isAllowed(e,GSTable.#Il))throw new Error(i.toValidationError(t,GSTable.#Il))}attributeCallback(t='',e='',s=''){this.#Ul(this.#g[t],s)}connectedCallback(){const t=this;t.listen('ready',t.#Vl.bind(t)),super.connectedCallback()}disconnectedCallback(){const t=this;t.#_e=[],t.#Do=[],t.#ko=[],t.#i=null,super.disconnectedCallback()}async onBeforeReady(){const t=this;if(!t.store){const e=n.get(t,'data');t.#i=await l.waitFor(e)}t.contextMenu&&(t.contextMenu.disabled=!0),await super.onBeforeReady()}async onReady(){const t=this;t.#_l(),t.attachEvent(t.self,'sort',(e=>t.#Wl(e))),t.attachEvent(t.self,'filter',(e=>t.#Jl(e))),t.attachEvent(t.self,'select',(e=>t.#Ol(e.detail))),t.attachEvent(t.self,'action',(e=>t.#Yl(e))),t.attachEvent(t,'data',(e=>t.#Kl(e))),t.attachEvent(window,'resize',(()=>t.resize())),super.onReady()}get contextMenu(){return this.querySelector('gs-context')}get store(){const t=this;if(t.#i)return t.#i;if(t.#i=t.querySelector('gs-store'),!t.#i){const e=n.get('data');t.#i=i.query(`gs-data#${e}`)}return t.#i}get header(){return this.querySelector('gs-header')}get selected(){return this.#ko}get multiselect(){return this.#Rl}set multiselect(t=!1){this.#Rl=e.asBool(t)}get select(){return this.#Fo}set select(t=!0){this.#Fo=e.asBool(t)}get autofit(){return n.getAsBool(this,'autofit',!0)}get css(){return n.get(this,'css',this.#Fl)}get cssSelect(){return n.get(this,'css-select',this.#Nl)}get cssHeader(){return n.get(this,'css-header',this.#Bl)}get cssRow(){return n.get(this,'css-row',this.#Hl)}get cssCell(){return n.get(this,'css-cell',this.#ql)}get cssFilter(){return n.get(this,'css-filter','')}get cssColumns(){return n.get(this,'css-columns','')}set autofit(t=!0){n.setAsBool(this,'autofit',t)}set css(t=''){n.set(this,'css',t)}set cssSelect(t=''){n.set(this,'css-select',t)}set cssHeader(t=''){n.set(this,'css-header',t)}set cssFilter(t=''){n.set(this,'css-filter',t)}set cssColumns(t=''){n.set(this,'css-columns',t)}set cssRow(t=''){n.set(this,'css-row',t)}set cssCell(t=''){n.set(this,'css-cell',t)}get noDataText(){return n.get(this,'no-data','No Data')}set noDataText(t){return n.set(this,'no-data',t)}get isFilterable(){return this.#_e.filter((t=>t.filter)).length>0}get filters(){return this.#ue?.filters}get sorters(){return this.#Ql?.sorters}get#Ql(){return this.query('[is="gs-tablesort"]')}get#ue(){return this.query('[is="gs-tablefilter"]')}#Ul(t,e){t&&this.queryAll(t,!0).forEach((t=>{n.set(t,'class',e)}))}#Kl(t){GSEvents.prevent(t);const e=this;e.self&&(e.#_l(t.detail),GSEvents.sendDelayed(10,e.self,'data',t.detail))}#_l(t=[]){if(!Array.isArray(t))throw new Error('Received data is not JSON array!');const e=this;if(e.#Do=t,e.#ko=[],!e.#Xl)return e.#Zl(),e.#tc(),requestAnimationFrame((()=>e.#_l(t)));requestAnimationFrame((()=>e.#ec()))}get#Xl(){return this.#_e.length>0}#Zl(){const t=this,e=t.header;t.#_e=e?e.toJSON():[],t.#_e.length>0||0!==t.#Do.length&&t.#sc(t.#Do[0])}#sc(t){const e=[];e.push('<gs-header>'),Array.isArray(t)?(e.push('<gs-column name="#"></gs-column>'),t.forEach(((t,s)=>{const n=`<gs-column name="Col_${s+1}" index=${s}></gs-column>`;e.push(n)}))):Object.keys(t).forEach((t=>{const s=`<gs-column name="${t}"></gs-column>`;e.push(s)})),e.push('</gs-header>');const s=i.parse(e.join(''),!0);this.appendChild(s)}#ec(){const t=this;t.self.querySelector('tbody').render(t.#_e,t.#Do,t.store.offset);const e=t.contextMenu;e&&(e.close(),e.reattach())}#tc(){const t=this;if(!t.#Xl)return;const e=t.querySelector('gs-header').render(),s=`<table class="${t.css}">${e}<tbody is="gs-tbody"></tbody></table><slot name="extra"></slot>`;i.setHTML(t.self,s)}resize(){const t=this;clearTimeout(t.#Ta),t.#Ta=setTimeout((()=>t.#nc()),250)}#nc(){const t=this;if(!t.autofit)return;if(0===t.#jl){t.#jl=t.store.limit;const e=t.query('gs-pager')?.getBoundingClientRect(),s=t.query('thead')?.getBoundingClientRect();t.#Pl=(e?.height||0)+(s?.height||0)}if(0===t.#zl&&(t.#zl=t.query('tbody tr')?.getBoundingClientRect().height||0),0===t.#jl)return;if(0===t.#zl)return;const e=t.getBoundingClientRect(),s=window.innerHeight-e.top-t.#Pl-2*t.#zl,n=Math.floor(s/t.#zl);t.store.limit=n>1&&n<t.#jl?n:t.#jl}#Yl(t){const e=t.detail;e.action=e.data.action,e.data=[...this.#ko],e.type='table'}#Ol(t){if(!t)return;const e=this;e.#ko=[],t.data?.forEach((t=>{const s=e.#Do[t];s&&e.#ko.push(s)})),e.contextMenu&&(e.contextMenu.disabled=0===t.data?.length),e.emit('selected',{data:e.#ko,evt:t.evt})}#Wl(t){GSEvents.prevent(t);const e=this;e.store.sort=t.detail.data||[],e.emit('sort',e.store.sort),t.detail.initial||e.store.read()}#Jl(t){GSEvents.prevent(t);const e=this;e.store.filter=t.detail.data||[],e.emit('filter',e.store.filter),t.detail.initial||e.store.read()}#Vl(t){const e=this;t.srcElement instanceof GSStore&&requestAnimationFrame((()=>{e.store.filter=e.filters,e.store.sort=e.sorters,e.store.page=1}))}}class GSTableSort extends HTMLTableRowElement{#rc=0;static{customElements.define('gs-tablesort',GSTableSort,{extends:'tr'}),Object.seal(GSTableSort)}connectedCallback(){const t=this;GSID.setIf(t),GSEvents.attach(t,t,'click',(e=>t.#us(e))),GSComponents.store(t),t.#ic()}disconnectedCallback(){GSComponents.remove(this),GSEvents.deattachListeners(this)}get sorters(){let t=[];return this.#ac.filter((t=>0!==e.asNum(t.dataset.order,0))).forEach((s=>{const r=e.asNum(s.dataset.order),i=e.asNum(s.dataset.idx,1),a=n.get(s,'name',s.innerText),o={ord:r,col:s.cellIndex,name:a,idx:i};t.push(o)})),t=GSData.sortData([{name:'idx',ord:1}],t),t}get#oc(){return this.#lc.filter((t=>'0'!=t.dataset.order))}get#ac(){return this.#lc.filter((t=>'0'!=t.dataset.idx))}get#lc(){return i.queryAll(this,'th[data-sortable="true"]',!1,!1)}#ic(){const t=this;requestAnimationFrame((()=>{t.#oc.forEach(((e,s)=>t.#Wl(e,s>0))),t.#Zs(!1)}))}#Zs(t){const e={data:this.sorters,initial:!t};GSEvents.send(this,'sort',e,!0,!0,!0)}#us(t){const s=t.composedPath().shift();if('TH'!==s.tagName)return;if('true'!=s.dataset.sortable)return;const n=e.asNum(s.dataset.order);s.dataset.order=n>0?-1:1,this.#Wl(s,t.shiftKey),this.#Zs(!0)}#Wl(t,s=!1){const n=this,r=e.asNum(t.dataset.order,-1);s?(n.#rc=1+Math.max.apply(0,n.#lc.map((t=>e.asNum(t.dataset.idx,0)))),i.toggleClass(t,'sorting_desc sorting_asc table-active',!1)):(n.#rc=1,i.queryAll(n,'thead th').forEach((t=>{t.dataset.idx=0,t.dataset.order=0,i.toggleClass(t,'sorting_desc sorting_asc table-active',!1)}))),t.classList.add(r>0?'sorting_asc':'sorting_desc'),t.dataset.idx=n.#rc,t.dataset.order=r,i.toggleClass(t,'table-active',!0)}}class GSTableFilter extends HTMLTableRowElement{#cc=!1;static{customElements.define('gs-tablefilter',GSTableFilter,{extends:'tr'}),Object.seal(GSTableFilter)}connectedCallback(){const t=this;GSID.setIf(t),t.#cc=null!=i.query(t,'input[auto="true"],select[auto="true"]'),t.#uc(),t.#dc(),GSComponents.store(t),requestAnimationFrame((()=>t.#Zs()))}disconnectedCallback(){GSComponents.remove(this),GSEvents.deattachListeners(this)}get root(){return i.root(this)}get filters(){const t=this,e=[];return i.queryAll(t,'input, select').forEach((s=>{const n=t.#hc(s);n&&e.push({name:s.name,value:n})})),e}#uc(){const t=this;i.queryAll(t,'input, select').forEach((e=>GSEvents.attach(t,e,'change',(e=>t.#Zs(e)))))}#dc(){const t=this;t.#cc&&GSEvents.attach(t,t.root,'data',(e=>t.#Kl(e.detail)),!1,!0)}#Zs(t){const e={data:this.filters,initial:!t};GSEvents.send(this,'filter',e,!0,!0,!0)}#Kl(t){}#hc(t){const e=n.get(t,'list');if(!e)return i.getValue(t);const s=this.root.getElementById(e),r=s?.querySelector(`option[value="${t.value}"]`);return r?.dataset?.value||t.value}}class GSPagination extends GSElement{static CSS_ITEM='me-1';static{customElements.define('gs-pager',GSPagination),Object.seal(GSPagination)}constructor(){super()}async getTemplate(t=''){const e=this,s=e.store,n=e.firstlast,r=e.nextprev,i=this.pages,a=[];a.push('<nav><ul class="pagination justify-content-center m-3">'),n&&a.push(e.#gc(e.first,'first','First page')),r&&a.push(e.#gc(e.previous,'previous','Previous page'));let o=1;for(;o<=i;)a.push(e.#gc(o,'','',o==s.page)),o++;return r&&a.push(e.#gc(e.next,'next','Next page')),n&&a.push(e.#gc(e.last,'last','Last page')),a.push('</ul></nav>'),a.join('')}#gc(t='',e='',s='',n=!1){return`<li class="page-item ${GSPagination.CSS_ITEM} ${n?'active':''}"><a class="page-link" name="${e}" title="${s}" href="#" >${t}</a></li>`}#mc(t){const e=this;requestAnimationFrame((()=>{let t=0===e.pages?0:Math.floor((e.store.page-1)/e.pages)*e.pages+1;e.queryAll('a[name=""]').forEach((s=>{s.parentElement.classList.remove('active','disabled','d-none'),t==e.store.page&&s.parentElement.classList.add('active'),t>e.store.pages&&s.parentElement.classList.add('disabled','d-none'),s.text=t++}))}))}#us(t){const e=this,s=t.target.name||t.target.text;switch(s){case'first':return e.store.firstPage();case'last':return e.store.lastPage();case'next':return e.store.nextPage();case'previous':return e.store.prevPage()}e.store.page=s||e.store.page}onReady(){super.onReady();const t=this;t.attachEvent(t.store,'data',t.#mc.bind(t)),t.queryAll('a').forEach((e=>t.attachEvent(e,'click',t.#us.bind(t))))}get table(){return i.closest(this,'GS-TABLE')}get store(){const t=n.get(this,'store');return t?l.get(t):this.table.store}get nextprev(){return n.getAsBool(this,'nextprev',!0)}get firstlast(){return n.getAsBool(this,'firstlast',!0)}get pages(){return n.getAsNum(this,'pages',5)}get first(){return n.get(this,'first','&laquo;')}get last(){return n.get(this,'last','&raquo;')}get next(){return n.get(this,'next','&rsaquo;')}get previous(){return n.get(this,'previous','&lsaquo;')}}class GSNotification extends GSElement{static TOP_START='position-fixed top-0 start-0';static TOP_CENTER='position-fixed top-0 start-50 translate-middle-x';static TOP_END='position-fixed top-0 end-0';static MIDDLE_START='position-fixed top-50 start-0 translate-middle-y';static MIDDLE_CENTER='position-fixed top-50 start-50 translate-middle';static MIDDLE_END='position-fixed top-50 end-0 translate-middle-y';static BOTTOM_START='position-fixed bottom-0 start-0';static BOTTOM_CENTER='position-fixed bottom-0 start-50 translate-middle-x';static BOTTOM_END='position-fixed bottom-0 end-0';static DEFAULT=GSNotification.BOTTOM_END;#Y=new Set;static get observedAttributes(){return GSElement.observeAttributes(['position'])}connectCallback(){super.connectedCallback()}disconnectCallback(){super.disconnectedCallback(),this.#Y=null}attributeCallback(t='',e='',s=''){const n=this;e=n.#pc(e),s=n.#pc(s);const r=n.query('div');i.toggleClass(r,e,!1),i.toggleClass(r,s,!0)}#pc(t){let s=GSNotification[t];return e.isString(s)&&s.startsWith('position-')?s:t}async getTemplate(t=''){return`<div class="toast-container z-10k ${this.css} ${this.position}">\n    <slot name="content"></slot>\n    </div>`}get css(){return n.get(this,'css','p-3')}set css(t=''){n.set(this,'css',t)}get position(){const t=n.get(this,'position',GSNotification.DEFAULT);return t.indexOf('_')>0&&GSNotification[t]?GSNotification[t]:t}set position(t=''){n.set(this,'position',t)}get native(){return n.getAsBool(this,'native',!1)}set native(t=''){n.setAsBool(this,'native',t)}info(t,e,s,n,r,i){return this.display(t,e,'text-bg-info',s,n,r,i)}success(t,e,s,n,r,i){return this.display(t,e,'text-bg-success',s,n,r,i)}warn(t,e,s,n,r,i){return this.display(t,e,'text-bg-warning',s,n,r,i)}danger(t,e,s,n,r,i){return this.display(t,e,'text-bg-danger',s,n,r,i)}primary(t,e,s,n,r,i){return this.display(t,e,'text-bg-primary',s,n,r,i)}secondary(t,e,s,n,r,i){return this.display(t,e,'text-bg-secondary',s,n,r,i)}dark(t,e,s,n,r,i){return this.display(t,e,'text-bg-dark',s,n,r,i)}light(t,e,s,n,r,i){return this.display(t,e,'text-bg-light',s,n,r,i)}async display(t='',e='',s='',n=!1,r=2,i=.5,a){if(!e)return;const o=this;if(o.native){let s=await GSNotification.requestPermission();if(s&&(s=o.#fc(t,e,r,i,a)),s)return s}return o.#bc(t,e,s,n,r,i)}#bc(t,e,s,r,a,o){const l=this,c=`<gs-toast slot="content" css="${s}"  closable="${r}" delay="${o}" timeout="${a}" message="${e}" title="${t}"></gs-toast>`,u=i.parse(c,!0);return requestAnimationFrame((async()=>{await l.#Ie(o);const t=l.#Sc;t!==l&&n.set(t,'class',`toast-container ${l.css} ${l.position}`),t.appendChild(u)})),u}async#fc(t,e,s,n,r={}){const i=this;await i.#Ie(n),r.body=r.body||e;const a=new Notification(t,r);i.#Y.add(a);const o=i.#vc.bind({notification:a,owner:i});return a.addEventListener('close',o),s>0&&(a.iid=setTimeout(o,1e3*s)),a}get#Sc(){const t=customElements.get('gs-dialog')?.top;return t&&t.isConnected&&i.query(t,'.toast-container')||this}async#Ie(t=0){e.isNumber(t)&&t>0&&await e.timeout(1e3*t)}#vc(){const t=this;t.notification.close(),t.owner.removeNative(t.notification),t.notification.iid&&clearTimeout(t.notification.iid)}removeNative(t){this.#Y.delete(t)}clear(){const t=this;Array.from(t.querySelectorAll('gs-toast')).forEach((t=>t.remove())),t.#Y.forEach((t=>t.close())),t.#Y.clear()}static get isNativeSupported(){return'Notification'in self}static get isGranted(){return'granted'===Notification.permission}static async requestPermission(){return!!GSNotification.isNativeSupported&&(GSNotification.isGranted||await Notification.requestPermission(),GSNotification.isGranted)}static{customElements.define('gs-notification',GSNotification),Object.seal(GSNotification)}}class GSToast extends GSElement{static{customElements.define('gs-toast',GSToast),Object.seal(GSToast)}static get observedAttributes(){return GSElement.observeAttributes(['placement','css'])}attributeCallback(t='',e='',s=''){if('css'===t){const t=this.query('.toast');i.toggleClass(t,e,!1),i.toggleClass(t,s,!0)}}async getTemplate(t=''){const e=this,s=e.closable?'<button type="button" class="btn-close me-2 m-auto"></button>':'';return`\n        <div class="mt-1 mb-1 toast fade ${e.css}">\n          <div class="d-flex">\n              <div class="toast-body">\n              ${e.message}\n              </div>\n              ${s}\n          </div>\n      </div>    \n    `}async onBeforeReady(){await super.onBeforeReady();const t=this,e=t.queryAll('button');Array.from(e).forEach((e=>t.attachEvent(e,'click',t.close.bind(t)))),t.visible&&t.open()}show(t='',e='',s='',n=!0,r=!1,i=2,a=0){const o=this;o.css=s||o.css,o.title=t,o.message=e,o.timeout=i,o.delay=a,o.closable=1==r,o.visible=1==n,o.open()}open(){const t=this;requestAnimationFrame((async()=>{t.delay>0&&await e.timeout(1e3*t.delay),i.toggleClass(t.#yc,'show',!0),t.timeout<=0||(await e.timeout(1e3*t.timeout),t.close())}))}close(){this.#$t()}dismiss(){this.#$t()}async#$t(){return i.toggleClass(this.#yc,'show',!1),await e.timeout(i.SPEED),this.remove()}get#yc(){return this.query('.toast')}get isFlat(){return!0}get title(){return n.get(this,'title')}set title(t=''){n.set(this,'title',t)}get message(){return n.get(this,'message')}set message(t=''){n.set(this,'message',t)}get css(){return n.get(this,'css')}set css(t=''){n.set(this,'css',t)}get timeout(){return n.getAsNum(this,'timeout',2)}set timeout(t=2){n.set(this,'timeout',t)}get delay(){return n.getAsNum(this,'delay',2)}set delay(t=0){n.set(this,'delay',t)}get closable(){return n.getAsBool(this,'closable')}set closable(t=!0){n.set(this,'closable',1==t)}get visible(){return n.getAsBool(this,'visible',!0)}set visible(t=!0){n.set(this,'visible',1==t)}}class GSStep extends GSElement{static INACTIVE='text-bg-light';static SELECTED='text-bg-secondary';static COMPLETED='text-bg-primary';static{customElements.define('gs-step',GSStep),Object.seal(GSStep)}static get observedAttributes(){return GSElement.observeAttributes(['title','icon','color'])}attributeCallback(t='',e='',s=''){const n=this;'icon'===t&&(n.#Gc=s),'title'===t&&(n.#Ec=s),'color'===t&&n.#wc(e||GSStep.INACTIVE,s)}#wc(t='',e=''){const s=this.query('.step-icon');i.toggleClass(s,t,!1),i.toggleClass(s,e,!0)}set#Gc(t=''){const e=this.query('i');n.set(e,'class',t)}set#Ec(t=''){this.query('.step-title').innerText=t}get title(){return n.get(this,'title')}set title(t=''){n.set(this,'title',t)}get icon(){return n.get(this,'icon')}set icon(t=''){n.set(this,'icon',t)}get color(){return n.get(this,'color',GSStep.INACTIVE)}set color(t=''){return n.set(this,'color',t||GSStep.INACTIVE)}get iconCSS(){return n.get(this,'icon-css','border rounded-circle fs-1')}get titleCSS(){return n.get(this,'title-css','mb-0 fs-6 mt-3 fw-bold')}async getTemplate(t=''){const e=this;return`\n            <div class="step d-block w-100 text-center mb-4">\n                <div class="step-icon-wrap d-block w-100 text-center position-relative">\n                    <div class="step-icon position-relative d-inline-block ${e.iconCSS} ${e.color}">\n                        <i class="${e.icon}"></i>\n                    </div>\n                </div>\n                <div class="step-title ${e.titleCSS}">${e.title}</div>\n            </div>`}get isWrap(){return!1}get isFlat(){return!0}get anchor(){return'beforeend@.steps'}}class GSStepStyle{static{t.adopt(GSStepStyle.style)}static get style(){return'\n        .step .step-icon-wrap {\n            height: 80px;\n        }\n        \n        .step .step-icon-wrap::before,\n        .step .step-icon-wrap::after {\n            display: block;\n            position: absolute;\n            top: 50%;\n            width: 50%;\n            height: 3px;\n            margin-top: -1px;\n            background-color: var(--bs-gray-200);\n            content: \'\';\n            z-index: 1\n        }\n        \n        .step .step-icon-wrap::before {\n            left: 0\n        }\n        \n        .step .step-icon-wrap::after {\n            right: 0\n        }\n        \n        .step .step-icon {\n            width: 80px;\n            height: 80px;\n            line-height: 81px;\n            z-index: 5\n        }\n                \n        .step:first-child .step-icon-wrap::before {\n            display: none\n        }\n        \n        .step:last-child .step-icon-wrap::after {\n            display: none\n        }\n                \n        @media (max-width: 576px) {\n            .flex-sm-nowrap .step .step-icon-wrap::before,\n            .flex-sm-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 768px) {\n            .flex-md-nowrap .step .step-icon-wrap::before,\n            .flex-md-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 991px) {\n            .flex-lg-nowrap .step .step-icon-wrap::before,\n            .flex-lg-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }\n        \n        @media (max-width: 1200px) {\n            .flex-xl-nowrap .step .step-icon-wrap::before,\n            .flex-xl-nowrap .step .step-icon-wrap::after {\n                display: none\n            }\n        }        \n        '}}class GSSteps extends GSElement{#Ac=0;static{customElements.define('gs-steps',GSSteps),Object.seal(GSSteps)}constructor(){super(),GSItem.validate(this,this.tagName)}get steps(){return this.queryAll('gs-step')}get items(){return this.queryAll('gs-item')}get length(){return this.items.length}get index(){return this.#Ac}set index(t=0){t<0||t>=this.length||(this.#Ac=t)}get current(){return this.steps[this.#Ac]}get isFirst(){return 0===this.#Ac}get isLast(){return this.#Ac===this.length-1}next(){const t=this;return!t.isLast&&(t.current.color=GSStep.COMPLETED,t.index++,t.current.color=GSStep.SELECTED,t.current)}previous(){const t=this;return!t.isFirst&&(t.current.color=GSStep.INACTIVE,t.index--,t.current.color=GSStep.SELECTED,t.current)}reset(){const t=this;t.steps.forEach((t=>t.color=GSStep.INACTIVE)),requestAnimationFrame((()=>{t.#Ac=0,t.current.color=GSStep.SELECTED}))}async getTemplate(t=''){const e=this;return`<div class="steps d-flex flex-wrap flex-sm-nowrap justify-content-between padding-top-2x padding-bottom-1x"></div>${GSItem.genericItems(e).map(((t,s)=>e.#Cc(t,s))).join('')}`}#Cc(t,e){return 0===e&&n.set(t,'color',GSStep.SELECTED),`<gs-step ${n.flatten(t)}></gs-step>`}}class GSChart extends GSElement{static#xc=!1;static#Tc=!1;static#kc=null;#$c=null;static get URL_LIB(){return globalThis.GS_URL_CHART||globalThis.location?.origin||'/webcomponents'}static async#ie(){if(!1!==GSChart.URL_LIB&&!GSChart.#xc&&!GSChart.#Tc){GSChart.#Tc=!0;try{const t=`${GSChart.URL_LIB}/assets/chart/chart.mjs`,{Chart:e,registerables:s}=await import(t);e.register(...s),GSChart.#kc=e,GSChart.#xc=!0,GSEvents.send(document,'gs-chart')}catch(t){GSLog.error(null,t)}finally{GSChart.#Tc=!1}}}static{customElements.define('gs-chart',GSChart),Object.seal(GSChart)}static get observedAttributes(){return GSElement.observeAttributes(['width','height'])}attributeCallback(t='',e='',s=''){const n=this;n.resize(n.width,n.height)}async connectedCallback(){await GSChart.#ie(),GSChart.#xc||await GSEvents.wait(document,'gs-chart',0,!1),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback();const t=this;t.#$c&&t.#$c.destroy(),t.#$c=null}async getTemplate(t=''){const e=this;return e.width&&e.height?`<canvas width="${e.width}" height="${e.height}" class="${e.css}"></canvas>`:`<canvas class="${e.css}"></canvas>`}async onBeforeReady(){await super.onBeforeReady();this.#Qt()}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}get width(){return n.getAsNum(this,'width',0)}set width(t=''){return n.setAsNum(this,'width',t)}get height(){return n.getAsNum(this,'height',0)}set height(t=''){return n.setAsNum(this,'height',t)}get data(){return n.get(this,'data')}set data(t=''){return n.get(this,'data',t)}get options(){return n.get(this,'options')}set options(t=''){return n.get(this,'options',t)}get canvas(){return this.query('canvas')}reset(){this.#$c?.reset()}render(){this.#$c?.render()}update(t){this.#$c?.update(t)}stop(){this.#$c?.stop()}clear(){this.#$c?.clear()}resize(t,e){const s=this;s.#$c&&requestAnimationFrame((()=>{const n=s.query('div');n&&(n.style.width=`${t}px`,n.style.height=`${e}px`),s.#$c.resize(t,e)}))}toBase64Image(t='image/png',e=1){return this.#$c?.toBase64Image(t,e)}async#Qt(){const t=this,e=await GSLoader.loadSafe(t.options,'GET',null,!0,{}),s=await GSLoader.loadSafe(t.data,'GET',null,!0,[]),n=t.querySelector('gs-item[group="options"]'),r=Object.assign(e,GSChart.toJson(n)),i=r.data.datasets;if(i.forEach(((t,e)=>{t.data=1===i.length?s:s[e]||[]})),t.#$c)return t.update(r);const a=t.canvas.getContext('2d');t.#$c=new GSChart.#kc(a,r)}static toJson(t,e='name',s='value',n='type'){if(!(t instanceof HTMLElement))return{};const r=t.getAttribute(e),i=t.getAttribute(s),a=t.getAttribute(n);let o=null;switch(a){case'array':o=[];break;case'object':o={};break;default:return GSChart.#Ll(i,a)}const l=Array.from(t.children),c='array'===a,u='object'===a;return l.forEach((t=>{const i=t.getAttribute(e);if(c)o.push(GSChart.toJson(t,e,s,n));else if(u){const r=GSChart.toJson(t,e,s,n);o[i]=r}else{const e=t.getAttribute(s),a=t.getAttribute(n);o[r][i]=GSChart.#Ll(e,a)}})),o}static#Ll(t,e){switch(e){case'boolean':return'true'===t;case'number':return parseFloat(t);default:return t}}}class GSHighlight extends GSElement{static{customElements.define('gs-highlight',GSHighlight),Object.seal(GSHighlight)}static get URL_LIB(){return globalThis.GS_URL_HLJS||'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0'}static get observedAttributes(){return GSElement.observeAttributes(['theme','url','target','language'])}constructor(){super()}attributeCallback(t='',e='',s=''){const n=this;switch(t){case'language':n.#Dc(e,s);break;case'theme':n.#c();break;case'target':n.#Mc();break;case'url':n.#Lc()}}async getTemplate(t=''){return'<pre><code><code/><pre/>'}highlight(t='',e=!1){this.#Oc(t,e)}set content(t=''){this.#Oc(t)}async onBeforeReady(){await super.onBeforeReady();const t=this;return t.theme&&t.#c(),t.url?t.#Lc():t.target?t.#Mc():void 0}get url(){return n.get(this,'url')}set url(t=''){return n.set(this,'url',t)}get target(){return n.get(this,'target')}set target(t=''){return n.set(this,'target',t)}get theme(){return n.get(this,'theme','default')}set theme(t=''){return n.set(this,'theme',t)}get language(){return n.get(this,'language','')}set language(t=''){return n.set(this,'language',t)}#Dc(t,e){t&&i.toggleClass(this.#Ic,`language-${t}`,!1),e&&i.toggleClass(this.#Ic,`language-${e}`,!0)}async#c(){const t=`${GSHighlight.URL_LIB}/styles/${this.theme}.min.css`;i.injectCSS(this,t)}#Mc(){const t=this,e=t.target?i.query(t.target):null;if(!e)return i.setHTML(t.#Ic,`Element with id ${t.target} not found!`);t.#Oc(e.innerHTML)}async#Lc(){const t=this,e=await GSLoader.load(t.url);if(!e)return i.setHTML(t.#Ic,`Code URL ${t.url} unreachable!`);t.#Oc(e)}get#Ic(){return this.query('code')}#Rc(t){const e=t.data.data;URL.revokeObjectURL(t.data.url),i.setHTML(this.#Ic,t.data.append?this.#Ic.innerHTML+e:e),t.target.terminate()}#Oc(t='',e=!1){const s=this;if(!t)return i.setHTML(s.#Ic,'No data!');const n=s.#Nc,r=new Blob([n],{type:'application/javascript'}),a=URL.createObjectURL(r),o=new Worker(a);o.onmessage=s.#Rc.bind(s),o.postMessage({data:t,url:a,append:e})}get#Nc(){const t=this.language?this.language.split(',').map((t=>`importScripts('${GSHighlight.URL_LIB}/languages/${t.trim()}.min.js');`)).join(''):'';return`globalThis.onmessage = (event) => {\n                importScripts('${GSHighlight.URL_LIB}/highlight.min.js');\n                ${t}\n                const result = globalThis.hljs.highlightAuto(event.data.data);\n                postMessage({data:result.value, url:event.data.url, append: event.data.append});};`}}class GSMonaco extends GSElement{static#Fc=!1;#Bc=null;static{customElements.define('gs-monaco',GSMonaco),Object.seal(GSMonaco)}static get URL_LIB(){return globalThis.GS_URL_MONACO||'https://unpkg.com/monaco-editor@latest/min/'}static async#ie(){GSMonaco.#Fc||(GSMonaco.#Hc(),await GSMonaco.#qc(),await GSMonaco.#jc(),GSMonaco.#Fc=!0)}static async#qc(){if(globalThis.monaco)return;const t=document.createElement('script'),e=GSEvents.wait(t,'load',0,!1);t.type='text/javascript',t.src=`${GSMonaco.URL_LIB}vs/loader.js`,i.appendChild(document.head,t),await e}static#Hc(){window.MonacoEnvironment={baseUrl:`${GSMonaco.URL_LIB}`,getWorkerUrl:(t,e)=>`data:text/javascript;charset=utf-8,${encodeURIComponent(`\n                globalThis.MonacoEnvironment = {baseUrl: '${GSMonaco.URL_LIB}'};\n                importScripts('${GSMonaco.URL_LIB}vs/base/worker/workerMain.js');`)}`}}static#jc(){return new Promise(((t,e)=>{require.config({paths:{vs:`${GSMonaco.URL_LIB}/vs`},'vs/css':{disabled:!1}}),require(['vs/editor/editor.main'],t)}))}static get observedAttributes(){return GSElement.observeAttributes(['theme','url','target','language'])}static get disabledFeatures(){return['shadow','internals']}constructor(){super()}async connectedCallback(){await GSMonaco.#ie(),super.connectedCallback()}onBeforeReady(){super.onBeforeReady(),this.#Pc()}attributeCallback(t='',e='',s=''){const n=this;switch(t){case'language':n.#Dc(s);break;case'theme':n.#c(s);break;case'target':n.#Mc(s);break;case'url':n.#Lc(s)}}async getTemplate(t=''){return`<div class="${this.css}"><div/>`}get monaco(){return window.monaco}get editor(){return this.#Bc}get model(){return this.#Bc.getModel()}get code(){return this.#Bc?.getValue()||''}set code(t=''){this.#Bc&&this.#Bc.setValue(t)}get selection(){return this.model.getValueInRange(this.editor.getSelection())}get isFlat(){return!0}get url(){return n.get(this,'url')}set url(t=''){return n.set(this,'url',t)}get target(){return n.get(this,'target')}set target(t=''){return n.set(this,'target',t)}get theme(){return n.get(this,'theme','vs-dark')}set theme(t=''){return n.set(this,'theme',t)}get language(){const t=this,e=t.url?t.url.split('.').pop(-1):'';return n.get(t,'language',e)}set language(t=''){return n.set(this,'language',t)}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}#Dc(t){const e=this;e.monaco&&t&&e.monaco.editor.setModelLanguage(e.model,t)}async#c(t){this.monaco&&t&&this.monaco.editor.setTheme(t)}#Mc(t){const e=t?i.query(t):null;if(!e)return this.code=`Element with id ${t} not found!`;this.code=e.innerHTML}async#Lc(t){const e=this,s=t?await GSLoader.load(t):null;if(!s)return e.code=`Code URL ${t} unreachable!`;e.code='',e.#Dc(e.language),e.code=s}get#zc(){return this.query('div')}#Pc(){const t=this,e={value:'',language:t.language,theme:t.theme,automaticLayout:!0,minimap:{enabled:!1}};t.#Bc=t.monaco?.editor?.create(t.#zc,e),t.attachEvent(self,'resize',t.#Gr.bind(t));try{t.url?t.#Lc(t.url):t.target&&t.#Mc(t.target)}finally{requestAnimationFrame((()=>t.emit('initialized'))),t.#Gr()}}#Gr(t){const e=this;e.#Bc.layout({width:0,height:0}),requestAnimationFrame((()=>{const t=e.owner.getBoundingClientRect();e.#Bc.layout({width:t.width,height:t.height})}))}get owner(){return super.owner===document.body?this.parentElement:this.owner}}class GSMarkdown extends GSElement{#Uc=null;#Os=null;#Vc=null;#_c=null;#Wc=null;#C=[];static{GSMarkdown.#ie()}static#ie(){customElements.define('gs-markdown',GSMarkdown),Object.seal(GSMarkdown)}static get URL_LIB(){return globalThis.GS_URL_MARKDOWN||'https://unpkg.com/showdown/dist/showdown.min.js'}static get observedAttributes(){return GSElement.observeAttributes(['url'])}async connectedCallback(){await this.#qc(),globalThis.showdown&&super.connectedCallback()}attributeCallback(t='',e='',s=''){if('url'===t)this.#Lc(s)}async getTemplate(t=''){const e=this,s=e.maxHeight>0?`style="max-height: ${e.maxHeight}px;"`:'';return`<div class="overflow-auto ${e.css}" ${s}><div/>`}onReady(){const t=this;t.#Uc=new globalThis.showdown.Converter({tasklists:!0,tables:!0}),t.#Jc(t.url),t.#Lc(t.url)}get isFlat(){return!0}get root(){return this.#_c||''}get url(){return n.get(this,'url')}set url(t=''){return this.#Jc(t),n.set(this,'url',t)}get css(){return n.get(this,'css','')}set css(t=''){return n.set(this,'css',t)}get history(){return n.getAsNum(this,'history',10)}set history(t=''){return n.setAsNum(this,'history',t,10)}get maxHeight(){return n.getAsNum(this,'max',0)}set maxHeight(t=''){return n.setAsNumt(this,'max',t)}back(){const t=this.#Yc();t&&this.#Lc(t)}async#Lc(t=''){const e=this;if(!(t=e.#p(t)))return;let s=await GSLoader.load(t);s&&(e.#Wc=e.#zo(t),e.#_c||(e.#_c=e.#Wc),s=s.replace(/^[-_\*]{3}$/gm,'<hr>'),e.#zc.innerHTML=e.#Kc(s),GSEvents.send(e,'data',t),requestAnimationFrame((()=>{e.#Qc(),e.#Xc(),e.#Zc()})))}#p(t=''){return!t||t.startsWith('http')?t:this.#Wc?new URL(t,this.#Wc).toString():GSLoader.normalizeURL(t,!0)}#zo(t=''){return t.endsWith('/')?t:GSLoader.parentPath(t)}#Zc(){this.#tu('pre:has(code)','text-white bg-dark p-1')}#Xc(){this.#tu('table','table table-light table-hover table-striped table-bordered w-auto shadow-sm')}#tu(t,e){i.queryAll(this.#zc,t).forEach((t=>{i.toggleClass(t,e)}))}#Qc(){const t=this,e=i.queryAll(t.#zc,'a').filter((t=>!n.get(t,'href').startsWith('#')));e.filter((t=>!(n.get(t,'href').endsWith('.md')||n.get(t,'href').endsWith('/')))).forEach((t=>t.target='_blank')),e.filter((t=>n.get(t,'href').endsWith('.md')||n.get(t,'href').endsWith('/'))).forEach((e=>{GSEvents.attach(e,e,'click',t.#eu.bind(t))}))}#eu(t){const e=this,s=t.target,r=n.get(s,'href');if(r.startsWith('#'))return;GSEvents.prevent(t),s.href=e.#p(r);return GSEvents.send(e,'link',s.href,!1,!1,!0)?(e.#Jc(s.href),e.#Lc(s.href),!1):void 0}#Yc(){const t=this,e=t.#C.length>0?t.#C.pop():t.#Vc;return e&&e===t.#Os?t.#Yc():e}#Jc(t){const e=this;e.#C.length>=e.history&&(e.#C=e.#C.slice(1)),e.#Os!=t&&(e.#C.push(t),e.#Os=t,e.#Vc||(e.#Vc=t))}#Kc(t){return this.#Uc.makeHtml(t)}async#qc(){if(globalThis.showdown)return;const t=document.createElement('script'),e=GSEvents.wait(t,'load',0,!1);t.type='text/javascript',t.src=GSMarkdown.URL_LIB,i.appendChild(document.head,t),await e}get#zc(){return this.query('div')}}
//# sourceMappingURL=io.greenscreens.components.all.min.js.map
