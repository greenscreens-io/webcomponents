class GSID{static#t=0;static reset(){this.#t=0}static next(t='GSId-'){return`${t}${this.#t++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let s=0,r=0;if(0===e)return s;for(;r<e;)s=(s<<5)-s+t.charCodeAt(r++)|0;return s}static{Object.freeze(GSID)}}class GSBase extends HTMLElement{static#t=0;#e='';static get observedAttributes(){return[]}static nextID(){return GSBase.#t++,`GSHID_${GSBase.#t}`}static hashCode(t){let e=0,s=t.length,r=0;if(s>0)for(;r<s;)e=(e<<5)-e+t.charCodeAt(r++)|0;return e}static sendEvent(t=document,e,s='',r=!1,n=!1,i=!1){const a=new CustomEvent(e,{detail:s,bubbles:r,composed:n,cancelable:i});return t.dispatchEvent(a)}static sendSuspendedEvent(t=document,e,s=''){requestAnimationFrame((()=>{GSBase.sendEvent(t,e,s)}))}connectedCallback(){const t=this;if(t.url&&t.isRenderable()){const e=GSBase.hashCode(t.url);if(document.querySelector(`[data-hash="${e}"]`))return void t.remove();const s=t.render(),r=s instanceof Promise;s&&!r&&(s.dataset.hash=e,t.isHead?document.head.appendChild(s):t.insertAdjacentElement('afterend',s),t.isAuto&&(s.id=s.id?s.id:GSBase.nextID(),t.#e=s.id))}t.isAuto||t.remove()}disconnectedCallback(){const t=this;if(t.isAuto&&t.#e){const e=document.querySelector(`#${t.#e}`);e&&e.remove()}t.dispose()}attributeChangedCallback(t,e,s){const r=this;requestAnimationFrame((()=>{r.attributeCallback(t,e,s)}))}attributeCallback(t,e,s){}render(){}dispose(){}get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}get isProtocol(){const t=this.protocol;if(!t)return!0;const e=location.protocol.replace(':','');return'http'===t&&e===t||'https'===t&&e===t}get isAsset(){return this.isTarget('GreenScreens')}isTarget(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((s=>{s.brand.toLowerCase().includes(e)&&(t=!0)})),t}const s=new RegExp(`${t}`,'i');return!!navigator.userAgent.match(s)}isRenderable(){const t=this,e=t.isMobile,s=t.isAsset,r=t.isProtocol,n=t.target,i=t.env;return!!r&&(('assets'!==i||!1!==s)&&(('browser'!==i||!0!==s)&&(('mobile'!==i||!1!==e)&&(('desktop'!==i||!0!==e)&&!!t.isTarget(n)))))}get env(){return this.getAttribute('env')||''}get target(){return this.getAttribute('target')||''}get url(){const t=this;let e=t.getAttribute('url')||'';if('assets'===t.env)return'**'+e;if(t.#s)try{let t=`${location.origin}${location.pathname}`;e.startsWith('/')&&(t=location.origin),e.startsWith('http')&&(t=void 0);const s=new URL(e,t);s.searchParams.append('_dc',Date.now()),e=s.href}catch(t){}return e}get type(){const t=this;let e=t.getAttribute('type')||'';return e||(t.url.indexOf('.js')>0?e='text/javascript':t.url.indexOf('.css')>0&&(e='text/css')),e}get async(){return this.getAttributeBool('async','false')}get defer(){return this.getAttributeBool('defer','false')}get isHead(){return this.getAttributeBool('head')}get isAuto(){return this.getAttributeBool('auto')}get protocol(){return this.getAttribute('protocol')||''}get nonce(){return this.getAttribute('nonce')||''}get crossorigin(){return this.getAttribute('crossorigin')}get fetchpriority(){return this.getAttribute('fetchpriority')||'auto'}get integrity(){return this.getAttribute('integrity')}get referrerpolicy(){return this.getAttribute('referrerpolicy')}getAttributeBool(t='',e='true'){return'true'===(this.getAttribute(t)||e)}get#s(){return'GS_NO_CACHE'in globalThis?globalThis.GS_NO_CACHE:!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static{Object.seal(GSBase)}}class GSCacheStyles{static#r=new Map;static set(t,e){const s=this;if(e instanceof CSSStyleSheet&&s.#r.set(t,e),'string'==typeof e){const r=new CSSStyleSheet;r.replaceSync(e),s.#r.set(t,r)}return s.get(t)}static remove(t){return this.#r.delete(t)}static get(t){return this.#r.get(t)}static getOrSet(t,e){if(e&&0===e.cssRules.length)return;const s=GSCacheStyles,r=s.get(t);return r||s.set(t,e)}static get styles(){return Array.from(new Map([...GSCacheStyles.#r].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static injectStyle(t='',e=0){if(t)try{e=e||GSBase.hashCode(t);const s=new CSSStyleSheet;s.replaceSync(t),GSCacheStyles.getOrSet(e,s),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){}}static{Object.freeze(GSCacheStyles),window.GSCacheStyles=GSCacheStyles;const t='.gs-hide{display:none !important;}.gs-hide-orientation,.gs-render{display:none !important;}gs-item{display:none !important;}';GSCacheStyles.injectStyle(t)}}class GSLog{static logging=!0;static info(t,e){this.#n(t,e,!0,'info')}static warn(t,e){this.#n(t,e,!0,'warn')}static error(t,e){this.#n(t,e,!0,'error')}static log(t,e,s){this.#n(t,e,s)}static#n(t,e,s,r){if(!s&&!this.logging)return;let n=console[r||'log'];if(n='function'==typeof n?n:console.log,t)return n(`${t.nodeName} -> ${t.id}: ${e}`);n(e)}static{Object.seal(GSLog)}}class GSUtil{static#i=0;static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asNum=(t=0,e=0)=>GSUtil.isNumber(t)?parseFloat(t):e;static asBool=(t=!1)=>'true'===t.toString().trim().toLowerCase();static fromLiteral=(t,e)=>t.replace(/\${(.*?)}/g,((t,s)=>e[s]));static capitalize=t=>t[0].toUpperCase()+t.slice(1).toLowerCase();static capitalizeAll=(t,e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=t=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.includes('<')&&t.includes('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return Array.isArray(t)||'object'==typeof t}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t=''){return GSUtil.isJsonString(t)?JSON.parse(t):GSUtil.isJsonType(t)?t:(GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),null)}static normalize(t,e=''){return(t??e).toString().trim()}static fromTemplateLiteral(t,e){const s=Object.keys(e),r=Object.values(e);return new Function(...s,`return \`${t}\`;`)(...r)}static parseValue(t){if(!GSUtil.isStringNonEmpty(t))return;let e=window,s=null;return t.trim().split('.').forEach(((t,r,n)=>{if(e)return r<n.length-1?e=e[t]:void(s=e[t])})),s}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return!!GSUtil.isString(t)&&0===t.trim().length}static isStringMatch(t,e){const s=GSUtil.isStringNonEmpty(t),r=GSUtil.isStringNonEmpty(e);return s&&r?t.trim().toLowerCase()==e.trim().toLowerCase():s===r}static async timeout(t=0){return new Promise((e=>{setTimeout(e.bind(null,!0),t)}))}static requestAnimationFrame(t){if('function'==typeof t)return GSUtil.#i>0?t():(GSUtil.#i++,globalThis.requestAnimationFrame((()=>{try{t()}catch(t){}finally{GSUtil.#i--}})))}static async export(t,e,s='octet/stream'){const r=new Blob(t,{type:s}),n=URL.createObjectURL(r);try{const t=document.createElement('a');t.href=n,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(n)}}static register(t,e,s,r=!0,n=!1,i=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:s?.toLowerCase()}),r&&!Object.isSealed(e)&&Object.seal(e),n&&!Object.isFrozen(e)&&Object.freeze(e),i&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),s=URL.createObjectURL(e);try{return await import(s)}finally{URL.revokeObjectURL(s)}}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}}class GSFunction{static isFunction=t=>'function'==typeof t;static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){try{return await t(e)}catch(t){return t}}static callFunctionSync(t,e){try{return t(e)}catch(t){return t}}static callFunction(t,e){if(GSFunction.isFunction(t))return GSFunction.isFunctionAsync(t)?GSFunction.callFunctionAsync(t,e):GSFunction.callFunctionSync(t,e)}static parseFunction(t){const e=GSUtil.parseValue(t);return GSFunction.isFunction(e)?e:null}static{Object.seal(GSFunction)}}class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,s=!1){GSAttr.isHTMLElement(t)&&(s?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,e,s){GSAttr.isHTMLElement(t)&&(GSUtil.normalize(s)?t.setAttribute(e,s):t.removeAttribute(e))}static get(t,e='',s=''){if(!GSAttr.isHTMLElement(t))return s;const r=t.getAttribute(e)||s;return GSUtil.normalize(r)}static getAsBool(t,e='',s='false'){const r=GSAttr.get(t,e,s);return GSUtil.asBool(r,s)}static getAsNum(t,e='',s='0'){const r=GSAttr.get(t,e,s);return GSUtil.asNum(r,s)}static getAsJson(t,e='',s='0'){const r=GSAttr.get(t,e,s,{});return JSON.parse(r)}static setAsBool(t,e='',s='false'){return GSAttr.set(t,e,GSUtil.asBool(s),!1)}static setAsNum(t,e='',s='0'){return GSAttr.set(t,e,GSUtil.asNum(s),NaN)}static setAsJson(t,e='',s='0'){return GSAttr.set(t,e,JSON.stringify(s),'{}')}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}}class GSDOM$1{static SPEED=300;static parse(t='',e=!1,s='text/html'){try{const r=(new DOMParser).parseFromString(t,s);return e?r?.body?.firstElementChild:r}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',s=!1){const r=GSDOM$1.parse(e),n=GSDOM$1.#a(r.head.children).concat(GSDOM$1.#a(r.body.children)),i=s||1!==n.length,a=GSDOM$1.wrap(t,i?null:n.shift());for(;n.length>0;)a.appendChild(n.shift());return a}static wrap(t,e){return GSDOM$1.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#a(t){return Array.from(t||[]).filter((t=>!GSDOM$1.isText(t)))}static isFormElement(t){const e=GSUtil.isString(t)?t:t?.tagName;return['INPUT','SELECT','TEXTAREA','BUTTON'].indexOf(e)>-1}static isElement(t,e){if(!(e&&t))return!1;if(!GSUtil.isString(e))return t instanceof e;const s=customElements.get(e.toLowerCase());if(s&&t instanceof s)return t;const r=GSDOM$1.inheritance(t);for(let s of r)if(s?.constructor?.name===e)return t;return e.toUpperCase()===t.tagName&&t}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM$1.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM$1.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const s=GSDOM$1.isHTMLElement(e)||GSDOM$1.isSVGElement(e),r=GSDOM$1.isHTMLElement(t)&&s,n=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!r||n)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM$1.isHTMLElement(t)&&GSDOM$1.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,s){const r=GSDOM$1.isHTMLElement(t)&&GSDOM$1.isHTMLElement(e),n=t===e&&t.parentNode===e;return!(!r||n)&&t.insertAdjacentElement(s,e)}static removeElement(t){return t?.parentNode?.removeChild(t)}static walk(t,e=!1,s=!1,r=!0){return e?GSDOM$1.parentAll(t):GSDOM$1.childAll(t,s,r)}static*childAll(t,e=!1,s=!0,r=!1){if(!t)return;r&&(yield t),s&&(yield*GSDOM$1.childAll(t.shadowRoot,e,s,!0));const n=e?t.childNodes:t.children;if(n)for(let t of n)yield*GSDOM$1.childAll(t,e,s,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM$1.parent(t);for(;e;)yield e,e=GSDOM$1.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static getRoot(t){if(!t)return null;const e=GSDOM$1.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static getByID(t,e){if('string'==typeof t)return GSDOM$1.getByID(document.body,e);if(!t||!e)return null;const s=GSDOM$1.walk(t,!1);for(let t of s)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM$1.closest(document.body,e);if(!t||!e)return null;const s=GSDOM$1.walk(t,!0);for(let t of s)if(GSDOM$1.matches(t,e))return t;return null}static query(t,e,s=!1,r=!0){if('string'==typeof t)return GSDOM$1.query(document.body,t,s,r);if(!t||!e)return null;if(GSDOM$1.matches(t,e))return t;const n=GSDOM$1.walk(t,!1,s,r);for(let t of n)if(GSDOM$1.matches(t,e))return t;return null}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static queryAll(t,e,s=!1,r=!0){if('string'==typeof t)return GSDOM$1.queryAll(document.body,t,s,r);const n=[];if(!t||!e)return n;const i=GSDOM$1.walk(t,!1,s,r);for(let t of i)GSDOM$1.matches(t,e)&&n.push(t);return n}static setHTML(t,e=''){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(t.innerHTML=e)}static setText(t,e=''){t&&(t.textContent=e)}static toggleClass(t,e,s=!0){return!!GSDOM$1.isHTMLElement(t)&&(!(!e||0==e.trim().length)&&(e=e.split(' ').filter((t=>t&&t.trim().length>0)),null===s?e.forEach((e=>t.classList.toggle(e))):(s?t.classList.add.apply(t.classList,e):t.classList.remove.apply(t.classList,e),!0)))}static toggle(t,e=!0){return GSDOM$1.toggleClass(t,'d-none',e)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea'){const s=GSDOM$1.unwrap(t);requestAnimationFrame((()=>{s.querySelectorAll(e).forEach((t=>t.value=''))}))}static toValue(t){if(!GSDOM$1.isHTMLElement(t))return;if('checkbox'===t.type)return t.checked;let e=t.value;if('text'===t.type){const s=GSDOM$1.styleValue(t,'text-transform');s&&('lowercase'==s.value&&(e=t.value.toLowerCase()),'uppercase'==s.value&&(e=t.value.toUpperCase()))}return e}static fromValue(t,e){GSDOM$1.isHTMLElement(t)&&('checkbox'===t.type?t.checked=1==e:t.value=e)}static styleValue(t,e){const s=GSDOM$1.getComputedStyledMap(t);return'function'==typeof s.get?s.get(e):s[e]}static getComputedStyledMap(t){return t.computedStyleMap?t.computedStyleMap():window.getComputedStyle?window.getComputedStyle(t):null}static toObject(t,e='input, textarea, select',s=!0){const r=GSDOM$1.unwrap(t),n={},i=GSDOM$1.queryAll(r,e);return Array.from(i).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!s||t.checkValidity())).forEach((t=>{n[t.name]=GSDOM$1.toValue(t)})),n}static fromObject(t,e,s='input, textarea, select'){if(!e)return;const r=GSDOM$1.unwrap(t),n=GSDOM$1.queryAll(r,s);Array.from(n).filter((t=>t.name&&t.name in e)).forEach((t=>GSDOM$1.fromValue(t,e[t.name])))}static fromURLHashToForm(t){location.hash.slice(1).split('&').every((e=>{if(e.length<2)return!0;const s=e.split('=');return GSDOM$1.setValue(`input[name=${s[0]}]`,s[1],t),!0}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,e='input, select, .btn'){GSDOM$1.queryAll(t,e).forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, .btn'){GSDOM$1.queryAll(el,e).forEach((t=>t.setAttribute('disabled',!0)))}static setValue(t,e,s){const r=GSDOM$1.query(s,t);GSDOM$1.fromValue(r,e)}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),s=[];let r;for(;r=e.nextNode();)s.push(r);return s}static cleanHTML(t){const e=GSDOM$1.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(/(\n*\t*)*(?=\n\t*)/g,'')))}static validate(t,e,s,r=!1){if(t.tagName!==e){if(r)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM$1.isAllowed(Array.from(t.childNodes),s))return!0;if(r)return!1;const n=GSDOM$1.toValidationError(t,s);throw new Error(n)}static isAllowed(t,e){return Array.isArray(t)?0===t.filter((t=>GSDOM$1.isAllowed(t,e))).length:!(t instanceof Text||t instanceof Comment||e.includes(t.tagName))}static toValidationError(t,e){const s=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${s}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let s=!0;try{const s=await fetch(e);if(!s.ok)return;const r=await s.text(),n=new CSSStyleSheet;n.replaceSync(r),t.shadowRoot.adoptedStyleSheets=[n]}catch(t){s=!1}return s}static{Object.seal(GSDOM$1),globalThis.GSDOM=GSDOM$1}}class GSEvent{static#o=new Map;static#l=!1;static protect(){globalThis.addEventListener('contextmenu',(t=>{GSEvent.prevent(t)})),document.addEventListener('keydown',(t=>{const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}))}static async waitPageLoad(t,e='loaded',s,r=100){GSEvent.#l||await GSEvent.wait(window,'load'),GSEvent.#l=!0,await GSUtil.timeout(r),GSFunction.callFunction(s),GSEvent.sendSuspended(t,e)}static async waitAnimationFrame(t){return new Promise(((e,s)=>{requestAnimationFrame((()=>{try{e(),'function'==typeof t&&t()}catch(t){s(t)}}))}))}static listen(t,e,s,r,n=!1){return!e&&t?t.addEventListener(s,r,n):GSDOM$1.queryAll(t,e).map((t=>t.addEventListener(s,r,n)))}static unlisten(t,e,s,r){return!e&&t?t.removeEventListener(s,r):GSDOM$1.queryAll(t,e).map((t=>t.removeEventListener(s,r)))}static once(t,e,s,r){return GSEvent.listen(t,e,s,r,{once:!0})}static wait(t,e=''){return new Promise(((s,r)=>{if(!e)return r('Event undefined!');GSEvent.once(t,null,e,(t=>s(t.detail)))}))}static prevent(t){GSFunction.hasFunction(t,'preventDefault')&&t.preventDefault(),GSFunction.hasFunction(t,'stopPropagation')&&t.stopPropagation()}static send(t=document,e,s='',r=!1,n=!1,i=!1){const a=new CustomEvent(e,{detail:s,bubbles:r,composed:n,cancelable:i});return t?.dispatchEvent(a)}static sendSuspended(t=document,e,s='',r=!1,n=!1,i=!1){requestAnimationFrame((()=>{GSEvent.send(t,e,s,r,n,i)}))}static sendDelayed(t=1,e=document,s,r='',n=!1,i=!1,a=!1){setTimeout((()=>GSEvent.send(e,s,r,n,i,a)),t)}static attach(t,e,s='',r,n=!1,i=!1){if(!e)return!1;if(e.offline)return!1;if(!GSFunction.isFunction(r))return!1;if(!GSFunction.hasFunction(e,'addEventListener'))return!1;const a=this,o=a.#c(t,e,s,r),l=a.#u(t);return a.#d(l,o.key).set(o.fnkey,o),o.capture=i,n&&(o.once=t=>{try{o.fn(t)}finally{a.remove(o.own,o.el,o.name,o.once)}},Object.defineProperty(o.once,'gsid',{value:r.gsid,writable:!1})),e.addEventListener(s,n?o.once:o.fn,{once:n,capture:i}),!0}static remove(t,e,s='',r){const n=this,i=n.#c(t,e,s,r),a=n.#u(t),o=n.#d(a,i.key),l=o.get(i.fnkey);if(l)o.delete(l.fnkey),n.#h(l);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),n.#h(t);0===o.size&&a.delete(i.key),0===a.size&&n.#o.delete(t)}static deattachListeners(t){const e=this,s=e.#g(t);if(!s)return;const r=s.values();for(let t of r){for(let s of t.values())e.#h(s);t.clear()}s.clear()}static#c(t,e,s='',r=''){if(!e)return!1;const n=this.#m(e),i=this.#S(r);return{own:t,fn:r,el:e,name:s,key:GSID.hashCode(`${n}${s}`),fnkey:GSID.hashCode(`${n}${s}${i||''}`)}}static#d(t,e){let s=t.get(e);return s||(s=new Map,t.set(e,s)),s}static#S(t){return GSFunction.isFunction(t)?(t.gsid||Object.defineProperty(t,'gsid',{value:GSID.next(),writable:!1}),t.gsid):null}static#m(t){let e=GSAttr.get(t,'data-gselid');return e||(e=GSID.next(),GSAttr.set(t,'data-gselid',e)),e}static#u(t){return this.#d(this.#o,t)}static#g(t){const e=this.#o.get(t);if(e)return this.#o.delete(t),e}static#h(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSComponents$1{static#o=new Set;static store(t){GSComponents$1.#o.add(t)}static remove(t){GSComponents$1.#o.delete(t)}static get(t=''){if(!t)return null;const e=Array.from(this.#o).filter((e=>e.id===t));return 0===e.length?null:e[0]}static#p(t='',e=0,s){const fn=e=>{const r=e.detail;if(t.startsWith('gs-')&&r.tagName===t.toUpperCase()||r.id===t)return GSEvent.unlisten(document.body,null,'componentready',fn),s(r)},r={once:!1,capture:!1};e>0&&(r.signal=AbortSignal.timeout(e)),GSEvent.listen(document.body,null,'componentready',fn,r)}static waitFor(t='',e=0){return new Promise(((s,r)=>{let n=GSComponents$1.find(t)||GSComponents$1.get(t);return n?s(n):GSComponents$1.#p(t,e,s)}))}static notifyFor(t='',e){if(!GSFunction.isFunction(e))return!1;const callback=s=>{const r=s.composedPath().shift();return r.id===t||r.tagName===t?e(r,s):void 0},s=GSComponents$1.find(t)||GSComponents$1.get(t);return s?e(s):(GSEvent.listen(document.body,null,'componentready',callback),callback)}static findAll(t='',e=!0,s=!0){let r=Array.from(GSComponents$1.#o);return t&&(r=r.filter((e=>e&&GSDOM$1.matches(e,t)))),e||(r=r.filter((t=>t.shadowRoot))),s||(r=r.filter((t=>!t.shadowRoot))),r}static find(t='',e=!0,s=!0){return GSComponents$1.findAll(t,e,s).shift()}static getOwner(t,e){if(!(GSDOM$1.isGSElement(t)||GSDOM$1.isHTMLElement(t)))return null;const s=GSDOM$1.parentAll(t);for(let t of s){if(!t)break;if(t instanceof ShadowRoot){const s=GSDOM$1.parent(t);return e?GSDOM$1.isElement(s,e)?s:GSComponents$1.getOwner(s,e):s}if(GSDOM$1.isElement(t,e))return t}return e?null:document.body}static hasGetter(t,e){return GSComponents$1.hasFunc(t,e,'get')}static hasSetter(t,e){return GSComponents$1.hasFunc(t,e,'set')}static hasFunc(t,e,s){const r=Reflect.getOwnPropertyDescriptor(t.__proto__,e);return r&&'function'==typeof r[s]}static listenStyles(){GSComponents$1.#G||(document.addEventListener('gs-style',GSComponents$1.#b),GSComponents$1.#G=!0)}static unlistenStyles(){document.removeEventListener('gs-style',GSComponents$1.#b),GSComponents$1.#G=!1}static#G=!1;static#b(){requestAnimationFrame((()=>{GSComponents$1.findAll(null,!1,!0).filter((t=>t.shadowRoot)).forEach((t=>t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles))}))}static{Object.freeze(GSComponents$1),GSComponents$1.listenStyles(),globalThis.GSComponents=GSComponents$1}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let s=null;const r=location.pathname.split('/').pop(-1).includes('.'),n=t.includes('extension://');s=t.startsWith('http')||n?t:t.startsWith('/')?`${location.origin}/${t}`:r?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,s=s.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const i=new URL(s);return!e&&GSLoader.NO_CACHE&&i.searchParams.append('_dc',Date.now()),i.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM$1.query(document.documentElement,t);return e?e.innerHTML:t}return GSUtil.isHTML(t)?t:(t=GSLoader.#f(t),GSLoader.loadSafe(t))}static#f(t=''){return t=t.startsWith('//')?GSLoader.#A+'/'+t:t,GSLoader.normalizeURL(t)}static get#A(){return GSLoader.normalizeURL(GSLoader.#v,!0)}static get#v(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const s=GSLoader.#f(t);return await GSLoader.load(s,e)}static async load(t='',e='GET',s,r=!1){let n=null;const i='Content-Type';(s=s||{})[i]=r?'application/json':s[i]||'text/plain';const a=GSLoader.normalizeURL(t,!0),o=await fetch(a,{method:e,headers:s});return o.ok&&(n=r?await o.json():await o.text()),n}static async loadSafe(t='',e='GET',s,r=!1,n){try{if(t)return GSLoader.load(t,e,s,r)}catch(t){GSLog.error(this,t)}return n||(r?{}:'')}static async loadData(t=''){const e=GSUtil.isJson(t),s=!e&&GSFunction.parseFunction(t),r=GSFunction.isFunction(s);if((!r&&GSUtil.parseValue(t)||e)&&(t=GSUtil.toJson(t)),r){t=GSFunction.isFunctionAsync(s)?await GSFunction.callFunctionAsync(s,this):GSFunction.callFunction(s)}if(GSUtil.isJsonType(t))return t}static{Object.seal(GSLoader)}}class GSDataListExt extends HTMLDataListElement{static{customElements.define('gs-ext-datalist',GSDataListExt,{extends:'datalist'}),Object.seal(GSDataListExt)}constructor(){super()}static get observedAttributes(){return['data']}attributeChangedCallback(t,e,s){'data'===t&&this.load(s)}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),GSComponents$1.store(t)}disconnectedCallback(){GSComponents$1.remove(this)}get owner(){const t=GSComponents$1.getOwner(this);return GSDOM$1.unwrap(t)}async load(t=''){if(!t)return;const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}apply(t){if(!Array.isArray(t))return!1;const e=this;return requestAnimationFrame((()=>{const s=[];t.forEach((t=>{s.push(e.#y(t))})),GSDOM$1.setHTML(e,s.join('\n'))})),!0}#y(t){const e=['<option'];return Object.entries(t).forEach((t=>{const s=t[0],r=t[1];if('text'!==s)return'selected'===s?e.push(s):void e.push(`${s}="${r}"`)})),e.push(t.text),e.push('>'),e.join(' ')}}class GSComboExt extends HTMLSelectElement{static{customElements.define('gs-ext-select',GSComboExt,{extends:'select'}),Object.seal(GSComboExt)}constructor(){super()}static get observedAttributes(){return['data']}attributeChangedCallback(t,e,s){'data'===t&&this.load(s)}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),GSComponents$1.store(t)}disconnectedCallback(){GSComponents$1.remove(this)}get owner(){const t=GSComponents$1.getOwner(this);return GSDOM$1.unwrap(t)}async load(t=''){if(!t)return;const e=await GSLoader.loadSafe(t,'GET',null,!0);this.apply(e)}apply(t){if(!Array.isArray(t))return!1;const e=this;return requestAnimationFrame((()=>{const s=[];t.forEach((t=>{s.push(e.#y(t))})),GSDOM$1.setHTML(e,s.join('\n'))})),!0}#y(t){const e=['<option'];return Object.entries(t).forEach((t=>{const s=t[0],r=t[1];if('text'!==s)return'selected'===s?e.push(s):void e.push(`${s}="${r}"`)})),e.push('>'),e.push(t.text),e.push('</option>'),e.join(' ')}}class GSDOMObserver extends MutationObserver{static#E=new Map;static#$=new Map;observe(t,e){const s=e||{childList:!0,subtree:!0};return super.observe(t,s)}static create(t){const e=new GSDOMObserver(GSDOMObserver.#M);return e.observe(t),e}static#D(t=!1){return t?GSDOMObserver.#$:GSDOMObserver.#E}static get#w(){return GSDOMObserver.#C||GSDOMObserver.#O}static get#C(){return GSDOMObserver.#E.size>0}static get#O(){return GSDOMObserver.#$.size>0}static#M(t){GSDOMObserver.#w&&t.forEach((t=>{GSDOMObserver.#C&&t.addedNodes.forEach((t=>GSDOMObserver.#x(t,GSDOMObserver.#E))),GSDOMObserver.#O&&t.removedNodes.forEach((t=>GSDOMObserver.#x(t,GSDOMObserver.#$)))}))}static#x(t,e){return 0!==e.size&&(GSDOMObserver.#T(t,e),t.childNodes.forEach((t=>GSDOMObserver.#x(t,e))),!0)}static#T(t,e){e.forEach(((e,s)=>{try{s(t)&&e(t)}catch(t){}}))}static#k(t,e,s){if(t instanceof HTMLElement==0)return!1;const r=new Map;return r.set(e,s),GSDOMObserver.#x(t,r)}static#L(t){return'function'==typeof t}static#F(t,e){return GSDOMObserver.#L(t)&&GSDOMObserver.#L(e)}static registerFilter(t,e,s=!1){return!!GSDOMObserver.#F(t,e)&&(GSDOMObserver.#D(s).set(t,e),s||GSDOMObserver.#k(document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver.#L(t)&&GSDOMObserver.#D(e).delete(t)}static{Object.freeze(GSDOMObserver),globalThis.GSDOMObserver=GSDOMObserver;const t=GSDOMObserver.create(document.documentElement);globalThis.addEventListener('unload',(()=>{t.disconnect()}))}}class GSFormExt extends HTMLFormElement{static#I=['ok','reset','submit'];static{customElements.define('gs-ext-form',GSFormExt,{extends:'form'}),Object.seal(GSFormExt),GSDOMObserver.registerFilter(GSFormExt.#N,GSFormExt.#H),GSDOMObserver.registerFilter(GSFormExt.#N,GSFormExt.#q,!0)}static#N(t){return t instanceof HTMLFormElement&&t instanceof GSFormExt==!1}static#H(t){GSFormExt.#B(t)}static#q(t){GSEvent.deattachListeners(t)}constructor(){super()}static get observedAttributes(){return['mask']}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),GSFormExt.#B(t)}disconnectedCallback(){GSEvent.deattachListeners(this)}static#B(t){GSEvent.attach(t,t,'submit',GSFormExt.#P.bind(t)),GSEvent.attach(t,t,'action',GSFormExt.#j.bind(t)),GSEvent.attach(t,t,'click',GSFormExt.#j.bind(t))}static#j(t){const e=t.composedPath().shift(),s=e?.dataset.action||t.detail.action||e?.type;if(!GSFormExt.#I.includes(s))return;GSEvent.prevent(t);const r=this;switch(s){case'reset':r.reset();break;case'ok':case'submit':GSFormExt.#P(t,r)}}static#P(t,e){GSEvent.prevent(t);const s=e||this,r=s.checkValidity()&&s.isValid;if(!r)return s.reportValidity();const n={type:r?'submit':'invalid',data:GSDOM$1.toObject(s),source:t,valid:r};GSEvent.send(s,'form',n,!0,!0)}get isValid(){return 0===GSDOM$1.queryAll(this,'input,select,textarea').map((t=>t.checkValidity())).filter((t=>!1===t)).length}get buttonOK(){return GSFormExt.#R(this)}get buttonCancel(){return GSFormExt.#U(this)}get buttonReset(){return GSFormExt.#z(this)}static#R(t){return GSDOM$1.query(t,'button[type="submit"]')}static#U(t){return GSFormExt.#V(t,'cancel')}static#z(t){return GSFormExt.#V(t,'reset')}static#V(t,e=''){return GSDOM$1.query(t,`button[data-action="${e}"]`)}}class GSInputExt extends HTMLInputElement{static#_='.^$*+?()[]{}|';static#W={n:/[0-9]/g,x:/[0-9a-fA-F]/g,y:/[0-9]/g,m:/[0-9]/g,d:/[0-9]/g,'#':/[a-zA-Z]/g,'*':/[0-9a-zA-Z]/g,_:/./g};#Y=[];static{customElements.define('gs-ext-input',GSInputExt,{extends:'input'}),Object.seal(GSInputExt)}constructor(){super()}static get observedAttributes(){return['mask','pattern']}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),0===t.placeholder.length&&t.mask&&(t.placeholder=t.mask),t.#J(),t.#B(),GSComponents$1.store(t),setTimeout((()=>{t.#X()}),250)}disconnectedCallback(){GSComponents$1.remove(this),GSEvent.deattachListeners(this)}attributeChangedCallback(t,e,s){'mask'!==t&&'pattern'!==t||this.#J()}get owner(){const t=GSComponents$1.getOwner(this);return GSDOM$1.unwrap(t)}get list(){const t=GSAttr.get(this,'list');return GSDOM$1.getByID(this.owner,t)}get filter(){const t=GSAttr.get(this,'data-filter');return GSDOM$1.getByID(this.owner,t)}get mask(){return GSAttr.get(this,'mask','')}get strict(){return GSAttr.get(this,'strict','')}get optimized(){const t=this.mask.split(''),e=[];let s=0;return t.forEach(((t,r)=>{if(e[e.length-1]===t)return s++;s>0&&e.push(`{${++s}}`),s=0,GSInputExt.#_.indexOf(t)>-1&&e.push('\\'),e.push(t)})),s>0&&e.push(`{${++s}}`),e.join('')}get autocopy(){return this.hasAttribute('autocopy')}get autoselect(){return this.hasAttribute('autoselect')}#J(){const t=this;if(t.pattern.length>0)return;if(0===t.mask.length)return;const e=t.mask.split(''),s=['^'];let r=0;e.forEach(((t,n)=>{const i=GSInputExt.#W[t.toLowerCase()];return i?(e[n]=new RegExp(i,'g'),0===s.length?s.push(i.source):s[s.length-1]===i.source?r++:(r>0&&s.push(`{${++r}}`),r=0,void s.push(i.source))):(r>0&&s.push(`{${++r}}`),r=0,GSInputExt.#_.indexOf(t)>-1&&s.push('\\'),s.push(t))})),r>0&&s.push(`{${++r}}`),s.push('$'),t.#Y=e,t.pattern=s.join(''),t.maxLength=t.mask.length}#B(){const t=this;GSEvent.attach(t,t,'keydown',t.#K.bind(t)),GSEvent.attach(t,t,'keypress',t.#Z.bind(t)),GSEvent.attach(t,t,'input',t.#Q.bind(t)),GSEvent.attach(t,t,'change',t.#tt.bind(t)),GSEvent.attach(t,t,'paste',t.#et.bind(t)),GSEvent.attach(t,t,'blur',t.#st.bind(t)),GSEvent.attach(t,t,'click',t.#rt.bind(t)),requestAnimationFrame((()=>{t.list&&(GSEvent.attach(t,t,'change',t.#X.bind(t)),GSEvent.attach(t,t.filter,'change',t.#nt.bind(t)))}))}#it(t,e='',s=''){const r=GSAttr.get(t,`data-${e}`,'').split(/[,;;]/),n=s.length>0&&r.includes(s);GSDOM$1.isFormElement(t.tagName)?GSAttr.toggle(t,'disabled',!n):n?GSDOM$1.show(t):GSDOM$1.hide(t),GSDOM$1.queryAll(t,'input,textarea,select').forEach((t=>GSAttr.set(t,'data-ignore',!n||null)))}isInList(){const t=this,e=t.list;if(!e)return!0;if(!t.strict)return!0;if(!e.querySelector('option'))return!0;return null!=e.querySelector(`option[value="${t.value}"]`)}#X(t){const e=this,s=e.owner;let r=GSDOM$1.query(e.list,`option[value="${e.value}"]`),n=!1;r||(r=e.list?.querySelector('option'),n=!0);const i=r?.dataset||{};Object.entries(i).forEach((t=>{const r=n?'':t[1],i=t[0];if(e.setAttribute(`data-${i}`,t[1]),'id'===i||'group'===i)return;const a=`[data-${i}]:not([data-${i}=""]`;Array.from(GSDOM$1.queryAll(s,a)).filter((t=>'OPTION'!==t.tagName)).filter((t=>t!==e)).filter((t=>0===GSAttr.get(t,'list').length)).forEach((t=>e.#it(t,i,r)))}))}#nt(t){const e=this,s=e.list;e.value='';const r=GSAttr.get(e.filter,'data-group');GSDOM$1.queryAll(s,'option').forEach((t=>GSAttr.set(t,'disabled',!0)));const n=r?`option[data-group="${r}"]`:`option[data-id="${t.target.value}"]`;GSDOM$1.queryAll(s,n).forEach((t=>GSAttr.set(t,'disabled')))}#rt(t){const e=this;e.autocopy&&navigator.clipboard.writeText(e.value),e.autoselect&&e.select()}#st(t){const e=this;e.required&&e.reportValidity(),e.isInList()||GSEvent.send(e,'strict',{ok:!1,source:t})}#et(t){GSEvent.prevent(t);const e=t.clipboardData.getData('text');this.value=this.formatMask(e)}#K(t){const e=this;if(!e.mask)return;const s=e.value.split('');let r=e.selectionStart,n=e.selectionEnd,i=!1,a=r;if('Delete'===t.key&&(i=!0,s[a]=e.mask[a]),'Backspace'===t.key&&(i=!0,r===n?(s[a-1]=e.mask[a-1],a=r-1):a=r),r!==n&&1===t.key.length)for(i=!0;r<n;)s[r]=e.mask[r],r++;return i?(e.value=e.formatMask(s.join('')),e.setSelectionRange(a,a),GSEvent.prevent(t)):void 0}#Z(t){const e=this;if(!e.mask)return;const s=e.value.split('');let r=e.selectionStart,n=e.#Y.slice(r),i=!0;n.every((e=>e instanceof RegExp?(e.test(t.key)&&(s[r]=t.key,i=!1),GSEvent.prevent(t),!1):(s[r]=e,r++,!0))),i||(n=e.#Y.slice(r+1),n.every((t=>!(t instanceof RegExp)&&(r++,!0))),e.value=e.formatMask(s.join('')),e.setSelectionRange(r+1,r+1),GSEvent.prevent(t))}#tt(t){const e=this;'range'===e.type&&(e.title=e.value)}#Q(t){const e=this;return'number'===e.type?e.#at(t):e.mask?void 0:'text'===e.type?e.#ot(t):void 0}#at(t){const e=this;e.maxLength>0&&e.value.length>e.maxLength&&(e.value=e.value.substring(0,e.maxLength))}#ot(t){const e=this;e.value=e.#lt(e.value),e.checkValidity()||e.reportValidity()}formatMask(t=''){const e=this,s=t.split(''),r=[];let n=!1;return e.mask.split('').every(((t,i)=>{const a=e.#Y[i];if(GSUtil.isString(a)&&(r.push(a),s[0]===a&&s.shift()),a instanceof RegExp){a.lastIndex=0;const e=s.shift();n=e&&a.test(e),r.push(n?e:t)}return!0})),e.#lt(r.join(''))}#lt(t=''){switch(this.computedStyleMap().get('text-transform').value){case'lowercase':return t.toLocaleLowerCase();case'uppercase':return t.toLocaleUpperCase();case'capitalize':return GSUtil.capitalizeAll(t)}return t}}class GSNavLinkExt extends HTMLAnchorElement{static CSS_TAB_ACTIVE='text-bg-primary';static CSS_TAB_INACTIVE='text-bg-secondary';static{customElements.define('gs-ext-navlink',GSNavLinkExt,{extends:'a'}),Object.seal(GSNavLinkExt),GSDOMObserver.registerFilter(GSNavLinkExt.#N,GSNavLinkExt.#H),GSDOMObserver.registerFilter(GSNavLinkExt.#N,GSNavLinkExt.#q,!0)}static#N(t){let e=t instanceof HTMLElement&&'gs-ext-navlink'!==GSAttr.get(t,'is');if(e){const s=t.classList;e=!t.hasAttribute('ignore')&&(s.contains('nav-link')||s.contains('list-group-item'))}return e}static#H(t){GSNavLinkExt.#B(t)}static#q(t){GSEvent.deattachListeners(t)}constructor(){super()}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),GSNavLinkExt.#B(t)}disconnectedCallback(){GSEvent.deattachListeners(this)}static#B(t){GSEvent.attach(t,t,'click',GSNavLinkExt.#rt.bind(t))}static#rt(t,e){const s=e||this;if('false'===s.dataset.selectable)return GSNavLinkExt.#ct(t,s);const r=GSNavLinkExt.#ut(s),n=GSNavLinkExt.#dt(s),i=GSNavLinkExt.#ht(s),a=GSNavLinkExt.#gt(s);requestAnimationFrame((()=>{n&&n.querySelectorAll('.list-group-item').forEach((t=>GSDOM$1.toggleClass(t,'active',!1))),r&&r.querySelectorAll('.nav-link').forEach((t=>GSDOM$1.toggleClass(t,'active',!1))),i&&i.querySelectorAll('.tab-pane').forEach((t=>GSDOM$1.toggleClass(t,'active show',!1))),GSDOM$1.toggleClass(s,'active',!0),GSDOM$1.toggleClass(a,'active show',!0),GSNavLinkExt.#ct(t,s)}))}static#ct(t,e){const s=GSNavLinkExt.#mt(e),r={type:'active',data:e.dataset,source:t};GSEvent.send(s,'action',r,!0,!0,!0)}static#dt(t){return t.closest('.list-group')}static#ut(t){return t.closest('.nav')}static#ht(t){const e=GSNavLinkExt.#gt(t);return e?e.closest('.tab-content'):null}static#gt(t){const e=GSNavLinkExt.#ut(t),s=t?.dataset.bsTarget;return s?GSNavLinkExt.#mt(e).querySelector(s):null}static#mt(t){const e=GSComponents$1.getOwner(t);return GSDOM$1.unwrap(e)}}class GSDataAttr{static#St='offcanvas|collapse|dropdown|button|tab|pill|popover|modal|dialog|popup';static#pt='offcanvas|modal|alert|popup|dialog';static{GSDOMObserver.registerFilter(GSDataAttr.#N,GSDataAttr.#H),GSDOMObserver.registerFilter(GSDataAttr.#N,GSDataAttr.#q,!0)}static#N(t){return!GSDOM$1.isGSElement(t)&&(!!GSDOM$1.isHTMLElement(t)&&(GSDataAttr.#Gt(t)&&t.classList.add('collapsible'),t.dataset.bsDismiss||t.dataset.bsToggle||t.dataset.inject))}static#H(t){t.id=t.id||GSID.id,GSEvent.attach(t,t,'click',GSDataAttr.#rt.bind(t))}static#q(t){GSEvent.deattachListeners(t)}static#bt(t){if(t)return t.dataset?.bsToggle||t.dataset?.bsDismiss||t.dataset?.inject?t:GSDataAttr.#bt(t.parentElement)}static#rt(t){const e=GSDataAttr.#bt(t.target),s=e?.dataset?.inject,r=e?.dataset?.bsDismiss,n=GSDataAttr.getTarget(e),i=e?.dataset?.bsToggle;GSDataAttr.#ft(e,n,i),GSDataAttr.#At(e,n,r),GSDataAttr.#vt(e,n,s)}static#yt(t,e,s){switch(s){case'alert':case'collapse':case'dropdown':case'modal':case'dialog':case'offcanvas':case'pill':case'popover':case'poup':case'tab':break;case'button':if(!e)return{list:[t],comps:[]};break;case'tooltip':return{list:[],comps:[]}}let r=GSDOM$1.queryAll(document.documentElement,`gs-${s}`);const n=e||`.${s}`;if(e)r=r.filter((t=>t.matches(n)));else if(t=t.closest(n)){const e=r.filter((e=>e.self.firstElementChild===t));return{list:0===e.length?[t]:[],comps:e}}const i=GSDOM$1.queryAll(document.documentElement,n),a=Array.from(document.querySelectorAll(n)),o=i.concat(a).filter((t=>r.indexOf(t)<0)).filter((t=>0===r.filter((e=>e.self.firstElementChild===t)).length));return{list:Array.from(new Set(o)),comps:r}}static#Et(t,e){return t.filter((t=>GSDataAttr.#$t(t,e)))}static#Mt(t){return t.filter((t=>GSDataAttr.#Dt(t)))}static#wt(t,e){return t.filter((t=>!e.includes(t)))}static#$t(t,e){return e.split(' ').filter((t=>t.trim())).map((t=>'button'===t?'btn':t)).filter((e=>t.classList.contains(e))).length>0}static#Dt(t){return(t.classList.contains('hide')||t.classList.contains('fade')||t.classList.contains('collapse'))&&!t.classList.contains('show')}static#Gt(t){return t.classList.contains('collapse')&&!t.classList.contains('accordion-collapse')}static#Ct(t){return t.classList.contains('fade')}static#Ot(t,e,s){GSDOM$1.toggleClass(t,e,!0),GSDOM$1.toggleClass(t,s,!1)}static#xt(t){const e=GSDataAttr.#Gt(t)?'':'fade';GSDataAttr.#Ot(t,e,'show')}static#Tt(t){const e=GSDataAttr.#Gt(t)?'gsanim':'fade';GSDataAttr.#Ot(t,'show',e)}static#kt(t,e){const s=GSDataAttr.#Et(t.list,e),r=GSDataAttr.#Mt(s);GSDataAttr.#wt(s,r).forEach((t=>GSDataAttr.#xt(t))),r.forEach((t=>GSDataAttr.#Tt(t)))}static async#Lt(t){GSDOM$1.toggleClass(t,'show',!1),GSDataAttr.#Ct(t)&&await GSUtil.timeout(GSDOM$1.SPEED),t.remove()}static#Ft(t){t.list.forEach((t=>GSDataAttr.#Lt(t)))}static#vt(t,e,s){if(!s)return;const r=s.toLowerCase().startsWith('gs-'),n=GSDOM$1.queryAll(document.documentElement,e),i=r?`<${s}></${s}>`:`<gs-template href="${s}" class="${t?.dataset?.css||''}"></gs-template>`;n.forEach((t=>GSDOM$1.setHTML(t,i)))}static#ft(t,e,s){if(!GSDataAttr.#It(s))return;const r=GSDataAttr.#yt(t,e,s);r.comps.filter((t=>GSFunction.isFunction(t.toggle))).forEach((e=>e.toggle(t))),GSDataAttr.#Nt(t,e,s,r),GSDataAttr.#kt(r,s),GSDataAttr.#Ht(t,e,s,r)}static#Nt(t,e,s,r){return GSDataAttr.#qt(t,e,s,r,!0)}static#Ht(t,e,s,r){return GSDataAttr.#qt(t,e,s,r,!1)}static#qt(t,e,s,r,n){switch(s){case'button':break;case'collapse':n?r.list.filter((t=>t.classList.contains('accordion-collapse'))).forEach((t=>{Array.from(t.closest('.accordion').querySelectorAll('.accordion-collapse')).filter((e=>e!=t&&GSAttr.get(e,'data-bs-parent'))).forEach((t=>GSDOM$1.toggleClass(t,'show',!1)))})):GSDOM$1.toggleClass(t,'collapsed',null);break;case'dropdown':n?r.list=r.list.map((t=>t.querySelector('.dropdown-menu'))).filter((t=>null!=t)):(r.list.forEach((t=>t.classList.toggle('show'))),r.list.filter((t=>t.classList.contains('show'))).forEach((t=>GSDataAttr.#Bt(t))))}}static#Bt(t){GSEvent.once(t,null,'mouseleave',(e=>t.classList.remove('show')))}static#At(t,e,s){if(!GSDataAttr.#Pt(s))return;const r=GSDataAttr.#yt(t,e,s);switch(r.comps.filter((t=>GSFunction.isFunction(t.close))).forEach((t=>t.close())),r.comps.filter((t=>GSFunction.isFunction(t.dismiss))).forEach((t=>t.dismiss())),s){case'alert':GSDataAttr.#Ft(r,s);break;case'modal':case'offcanvas':case'popup':GSDataAttr.#kt(r,s)}}static#Pt(t){return t&&GSDataAttr.#pt.includes(t)}static#It(t){return t&&GSDataAttr.#St.includes(t)}static getTarget(t){const e=t?.dataset?.bsTarget||GSAttr.get(t,'href');return'#'===e?'':e}static getDismiss(t){return t?.dataset?.bsDismiss||''}static getToggle(t){return t?.dataset?.bsToggle||''}static getInject(t){return t?.dataset?.inject||''}static isDismiss(t){return!!t?.dataset?.bsDismiss}static isToggle(t){return!!t?.dataset?.bsToggle}}class GSData{static uniqe(t){return Array.from(new Set(t))}static arraysEqual(t,e){if(t===e)return!0;if(!Array.isArray(t))return!1;if(!Array.isArray(e))return!1;t.sort(),e.sort();for(var s=0;s<t.length;++s)if(t[s]!==e[s])return!1;return!0}static mergeArrays(t=[],e=[]){return t.concat(e).filter(((t,e,s)=>s.indexOf(t)===e))}static filterData(t,e,s){return 0===t.length?e:e.filter((e=>GSData.filterRecord(e,t,s)))}static filterRecord(t,e,s){return'string'==typeof e?GSData.filterSimple(t,e,s):GSData.filterComplex(t,e)}static filterSimple(t,e='',s){e=e.toLowerCase(),s=s||Object.keys(t);let r=null;for(let n of s)if(r=t[n],(''+r).toString().toLowerCase().includes(e))return!0;return!1}static filterComplex(t,e){let s=!0,r=null;for(let n of e)if(r=n?.value?.toLowerCase(),s=s&&(''+t[n.name]).toLocaleLowerCase().includes(r),!s)break;return s}static sortData(t,e){return 0===t.length?e:e.sort(((e,s)=>GSData.sortPair(e,s,t)))}static sortPair(t,e,s){const r=Array.isArray(t);let n=0;return s.forEach(((s,i)=>{if(!s)return;const a=s.col||i,o=r?a:s.name,l=t[o],c=e[o];n=GSData.compare(l,c,s.ord,n)})),n}static compare(t,e,s,r){return GSUtil.isNumber(t)&&GSUtil.isNumber(e)?r||GSData.compareNum(t,e,s):GSUtil.isString(t)||GSUtil.isString(e)?r||GSData.compareString(t,e,s):r}static compareString(t,e,s){const r=(t||'').toString(),n=(e||'').toString();return s<0?n.localeCompare(r):r.localeCompare(n)}static compareNum(t,e,s){return s<0?e-t:t-e}static{Object.seal(GSData)}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((s=>{s.brand.toLowerCase().includes(e)&&(t=!0)})),t}const s=navigator.userAgent.toLocaleLowerCase(),r=s.indexOf('edg')>0;return!(!r||!e.startsWith('edg'))||!r&&s.indexOf(e)>0}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSElement extends HTMLElement{#jt=!1;#Rt=!1;#Ut=null;#zt=null;#Vt=!1;#_t=null;static{customElements.define('gs-element',GSElement)}constructor(){super()}static observeAttributes(t){return GSData.mergeArrays(t,GSElement.observedAttributes)}static get observedAttributes(){return['orientation','id']}get clazzName(){return this.constructor.name}get template(){return GSAttr.get(this,'template','')}set template(t){GSAttr.set(this,'template',t)}get isFlat(){return GSUtil.FLAT||GSAttr.getAsBool(this,'flat')}get isProxy(){return this.#Vt}get proxy(){return GSAttr.get(this,'proxy',!1)}get environment(){return GSAttr.get(this,'environment','')}set environment(t){GSAttr.set(this,'environment',t)}get os(){return GSAttr.get(this,'os','')}set os(t){GSAttr.set(this,'os',t)}get browser(){return GSAttr.get(this,'browser','')}set browser(t){GSAttr.set(this,'browser',t)}get protocol(){return GSAttr.get(this,'protocol','')}set protocol(t){GSAttr.set(this,'protocol',t)}get orientation(){return GSAttr.get(this,'orientation','')}set orientation(t){GSAttr.set(this,'orientation',t)}get onready(){return GSAttr.get(this,'onready','')}set onready(t){GSAttr.set(this,'onready',t)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get owner(){return GSComponents$1.getOwner(this)}get offline(){return this.#Rt}get online(){return!this.#Rt}get ready(){return this.#jt}get anchor(){const t='beforeend@self';return this.proxy?t:GSAttr.get(this,'anchor',t)}get self(){const t=this;return t.isProxy&&t.#Ut instanceof GSElement?t.#Ut.self:t.#Ut}updateUI(){const t=this;t.shadowRoot&&(t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles,GSEvent.send(document.body,'i18n',t.shadowRoot))}getStyle(){return GSAttr.get(this,'style','')}getByID(t=''){return GSDOM$1.getByID(this,t)}closest(t=''){return GSDOM$1.closest(this,t)}query(t='',e=!1){const s=this,r=GSDOM$1.query(s.self,t,e,!0);return s.isProxy||r?r:GSDOM$1.query(s,t,e,!1)}queryAll(t='',e=!1){const s=this,r=GSDOM$1.queryAll(s.self,t,e,!0);return s.isProxy||r.length>0?r:GSDOM$1.queryAll(s,t,e,!1)}async getTemplate(t=''){return GSLoader.getTemplate(t)}hide(t=!1){GSDOM$1.hide(this,t)}show(t=!1){GSDOM$1.show(this,t)}async waitEvent(t=''){if(!t)throw new Error('Event undefined!');const e=this;return new Promise(((s,r)=>{e.once(t,(t=>s(t.detail)))}))}once(t,e){return this.listen(t,e,!0)}on(t,e,s=!1){return this.listen(t,e,s)}off(t,e){return this.unlisten(t,e)}listen(t,e,s=!1){return this.attachEvent(this,t,e,s)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',s,r=!1){return GSEvent.attach(this,t,e,s,r)}removeEvent(t,e='',s){return GSEvent.remove(this,t,e,s)}get isAllowRender(){const t=this;return t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS&&t.isValidProtocol}connectedCallback(){const t=this;if(!t.#Wt()){if(!t.isAllowRender)return t.remove();t.id||(t.id=GSID.id),t.#_t=t.#Yt(),t.#Vt=t.#_t.ref,GSComponents$1.store(t),requestAnimationFrame((()=>t.#Jt()))}}disconnectedCallback(){const t=this;t.#Rt=!0,t.#zt&&t.#zt.disconnect(),GSComponents$1.remove(t),GSEvent.deattachListeners(t),t.#Xt(),t.#zt=null,t.#Ut=null,t.#_t=null}attributeChangedCallback(t,e,s){const r=this;'orientation'===t&&r.#Kt(),'id'===t&&(GSComponents$1.remove(e),GSComponents$1.store(r)),r.#jt&&GSUtil.requestAnimationFrame((()=>{r.attributeCallback(t,e,s)}))}attributeCallback(t,e,s){}onReady(){const t=this;if(t.offline)return;t.#jt=!0;const e=GSFunction.parseFunction(t.onready);GSFunction.callFunction(e),GSEvent.send(document.body,'componentready',t)}#Kt(t){const e=this;GSUtil.requestAnimationFrame((()=>{e.offline||(e.isValidOrientation?e.show(!0):e.hide(!0))}))}#Wt(){const t=GSComponents$1.getOwner(this,GSElement);return t&&t.isProxy}#Zt(){const t=this;GSUtil.requestAnimationFrame((()=>{t.updateUI()}))}get#Qt(){const t=this;return t.shadowRoot||(t.attachShadow({mode:'open'}),t.#zt=GSDOMObserver.create(t.#Qt),t.updateUI()),t.shadowRoot}get#te(){const t=this;return t.#Vt&&t.isFlat||!t.#Vt}async#ee(){const t=this;if(t.offline)return;const e=t.#te,s=e?await t.getTemplate(t.template):t.outerHTML;await GSEvent.waitAnimationFrame((()=>{if(t.offline)return;const r=t.#_t;if(t.#Vt)return e?t.#Ut=GSDOM$1.parseWrapped(t,s,!0):(t.#Ut=GSDOM$1.parse(s,!0),t.#Ut.id=t.id,t.id=GSID.id),GSDOM$1.link(t,t.#Ut),void GSDOM$1.insertAdjacent(r.target,t.#Ut,r.anchor);if(r.target!==t){if(r.target===t.parentElement)return t.#Ut=t.isFlat?t:t.#Qt,void GSDOM$1.setHTML(t.#Ut,s);t.#Ut=GSDOM$1.parseWrapped(t,s,!0),GSDOM$1.link(t,t.#Ut),GSDOM$1.insertAdjacent(r.target,t.#Ut,r.anchor)}else if(t.isFlat)if(s){const e=GSDOM$1.parseWrapped(t,s,!1);t.#Ut=e,GSDOM$1.insertAdjacent(r.target,e,r.anchor)}else t.#Ut=t;else t.#Ut=t.#Qt,GSDOM$1.setHTML(t.#Ut,s)})),t.updateUI()}#Yt(){const t=this,e=t.anchor,s=e.indexOf('@');let r=s>0?e.slice(0,s):e,n=s>0?e.slice(s+1):'self';'self'!==r&&'parent'!==r||(n=n||r,r=null),r=GSUtil.normalize(r,'beforeend'),n=GSUtil.normalize(n,'self');let i=null;switch(n){case'self':i=t;break;case'parent':i=t.parentElement;break;default:i=GSDOM$1.query(document.documentElement,n)}if(!i){const e=`Injection point not available!\nElement: ${t.tagName}, Id:${t.id}, tgt:${n}`;throw GSLog.error(t,e),new Error(e)}return{anchor:r,target:i,ref:!(i===t||i===t.parentElement)}}#Xt(){const t=this;t.#Ut&&t.#Ut.remove&&(t.#Ut.remove(),t.#Ut=null)}async#Jt(){const t=this;await t.#ee(),t.offline||t.#te&&(t.isFlat||t.attachEvent(document,'gs-style',t.#Zt.bind(t)),t.attachEvent(screen.orientation,'change',t.#Kt.bind(t)),GSUtil.requestAnimationFrame((()=>t.onReady())))}}class GSTimeFormat extends GSElement{#t=0;static get observedAttributes(){return['interval']}attributeChanged(t='',e='',s=''){const r=this;r.stop(),r.start(),r.#se()}onReady(){super.onReady();this.#se(),this.start()}disconnectedCallback(){this.stop()}#se(){const t=this,e=new Date,s=e.toLocaleTimeString(t.locale);return GSDOM$1.setHTML(t.self,s),GSEvent.send(t,'time',{date:e},!0,!0),0}start(){const t=this;t.#t=t.interval>0?setInterval(t.#se.bind(t),1e3*t.interval):t.#se()}stop(){clearInterval(this.#t)}get isFlat(){return!0}get interval(){return GSAttr.getAsNum(this,'interval',1)}set interval(t=60){return GSAttr.setAsNum(this,'interval',t)}get locale(){return GSAttr.get(this,'locale',GSUtil.locale)}set locale(t=''){return GSAttr.set(this,'locale',t)}static{customElements.define('gs-time-format',GSTimeFormat),Object.seal(GSTimeFormat)}}class GSDate extends Date{static DEFAULT_FORMAT='YYYY-MM-DDTHH:mm:ssZ';static REGEX_FORMAT=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;#re=navigator.locale;format(t=GSDate.DEFAULT_FORMAT,e){this.locale=e;const s=this.asJSON();return t.replace(GSDate.REGEX_FORMAT,((t,e)=>e||s[t]))}build(){const t=this,e=t.last.getDate(),s=t.first.getDay(),r=t.#ne(),n=0===s?[]:' '.repeat(s+(r?-2:-1)).split(' ');let i=1;for(;i<=e;)n.push(i.toString()),i++;for(;n.length%7!=0;)n.push('');return n}get locale(){return this.#re}set locale(t){this.#re=t||navigator.language}get year(){return this.getFullYear()}set year(t=0){this.setFullYear(t)}get month(){return this.getMonth()}set month(t=0){this.setMonth(t)}get day(){return this.getDate()}set day(t=0){this.setDate(t)}get first(){return new GSDate(this.getFullYear(),this.getMonth(),1)}get last(){return new GSDate(this.getFullYear(),this.getMonth()+1,0)}get YY(){return String(this.YYYY).slice(-2)}get YYYY(){return this.getFullYear()}get M(){return this.getMonth()+1}get MM(){return this.M.toString().padStart(2,'0')}get MMM(){return this.#ie({month:'short'})}get MMMM(){return this.#ie({month:'long'})}get D(){return this.getDate().toString()}get DD(){return this.D.padStart(2,'0')}get d(){return this.getDay().toString()}get dd(){return this.ddd.slice(0,2)}get ddd(){return this.#ie({weekday:'short'})}get dddd(){return this.#ie({weekday:'long'})}get H(){return this.getHours().toString()}get HH(){return this.H.padStart(2,'0')}get h(){return this.#ae(1)}get hh(){return this.#ae(2)}get a(){return this.#oe(!0)}get A(){return this.#oe(!1)}get m(){return this.getMinutes().toString()}get mm(){return this.m.padStart(2,'0')}get s(){return this.getSeconds().toString()}get ss(){return this.s.padStart(2,'0')}get SSS(){return this.getMilliseconds().toString().padStart(3,'0')}get Z(){return this.#le()}get ZZ(){return this.Z.replace(':','')}get Q(){return Math.ceil(this.M/3)}get k(){return(this.getHours()+1).toString()}get kk(){return this.k.padStart(2,'0')}get W(){const t=new Date(this.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)}get WW(){return this.W.toString().padStart(2,'0')}get x(){return this.getTime()}get X(){return Math.floor(this.x/1e3)}asJSON(){const t=this;return{YY:t.YY,YYYY:t.YYYY,M:t.M,MM:t.MM,MMM:t.MMM,MMMM:t.MMMM,D:t.D,DD:t.DD,d:t.d,dd:t.dd,ddd:t.ddd,dddd:t.dddd,H:t.H,HH:t.HH,h:t.h,hh:t.hh,a:t.a,A:t.A,m:t.m,mm:t.mm,s:t.s,ss:t.ss,SSS:t.SSS,Z:t.Z,ZZ:t.ZZ,Q:t.Q,k:t.k,kk:t.kk,W:t.W,WW:t.WW,x:t.x,X:t.X}}static monthList(t=!1,e=navigator.locale,s=!0){const r=new GSDate;r.locale=e,r.setMonth(0);const n=[];let i=null,a=12;for(;a--;)i=t?r.MMM:r.MMMM,i=s?r.#ce(i):i,n.push(i),r.setMonth(r.getMonth()+1);return n}static dayList(t=!1,e=navigator.locale,s=!0){const r=new GSDate;r.locale=e;const n=r.#ne()?1:0;r.setDate(r.getDate()-r.getDay()+n);const i=[];let a=null,o=7;for(;o--;)a=t?r.ddd:r.dddd,a=s?r.#ce(a):a,i.push(a),r.setDate(r.getDate()+1);return i}#ne(){return 1===new Intl.Locale(this.#re)?.weekInfo?.firstDay}#ce(t=''){return t.charAt(0).toUpperCase()+t.slice(1)}#ie(t){return this.toLocaleString(this.#re,t)}#ae(t){return(this.getHours()%12||12).toString().padStart(t,'0')}#oe(t){const e=this.#ie({hour:'2-digit',hour12:!0}).split(' ').pop(-1);return t?e.toLowerCase():e}#le(){const t=-1*this.getTimezoneOffset(),e=Math.abs(t),s=e%60;return`${t<=0?'+':'-'}${Math.floor(e/60).toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`}}class GSDateFormat extends HTMLElement{static observedAttributes=['value','locale','format'];#t=0;connectedCallback(){this.#se()}attributeChangedCallback(t='',e='',s=''){this.#se()}#se(){const t=this;t.#t>0||(t.#t=setTimeout((()=>{GSDOM$1.setHTML(t,t.result),t.#t=0}),50))}get result(){const t=this,e=t.value;return t.format?e.format(t.format):new Intl.DateTimeFormat(t.locale,t.dataset).format(e)}get format(){return GSAttr.get(this,'format')}set format(t=''){return GSAttr.set(this,'format',t)}get value(){const t=Date.parse(GSAttr.get(this,'value')),e=new GSDate(t);return e.locale=this.locale,e}set value(t=''){GSAttr.set(this,'value',t)}get locale(){return GSAttr.get(this,'locale',navigator.locale)}set locale(t=''){GSAttr.set(this,'locale',t)}static{customElements.define('gs-date-format',GSDateFormat),Object.seal(GSDateFormat)}}class GSYearFormat extends HTMLElement{static observedAttributes=['offset'];connectedCallback(){this.#se()}attributeChangedCallback(t='',e='',s=''){this.#se()}#se(){GSDOM$1.setHTML(this,this.value)}get value(){return this.current+this.offset}get current(){return(new Date).getFullYear()}get offset(){return GSAttr.getAsNum(this,'offset',0)}set offset(t='0'){GSAttr.setAsNum(this,'offset',t)}static{customElements.define('gs-year-format',GSYearFormat),Object.seal(GSYearFormat)}}class GSCurrencyFormat extends HTMLElement{static observedAttributes=['value','locale','currency'];#t=0;connectedCallback(){this.#se()}attributeChangedCallback(t='',e='',s=''){this.#se()}#se(){const t=this;t.#t>0||(t.#t=setTimeout((()=>{GSDOM$1.setHTML(t,t.format),t.#t=0}),50))}get#ue(){return Object.apply(this.dataset,{style:'currency',currency:this.currency})}get format(){const t=this;return new Intl.NumberFormat(t.locale,t.#ue).format(t.value)}get value(){return GSAttr.getAsNum(this,'value',0)}set value(t=''){GSAttr.setAsNum(this,'value',t)}get locale(){return GSAttr.get(this,'locale',navigator.language)}set locale(t=''){GSAttr.set(this,'locale',t)}get currency(){return GSAttr.get(this,'currency','')}set currency(t=''){GSAttr.set(this,'currency',t)}static{customElements.define('gs-currency-format',GSCurrencyFormat),Object.seal(GSCurrencyFormat)}}class GSItem extends HTMLElement{static#de='data-bs-dismiss';static#he='data-bs-target';static#kt='data-bs-toggle';static#ge='data-action';static#me='data-inject';static#Se='data-selectable';static#pe=['GS-ITEM','TEMPLATE'];static{customElements.define('gs-item',GSItem),Object.seal(GSItem)}constructor(){super(),GSItem.validate(this)}static validate(t,e='GS-ITEM'){return GSDOM$1.validate(t,e,GSItem.#pe)}static getBody(t,e=!1){let s=GSItem.getTemplate(t);const r=GSItem.getFlat(t),n=GSItem.getAnchor(t),i=r||e?`anchor="${n}" flat="true"`:'',a=GSAttr.get(t,'css-template','');return s?`<gs-template ${i} href="${s}" class="${a}"></gs-template>`:(s=t.querySelector('template'),s?.innerHTML||'')}static genericItems(t){return GSDOM$1.isHTMLElement(t)?Array.from(t.children).filter((t=>'GS-ITEM'==t.tagName)):[]}static generateItem(t=''){return GSUtil.isJsonType(t)?Array.isArray(t)?GSItem.#Ge(t):GSItem.#be(t):''}static#fe(t){return GSUtil.isNumber(t)||GSUtil.isStringNonEmpty(t)}static#Ge(t){return t.map((t=>GSItem.#be(t))).join('\n')}static#be(t){return`<gs-item ${GSItem.#Ae(t)}>${Array.isArray(t.items)?GSItem.generateItem(t.items):''}</gs-item>`}static#Ae(t){return Object.entries(t).filter((t=>GSItem.#fe(t[1]))).map((t=>`${t[0]}="${t[1]}"`)).join(' ')}static getAttrs(t){return[GSItem.getDismissAttr(t),GSItem.getTargetAttr(t),GSItem.getToggleAttr(t),GSItem.getActionAttr(t),GSItem.getInjectAttr(t)].join(' ')}static getDismissAttr(t){const e=GSItem.getDismiss(t);return e?`${GSItem.#de}="${e}"`:''}static getTargetAttr(t){const e=GSItem.getTarget(t);return e?`${GSItem.#he}="${e}"`:''}static getToggleAttr(t){const e=GSItem.getToggle(t);return e?`${GSItem.#kt}="${e}"`:''}static getActionAttr(t){const e=GSItem.getAction(t);return e?`${GSItem.#ge}="${e}"`:''}static getInjectAttr(t){const e=GSItem.getInject(t);return e?`${GSItem.#me}="${e}"`:''}static getSelectableAttr(t){const e=GSItem.getSelectable(t);return e?'':`${GSItem.#Se}="${e}"`}static getActive(t){return GSAttr.getAsBool(t,'active')}static getAction(t){return GSAttr.get(t,'action')}static getDismiss(t){return GSAttr.get(t,'dismiss')}static getTarget(t){return GSAttr.get(t,'target')}static getToggle(t){return GSAttr.get(t,'toggle')}static getInject(t){return GSAttr.get(t,'inject')}static getIcon(t){return GSAttr.get(t,'icon')}static getSelectable(t){return GSAttr.getAsBool(t,'selectable',!0)}static getAnchor(t){return GSAttr.get(t,'anchor','afterend@self')}static getFlat(t){return GSAttr.getAsBool(t,'flat',!1)}static getName(t){return GSAttr.get(t,'name','')}static getHref(t){return GSAttr.get(t,'href','#')}static getCSS(t){return GSAttr.get(t,'css','')}static getTemplate(t){return GSAttr.get(t,'template','')}get dismissAttr(){return GSItem.getDismissAttr(this)}get targetAttr(){return GSItem.getTargetAttr(this)}get toggleAttr(){return GSItem.getToggleAttr(this)}get actionAttr(){return GSItem.getActionAttr(this)}get injectAttr(){return GSItem.getInjectAttr(this)}get action(){return GSItem.getAction(this)}get dismiss(){return GSItem.getDismiss(this)}get target(){return GSItem.getTarget(this)}get toggle(){return GSItem.getToggle(this)}get inject(){return GSItem.getInject(this)}get selectable(){return GSItem.getSelectable(this)}get flat(){return GSItem.getFlat(this)}get name(){return GSItem.getName(this)}get css(){return GSItem.getCSS(this)}get active(){return GSItem.getActive(this)}get template(){return GSItem.getTemplate(this)}get body(){return GSItem.getBody(el)}static toDom(t,e='gs-item',s='name',r='value',n='type',i=!1){const a=[];return i||a.push('<gs-item type="object">'),Array.isArray(t)?t.forEach(((t,i)=>{const o=typeof t,l=Array.isArray(t);!l&&'object'===o||l?(a.push(`<${e} ${n}="object">`),a.push(GSItem.toDom(t,e,s,r,n,!0))):a.push(`<${e} ${r}="${t}" ${n}="${o}">`),a.push(`</${e}>`)})):Object.entries(t).forEach((t=>{const i=t[0],o=t[1],l=typeof o,c=Array.isArray(o),u=!c&&'object'===l;let d=!1;if(c&&o.length>0){const t=Array.isArray(o[0]),e='object'==typeof o[0];d=!(t||e)}d||c?(a.push(`<${e} ${s}="${i}" ${n}="array">`),a.push(GSItem.toDom(o,e,s,r,n,!0))):u?(a.push(`<${e} ${s}="${i}" ${n}="object">`),a.push(GSItem.toDom(o,e,s,r,n,!0))):a.push(`<${e} ${s}="${i}" ${r}="${o}" ${n}="${l}">`),a.push(`</${e}>`)})),i||a.push('</gs-item>'),a.join('')}static toJson(t,e='name',s='value',r='type'){if(!(t instanceof HTMLElement))return{};const n=t.getAttribute(e),i=t.getAttribute(s),a=t.getAttribute(r);let o=null;switch(a){case'array':o=[];break;case'object':o={};break;default:return GSItem.#ve(i,a)}const l=Array.from(t.children),c='array'===a,u='object'===a;return l.forEach((t=>{const i=t.getAttribute(e);if(c)o.push(GSItem.toJson(t,e,s,r));else if(u){const n=GSItem.toJson(t,e,s,r);o[i]=n}else{const e=t.getAttribute(s),a=t.getAttribute(r);o[n][i]=GSItem.#ve(e,a)}})),o}static#ve(t,e){switch(e){case'boolean':return'true'===t;case'number':return parseFloat(t);default:return t}}}class GSAccordion extends GSElement{static{customElements.define('gs-accordion',GSAccordion),Object.seal(GSAccordion)}static get observedAttributes(){return GSElement.observeAttributes(['css','css-item','css-header','css-body','data'])}attributeCallback(t='',e='',s=''){const r=this;if('data'===t)return r.load(s);let n=null;switch(t){case'css':n='.accordion';break;case'css-item':n='.accordion-item';break;case'css-head':n='.accordion-button';break;case'css-body':n='.accordion-collapse'}n&&r.queryAll(n).forEach((t=>{GSDOM$1.toggleClass(t,e,!1),GSDOM$1.toggleClass(t,s,!0)}))}async getTemplate(t=''){const e=GSID.id,s=await this.#Jt(e);return`<div class="accordion ${this.css}" id="#${e}">${s}</div>`}async#Jt(t){const e=this,s=GSItem.genericItems(e).map((s=>e.#ye(t,s)));return(await Promise.all(s)).join('')}get css(){return GSAttr.get(this,'css','')}set css(t=''){GSAttr.set(this,'css',t)}get cssItem(){return GSAttr.get(this,'css-item','')}set cssItem(t=''){GSAttr.set(this,'css-item',t)}get cssHead(){return GSAttr.get(this,'css-head')}set cssHead(t=''){return GSAttr.set(this,'css-head',t)}get cssBody(){return GSAttr.get(this,'css-body')}set cssBody(t=''){return GSAttr.set(this,'css-body',t)}async#ye(t,e){const s=this,r=GSID.id,n=GSItem.getBody(e),i=s.#Ee(e),a=s.#$e(e),o=s.#Me(e)?`data-bs-parent=#${t}`:'',l=s.#De(e);return`\n       <div class="accordion-item ${s.cssItem}">\n         <slot name="content">\n             <h2 class="accordion-header">\n               <button class="accordion-button ${s.cssHead} ${l?'':'collapsed'}" type="button" data-bs-toggle="collapse" data-bs-target="#${r}">\n                 ${i}\n               </button>\n             </h2>\n             <div class="accordion-collapse collapse ${s.cssBody} ${l?'show':''}" id="${r}" ${o}>\n               <div class="accordion-body">\n                   ${n||a}\n               </div>\n             </div>      \n         </slot>\n     </div>\n     `}#Ee(t){return GSAttr.get(t,'title')}#$e(t){return GSAttr.get(t,'message')}#De(t){return GSAttr.getAsBool(t,'visible',!1)}#Me(t){return GSAttr.getAsBool(t,'autoclose',!0)}async load(t=''){const e=await GSLoader.loadData(t);if(!GSUtil.isJsonType(e))return;const s=this,r=GSItem.generateItem(e);return GSDOM$1.setHTML(s,r),GSEvent.deattachListeners(s),s.connectedCallback(),e}}class GSAlert extends GSElement{#we='<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>';#Ce=!1;static{customElements.define('gs-alert',GSAlert),Object.seal(GSAlert)}static get observedAttributes(){return GSElement.observeAttributes(['css','message','active'])}constructor(){super()}#rt(t){GSEvent.send(this,'action',{type:'alert',source:t},!0),this.dismiss()}onReady(){const t=this,e=t.query('.btn-close');t.attachEvent(e,'click',t.#rt.bind(t)),super.onReady()}attributeCallback(t='',e='',s=''){const r=this,n=r.firstElementChild;'message'==t&&GSDOM$1.setHTML(n,r.message),'css'==t&&(GSDOM$1.toggleClass(n,e,!1),GSDOM$1.toggleClass(n,s,!0)),'active'==t&&GSDOM$1.toggleClass(n,activeCSS,!r.#Ce)}get template(){const t=this;return`\n        <div class="alert ${t.css}" style="${this.getStyle()}" role="class">\n            <slot>${t.message}</slot>\n            ${t.dismissible?t.#we:''}\n        </class>`}get css(){const t=this.dismissible?'alert-dismissible fade show':'';return GSAttr.get(this,'css')+` ${t}`}set css(t=''){return GSAttr.set(this,'css',t)}get activeCSS(){return GSAttr.get(this,'css-active','d-none')}set activeCSS(t=''){return GSAttr.get(this,'css-active',t)}get message(){return GSAttr.get(this,'message')}set message(t=''){return GSAttr.set(this,'message',t)}get dismissible(){return GSAttr.getAsBool(this,'dismissible',!1)}set dismissible(t=''){return GSAttr.set(this,'dismissible',GSUtil.asBool(t))}async#de(){return GSDOM$1.toggleClass(this.query('.alert'),'show',!1),await GSUtil.timeout(GSDOM$1.SPEED),this.remove()}dismiss(){return this.#de()}toggle(){this.active=!this.active}get isFlat(){return GSAttr.getAsBool(this,'flat',!0)}get anchor(){return'self'}}class GSButton extends GSElement{#Ce=!1;static{customElements.define('gs-button',GSButton),Object.seal(GSButton)}static get observedAttributes(){return GSElement.observeAttributes(['css','dismiss','target','toggle','title','active','disable'])}constructor(){super()}#rt(t){const e=this;if(e.disable)return!1;GSEvent.send(e,'action',{type:'button',action:e.action,source:t},!0,!0,!0),e.active&&(e.#Ce=!e.#Ce,GSDOM$1.toggleClass(e.firstElementChild,'active',e.#Ce)),e.select||e.#Oe?.blur()}onReady(){const t=this;t.attachEvent(t.#Oe,'click',t.#rt.bind(t)),super.onReady()}attributeCallback(t='',e='',s=''){const r=this.firstElementChild;this.#se(t,e,s),GSAttr.set(r,`data-bs-${t}`,s)}get#Oe(){return this.query('button')}#se(t='',e='',s=''){const r=this,n=r.firstElementChild;return'title'==t?GSDOM$1.setHTML(n,r.title):('css'==t&&(GSDOM$1.toggleClass(n,e,!1),GSDOM$1.toggleClass(n,s,!0)),'active'==t?GSDOM$1.toggleClass(n,'active',r.#Ce):'disable'==t?GSAttr.set(r.firstElementChild,'disabled',GSUtil.asBool(s)?s:null):void 0)}get template(){const t=this,e=t.disable?'disabled':'',s=`${t.icon?`<i class="${t.icon}"></i>`:''} ${t.title}`,r=GSItem.getActionAttr(t),n=GSItem.getDismissAttr(t),i=GSItem.getTargetAttr(t),a=GSItem.getToggleAttr(t);return`<button type="${t.type}" class="btn ${t.css}" ${r} ${a} ${i} ${n} ${e} title="${t.comment}" role="tooltip">${s}</button>`}get css(){const t=this.#Ce?'active':'';return GSAttr.get(this,'css')+` ${t}`}set css(t=''){return GSAttr.set(this,'css',t)}get action(){return GSAttr.get(this,'action')}set action(t=''){return GSAttr.set(this,'action',t)}get dismiss(){return GSAttr.get(this,'dismiss')}set dismiss(t=''){return GSAttr.set(this,'dismiss',t)}get icon(){return GSAttr.get(this,'icon')}set icon(t=''){return GSAttr.set(this,'icon',t)}get target(){return GSAttr.get(this,'target')}set target(t=''){return GSAttr.set(this,'target',t)}get toggle(){return GSAttr.get(this,'toggle')}set toggle(t=''){return GSAttr.set(this,'toggle',t)}get comment(){return GSAttr.get(this,'comment')}set comment(t=''){return GSAttr.set(this,'comment',t)}get title(){return GSAttr.get(this,'title')}set title(t=''){return GSAttr.set(this,'title',t)}get active(){return GSAttr.getAsBool(this,'active',!1)}set active(t=''){return this.#Ce=GSUtil.asBool(t),GSAttr.set(this,'active',this.#Ce)}get disable(){return GSAttr.getAsBool(this,'disable',!1)}set disable(t=''){return GSAttr.getAsBool(this,'disable',t)}get select(){return GSAttr.getAsBool(this,'select',!0)}set select(t=''){return GSAttr.setAsBool(this,'select',t)}get type(){return GSAttr.get(this,'type','button')}set type(t=''){return GSAttr.set(this,'type',t)}toggle(){this.active=!this.active}get isFlat(){return!0}get anchor(){return'self'}}class GSCenter extends GSElement{static{customElements.define('gs-center',GSCenter),Object.seal(GSCenter)}static get observedAttributes(){return GSElement.observeAttributes(['css'])}attributeCallback(t='',e='',s=''){if('css'===t){const t=this.query('div');GSDOM$1.toggleClass(t,e,!1),GSDOM$1.toggleClass(t,s,!0)}}async getTemplate(){return`<div class="position-absolute top-50 start-50 translate-middle ${this.css}" style="${this.getStyle()}"><slot></slot></div>`}get css(){return GSAttr.get(this,'css','')}set css(t=''){return GSAttr.set(this,'css',vel)}}class GSContext extends GSElement{#xe=null;#Te=!1;#jt=!1;#ke=!1;static{customElements.define('gs-context',GSContext),Object.seal(GSContext)}static get observedAttributes(){return GSElement.observeAttributes(['visible','title','css','data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){const r=this;if('data'===t)return this.load(s);if('visible'===t){r.#Le.forEach((t=>t.classList.remove('show')));const t=r.#Fe;t&&GSDOM$1.toggleClass(t,'show',r.visible)}}async getTemplate(t=''){return!t&&this.childElementCount>0?this.#Ie():super.getTemplate(t)}connectedCallback(){super.connectedCallback();this.#Te=!0}disconnectedCallback(){this.#Te=!1,super.disconnectedCallback()}onReady(){const t=this;t.#jt||(t.#jt=!0,t.close(),t.attachEvent(document,'gs-component',t.#Ne.bind(t)),t.attachEvent(t.#Fe,'mouseleave',t.close.bind(t)),t.attachEvent(window,'resize',t.#He.bind(t)),t.#qe(),t.#Be(),t.#Ne(),super.onReady())}reattach(){const t=this;t.#ke=!1,t.removeEvent(document,'contextmenu'),GSDOM$1.queryAll(document.documentElement,t.target).forEach((e=>t.removeEvent(e,'contextmenu'))),t.#Ne()}get isFlat(){return this.parentElement!==document.body}get anchor(){return'beforeend@body'}get visible(){return GSAttr.getAsBool(this,'visible')}set visible(t=''){return GSAttr.setAsBool(this,'visible',t)}get disabled(){return GSAttr.getAsBool(this,'disabled')}set disabled(t=''){return GSAttr.setAsBool(this,'disabled',t)}get dark(){return GSAttr.getAsBool(this,'dark')}get target(){return GSAttr.get(this,'target')}close(t){t instanceof Event&&t.preventDefault(),this.visible=!1}open(){this.visible=!0}toggle(){this.visible=!this.visible}popup(t=0,e=0){const s=this;if(s.disabled)return;const r=s.#Fe;r&&requestAnimationFrame((()=>{r.style.position='fixed',r.style.top='0px',r.style.left='0px',r.style.transform=`translate(${t}px, ${e}px)`,s.visible=!0}))}createMenu(t=[]){if(!Array.isArray(t))return!1;if(0===t.length)return!1;const e=this,s=e.#Pe(t);return GSDOM$1.setHTML(e.#Fe,s.join('')),e.#Be(),e.#qe(),!0}#Pe(t=[]){const e=this,s=e.dark?'dropdown-menu-dark':'',r=[];return t.forEach((t=>{if('-'===t)return r.push('<li><hr class="dropdown-divider"/></li>');const n=Array.isArray(t.menu);if(r.push('<li>'),r.push('<a class="dropdown-item" href="#"'),t.action&&r.push(` data-action="${t.action}"`),r.push(`>${t.name} ${n?'&raquo;':''}</a>`),n){const n=e.#Pe(t.menu);r.push(`<ul class="submenu dropdown-menu ${s}">`),r.push(n.join('\n')),r.push('</ul>')}r.push('</li>')})),r}get#Fe(){return this.query('.dropdown-menu')}get#je(){return this.queryAll('.dropdown-item',!0)}get#Le(){return this.queryAll('.submenu',!0)}#He(t){this.close()}#Re(t){GSEvent.prevent(t);const e=this;e.#xe=t.target;const s=e.#Fe?.getBoundingClientRect();if(!s)return;let r=t.clientX,n=t.clientY;const i=r+s.width>window.innerWidth,a=n+s.height>window.innerHeight;return i&&(r=window.innerWidth-s.width),a&&(n=window.innerHeight-s.height),e.#Ue(a,i),e.popup(r,n),!0}#Ue(t=!1,e=!1){const s=this;requestAnimationFrame((()=>{s.#Le.forEach((t=>{t.style.position='absolute',t.style.left='inherit',t.style.right='inherit',t.style.top='inherit',e?t.style.right='100%':t.style.left='100%'}))}))}#Be(){const t=this;t.#je.filter((t=>t.dataset.action)).forEach((e=>t.attachEvent(e,'click',t.#rt.bind(t))))}#rt(t){const e=this;t.preventDefault(),e.close();const s=t.target.dataset,r={type:'contextmenu',option:t.target,caller:e.#xe,data:s};GSEvent.send(e,'action',r,!0,!0,!0)}#ze(t){const e=t.target.parentElement,s=e.parentElement,r=GSDOM$1.query(e,'.submenu');requestAnimationFrame((()=>{GSDOM$1.queryAll(s,'.submenu').forEach((t=>t.classList.remove('show'))),r&&(r.style.top=`${r.parentElement.offsetTop}px`,r.classList.add('show'))}))}#qe(){const t=this;t.#je.forEach((e=>t.attachEvent(e,'mouseover',t.#ze.bind(t))))}async#Ne(){const t=this;if(!t.target)return;if(t.#ke)return;const e=GSDOM$1.queryAll(document.documentElement,t.target);0!==e.length?(t.#ke=!0,e.forEach((e=>t.attachEvent(e,'contextmenu',t.#Re.bind(t)))),t.removeEvent(document,'gs-components'),t.attachEvent(document,'contextmenu',t.close.bind(t))):t.#Te&&(await GSUtil.timeout(1e3),requestAnimationFrame((()=>{t.#Ne()})))}#Ie(t,e=0){const s=this;t=t||s.children;const r=[],n=0===e?'position-fixed':'submenu';return r.push(`<ul class="${n} dropdown-menu ${s.dark?'dropdown-menu-dark':''}">`),Array.from(t).forEach((t=>{const i=t.childElementCount>0;i&&r.push(s.#Ve(t));const a=i?s.#Ie(t.children,++e):s.#_e(t);r.push(a),n&&r.push('</li>')})),r.push('</ul>'),r.join('')}#Ve(t){return`<li><a class="dropdown-item" href="#">${GSAttr.get(t,'name')} &raquo; </a>`}#_e(t){const e=GSAttr.get(t,'name'),s=GSAttr.get(t,'action'),r=GSAttr.get(t,'header');return r?`<li><h6 class="dropdown-header"/>${r}</h6></li>`:e?s?`<li><a class="dropdown-item" href="#" data-action="${s}">${e}</a></li>`:'':'<li><hr class="dropdown-divider"/></li>'}async load(t=''){const e=await GSLoader.loadData(t);if(!GSUtil.isJsonType(e))return;const s=this,r=GSItem.generateItem(e);return GSDOM$1.setHTML(s,r),GSEvent.deattachListeners(s),s.connectedCallback(),e}}class GSDialog extends GSElement{static CSS='rounded shadow-sm';static HEADER_CSS='p-3';static TITLE_CSS='fs-5 fw-bold text-muted';static#I=['ok','cancel'];static{customElements.define('gs-dialog',GSDialog),Object.seal(GSDialog)}static get observedAttributes(){return GSElement.observeAttributes(['cancelable','closable','title','visible'])}attributeCallback(t='',e='',s=''){const r=this;r.#se(),'visible'===t&&(r.visible?(r.#We.open||r.#We.showModal(),r.focusable()?.focus()):r.#We.close(),GSEvent.send(r,'visible',{type:'dialog',ok:r.visible},!0,!0))}onReady(){const t=this;t.attachEvent(t,'click',t.#rt.bind(t)),t.attachEvent(t,'action',t.#rt.bind(t)),t.attachEvent(t,'form',t.#Ye.bind(t)),t.attachEvent(t.#We,'keydown',t.#Je.bind(t)),super.onReady(),t.visible&&t.open()}#Ye(t){GSEvent.prevent(t);GSEvent.send(this,'data',{type:'dialog',data:t.detail.data,evt:t},!0,!0,!0)&&this.close()}#Je(t){if(!this.cancelable&&'Escape'===t.key)return GSEvent.prevent(t)}#rt(t){const e=this,s=e.#Xe(t);if(!s)return;const r='ok'===s,n=GSDOM$1.queryAll(e,'form');if(r&&n.length>0){const t=n.filter((t=>0==t.checkValidity()));t.forEach((t=>e.#Ke(t))),0===t.length&&n.forEach((t=>e.#Ze(t)));const s=t.map((t=>GSDOM$1.queryAll(t,'textarea, input, select').filter((t=>0==t.checkValidity()))));return void(s.length>0&&GSEvent.send(e,'error',{type:'dialog',data:s},!0,!0,!0))}let i=!0;try{i=GSEvent.send(e,'action',{type:'dialog',ok:r,evt:t},!0,!0,!0)}finally{i&&e.close(null,r)}}#Ze(t){try{GSEvent.send(t,'action',{action:'submit'})}catch(t){}}#Ke(t){try{t.reportValidity()}catch(t){}}#Qe(t){const e=t.composedPath().shift();return e?.dataset?.action||t.detail.action||e?.type}#Xe(t){const e=this.#Qe(t),s=GSDialog.#I.includes(e);return s&&GSEvent.prevent(t),s?e:null}info(t='',e='',s=!1,r=!1){const n=this;if(n.title=t,n.body=e,n.cancelable=r,n.closable=s,n.open(),s||r)return n.waitEvent('action')}confirm(t='',e=''){return this.info(t,e,!0,!1)}prompt(t='',e=''){return this.info(t,e,!0,!0)}open(t){GSEvent.prevent(t);GSEvent.send(this,'open',{type:'dialog'},!0,!0,!0)&&(this.visible=!0)}close(t,e=!1){GSEvent.prevent(t);GSEvent.send(this,'close',{type:'dialog',isOk:e},!0,!0,!0)&&(this.visible=!1)}toggle(){this.visible=!this.visible}focusable(){const t=this;return t.cancelable?t.#ts:t.closable?t.#es:t}get#es(){return this.query('.dialog-ok')}get#ts(){return this.query('.dialog-cancel')}#se(){const t=this;GSDOM$1.toggle(t.#es,!t.closable),GSDOM$1.toggle(t.#ts,!t.cancelable);const e=`justify-content-${t.align}`,s=t.query('.card-footer');GSDOM$1.toggleClass(s,e,!0)}#ss(t='',e=''){let s=t?this.self.querySelector(`slot[name="${t}"]`):null;return s||(s=this.self.querySelector(e)),s}large(){}extra(){}get#We(){return this.query('dialog')}get title(){return this.query('.card-title')}set title(t=''){GSDOM$1.setHTML(this.title,t)}get body(){return this.query('.card-body')}set body(t=''){GSDOM$1.setHTML(this.body,t)}get visible(){return GSAttr.getAsBool(this,'visible',!1)}set visible(t=!1){GSAttr.setAsBool(this,'visible',t)}get closable(){return GSAttr.getAsBool(this,'closable',!0)}set closable(t=!0){GSAttr.setAsBool(this,'closable',t),this.#se()}get cancelable(){return GSAttr.getAsBool(this,'cancelable',!0)}set cancelable(t=!0){GSAttr.setAsBool(this,'cancelable',t),this.#se()}get align(){return GSAttr.get(this,'button-align','end')}set align(t='end'){GSAttr.set(this,'button-align',t),this.#se()}get buttonOk(){return GSAttr.get(this,'button-ok','Ok')}set buttonOk(t='Ok'){GSAttr.set(this,'button-ok',t)}get buttonCancel(){return GSAttr.get(this,'button-cancel','Cancel')}set buttonCancel(t='Cancel'){GSAttr.set(this,'button-cancel',t)}get cssButtonOk(){return GSAttr.get(this,'css-button-ok','btn-primary')}get cssButtonCancel(){return GSAttr.get(this,'css-button-cancel','btn-secondary')}get css(){return GSAttr.get(this,'css',GSDialog.CSS)}get cssContent(){return GSAttr.get(this,'css-content','')}get cssHeader(){return GSAttr.get(this,'css-header',GSDialog.HEADER_CSS)}get cssTitle(){return GSAttr.get(this,'css-title',GSDialog.TITLE_CSS)}get cssBody(){return GSAttr.get(this,'css-body','p-0')}get cssFooter(){return GSAttr.get(this,'css-footer','')}set css(t=''){return GSAttr.set(this,'css',t)}set cssContent(t=''){return GSAttr.set(this,'css-content',t)}set cssHeader(t=''){return GSAttr.set(this,'css-header',t)}set cssTitle(t=''){return GSAttr.set(this,'css-title',t)}set cssBody(t=''){return GSAttr.set(this,'css-body',t)}set cssFooter(t=''){return GSAttr.set(this,'css-footer',t)}async getTemplate(t=''){if(t)return super.getTemplate(t);const e=this;return`\n        <dialog class="p-0 border-0 ${e.css}">\n        <div class="card">\n            <div class="card-header user-select-none ${e.cssHeader}">\n              <div class="card-title ${e.cssTitle}">\n                <slot name="title"></slot>\n              </div>\n            </div>\n            <div class="card-body ${e.cssBody}">\n              <slot name="body"></slot>\n            </div>\n            <div class="card-footer d-flex user-select-none justify-content-${e.align} ${e.cssFooter}">\n              <button class="btn ${e.cssButtonCancel} dialog-cancel" data-action="cancel">${e.buttonCancel}</button>\n              &nbsp;\n              <button class="btn ${e.cssButtonOk} dialog-ok" data-action="ok">${e.buttonOk}</button>\n            </div>\n        </div>\n        </dialog>\n     `}}class GSDropdown extends GSElement{#jt=!1;static{customElements.define('gs-dropdown',GSDropdown),Object.seal(GSDropdown)}static get observedAttributes(){return GSElement.observeAttributes(['visible','title','css','data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){const r=this;if('data'===t)return this.load(s);if('visible'===t){r.#Le.forEach((t=>t.classList.remove('show')));const t=r.#Fe;if(!t)return;GSDOM$1.toggleClass(t,'show',r.visible),requestAnimationFrame((()=>{r.visible?r.#rs(t):(t.style.left='',t.style.top='')}))}'css'===t&&(GSDOM$1.toggleClass(r.#Oe,e,!1),GSDOM$1.toggleClass(r.#Oe,s,!0)),'title'===t&&r.#Oe&&GSDOM$1.setHTML(r.#Oe,s)}#rs(t){const e=window.getComputedStyle(t),s=parseInt(e.width,10),r=parseInt(e.left,10),n=parseInt(window.innerWidth,10),i=parseInt(e.top,10),a=parseInt(e.height,10),o=parseInt(window.innerHeight,10);r+s>n&&(t.style.left=r-(r+s-n)+'px'),i+a>o&&(t.style.top=i-(i+a-o)+'px')}#ns(t){const e=this.#Fe,s=parseInt(window.innerWidth,10),r=window.getComputedStyle(e),n=window.getComputedStyle(t),i=parseInt(r.left,10),a=parseInt(r.width,10);parseInt(r.top,10),parseInt(r.height,10);const o=parseInt(n.left,10),l=parseInt(n.width,10);parseInt(n.top,10),parseInt(n.height,10),o+l+i+a>s&&(t.style.left=`-${l}px`)}async getTemplate(t=''){return!t&&this.childElementCount>0?this.#Ie():super.getTemplate(t)}onReady(){const t=this;t.#jt||(t.#jt=!0,t.close(),t.attachEvent(t.#Fe,'mouseleave',t.close.bind(t)),t.#qe(),t.#is(),t.#Ue(),super.onReady())}get css(){return GSAttr.get(this,'css')}set css(t=''){return GSAttr.set(this,'css',t)}get title(){return GSAttr.get(this,'title')}set title(t=''){return GSAttr.set(this,'title',t)}get visible(){return GSAttr.getAsBool(this,'visible')}set visible(t=''){return GSAttr.setAsBool(this,'visible',t)}get dark(){return GSAttr.getAsBool(this,'dark')}get isFlat(){return GSAttr.getAsBool(this,'flat',!this.title)}get anchor(){return'afterend@self'}close(){this.visible=!1}open(){this.visible=!0}toggle(){this.visible=!this.visible}createMenu(t=[]){if(!Array.isArray(t))return!1;if(0===t.length)return!1;const e=this,s=e.#Pe(t);return GSDOM$1.setHTML(e.#Fe,s.join('')),e.#is(),e.#qe(),!0}#Pe(t=[]){const e=this,s=e.dark?'dropdown-menu-dark':'',r=[];return t.forEach((t=>{if('-'===t)return r.push('<li><hr class="dropdown-divider"/></li>');const n=Array.isArray(t.menu);if(r.push('<li>'),r.push('<a class="dropdown-item" href="#" '),r.push(GSItem.getAttrs(el)),r.push('>'),e.rtl,r.push(`${t.name} ${n?'&raquo;':''}`),r.push('</a>'),n){const n=e.#Pe(t.menu);r.push(`<ul class="submenu dropdown-menu ${s}">`),r.push(n.join('\n')),r.push('</ul>')}r.push('</li>')})),r}get#Fe(){return this.query('.dropdown-menu')}get#Oe(){return this.query('.dropdown-toggle')}get#je(){return this.queryAll('.dropdown-item')}get#Le(){return this.queryAll('.submenu')}#is(){const t=this;t.#je.filter((t=>t.dataset.action)).forEach((e=>t.attachEvent(e,'click',t.#rt.bind(t))))}#rt(t){t.preventDefault(),this.close();const e={type:'dropdown',source:t};GSEvent.send(this,'action',e,!0)}#ze(t){const e=this,s=t.target.closest('li'),r=s.closest('ul'),n=GSDOM$1.query(s,'.submenu');requestAnimationFrame((()=>{if(GSDOM$1.queryAll(r,'.submenu').forEach((t=>t.classList.remove('show'))),n){const t=s.offsetTop;n.style.top=`${t}px`,n.classList.add('show'),e.#ns(n)}}))}#Ue(t=!1,e=!1){this.#Le.forEach((t=>{t.style.position='absolute',t.style.left='inherit',t.style.right='inherit',t.style.top='inherit',e?t.style.right='100%':t.style.left='100%'}))}#qe(){const t=this;t.#je.forEach((e=>t.attachEvent(e,'mouseover',t.#ze.bind(t))))}#Ie(t,e=0){const s=this;t=t||s.children;const r=[],n=0===e?'':'submenu';return 0===e&&s.title&&(r.push('<div class="dropdown">'),r.push(`<button class="btn dropdown-toggle ${s.css}" type="button" data-bs-toggle="dropdown">`),r.push(s.title),r.push('</button>')),r.push(`<ul class="${n} dropdown-menu ${s.dark?'dropdown-menu-dark':''}">`),Array.from(t).forEach((t=>{const i=t.childElementCount>0;i&&r.push(s.#Ve(t));const a=i?s.#Ie(t.children,++e):s.#_e(t);r.push(a),n&&r.push('</li>')})),r.push('</ul>'),0===e&&s.title&&r.push('</div>'),r.join('')}#Ve(t){return`<li><a class="dropdown-item" href="#">${GSAttr.get(t,'name')} &raquo; </a>`}#_e(t){const e=GSAttr.get(t,'name'),s=GSAttr.get(t,'header');if(s)return`<li><h6 class="dropdown-header"/>${s}</h6></li>`;if(!e)return'<li><hr class="dropdown-divider"/></li>';const r=GSItem.getAttrs(t).trim();return r?`<li><a class="dropdown-item" href="#" ${r} >${e}</a></li>`:''}async load(t=''){const e=await GSLoader.loadData(t);if(!GSUtil.isJsonType(e))return;const s=this,r=GSItem.generateItem(e);return GSDOM$1.setHTML(s,r),GSEvent.deattachListeners(s),s.connectedCallback(),e}}class GSFormGroup extends GSElement{static CSS_LABEL_CELL='col-md-4 col-sm-4 col-xs2 text-md-end';static CSS_LABEL='user-select-none fw-small fw-light text-secondary';static CSS_ICON='bi bi-info-circle-fill text-primary me-2 fs-5';static{customElements.define('gs-form-group',GSFormGroup),Object.seal(GSFormGroup)}constructor(){super(),this.#as()}#as(){const t=this;let e=Array.from(t.children).filter((t=>t.slot&&'body'!==t.slot));if(e.length>0)throw new Error(`Custom element injection must contain slot="body" attribute! Element: ${t.tagName}, ID: ${t.id}`);e=Array.from(t.children).filter((t=>!t.slot));const s=['TEMPLATE'];if(!GSDOM.isAllowed(e,s))throw new Error(GSDOM.toValidationError(t,s))}get isFlat(){return!this.hasAttribute('flat')||super.isFlat}async getTemplate(){const t=this;switch(t.layout){case'floating':return t.#os();case'vertical':return t.#ls();default:return t.#cs()}}#os(){const t=this;return`\n      <div class="row ${t.css}">\n         <div class="form-floating ${t.#us} ${t.cellField}">\n            ${t.#ds}\n            ${t.#hs}\n         </div>\n         ${t.#gs}\n      </div>`}#ls(){const t=this;return`\n      <div class="row ${t.css}">\n        <div class="col-12">\n            ${t.#hs}\n        </div>\n         <div class="${t.#us} ${t.cellField}">\n            ${t.#ds}\n         </div>\n         ${t.#gs}   \n      </div>      \n      `}#cs(){const t=this;return`\n      <div class="row form-group ${t.css}">\n         ${t.#ms}\n         ${t.#Ss}\n         ${t.#gs}\n      </div>`}get#ds(){const t=this,e=t.query('template');return e?e.innerHTML:`<input is="gs-ext-input" class="${t.#ps} ${t.cssField}" \n               id="${t.name}" name="${t.name}" type="${t.#Gs}" ${t.#bs}\n               ${t.#fs} ${t.#As}\n               ${t.#vs} ${t.#ys} ${t.#Es} ${t.#$s}\n               ${t.#Ms} ${t.#Ds} ${t.#ws} ${t.#dt} ${t.#Cs}\n               ${t.#Os} ${t.#xs} ${t.#Ts} ${t.#ws} \n               ${t.#ks} ${t.#Ls} title="${t.description}"\n               ${t.#Fs} ${t.#Is} ${t.#Ns}\n               >`}get#hs(){const t=this;return`<label class="${t.#Hs} ${t.cssLabel} user-select-none" for="${t.name}">${t.label}</label>`}get#ms(){return`<div class="${this.cellLabel}">${this.#hs}</label></div>`}get#ps(){return this.#qs?'form-check-input ms-0':this.#Bs?'form-range':'form-control'}get#Hs(){const t=this;return t.#qs?'form-check-label':'floating'===t.layout?'ms-2':t.#Ps?'form-label':''}get#us(){const t=this;return t.#qs?t.#js?'form-check form-switch ps-3 fs-5':'form-check':''}get#Ss(){const t=this;return`\n      <div class="${t.#us} ${t.cellField}">\n         <slot name="body">\n         ${t.#ds}         \n         </slot>\n      </div>`}get#gs(){const t=this;return t.#Rs&&t.#Us?t.hasIcon?`\n      <div class="col-auto">\n         ${t.#Us}\n         ${t.#zs}\n      </div>`:t.#Us:''}get#fs(){return this.autocopy?'autocopy':''}get#As(){return this.autoselect?'autocopy':''}get hasIcon(){return'false'!==GSAttr.get(this,'icon')}get#zs(){return this.hasIcon?`<i class="${this.icon}"></i>`:''}get#Gs(){return this.#js?'checkbox':this.type}get#qs(){const t=this;return t.#Vs||t.#_s||t.#js}get#Rs(){return customElements.get('gs-tooltip')}get#Us(){const t=this,e=t.hasIcon?'':`target="${t.name}"`;return t.description.trim()?`<gs-tooltip placement="${t.placement}" title="${t.description}" ${e}></gs-tooltip>`:''}get#bs(){return this.placeholder?`placeholder=${this.placeholder}`:''}get#Ds(){const t=this;return t.#Ws&&t.pattern?`pattern=${t.pattern}`:''}get#Ms(){const t=this;return t.#Ws&&t.mask?`mask=${t.mask}`:''}get#Ns(){return this.disabled?'disabled':''}get#$s(){return this.#qs&&this.checked?'checked':''}get#Ps(){return'vertical'===this.layout}get#Vs(){return'checkbox'===this.type}get#_s(){return'radio'===this.type}get#js(){return'switch'===this.type}get#Ys(){return'number'===this.type}get#Bs(){return'range'===this.type}get#Ws(){return'text'===this.type}get#Js(){return'passsword'===this.type}get#Xs(){return'email'===this.type}get#Ks(){return'url'===this.type}get#Zs(){return'file'===this.type}get#Es(){return this.multiple?'multiple':''}get#Fs(){return this.readonly?'readonly':''}get#Is(){return this.required?'required':''}get#Cs(){const t=this;return t.#Zs&&t.accept?`accept=${t.accept}`:''}get#ys(){return this.autocapitalize?`autocapitalize=${this.autocapitalize}`:''}get#vs(){return this.autocomplete?`autocomplete=${this.autocomplete}`:''}get#ws(){return this.value?`value=${this.value}`:''}get#dt(){return this.list?`list=${this.list}`:''}get#Ts(){return isNaN(this.max)?'':`max="${this.max}"`}get#xs(){return isNaN(this.min)?'':`min="${this.min}"`}get#Ls(){return isNaN(this.maxlength)?'':`maxlength="${this.maxlength}"`}get#ks(){return isNaN(this.minlength)?'':`minlength="${this.minlength}"`}get#Os(){return isNaN(this.step)?'':`step="${this.step}"`}get css(){return GSAttr.get(this,'css','')}set css(t=''){return GSAttr.set(this,'css',t)}get cellLabel(){return GSAttr.get(this,'cell-label',GSFormGroup.CSS_LABEL_CELL)}set cellLabel(t=''){return GSAttr.set(this,'cell-label',t)}get cellField(){const t='horizontal'===this.layout?'6':'11';return GSAttr.get(this,'cell-field',`col-md-${t} col-sm-${t} col-xs11`)}set cellField(t=''){return GSAttr.set(this,'cell-field',t)}get cssLabel(){return GSAttr.get(this,'css-label',GSFormGroup.CSS_LABEL)}set cssLabel(t=''){return GSAttr.set(this,'css-label',t)}get cssField(){return(this.mask?.trim().length>0?' font-monospace ':'')+GSAttr.get(this,'css-field','')}set cssField(t=''){return GSAttr.set(this,'css-field',t)}get layout(){return GSAttr.get(this,'layout','horizontal')}set layout(t=''){return GSAttr.set(this,'layout',t)}get description(){return GSAttr.get(this,'description','')}set description(t=''){return GSAttr.set(this,'description',t)}get placement(){const t=this.hasIcon?'right':'top';return GSAttr.get(this,'placement',t)}set placement(t=''){return GSAttr.set(this,'placement',t)}get icon(){return GSAttr.get(this,'icon',GSFormGroup.CSS_ICON)}set icon(t=''){return GSAttr.set(this,'icon',t)}get label(){return GSAttr.get(this,'label','')}set label(t=''){return GSAttr.set(this,'label',t)}get placeholder(){return GSAttr.get(this,'placeholder','')}set placeholder(t=''){return GSAttr.set(this,'placeholder',t)}get name(){return GSAttr.get(this,'name','')}set name(t=''){return GSAttr.set(this,'name',t)}get type(){return GSAttr.get(this,'type','text')}set type(t=''){return GSAttr.set(this,'type',t)}get pattern(){return GSAttr.get(this,'pattern','')}set pattern(t=''){return GSAttr.set(this,'pattern',t)}get mask(){return GSAttr.get(this,'mask','')}set mask(t=''){return GSAttr.set(this,'mask',t)}get disabled(){return this.hasAttribute('disabled')}set disabled(t=''){return GSAttr.toggle(this,'disabled',GSUtil.asBool(t))}get checked(){return this.hasAttribute('checked')}set checked(t=''){return GSAttr.toggle(this,'checked',GSUtil.asBool(t))}get multiple(){return this.hasAttribute('multiple')}set multiple(t=''){return GSAttr.toggle(this,'multiple',GSUtil.asBool(t))}get readonly(){return this.hasAttribute('readonly')}set readonly(t=''){return GSAttr.toggle(this,'readonly',GSUtil.asBool(t))}get required(){return this.hasAttribute('required')}set required(t=''){return GSAttr.toggle(this,'required',GSUtil.asBool(t))}get accept(){return GSAttr.get(this,'accept','')}set accept(t=''){return GSAttr.set(this,'accept',t)}get autocopy(){return this.hasAttribute('autocopy')}get autoselect(){return this.hasAttribute('autoselect')}get autocapitalize(){return GSAttr.get(this,'autocapitalize','')}set autocapitalize(t=''){return GSAttr.set(this,'autocapitalize',t)}get autocomplete(){return GSAttr.get(this,'autocomplete','')}set autocomplete(t=''){return GSAttr.set(this,'autocomplete',t)}get value(){return GSAttr.get(this,'value','')}set value(t=''){return GSAttr.set(this,'value',t)}get list(){return GSAttr.get(this,'list','')}set list(t=''){return GSAttr.set(this,'list',t)}get maxlength(){return GSAttr.getAsNum(this,'maxlength',NaN)}set maxlength(t=''){return GSAttr.setAsNum(this,'maxlength',t)}get minlength(){return GSAttr.getAsNum(this,'minlength',NaN)}set minlength(t=''){return GSAttr.setAsNum(this,'minlength',t)}get max(){return GSAttr.get(this,'max',NaN)}set max(t=''){return GSAttr.setAsNum(this,'max',t)}get min(){return GSAttr.get(this,'min',NaN)}set min(t=''){return GSAttr.setAsNum(this,'min',t)}get step(){return GSAttr.getAsNum(this,'step',NaN)}set step(t=''){return GSAttr.setAsNum(this,'step',t)}}class GSLayout extends GSElement{static{customElements.define('gs-layout',GSLayout),Object.seal(GSLayout)}constructor(){super(),GSItem.validate(this,this.tagName)}async getTemplate(t=''){const e=this,s=GSItem.genericItems(e).map((t=>e.#Qs(t))),r=await Promise.all(s),n=e.isVertical?'flex-column':'flex-row';return`<div class="${e.isFlat?'':'vh-100'} d-flex flex-fill ${n} ${e.css}" style="${this.getStyle()}">${r.join('')}</div>`}get isFlat(){const t=this;if(t.owner instanceof GSLayout)return!0;const e=t.closest('gs-layout');if(e&&e!==t)return!0;const s=GSComponents.getOwner(t),r=window.getComputedStyle(s);return'flex'===r.display&&'0'!==r.flexGrow}get anchor(){return'afterend@self'}async#Qs(t){const e=this,s=e.#tr(t),r=GSAttr.get(t,'id'),n=GSAttr.get(t,'name'),i=GSItem.getBody(t,e.isFlat),a=e.#er(t),o=a.length>10,l=`<div class="${e.#sr(t,o)}" id="${n||GSID.next()}" ${a}>${i}</div>`;if(s){const s=e.#rr(t);if(0==s)return l;let n='';n=s>0?e.isVertical?'top':'start':e.isVertical?'bottom':'end';const i=`<gs-splitter resize="${n}" split="${e.isVertical?'horizontal':'vertical'}" id="${r}"></gs-splitter>`;return 1==s?[l,i].join(''):[i,l].join('')}return l}#er(t){const e=this.isVertical?'height':'width',s=GSAttr.getAsNum(t,'max',0),r=GSAttr.getAsNum(t,'min',0);return['style="',s>0?`max-${e}: ${s}px;`:'',r>0?`min-${e}: ${r}px;`:'','"'].join('')}#sr(t,e=!1){const s=this.#tr(t),r=GSAttr.get(t,'css');let n=GSAttr.get(t,'v-pos'),i=GSAttr.get(t,'h-pos');i=i?`justify-content-${i}`:'',n=n?`align-items-${n}`:'';const a=['d-flex',i,n];return 0==s&&0==e&&a.push('flex-fill'),a.push(r),a.join(' ')}#rr(t){const e=t.previousElementSibling,s=t.nextElementSibling;return s||e?s?e&&this.#tr(s)?this.#tr(e)?0:-1:1:-1:0}#tr(t){return GSAttr.getAsBool(t,'resizable',!1)}get isVertical(){return'vertical'===GSAttr.get(this,'type','vertical')}get css(){return GSAttr.get(this,'css')}set css(t=''){return GSAttr.set(this,'css',t)}}class GSList extends GSElement{static{customElements.define('gs-list',GSList),Object.seal(GSList)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}get css(){return GSAttr.get(this,'css','')}set css(t=''){return GSAttr.set(this,'css',t)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){const e=await this.#Jt();return`<div class="list-group ${this.css}">${e}</div>`}async#Jt(){const t=this;return GSItem.genericItems(t).map((e=>t.#ye(e))).join('')}#ye(t){const e=this,s=e.#nr(t),r=GSItem.getBody(t),n=GSItem.getCSS(t),i=GSItem.getHref(t),a=GSAttr.dataToString(t),o=GSItem.getAttrs(t),l=GSItem.getIcon(t),c=l?`<i class="${l}"></i>`:'',u=e.#ir(t)?'active':'';return`<a  ${e.selectable?'is="gs-ext-navlink"':'ignore'} class="list-group-item list-group-item-action ${u} ${n}"\n                href="${i}" ${i&&'#'!==i?`target=${GSItem.getTarget(t)}`:''} ${o} ${a}>${c} ${r||s}</a>`}#nr(t){return GSAttr.get(t,'title')}#ir(t){return GSAttr.getAsBool(t,'active')}get selectable(){return GSAttr.getAsBool(this,'selectable',!0)}async load(t=''){const e=await GSLoader.loadData(t);if(!GSUtil.isJsonType(e))return;const s=this,r=GSItem.generateItem(e);return GSDOM$1.setHTML(s,r),GSEvent.deattachListeners(s),s.connectedCallback(),e}}class GSModal extends GSElement{static#I=['ok','cancel'];static{customElements.define('gs-modal',GSModal),Object.seal(GSModal)}static get observedAttributes(){return GSElement.observeAttributes(['cancelable','closable','title','visible'])}attributeCallback(t='',e='',s=''){const r=this;r.#se(),'visible'===t&&(r.visible?(r.#ar('.modal'),r.#ar('.modal-backdrop'),r.focusable().focus()):(r.#or('.modal'),r.#or('.modal-backdrop'),r.normal()),GSEvent.send(r,'visible',{type:'modal',ok:r.visible},!0,!0))}onReady(){const t=this;t.attachEvent(t,'click',t.#rt.bind(t)),t.attachEvent(t,'action',t.#rt.bind(t)),t.attachEvent(t,'form',t.#Ye.bind(t)),t.attachEvent(document,'keyup',t.#Je.bind(t)),super.onReady(),t.visible&&t.open()}#Ye(t){GSEvent.prevent(t);GSEvent.send(this,'data',{type:'modal',data:t.detail.data,evt:t},!0,!0,!0)&&this.close()}#Je(t){this.cancelable&&'Escape'===t.key&&this.close()}#rt(t){const e=this,s=e.#Xe(t);if(!s)return;const r='ok'===s,n=GSDOM$1.queryAll(e,'form');if(r&&n.length>0){const t=n.filter((t=>0==t.checkValidity()));t.forEach((t=>e.#Ke(t))),0===t.length&&n.forEach((t=>e.#Ze(t)));const s=t.map((t=>GSDOM$1.queryAll(t,'textarea, input, select').filter((t=>0==t.checkValidity()))));return void(s.length>0&&GSEvent.send(e,'error',{type:'modal',data:s},!0,!0,!0))}let i=!0;try{i=GSEvent.send(e,'action',{type:'modal',ok:r,evt:t},!0,!0,!0)}finally{i&&e.close(null,r)}}#Ze(t){try{GSEvent.send(t,'action',{action:'submit'})}catch(t){}}#Ke(t){try{t.reportValidity()}catch(t){}}#Qe(t){const e=t.composedPath().shift();return e?.dataset?.action||t.detail.action||e?.type}#Xe(t){const e=this.#Qe(t),s=GSModal.#I.includes(e);return s&&GSEvent.prevent(t),s?e:null}get#lr(){switch(this.size){case'extra':return'modal-xl';case'large':return'modal-lg'}return''}#cr(t=''){const e=this.query('.modal-dialog');e&&requestAnimationFrame((()=>{e.classList.remove('modal-xl','modal-lg'),t&&e.classList.add(t)}))}large(){this.#cr('modal-lg')}extra(){this.#cr('modal-xl')}normal(){this.#cr()}info(t='',e='',s=!1,r=!1){const n=this;if(n.title=t,n.body=e,n.cancelable=r,n.closable=s,n.open(),s||r)return n.waitEvent('action')}confirm(t='',e=''){return this.info(t,e,!0,!1)}prompt(t='',e=''){return this.info(t,e,!0,!0)}open(t){GSEvent.prevent(t);GSEvent.send(this,'open',{type:'modal'},!0,!0,!0)&&(this.visible=!0)}close(t,e=!1){GSEvent.prevent(t);GSEvent.send(this,'close',{type:'modal',isOk:e},!0,!0,!0)&&(this.visible=!1)}toggle(){this.visible=!this.visible}focusable(){const t=this;return t.cancelable?t.#ts:t.closable?t.#es:t}get#es(){return this.query('.modal-ok')}get#ts(){return this.query('.modal-cancel')}#ar(t){const e=this.query(t);e&&(e.classList.remove('d-none'),e.classList.add('show','d-block'))}#or(t){const e=this.query(t);e&&(e.classList.add('d-none'),e.classList.remove('show','d-block'))}#se(){const t=this;GSDOM$1.toggle(t.#es,!t.closable),GSDOM$1.toggle(t.#ts,!t.cancelable);const e=`justify-content-${t.align}`,s=t.query('.modal-footer');GSDOM$1.toggleClass(s,e,!0)}#ss(t='',e=''){let s=t?this.self.querySelector(`slot[name="${t}"]`):null;return s||(s=this.self.querySelector(e)),s}get size(){return GSAttr.get(this,'size','')}set size(t=''){GSAttr.set(this,'size',t)}get title(){return this.query('.modal-title')}set title(t=''){GSDOM$1.setHTML(this.title,t)}get body(){return this.query('.modal-body')}set body(t=''){GSDOM$1.setHTML(this.body,t)}get visible(){return GSAttr.getAsBool(this,'visible',!1)}set visible(t=!1){GSAttr.setAsBool(this,'visible',t)}get closable(){return GSAttr.getAsBool(this,'closable',!0)}set closable(t=!0){GSAttr.setAsBool(this,'closable',t),this.#se()}get cancelable(){return GSAttr.getAsBool(this,'cancelable',!0)}set cancelable(t=!0){GSAttr.setAsBool(this,'cancelable',t),this.#se()}get align(){return GSAttr.get(this,'button-align','end')}set align(t='end'){GSAttr.set(this,'button-align',t),this.#se()}get buttonOk(){return GSAttr.get(this,'button-ok','Ok')}set buttonOk(t='Ok'){GSAttr.set(this,'button-ok',t)}get buttonCancel(){return GSAttr.get(this,'button-cancel','Cancel')}set buttonCancel(t='Cancel'){GSAttr.set(this,'button-cancel',t)}get cssButtonOk(){return GSAttr.get(this,'css-button-ok','btn-primary')}get cssButtonCancel(){return GSAttr.get(this,'css-button-cancel','btn-secondary')}get cssModal(){return GSAttr.get(this,'css-modal','')}get cssContent(){return GSAttr.get(this,'css-content','')}get cssHeader(){return GSAttr.get(this,'css-header','')}get cssTitle(){return GSAttr.get(this,'css-title','')}get cssBody(){return GSAttr.get(this,'css-body','')}get cssFooter(){return GSAttr.get(this,'css-footer','')}set cssModal(t=''){return GSAttr.set(this,'css-modal',t)}set cssContent(t=''){return GSAttr.set(this,'css-content',t)}set cssHeader(t=''){return GSAttr.set(this,'css-header',t)}set cssTitle(t=''){return GSAttr.set(this,'css-title',t)}set cssBody(t=''){return GSAttr.set(this,'css-body',t)}set cssFooter(t=''){return GSAttr.set(this,'css-footer',t)}async getTemplate(t=''){if(t)return super.getTemplate(t);const e=this;return`\n         <div class="modal d-none fade ${e.cssModal}">\n         <div class="modal-dialog modal-dialog-centered ${e.#lr}">\n           <div class="modal-content ${e.cssContent}">\n             <div class="modal-header border-0 user-select-none ${e.cssHeader}">\n               <div class="modal-title ${e.cssTitle}">\n                 <slot name="title"></slot>\n               </div>\n             </div>\n             <div class="modal-body ${e.cssBody}">\n               <slot name="body"></slot>\n             </div>\n             <div class="modal-footer border-0 user-select-none justify-content-${e.align} ${e.cssFooter}">\n               <button class="btn ${e.cssButtonCancel} modal-cancel" data-action="cancel">${e.buttonCancel}</button>\n               <button class="btn ${e.cssButtonOk} modal-ok" data-action="ok">${e.buttonOk}</button>\n             </div>\n           </div>\n         </div>\n       </div>\n       <div class="modal-backdrop d-none fade "></div>    \n     `}}class GSNav extends GSElement{static{customElements.define('gs-nav',GSNav),Object.seal(GSNav)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){const e=this,s=GSItem.genericItems(e).map((t=>e.#ur(t)));return`\n          <ul class="nav ${e.#dr?'':'flex-column'} ${e.#hr}">\n            ${s.join('')}\n          </ul>\n        `}#ur(t){return this.#gr(t)}get#hr(){return this.#mr(this)}get#dr(){return GSAttr.getAsBool(this,'bar',!0)}#gr(t){return`<li class="nav-item ${this.#Sr(t)}">${this.#pr(t)}</li>`}#pr(t){const e=this,s=GSAttr.dataToString(t),r=e.#mr(t),n=e.#Gr(t),i=e.#Ee(t),a=GSItem.getIcon(t),o=GSItem.getHref(t),l=`${a?`<i class="${a}"></i>`:''} ${i}`,c=o&&'#'!==o?`target=${GSItem.getTarget(t)}`:'',u=GSItem.getAttrs(t);return`<a type="button" role="nav" is="gs-ext-navlink" class="nav-link ${r} ${n}" \n                href="${o}" ${c} id="${GSID.id}-nav" ${u} ${s}>${l}</a>`}#Sr(t){return GSAttr.get(t,'css-nav-wrap')}#mr(t){return GSAttr.get(t,'css-nav')}#Gr(t){return this.#ir(t)?'active':''}#ir(t){return GSAttr.getAsBool(t,'active')}#Ee(t){return GSAttr.get(t,'title')}async load(t=''){const e=await GSLoader.loadData(t);if(!GSUtil.isJsonType(e))return;const s=this,r=GSItem.generateItem(e);GSDOM$1.setHTML(s,r),GSEvent.deattachListeners(s),s.connectedCallback()}}class GSOffcanvas extends GSElement{static{customElements.define('gs-offcanvas',GSOffcanvas),Object.seal(GSOffcanvas)}static get observedAttributes(){return GSElement.observeAttributes(['title','visible','backdrop','placement','css','closable'])}constructor(){super(),this.css=this.css||'border shadow-sm'}attributeCallback(t='',e='',s=''){this.#se(t,e,s),'visible'===t&&GSEvent.send(this,'action',{type:'offcanvas',ok:s})}async getTemplate(t=''){return t?super.getTemplate(t):this.#ye()}onReady(){const t=this;super.onReady(),t.attachEvent(t.#br,'click',t.close.bind(t)),t.autoclose&&(t.attachEvent(t.#fr,'mouseleave',t.close.bind(t)),t.min>0&&t.attachEvent(t.#fr,'mouseenter',t.open.bind(t))),t.#se(null,!0,!1)}#se(t='',e='',s=''){if(e===s)return;const r=this;r.#Ar&&GSDOM$1.setHTML(r.#Ar,r.title),GSDOM$1.toggleClass(r.#fr,'visible',!0),GSDOM$1.toggleClass(r.#vr,'invisible',!r.closable),GSDOM$1.toggleClass(r.#br,'show',r.backdrop&&r.visible),r.#yr(),r.#Er(),r.#$r(),r.#Mr(t,e,s),r.#Dr(t,e,s)}#yr(){const t=this;if(!t.autoclose)return;const e=t.visible,s=t.isHorizontal?'width':'height',r=e?t.max:t.min;t.#fr.style.transitionProperty=s,t.#fr.style.transitionDuration=`${t.transitionDuration}s`,t.#fr.style.transitionTimingFunction=t.transitionFunction,t.#fr.style[s]=`${r}px`}#Er(){const t=this;if(0===t.min&&t.visible)return GSDOM$1.toggleClass(t.#fr,'show',t.visible);setTimeout((()=>{GSDOM$1.toggleClass(t.#fr,0===t.min?t.visible:'show',!0)}),GSDOM$1.SPEED)}#$r(){const t=this;setTimeout((()=>{GSDOM$1.toggleClass(t.#br,'invisible',!(t.backdrop&&t.visible))}),GSDOM$1.SPEED)}#Mr(t='',e='',s=''){if('placement'!==t)return;GSDOM$1.toggleClass(this.#fr,`offcanvas-${e}`,!1),GSDOM$1.toggleClass(this.#fr,`offcanvas-${s}`,!0)}#Dr(t='',e='',s=''){if('css'!==t)return;GSDOM$1.toggleClass(this.#fr,e,!1),GSDOM$1.toggleClass(this.#fr,s,!0)}get isVertical(){return!this.isHorizontal}get isHorizontal(){return'start'===this.placement||'end'===this.placement}open(){this.visible=!0}close(){this.visible=!1}toggle(){this.visible=!this.visible}get css(){return GSAttr.get(this,'css','')}get cssTitle(){return GSAttr.get(this,'css-title','fs-5')}get cssHead(){return GSAttr.get(this,'css-head','')}get cssBody(){return GSAttr.get(this,'css-body','')}set css(t=''){GSAttr.set(this,'css',t)}get transitionDuration(){return GSAttr.getAsNum(this,'duration','0.2')}set transitionDuration(t=''){GSAttr.set(this,'duration',t)}get transitionFunction(){return GSAttr.get(this,'transition','linear')}set transitionFunction(t=''){GSAttr.set(this,'transition',t)}get title(){return GSAttr.get(this,'title')}set title(t=''){GSAttr.set(this,'title',t)}get visible(){return GSAttr.getAsBool(this,'visible',!1)}set visible(t=!1){GSAttr.setAsBool(this,'visible',t)}get autoclose(){return GSAttr.getAsBool(this,'autoclose',!1)}set autoclose(t=!1){GSAttr.setAsBool(this,'autoclose',t)}get closable(){return GSAttr.getAsBool(this,'closable',!0)}set closable(t=!0){GSAttr.setAsBool(this,'closable',t),this.#se()}get placement(){return GSAttr.get(this,'placement',this.target?.dataset?.bsPlacement||'start')}set placement(t=''){return GSAttr.set(this,'placement',t)}get backdrop(){return GSAttr.getAsBool(this,'backdrop',this.target?.dataset?.bsBackdrop||'false')}set backdrop(t=''){return GSAttr.set(this,'backdrop',t)}get scroll(){return GSAttr.getAsBool(this,'scroll',this.target?.dataset?.bsScroll||'false')}set scroll(t=''){return GSAttr.set(this,'scroll',t)}get min(){return GSAttr.getAsNum(this,'min',0)}set min(t=!1){GSAttr.set(this,'min',GSUtil.asNum(t))}get max(){return GSAttr.getAsNum(this,'max',0)}set max(t=!1){GSAttr.set(this,'max',GSUtil.asNum(t))}get#fr(){return this.query('.offcanvas')}get#Ar(){return this.query('.offcanvas-title')}get#br(){return this.query('.offcanvas-backdrop')}get#vr(){return this.query('.btn-close[data-bs-dismiss="offcanvas"]')}get#wr(){return this.querySelector('[slot="header"]')}#ye(){const t=this,e=t.title?`<div class="offcanvas-title ${t.cssTitle}">${t.title}</div>`:'',s=t.closable?'<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>':'',r=e||s||t.#wr?`<div class="offcanvas-header ${t.cssHead}"><slot name="header">${e}${s}</slot></div>`:'';return`\n      <div class="offcanvas offcanvas-${t.placement} overflow-hidden ${t.css}" data-bs-scroll="${t.scroll}" data-bs-backdrop="${t.backdrop}" tabindex="-1">      \n      ${r}\n      <div class="offcanvas-body  ${t.cssBody}">\n        <slot name="body"></slot>\n      </div>\n    </div>\n    <div class="offcanvas-backdrop fade ${t.backdrop&&t.visible?'show':'invisible'}"></div>\n    `}}class GSPopper{static getOffset(t){const e=t.getBoundingClientRect(),s=window.scrollX,r=window.scrollY,n={left:e.left+s,right:e.right+s,top:e.top+r,bottom:e.bottom+r,height:e.height,width:e.width,x:e.x+s,y:e.y+r};return n.centerX=n.left+n.width/2,n.centerY=n.top+n.height/2,n}static boundingRect(t,e){const s=t.getBoundingClientRect(),r=GSPopper.elementPadding(e?t:null),n=r.x,i=r.y,a=t.clientWidth-n,o=t.clientHeight-i,l=s.left+r.left,c=s.top+r.top;return{width:a,height:o,top:c,left:l,x:l,y:c,centerX:a/2+l,centerY:c+o/2}}static elementPadding(t){const e={left:0,right:0,top:0,bottom:0,x:0,y:0};if(!(t instanceof HTMLElement))return e;const s=getComputedStyle(t);return e.left=parseFloat(s.paddingLeft),e.right=parseFloat(s.paddingRight),e.top=parseFloat(s.paddingTop),e.bottom=parseFloat(s.paddingBottom),e.x=e.left+e.right,e.y=e.top+e.bottom,e}static popupFixed(t='top',e,s,r){if(!e)return!1;if(!s)return!1;const n=GSPopper.#Cr(t);if(!GSPopper.#Or(n))return void GSLog.warn(e,`Invalid popover position: ${t}!`);e.style.position='fixed',e.style.top='0px',e.style.left='0px',e.style.margin='0px',e.style.padding='0px';const i=e.clientHeight/2,a=e.clientWidth/2,o=GSPopper.boundingRect(s,r instanceof HTMLElement),l=GSPopper.#xr(e,r,n),c={x:o.centerX,y:o.centerY,offH:i,offW:a,srcH:e.clientHeight,srcW:e.clientWidth};GSPopper.#Tr(n,c,o,l),e.style.transform=`translate(${c.x}px, ${c.y}px)`}static popupAbsolute(t='top',e,s,r){if(!e)return!1;if(!s)return!1;const n=GSPopper.#Cr(t);if(!GSPopper.#Or(n))return void GSLog.warn(e,`Invalid popover position: ${t}!`);r.style.position='absolute',e.style.position='absolute',e.style.margin='0px',e.style.inset=GSPopper.#kr(n);const i=e.getBoundingClientRect(),a=r.getBoundingClientRect(),o=GSPopper.getOffset(s),l={x:o.centerX,y:o.centerY},c={x:i.width/2-a.width/2,y:i.height/2-a.height/2};GSPopper.#Lr(n,l,c,i,a,o),e.style.transform=`translate(${l.x}px, ${l.y}px)`,r.style.transform=`translate(${c.x}px, ${c.y}px)`,r.style.top=c.top?c.top:'',r.style.left=c.left?c.left:''}static#Lr(t,e,s,r,n,i){t.isTop?(s.y=0,s.left='0px',e.x=e.x-r.width/2,e.y=-1*(r.bottom-i.top+n.height)):t.isBottom?(s.y=0,s.left='0px',e.x=e.x-r.width/2,e.y=i.bottom+n.height):t.isStart?(s.x=0,s.top='0px',e.x=-1*(r.right-i.left+n.width),e.y=e.y-r.height/2):t.isEnd&&(s.x=0,s.top='0px',e.x=i.right+n.width,e.y=e.y-r.height/2)}static#Tr(t,e,s,r){t.isTop?(e.y=s.top-e.srcH-r.size,e.x=e.x-e.offW):t.isBottom?(e.y=s.top+s.height+r.size,e.x=e.x-e.offW):t.isStart?(e.x=s.left-e.srcW-r.size,e.y=e.y-e.offH+r.size):t.isEnd&&(e.x=s.left+s.width+r.size,e.y=e.y-e.offH+r.size)}static#kr(t){return t.isTop?'auto auto 0px 0px':t.isBottom?'0px auto auto 0px':t.isStart?'0px 0px auto auto':t.isEnd?'0px auto auto 0px':void 0}static#Or(t){return t.isStart||t.isEnd||t.isTop||t.isBottom}static#Cr(t){return{isStart:'start'==t||'left'==t,isEnd:'end'==t||'right'==t,isTop:'top'==t,isBottom:'bottom'==t}}static#xr(t,e,s){if(!e)return{x:0,y:0,size:0,width:0,height:0};let r=0;const n=GSPopper.boundingRect(t),i=GSPopper.boundingRect(e),a=s.isStart||s.isEnd?i.width:i.height,o=n.width/2-a/2,l=n.height/2-a/2;return i.size=a,e.style.position='absolute',s.isStart||s.isEnd?(e.style.left=null,e.style.top='0px',r=s.isStart?a:-1*a,e.style.transform=`translate(${r}px, ${l/2}px)`):(e.style.top=null,e.style.left='0px',r=s.isTop?a:-1*a,e.style.transform=`translate(${o}px, ${r}px)`),i}static{Object.seal(GSPopper),globalThis.GSPopper=GSPopper}}class GSPopover extends GSElement{#Fr=!1;static{customElements.define('gs-popover',GSPopover),Object.seal(GSPopover),GSDOMObserver.registerFilter(GSPopover.#N,GSPopover.#H)}static#N(t){return t instanceof HTMLElement&&((!t.tagName||!t.tagName.startsWith('GS-'))&&(GSPopover.#Ir(t)&&!GSPopover.#Nr(t)))}static#H(t){t.id=t.id||GSID.id;const e=document.createElement('gs-popover');e.ref=`#${t.id}`,requestAnimationFrame((()=>{setTimeout((()=>{t.parentElement.insertAdjacentElement('beforeend',e)}),100)}))}constructor(){super()}onReady(){super.onReady(),this.#B()}#B(){const t=this;t.isHoverTrigger&&(GSEvent.attach(t,t.target,'mouseover',t.show.bind(t)),GSEvent.attach(t,t.target,'mouseout',t.hide.bind(t))),t.isFocusTrigger&&GSEvent.attach(t,document.body,'click',t.#Hr.bind(t))}#Jt(t){const e=t.querySelector('div.popover-arrow');return GSPopper.popupAbsolute(this.placement,t,this.target,e),t}get#ye(){const t=this,e=t.title?`<div class="popover-header ${t.cssHead}">${t.title}</div>`:'';return`\n        <div class="popover bs-popover-auto fade ${t.css}" data-popper-placement="${t.placement}" style="${this.getStyle()}" role="tooltip">\n            <div class="popover-arrow"></div>\n            ${e}\n            <div class="popover-body">${t.content}</div>\n        </div>            \n        `}get target(){const t=this;if(t.ref){let e=t.owner;return e=GSDOM$1.isGSElement(t.owner)?e.self:e,e.querySelector(t.ref)}return t.previousElementSibling||t.parentElement}get css(){return GSAttr.get(this,'css')}set css(t=''){return GSAttr.set(this,'css',t)}get cssHead(){return GSAttr.get(this,'css-head','fs-3')}set cssHead(t=''){return GSAttr.set(this,'css-head',t)}get ref(){return GSAttr.get(this,'ref')}set ref(t=''){return GSAttr.set(this,'ref',t)}get title(){return GSAttr.get(this,'title')||GSAttr.get(this.target,'title')}set title(t=''){return GSAttr.set(this,'title',t)}get placement(){return GSAttr.get(this,'placement',this.target?.dataset?.bsPlacement||'top')}set placement(t=''){return GSAttr.set(this,'placement',t)}get content(){return GSAttr.get(this,'content',this.target?.dataset?.bsContent||'')}set content(t=''){return GSAttr.set(this,'content',t)}get trigger(){return GSAttr.get(this,'trigger',this.target?.dataset?.bsTrigger||'hover focus')}set trigger(t=''){return GSAttr.set(this,'trigger',t)}get isFocusTrigger(){return this.trigger.includes('focus')}get isHoverTrigger(){return this.trigger.includes('hover')}get visible(){return 0!==this.innerHTML.length}get isFlat(){return!0}get anchor(){return'self'}async getTemplate(t=''){return''}show(){const t=this,e=GSDOM$1.parse(t.#ye,!0);t.insertAdjacentElement('afterbegin',e),requestAnimationFrame((()=>{t.#Jt(e),GSDOM$1.toggleClass(e,'show',!0)}))}hide(){const t=this;return!t.#Fr&&(setTimeout((()=>{GSDOM$1.setHTML(t,'')}),250),GSDOM$1.toggleClass(t.firstElementChild,'show',!1))}toggle(){const t=this;t.visible?t.hide():t.show()}#Hr(t){const e=this;if(e.#Fr)return e.#Fr=!1,void e.hide();const s=!e.isHoverTrigger;t.target==e.target?e.visible?e.#Fr=!0:s&&e.show():s&&e.visible&&e.hide()}static#Nr(t){return(t?.firstElementChild||t?.nextElementSibling)instanceof GSPopover}static#Ir(t){return t?.dataset?.bsContent&&'popover'===t?.dataset?.bsToggle}}class GSPopup extends GSElement{#xe=null;#Te=!1;#jt=!1;#ke=!1;static{customElements.define('gs-popup',GSPopup),Object.seal(GSPopup)}static get observedAttributes(){return GSElement.observeAttributes(['visible','css'])}attributeCallback(t='',e='',s=''){const r=this;'visible'===t&&(r.#qr(),GSDOM$1.toggleClass(r.#ht,'invisible',!r.visible))}connectedCallback(){super.connectedCallback();const t=this;t.#Te=!0,t.attachEvent(t,'form',t.#Ye.bind(t))}disconnectedCallback(){this.#Te=!1,super.disconnectedCallback()}async getTemplate(t=''){const e=this,s=await super.getTemplate(t),r=e.visible?'':'invisible';return s&&requestAnimationFrame((()=>{const t=GSDOM$1.parse(s);for(let s of t.body.children)GSDOM$1.appendChild(e,s)})),`<div class="position-${e.position} ${e.css} ${r}" style="${this.getStyle()}"><slot></slot></div>`}onReady(){const t=this;t.#jt||(t.#jt=!0,t.#Br(),super.onReady())}get isFlat(){return this.parentElement!==document.body}get anchor(){return'beforeend@body'}get#ht(){return this.query('div')}get css(){return GSAttr.get(this,'css')}set css(t=''){return GSAttr.set(this,'css',t)}get event(){return GSAttr.get(this,'event','click')}set event(t=''){return GSAttr.set(this,'event',t)}get placement(){return GSAttr.get(this,'placement',this?.target?.datalist?.bsPlacement||'')}set placement(t=''){return GSAttr.set(this,'placement',t)}get position(){return GSAttr.get(this,'position','absolute')}set position(t=''){return GSAttr.set(this,'position',t)}get target(){return GSAttr.get(this,'target')}set target(t=''){return GSAttr.set(this,'target',t)}get visible(){return GSAttr.getAsBool(this,'visible',!1)}set visible(t=''){return GSAttr.setAsBool(this,'visible',t)}get autoclose(){return GSAttr.getAsBool(this,'autoclose',!0)}set autoclose(t=''){return GSAttr.getAsBool(this,'autoclose',t)}get hPos(){return GSAttr.getAsNum(this,'h-pos')}set hPos(t=''){return GSAttr.setAsNum(this,'h-pos',t)}get vPos(){return GSAttr.getAsNum(this,'v-pos')}set vPos(t=''){return GSAttr.setAsNum(this,'v-pos',t)}set wMax(t=''){return GSAttr.setAsNum(this,'w-max',t)}get wMax(){return GSAttr.getAsNum(this,'w-max')}set wMin(t=''){return GSAttr.setAsNum(this,'w-min',t)}get wMin(){return GSAttr.getAsNum(this,'w-min')}set hMax(t=''){return GSAttr.setAsNum(this,'h-max',t)}get hMax(){return GSAttr.getAsNum(this,'h-max')}set hMin(t=''){return GSAttr.setAsNum(this,'h-min',t)}get hMin(){return GSAttr.getAsNum(this,'h-min')}close(t){const e=this;if(e.visible=!1,t instanceof Event){t.preventDefault();const s={type:'popup',option:t.target,caller:e.#xe,data:null};GSEvent.send(e,'action',s,!0,!0)}}open(){this.visible=!0}toggle(t){const e=this;if(t)return e.#Re(t);e.visible=!e.visible}popup(t=0,e=0){const s=this,r=s.#ht;r&&requestAnimationFrame((()=>{s.visible=!0,r.style.top='0px',r.style.left='0px',s.#qr(),r.style.transform=`translate(${t}px, ${e}px)`}))}#qr(){const t=this,e=t.#ht;e&&(t.visible||(t.style.transform='unset'),t.wMax&&(e.style.maxWidth=`${t.wMax}px`),t.wMin&&(e.style.minWidth=`${t.wMin}px`),t.hMax&&(e.style.maxHeight=`${t.hMax}px`),t.hMin&&(e.style.minHeight=`${t.hMin}px`))}#He(t){this.close()}#Re(t){const e=this;if(e.#xe=t,t instanceof Event&&(t.preventDefault(),e.#xe=t.composedPath().filter((t=>!(t instanceof HTMLSlotElement)))[0]),e.placement)return GSPopper.popupFixed(e.placement,e.#ht,e.#xe),void(e.visible=!0);let s=t.clientX,r=t.clientY;const n=e.#ht.getBoundingClientRect(),i=s+n.width>window.innerWidth,a=r+n.height>window.innerHeight;return i&&(s=window.innerWidth-n.width),a&&(r=window.innerHeight-n.height),e.popup(s,r),!0}async#Ne(){const t=this;if(!t.target)return;if(t.#ke)return;const e=GSDOM$1.queryAll(document.documentElement,t.target);0!==e.length?(t.#ke=!0,t.event.split(' ').forEach((s=>{e.forEach((e=>t.attachEvent(e,s,t.#Re.bind(t))))})),t.removeEvent(document,'gs-components')):t.#Te&&(await GSUtil.timeout(1e3),requestAnimationFrame((()=>{t.#Ne()})))}#Br(){const t=this;t.#Ne(),t.attachEvent(document,'gs-component',t.#Ne.bind(t)),t.attachEvent(window,'resize',t.#He.bind(t)),t.#qr(),t.autoclose&&t.attachEvent(t.#ht,'mouseleave',t.close.bind(t)),t.visible&&t.popup(t.hPos,t.vPos)}#Ye(t){const e=this;let s=e.#Pr(t,t.target,'submit','GS-POPUP');s&&(GSEvent.prevent(t),s=GSEvent.send(e,'data',{type:'popup',data:t.detail.data,evt:t},!0,!0,!0),s&&e.close())}#Pr(t,e,s,r){if(t.detail.type!==s)return!1;return GSComponents$1.getOwner(e,r)==this}}class GSProgress extends GSElement{static{customElements.define('gs-progress',GSProgress),Object.seal(GSProgress)}static get observedAttributes(){return GSElement.observeAttributes(['min','max','now'])}constructor(){super()}attributeCallback(t='',e='',s=''){const r=this,n=r.#jr;n&&(GSAttr.set(n,`aria-value${t}`,s),n.style.width=`${r.percentage}%`,r.label&&GSDOM$1.setHTML(n,r.#Rr()))}#Rr(){const t=this,e={now:t.value,min:t.min,max:t.max,percentage:t.percentage};return GSUtil.fromTemplateLiteral(t.label,e)}async getTemplate(t=''){const e=this,s=e.label?GSUtil.fromTemplateLiteral(e.label,{now:e.value,min:e.min,max:e.max,percentage:e.percentage}):'';return`\n        <div class="progress" style="${this.getStyle()}">\n            <div class="progress-bar ${e.css}" role="progressbar" style="width: ${e.percentage}%" aria-valuenow="${e.value}" aria-valuemin="${e.min}" aria-valuemax="${e.max}">${s}</div>\n        </div>    \n        `}get#jr(){return this.query('.progress-bar')}get isFlat(){return!0}get anchor(){return'self'}get percentage(){return Math.trunc(this.value/this.max*100)}get value(){return GSAttr.getAsNum(this,'now',0)}set value(t=''){if(!GSUtil.isNumber(t))return!1;const e=this;let s=GSUtil.asNum(t)||e.value;return s>e.max&&(s=e.max),s<e.min&&(s=e.min),GSAttr.set(e,'now',s)}get min(){return GSAttr.getAsNum(this,'min',0)}set min(t=''){return GSAttr.setAsNum(this,'min',0)}get max(){return GSAttr.getAsNum(this,'max',100)}set max(t=''){return GSAttr.setAsNum(this,'max',100)}get css(){return GSAttr.get(this,'css','')}set css(t=''){return GSAttr.set(this,'css',t)}get label(){return GSAttr.get(this,'label','')}set label(t=''){return GSAttr.set(this,'label',t)}increase(t=1){return this.value=this.value+t,!0}decrease(t=1){return this.value=this.value-t,!0}}class GSSplitter extends GSElement{#Ur=0;#zr=!1;static{customElements.define('gs-splitter',GSSplitter),Object.seal(GSSplitter)}constructor(){super()}async getTemplate(t=''){const e=this,s=e.isVertical?'width':'height',r=e.isVertical?'height':'width',n=e.isVertical?'w-resize':'n-resize';return`\n            <style>\n                .splitter {\n                    ${s}: ${e.size}px;\n                    ${r}: 100%;\n                    border-width: 1px;\n                    cursor: ${n};\n                    border-color: darkgray;\n                    border-style: solid;\n                    background-color: lightgray;\n                }                        \n            </style>\n            <div class="splitter ${e.css}" style="${this.getStyle()}"></div>\n        `}get isVertical(){return'vertical'===GSAttr.get(this,'split','vertical')}get css(){return GSAttr.get(this,'css')}set css(t=''){return GSAttr.set(this,'css',t)}get size(){return GSAttr.getAsNum(this,'size',8)}set size(t=''){return GSAttr.setAsNum(this,'size',t)}get resize(){return GSAttr.get(this,'resize','start')}set resize(t=''){return GSAttr.set(this,'resize',t)}get start(){return this.previousElementSibling}get end(){return this.nextElementSibling}get target(){const t=this;let e=t.#Vr?t.start:t.end;return e=e||t.parentElement,e=GSDOM$1.isGSElement(e)?e.self:e,e instanceof ShadowRoot&&(e=Array.from(e.children).filter((t=>'none'!==window.getComputedStyle(t).display)).pop()),e}connectedCallback(){this.#zr=!!this.id,super.connectedCallback()}onReady(){this.#_r(),this.#Wr(),super.onReady()}get#Vr(){const t=this.resize;return'start'===t||'top'===t}get#rr(){return this.query('div')}#_r(){const t=this;if(!t.#zr)return;const e=GSID.hashCode(location.origin+location.pathname);let s=localStorage.getItem(`gs-splitter-${e}-${t.id}`);s=GSUtil.asNum(s),s>0&&(t.#Ur=s,t.isVertical?t.target.style.width=s+'px':t.target.style.height=s+'px')}#Yr(){const t=this,e=window.getComputedStyle(t.target),s=t.isVertical?e.width:e.height,r=GSID.hashCode(location.origin+location.pathname);localStorage.setItem(`gs-splitter-${r}-${t.id}`,s.match(/(\d+)/)[0])}#Wr(){const t=this,e=t.#rr;t.attachEvent(e,'mousedown',t.#Jr.bind(t),!0)}#Jr(t){const e=this;GSEvent.prevent(t),e.#Ur=e.isVertical?t.clientX:t.clientY,e.attachEvent(document,'mouseup',e.#Xr.bind(e),!0),e.attachEvent(document,'mousemove',e.#Kr.bind(e))}#Xr(t){const e=this;GSEvent.prevent(t),GSEvent.deattachListeners(e),e.#Yr(),e.#Wr()}#Kr(t){GSEvent.prevent(t);const e=this.isVertical?t.clientX:t.clientY;this.#se(e)}#se(t){const e=this;requestAnimationFrame((()=>{e.isVertical?e.#Zr(t):e.#Qr(t)}))}#Zr(t){const e=this,s=e.target,r=e.#Vr?1:-1;let n=(t-e.#Ur)*r;n+=s.clientWidth,n=n<0?0:n,s.style.width=n+'px',e.#Ur=t}#Qr(t){const e=this,s=e.target,r=e.#Vr?1:-1;let n=(t-e.#Ur)*r;n+=s.clientHeight,n=n<0?0:n,s.style.height=n+'px',e.#Ur=t}}class GSTab extends GSElement{static CSS_PANE='';static CSS_NAV='';static CSS_NAV_WRAP='';static{customElements.define('gs-tab',GSTab),Object.seal(GSTab)}static get observedAttributes(){return GSElement.observeAttributes(['data'])}constructor(){super(),GSItem.validate(this,this.tagName)}attributeCallback(t='',e='',s=''){if('data'===t)return this.load(s)}async getTemplate(t=''){const e=this,s=GSItem.genericItems(e);s.forEach((t=>t.id=GSID.id));const r=s.map((t=>e.#tn(t))).join(''),n=s.map((t=>e.#en(t))).join(''),i=e.#sn(n),a=e.#Ps?e.#rn(r):e.#nn(r);return`<div class="${e.#Ps?`d-flex align-items-start ${e.#in}`:e.#in}">${e.#an?i+a:a+i}</div>`}get#an(){return'end'===this.#on||'bottom'===this.#on}get#Ps(){return'start'===this.#on||'end'===this.#on}get#on(){return GSAttr.get(this,'placement','top')}get#hr(){return GSAttr.get(this,'css-nav','nav-tabs')}get#ln(){return GSAttr.get(this,'css-pane')}#rn(t){return`\n      <div class="nav flex-column user-select-none ${GSTab.CSS_NAV} ${this.#hr}" id="v-pills-tab" role="tablist" aria-orientation="vertical">\n        ${t}\n      </div>\n    `}#nn(t){return`\n      <ul class="nav user-select-none ${GSTab.CSS_NAV} ${this.#hr}" "role="tablist">\n        ${t}\n      </ul>      \n      `}#sn(t){return`     \n        <div class="tab-content flex-fill ${GSTab.CSS_PANE} ${this.#ln}">\n          ${t}\n        </div>  \n      `}#tn(t){const e=this,s=e.#Ps?'':`<li class="nav-item ${GSTab.CSS_NAV_WRAP} ${e.#cn(t)}" role="presentation">`,r=e.#nr(t),n=e.#zs(t),i=`${n?`<i class="${n}"></i>`:''} ${r}`,a=e.#un(t);return`${s}\n          <a type="button" role="tab" is="gs-ext-navlink"\n              id="${t.id}-tab" \n              class="nav-link ${e.#dn(t)} ${a}" \n              aria-controls="${t.id}-tab"                 \n              data-bs-target="#${t.id}-pane" \n              data-bs-toggle="tab">${i}</a>\n          ${s?'</li>':''}\n      `}#en(t){const e=this;return e.isFlat?e.#hn(t):e.#gn(t)}#gn(t){const e=this,s=e.#mn(t),r=GSItem.getBody(t),n=GSDOM$1.parseWrapped(e,r);return GSAttr.set(n,'slot',t.id),GSDOM$1.appendChild(e,n),`\n      <div  id="${t.id}-pane" aria-labelledby="${t.id}-tab" \n          class="tab-pane fade ${e.#Sn(t)}  ${s}" \n          role="tabpanel">\n          <slot name="${t.id}"></slot>\n      </div>        \n      `}#hn(t){const e=this,s=e.#mn(t),r=GSItem.getBody(t,e.isFlat);return`\n      <div  id="${t.id}-pane" aria-labelledby="${t.id}-tab" \n          class="tab-pane fade ${e.#Sn(t)}  ${s}" \n          role="tabpanel">\n          ${r}\n      </div>        \n      `}#pn(t){return GSAttr.getAsBool(t,'active')}#un(t){return this.#pn(t)?'active':''}#mn(t){return this.#pn(t)?'active show':''}#nr(t){return GSAttr.get(t,'title')}#zs(t){return GSAttr.get(t,'icon')}#Sn(t){return GSAttr.get(t,'css-pane')}#dn(t){return GSAttr.get(t,'css-nav')}#cn(t){return GSAttr.get(t,'css-nav-wrap')}get#in(){return GSAttr.get(this,'css','')}async load(t=''){const e=await GSLoader.loadData(t);if(!GSUtil.isJsonType(e))return;const s=this,r=GSItem.generateItem(e);GSDOM$1.setHTML(s,r),GSEvent.deattachListeners(s),s.connectedCallback()}}class GSTooltip extends GSElement{static{customElements.define('gs-tooltip',GSTooltip),Object.seal(GSTooltip),GSDOMObserver.registerFilter(GSTooltip.#N,GSTooltip.#H)}static#N(t){return t instanceof HTMLElement&&((!t.tagName||!t.tagName.startsWith('GS-'))&&(GSTooltip.#Gn(t)&&!GSTooltip.#Rs(t)))}static#H(t){t.id=t.id||GSID.id;const e=document.createElement('gs-tooltip');e.ref=`#${t.id}`,requestAnimationFrame((()=>{setTimeout((()=>{t.parentElement.insertAdjacentElement('beforeend',e)}),100)}))}constructor(){super()}onReady(){super.onReady(),this.#B()}#B(){const t=this;t.attachEvent(t.target,'mouseenter',t.show.bind(t)),t.attachEvent(t.target,'mouseleave',t.hide.bind(t))}#bn(){const t=this,e=t.querySelector('div.tooltip-arrow');return GSPopper.popupFixed(t.placement,t.firstElementChild,t.target,e),t.firstElementChild}get#ye(){return`\n         <div class="tooltip bs-tooltip-auto fade " data-popper-placement="${this.placement}" role="tooltip">\n            <div class="tooltip-arrow"></div>\n            <div class="tooltip-inner">${this.title}</div>\n        </div>        \n        `}get target(){const t=this;if(t.ref){let e=t.owner;return e=GSDOM$1.isGSElement(t.owner)?e.self:e,e.querySelector(t.ref)}return t.previousElementSibling||t.parentElement}get ref(){return GSAttr.get(this,'ref')}set ref(t=''){return GSAttr.set(this,'ref',t)}get title(){return GSAttr.get(this,'title')||GSAttr.get(this.target,'title')}set title(t=''){return GSAttr.set(this,'title',t)}get placement(){return GSAttr.get(this,'placement',this.target?.dataset?.bsPlacement||'top')}set placement(t=''){return GSAttr.set(this,'placement',t)}get isFlat(){return!0}show(){const t=this;requestAnimationFrame((()=>{const e=GSDOM$1.parse(t.#ye,!0);t.insertAdjacentElement('afterbegin',e),t.#bn(),GSDOM$1.toggleClass(t.firstElementChild,'show',!0)}))}hide(){const t=this;return setTimeout((()=>{Array.from(t.childNodes).forEach((t=>t.remove()))}),250),GSDOM$1.toggleClass(t.firstElementChild,'show',!1)}toggle(){const t=this;t.childElementCount>0?t.hide():t.show()}static#Rs(t){return(t?.firstElementChild||t?.nextElementSibling)instanceof GSTooltip}static#Gn(t){return t?.title&&'tooltip'===t?.dataset?.bsToggle}}class GSAttachment{constructor(t,e){this.file=t,this.directory=e}static traverse(t,e){return GSAttachment.#fn(t,e)}static from(t){return Array.from(t).filter((t=>t instanceof File)).map((t=>new GSAttachment(t)))}get fullPath(){const t=this;return t.directory?`${t.directory}/${t.file.name}`:t.file.name}isImage(){return['image/gif','image/png','image/jpg','image/jpeg','image/svg+xml'].includes(this.file.type)}isVideo(){return['video/mp4','video/quicktime'].includes(this.file.type)}static#fn(t,e){return e&&GSAttachment.#An(t)?GSAttachment.#vn('',GSAttachment.#yn(t)):Promise.resolve(GSAttachment.#En(Array.from(t.files||[])).map((t=>new GSAttachment(t))))}static#$n(t){return t.name.startsWith('.')}static#En(t){return Array.from(t).filter((t=>!GSAttachment.#$n(t)))}static#Mn(t){return new Promise(((e,s)=>{t.file(e,s)}))}static#Dn(t){return new Promise(((e,s)=>{const r=[],n=t.createReader(),read=()=>{n.readEntries((t=>{t.length>0?(r.push(...t),read()):e(r)}),s)};read()}))}static async#vn(t,e){const s=[];for(const r of GSAttachment.#En(e))if(r.isDirectory){const t=await GSAttachment.#Dn(r),e=await GSAttachment.#vn(r.fullPath,t);s.push(...e)}else{const e=await GSAttachment.#Mn(r);s.push(new GSAttachment(e,t))}return s}static#An(t){return Array.from(t.items).some((t=>{const e=t.webkitGetAsEntry&&t.webkitGetAsEntry();return e&&e.isDirectory}))}static#yn(t){return Array.from(t.items).map((t=>t.webkitGetAsEntry())).filter((t=>null!=t))}}class GSFileBox extends GSElement{static TITLE='Drop file/s here or click to select';static CSS='border-2 p-4 d-block text-center dash';#wn=null;constructor(){super()}async getTemplate(t=''){const e=this;return`<style>\n            .dash {\n                border-style: var(--gs-fieldbox-border, dashed) !important;\n                border-color: var(--gs-fieldbox-border-color, lightgrey);\n            }\n            input[type=file] {\n                color : var(--gs-fieldbox-color, transparent);\n            } \n            input[type=file]::file-selector-button {\n\n            }             \n            input[type=file]::file-selector-button:hover {\n            }            \n        </style>\n        <div part="border" class="${e.css}">\n            <label part="label" class="${e.cssLabel}" for="${e.name}">${e.title}</label>\n            <input part="input" class="${e.cssInput}" type="file" accept="${e.accept}" id="${e.name}" name="${e.name}" ${e.multiple?'multiple':''} ${e.directory?'directory webkitdirectory':''} >\n            <pre part="list" class="${e.cssList}"></pre>\n        </div>\n        `}onReady(){const t=this,e=t.query('div');t.attachEvent(e,'click',t.#rt.bind(t)),t.attachEvent(e,'dragenter',t.#Cn.bind(t)),t.attachEvent(e,'dragover',t.#Cn.bind(t)),t.attachEvent(e,'dragleave',t.#On.bind(t)),t.attachEvent(e,'drop',t.#xn.bind(t)),t.attachEvent(e,'paste',t.#et.bind(t)),t.attachEvent(e,'change',t.#tt.bind(t)),super.onReady()}get listEl(){return this.query('pre')}get fileEl(){return this.query('input')}get css(){return GSAttr.get(this,'css',GSFileBox.CSS)}set css(t=''){return GSAttr.set(this,'css')}get cssList(){return GSAttr.get(this,'css-list','')}set cssList(t=''){return GSAttr.set(this,'css-list')}get cssLabel(){return GSAttr.get(this,'css-label','')}set cssLabel(t=''){return GSAttr.set(this,'css-label')}get cssInput(){return GSAttr.get(this,'css-input','d-none')}set cssInput(t=''){return GSAttr.set(this,'css-input')}get multiple(){return GSAttr.getAsBool(this,'multiple',!0)}set multiple(t=''){return GSAttr.setAsBool(this,'mulltiple',t)}get title(){return GSAttr.get(this,'title',GSFileBox.TITLE)}set title(t=''){return GSAttr.set(this,'title',GSFileBox.TITLE)}get name(){return GSAttr.get(this,'name','')}set name(t=''){return GSAttr.set(this,'name','')}get accept(){return GSAttr.get(this,'accept','')}set accept(t=''){return GSAttr.set(this,'accept')}get filter(){return GSAttr.get(this,'filter','^image/(gif|png|jpeg)$')}set filter(t=''){return GSAttr.set(this,'filter')}get directory(){return GSAttr.getAsBool(this,'directory',!1)}set directory(t=''){return GSAttr.setAsBool(this,'directory',val)}#rt(t){if(t.target instanceof HTMLLabelElement)return;const e=this.fileEl.previousElementSibling;e instanceof HTMLLabelElement&&e.click()}#Cn(t){const e=this;e.#wn&&clearTimeout(e.#wn),e.#wn=setTimeout((()=>e.removeAttribute('hover')),200);const s=t.dataTransfer;s&&e.#Tn(s)&&(s.dropEffect='copy',e.setAttribute('hover',''),t.preventDefault())}#On(t){t.dataTransfer&&(t.dataTransfer.dropEffect='none'),this.removeAttribute('hover'),GSEvent.prevent(t)}#xn(t){const e=this;e.removeAttribute('hover');const s=t.dataTransfer;s&&e.#Tn(s)&&(e.#kn(s),GSEvent.prevent(t))}#et(t){if(!t.clipboardData)return;if(!t.clipboardData.items)return;const e=this.#Ln(t.clipboardData.items);if(!e)return;const s=[e];this.#kn(s),t.preventDefault()}#tt(t){const e=this.fileEl.files;e&&0!==e.length&&this.#kn(e)}#Tn(t){return Array.from(t.types).indexOf('Files')>=0}#Ln(t){const e=this.filter?new RegExp(this.filter):null;for(const s of t)if('file'===s.kind){if(!e)return s.getAsFile();if(e.test(s.type))return s.getAsFile()}return null}#Cs(t){const e=new DataTransfer;t.forEach((t=>e.items.add(t.file))),this.fileEl.files=e.files,this.listEl.textContent=t.map((t=>t.file.name)).join('\n')}async#kn(t){const e=this,s=t instanceof DataTransfer?await GSAttachment.traverse(t,e.directory):GSAttachment.from(t);GSEvent.send(e,'accept',{attachments:s},!0,!1,!0)&&s.length&&(e.#Cs(s),GSEvent.send(e,'accepted',{attachments:s},!0))}static{customElements.define('gs-filebox',GSFileBox),Object.seal(GSFileBox)}}class GSStore extends HTMLElement{static#Fn=['rest','query','quark'];#Te=!1;#In='';#Nn=[];#Hn=!1;#qn=0;#Bn=0;#Pn=1;#jn=[];#Rn=[];#Un=0;static{customElements.define('gs-store',GSStore),Object.seal(GSStore)}static get observedAttributes(){return['id','src','limit','skip','remote','filter','sort']}constructor(){super(),GSItem.validate(this,this.tagName)}attributeChangedCallback(t='',e='',s=''){const r=this;if('id'===t)return GSComponents$1.remove(e),void GSComponents$1.store(r);GSComponents$1.hasSetter(r,t)&&(r[t]=s),'src'===t&&(r.#Nn=[],r.reload())}connectedCallback(){const t=this;t.#Te=!0,t.id||t.setAttribute('id',GSID.id),GSComponents$1.store(t)}disconnectedCallback(){this.#Te=!1,GSComponents$1.remove(this)}async waitEvent(t=''){if(!t)throw new Error('Event undefined!');const e=this;return new Promise(((s,r)=>{e.once(t,(t=>s(t.detail)))}))}once(t,e){return this.attachEvent(this,t,e,!0)}listen(t,e){return this.attachEvent(this,t,e)}unlisten(t,e){this.removeEvent(this,t,e)}attachEvent(t,e='',s,r=!1){return GSEvent.attach(this,t,e,s,r)}removeEvent(t,e='',s){GSEvent.remove(this,t,e,s)}get mode(){const t=GSAttr.get(this,'mode','query');return GSStore.#Fn.includes(t)?t:'query'}set mode(t='query'){if(GSStore.#Fn.includes(t))return GSAttr.set(this,'mode',t)}get action(){let t='';switch(this.mode){case'query':t='?limit=${limit}&skip=${skip}&sort=${sort}&filter=${filter}';break;case'rest':t='/${limit}/${skip}?sort=${sort}&filter=${filter}'}return GSAttr.get(this,'action',t)}get table(){return GSDOM$1.closest(this,'GS-TABLE')}get url(){const t=this;return t.#zn(t.src,t.skip,t.limit,t.filter,t.sort)}get src(){return this.#In}set src(t=''){this.#In=t,this.reload()}get limit(){return this.#Bn}set limit(t=0){this.#Bn=GSUtil.asNum(t),this.reload()}get skip(){return this.#qn}set skip(t=0){this.#qn=GSUtil.asNum(t),this.reload()}get remote(){return this.#Hn}set remote(t=!1){this.#Hn=GSUtil.asBool(t),this.reload()}get filter(){return this.#Rn}set filter(t){this.#Rn=GSUtil.isJson(t)?GSUtil.toJson(t):t,this.reload()}get sort(){return this.#jn}set sort(t){this.#jn=GSUtil.isString(t)?JSON.parse(t):t,this.reload()}get data(){return this.#Nn}get total(){return this.#Un||this.#Nn.length}get offset(){return(this.page-1)*this.limit}get page(){return this.#Pn}set page(t=1){if(!GSUtil.isNumber(t))throw new Error('Numeric value required!');const e=this;e.#Pn=GSUtil.asNum(t<1?1:t),e.#Pn=e.#Pn>e.pages?e.pages:e.#Pn;const s=e.#Bn*(t-1);e.getData(s,e.#Bn,e.#Rn,e.#jn)}get pages(){const t=this;return 0===t.total||0===t.limit?1:Math.ceil(t.total/t.#Bn)}nextPage(){const t=this;if(t.page!==t.pages)return t.page=t.page+1,t.#Pn}prevPage(){const t=this;if(1!==t.page)return t.page=t.page-1,t.#Pn}lastPage(){const t=this;return t.page=0===t.#Bn?1:t.pages,t.#Pn}firstPage(){return this.page=1,this.#Pn}clear(){this.#Un=0,this.setData()}async load(t,e){const s=this;if(!s.#Te)return!1;const r=t||s.src;if(0===r.length)return!1;(e=e||{}).headers=e.headers||{},e.headers['Content-Type']='application/json; utf-8',e.headers.Accept='application/json';const n=await fetch(r,e);if(!n.ok)return!1;const i=await n.json();return s.#se(i),i}#se(t=[],e=!1){const s=this;let r=[];r=Array.isArray(t)?t:Array.isArray(t.data)?t.data:[t],e?s.#Nn=s.#Nn.concat(r):(s.#Pn=1,s.#Nn=r),s.#Un=s.#Nn.length}setData(t=[],e=!1){const s=this;s.#se(t,e),s.getData(s.skip,s.limit,s.#Rn,s.#jn)}async getData(t=0,e=0,s,r){const n=this;s=n.#Vn(s||n.filter),r=n.#_n(r||n.sort);let i=[];if(!(GSUtil.isString(s)&&GSUtil.isStringNonEmpty(s))&&n.src&&(n.remote||0==n.data.length)){const a=n.#zn(n.src,t,e,s,r);i=await n.load(a)}if(!n.remote){const a=n.#Wn();i=GSData.filterData(s,n.#Nn,a),i=GSData.sortData(r,i),e=0===e?i.length:e,i=i.slice(t,t+e)}return n.#Yn('data',i),i}reload(){const t=this;if(t.#Te)return t.getData(t.skip,t.limit,t.filter,t.sort)}#zn(t,e,s,r,n){n=n?JSON.stringify(n):'',r=r?JSON.stringify(r):'';const i={limit:s,skip:e,sort:encodeURIComponent(n),filter:encodeURIComponent(r)};return t+GSUtil.fromLiteral(this.action,i)}#Yn(t='data',e){GSEvent.sendDelayed(1,this,t,e,!0)}#Vn(t){let e=[];return('string'==typeof t||Array.isArray(t))&&(e=t),e}#_n(t=''){let e;if('string'==typeof t)e=[{col:t}];else if(Array.isArray(t))e=t;else if(GSUtil.isNumber(t)){const s=Math.abs(t);e=new Array(s),e[s-1]={ord:t}}return e}#Wn(){const t=this.table?.header?.fields;return t||Array.from(this.querySelectorAll('gs-item')).map((t=>t.name))}}class GSColumn extends HTMLElement{static{customElements.define('gs-column',GSColumn)}#Jn=[];constructor(){super(),GSItem.validate(this,this.tagName)}connectedCallback(){this.#Xn()}async#Xn(){const t=await GSLoader.loadSafe(this.src,'GET',null,!0);this.#Jn=Array.isArray(t)?t:Object.entries(t)}render(){const t=this,e=t.sortable?'sorting':'',s=t.width?`style="width:${t.width};"`:'',r=t.colspan?`colspan="${t.colspan}"`:'';return`<th scope="col" data-sortable="${t.sortable}" data-order="${t.#Kn}" name="${t.name}" ${r} class="${e} ${t.cssHeader}" ${s}>${t.title||t.name}</th>`}renderFilter(){const t=this;if(!t.filter)return'<th></th>';let e='';switch(t.list){case'fixed':e=t.#Zn();break;case'flexi':e=t.#Qn();break;default:e=t.#ti()}return`<th css="${t.cssFilter}">${e}</th>`}#Zn(){const t=this,e=t.#ei(!0);return`<select auto="${t.auto}" name="${t.name}" title="${t.title||t.name}" class="${t.cssField}" >${e}</select>`}#Qn(){const t=GSID.next();return this.#ti(t)+`<datalist id="${t}">${this.#ei(!1)}</datalist>`}#ti(t=''){const e=this;return`<input auto="${e.auto}" name="${e.name}" title="${e.title||e.name}" class="${e.cssField}" placeholder="${e.title||e.name}" list="${t}">`}#ei(t=!1){const e=[];return this.filters.forEach((s=>{const r=GSAttr.getAsBool(s,'default',!1),n=GSAttr.get(s,'value',''),i=GSAttr.get(s,'map',n);let a='';a=t?`<option value="${n}" ${r?'selected':''}>${i}</option>`:`<option value="${i}" data-value="${n}">`,e.push(a)})),e.join('')}get#Kn(){const t=this;return t.sortable&&t.direction?'asc'===t.direction?1:-1:0}get table(){return GSDOM$1.closest(this,'GS-TABLE')}get cssField(){const t=this.list?'form-select':'form-control';return GSAttr.get(this,'css-field',t)}get filter(){return GSAttr.getAsBool(this,'filter',!1)}get sortable(){const t=this;return!(!t.name||t.counter)&&GSAttr.getAsBool(t,'sortable',!0)}get direction(){return GSAttr.get(this,'direction','')}get cssFilter(){return GSAttr.get(this,'css-filter','')}get cssHeader(){return GSAttr.get(this,'css-header','border-end')}get css(){return GSAttr.get(this,'css','')}get width(){return GSAttr.get(this,'width')}get name(){return GSAttr.get(this,'name','')}get title(){return GSAttr.get(this,'title','')}get counter(){return'#'===this.name}get index(){return GSAttr.getAsNum(this,'index',-1)}get format(){return GSAttr.get(this,'format')}get type(){return GSAttr.get(this,'type')}get colspan(){return GSAttr.get(this,'colspan','')}get list(){const t=GSAttr.get(this,'list','').toLowerCase(),e=['fixed','flexi'].includes(t);return e||this.auto?e?t:'':'flexi'}get items(){return GSItem.genericItems(this)}get filterDef(){return this.querySelector('gs-item[filter="true"]')}get mapDef(){return this.querySelector('gs-item[map="true"]')}get ref(){return GSAttr.get(this.mapDef,'ref')}get src(){return GSAttr.get(this.mapDef,'src')}get filters(){return GSItem.genericItems(this.filterDef)}get maps(){return GSItem.genericItems(this.mapDef)}get auto(){return 0===this.childElementCount}get#si(){const t=this;return t.src||0===t.#Jn.length&&(t.#Jn=t.maps.map((t=>[GSAttr.get(t,'value'),GSAttr.get(t,'map')]))),t.#Jn}toJSON(){const t=this;return{ref:t.ref,name:t.name,title:t.title,width:t.width,sortable:t.sortable,filter:t.filter,idx:t.index,type:t.type,format:t.format,css:t.css,colspan:t.colspan,map:t.#si}}}class GSHeader extends HTMLElement{static{customElements.define('gs-header',GSHeader)}get#ri(){return GSDOM$1.queryAll(this,'gs-column')}get#ni(){return GSDOM$1.queryAll(this,'gs-column[filter=true]')}get#ii(){return GSDOM$1.queryAll(this,'gs-column').filter((t=>'false'===GSAttr.get(t,'hidden','false')))}render(){const t=this,e=t.table,s=t.#ni,r=t.#ii,n=[];return n.push(`<thead class="${e.cssHeader}">`),s.length>0&&(n.push(`<tr is="gs-tablefilter" class="${e.cssFilter}">`),t.#ri.forEach((t=>n.push(t.renderFilter()))),n.push('</tr>')),n.push(`<tr is="gs-tablesort" class="${e.cssColumns}">`),r.forEach((t=>n.push(t.render()))),n.push('</tr>'),n.push('</thead>'),n.join('')}toJSON(){return this.#ii.map((t=>t.toJSON()))}get table(){return GSDOM$1.closest(this,'GS-TABLE')}get fields(){return this.#ii.map((t=>GSAttr.get(t,'name')))}}class GSTBody extends HTMLTableSectionElement{#ai=null;static{customElements.define('gs-tbody',GSTBody,{extends:'tbody'}),Object.seal(GSTBody)}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),GSEvent.attach(t,t,'click',(e=>t.#rt(e))),GSEvent.attach(t,t,'contextmenu',(e=>t.#oi(e)),!1,!0),t.#ai=GSDOM$1.closest(t,'GS-TABLE')}disconnectedCallback(){this.#ai=null,GSEvent.deattachListeners(this)}get index(){return this.table.index}get cssCell(){return this.table.cssCell}get cssRow(){return this.table.cssRow}get cssSelect(){return this.table.cssSelect}get select(){return this.table.select}get multiselect(){return this.table.multiselect}get table(){return this.#ai||GSDOM$1.closest(this,'GS-TABLE')}render(t,e,s){const r=this;if(!Array.isArray(t))return;const n=[];let i='';if(e.forEach(((e,a)=>{n.push(`<tr class="${r.cssRow}" data-index=${a}>`),i=Array.isArray(e)?r.#li(t,e,a,s):r.#y(t,e,s),n.push(i),n.push('</tr>')})),0===e.length&&r.table.noDataText){const e=t.map((t=>t.colspan?1|parseInt(t.colspan):1)).reduce(((t,e)=>t+e),0);n.push(r.#ci(e))}GSDOM$1.setHTML(r,n.join('')),GSDOM$1.queryAll(r,'tr').forEach((t=>{0===t.innerText.trim().length&&t.remove()}))}#ci(t){return`<tr data-ignore="true"><td colspan="${t}" class="text-center fw-bold text-muted">${this.table.noDataText}</td></tr>`}#li(t,e,s,r){const n=this,i=[];return t.forEach((t=>{const a='#'===t.name?(s+1+r).toString():e[t.idx];i.push(`<td class="${n.cssCell}">${a||'&nbsp;'}</td>`)})),i.join('')}#y(t,e,s){const r=this,n=[];return t.forEach(((t,i)=>{const a=r.#ui(t,e,i+1+s);n.push(a)})),n.join('')}#ui(t,e,s){let r='#'===t.name?s:e[t.name],n=t.ref?e[t.ref]:r;const i=t.map?.filter((t=>t[0]===''+n));r=i?.length>0&&i[0][1]||r,r=this.#di(t,r);const a=t.colspan?`colspan="${t.colspan}"`:'';return`<td class="${this.cssCell} ${t.css}" ${a}>${r?.toString()||'&nbsp;'}</td>`}#di(t,e){if(!t.format)return e;const s=this.#ve(t,e),r=t.locale||navigator.locale;switch(s){case'timestamp':case'date':const s='true'==t.format?void 0:t.format;return e&&e>0?new GSDate(e).format(s,r):e;case'string':case'boolean':case'number':break;case'currency':const n={style:'currency',currency:t.currency};return new Intl.NumberFormat(r,n).format(e)}return e}#ve(t,e){return t.type?t.type:e instanceof Date?'date':e instanceof Number?'number':e instanceof Boolean?'boolean':typeof e}#oi(t){}#rt(t){const e=this,s=t.target,r=t.shiftKey&e.multiselect;'TD'!==!s.tagName&&e.select&&requestAnimationFrame((()=>{e.#hi(s.closest('tr'),r,t)}))}#hi(t,e=!1,s){const r=this,n=GSAttr.getAsBool(t,'selected');if(e||GSDOM$1.queryAll(r,'tr').forEach((t=>{GSAttr.set(t,'class',null),GSAttr.set(t,'selected',null)})),'true'===t.dataset.ignore)return;GSAttr.set(t,'class',n?null:r.cssSelect),GSAttr.set(t,'selected',!n||null);const i=[];GSDOM$1.queryAll(r,'tr[selected=true]').forEach((t=>i.push(parseInt(t.dataset.index)))),GSEvent.send(r,'select',{data:i,evt:s},!0)}}class GSTable extends GSElement{static#gi=['GS-HEADER','GS-STORE'];#mi=!0;#Si=!1;#pi=[];#Nn=[];#Gi=[];#r=null;#Jn={css:'table','css-header':'table thead','css-row':'table tbody tr','css-cell':'table tbody td'};#bi='bg-dark text-light fw-bold';#fi='table table-hover table-striped user-select-none m-0';#Ai='user-select-none table-light';#vi='';#yi='col';static{customElements.define('gs-table',GSTable),Object.seal(GSTable)}static get observedAttributes(){return GSElement.observeAttributes(['src','select','multiselect','css','css-header','css-filter','css-columns','css-row','css-cell','css-select'])}constructor(){super(),this.#as()}#as(){const t=this;let e=Array.from(t.children).filter((t=>t.slot&&'extra'!==t.slot));if(e.length>0)throw new Error(`Custom element injection must contain slot="extra" attribute! Element: ${t.tagName}, ID: ${t.id}`);e=Array.from(t.childNodes).filter((t=>!t.slot));if(!GSDOM$1.isAllowed(e,GSTable.#gi))throw new Error(GSDOM$1.toValidationError(t,GSTable.#gi))}attributeCallback(t='',e='',s=''){this.#Ei(this.#Jn[t],s)}disconnectedCallback(){const t=this;t.#pi=[],t.#Nn=[],t.#Gi=[],t.#r=null,super.disconnectedCallback()}async onReady(){const t=this;if(!t.store){const e=GSAttr.get('data');t.#r=await GSComponents$1.waitFor(e)}super.onReady(),t.contextMenu&&(t.contextMenu.disabled=!0),t.attachEvent(t.self,'sort',(e=>t.#$i(e.detail))),t.attachEvent(t.self,'filter',(e=>t.#Mi(e.detail))),t.attachEvent(t.self,'select',(e=>t.#hi(e.detail))),t.attachEvent(t.self,'action',(e=>t.#Di(e))),t.attachEvent(t,'data',(e=>t.#wi(e))),t.store.page=1}get contextMenu(){return this.querySelector('gs-context')}get store(){const t=this;if(t.#r)return t.#r;if(t.#r=t.querySelector('gs-store'),!t.#r){const e=GSAttr.get('data');t.#r=GSDOM$1.query(`gs-data#${e}`)}return t.#r}get header(){return this.querySelector('gs-header')}get selected(){return this.#Gi}get multiselect(){return this.#Si}set multiselect(t=!1){this.#Si=GSUtil.asBool(t)}get select(){return this.#mi}set select(t=!0){this.#mi=GSUtil.asBool(t)}get css(){return GSAttr.get(this,'css',this.#fi)}get cssSelect(){return GSAttr.get(this,'css-select',this.#bi)}get cssHeader(){return GSAttr.get(this,'css-header',this.#Ai)}get cssRow(){return GSAttr.get(this,'css-row',this.#vi)}get cssCell(){return GSAttr.get(this,'css-cell',this.#yi)}get cssFilter(){return GSAttr.get(this,'css-filter','')}get cssColumns(){return GSAttr.get(this,'css-columns','')}set css(t=''){GSAttr.set(this,'css',t)}set cssSelect(t=''){GSAttr.set(this,'css-select',t)}set cssHeader(t=''){GSAttr.set(this,'css-header',t)}set cssFilter(t=''){GSAttr.set(this,'css-filter',t)}set cssColumns(t=''){GSAttr.set(this,'css-columns',t)}set cssRow(t=''){GSAttr.set(this,'css-row',t)}set cssCell(t=''){GSAttr.set(this,'css-cell',t)}get noDataText(){return GSAttr.get(this,'no-data','No Data')}set noDataText(t){return GSAttr.set(this,'no-data',t)}get isFilterable(){return this.#pi.filter((t=>t.filter)).length>0}#Ei(t,e){t&&this.findAll(t,!0).forEach((t=>{GSAttr.set(t,'class',e)}))}#wi(t){GSEvent.prevent(t);const e=this;e.self&&(e.#Ci(t.detail),GSEvent.sendDelayed(10,e.self,'data',t.detail))}#Ci(t){const e=this;if(e.#Nn=t,e.#Gi=[],!e.#Oi)return e.#xi(),e.#Ti(),requestAnimationFrame((()=>e.#Ci(t)));requestAnimationFrame((()=>e.#ki()))}get#Oi(){return this.#pi.length>0}#xi(){const t=this,e=t.header;t.#pi=e?e.toJSON():[],t.#pi.length>0||0!==t.#Nn.length&&t.#Li(t.#Nn[0])}#Li(t){const e=[];e.push('<gs-header>'),Array.isArray(t)?(e.push('<gs-column name="#"></gs-column>'),t.forEach(((t,s)=>{const r=`<gs-column name="Col_${s+1}" index=${s}></gs-column>`;e.push(r)}))):Object.keys(t).forEach((t=>{const s=`<gs-column name="${t}"></gs-column>`;e.push(s)})),e.push('</gs-header>');const s=GSDOM$1.parse(e.join(''),!0);this.appendChild(s)}#ki(){const t=this;t.self.querySelector('tbody').render(t.#pi,t.#Nn,t.store.offset);const e=t.contextMenu;e&&(e.close(),e.reattach())}#Ti(){const t=this;if(!t.#Oi)return;const e=t.querySelector('gs-header').render(),s=`<table class="${t.css}">${e}<tbody is="gs-tbody"></tbody></table><slot name="extra"></slot>`;GSDOM$1.setHTML(t.self,s)}#Di(t){const e=t.detail;e.action=e.data.action,e.data=[...this.#Gi],e.type='table'}#hi(t){if(!t)return;const e=this;e.#Gi=[],t.data?.forEach((t=>{const s=e.#Nn[t];s&&e.#Gi.push(s)})),e.contextMenu&&(e.contextMenu.disabled=0===t.data?.length),GSEvent.send(e,'selected',{data:e.#Gi,evt:t.evt})}#$i(t){const e=this;e.store.sort=t||[],GSEvent.send(e,'sort',e.store.sort)}#Mi(t){const e=this;e.store.filter=t||[],GSEvent.send(e,'filter',e.store.filter)}}class GSTableSort extends HTMLTableRowElement{#Fi=0;static{customElements.define('gs-tablesort',GSTableSort,{extends:'tr'}),Object.seal(GSTableSort)}connectedCallback(){const t=this;t.id||t.setAttribute('id',GSID.id),GSEvent.attach(t,t,'click',(e=>t.#rt(e))),GSComponents.store(t),t.onReady()}disconnectedCallback(){GSComponents.remove(this),GSEvent.deattachListeners(this)}onReady(){const t=this;requestAnimationFrame((()=>{t.#Ii.forEach(((e,s)=>t.#$i(e,s>0)))}))}get#Ii(){return this.#Ni.filter((t=>'0'!=t.dataset.order))}get#Hi(){return this.#Ni.filter((t=>'0'!=t.dataset.idx))}get#Ni(){return GSDOM$1.queryAll(this,'th[data-sortable="true"]',!1,!1)}#rt(t){const e=this,s=t.composedPath().shift();if('TH'!==s.tagName)return;if('true'!=s.dataset.sortable)return;const r=GSUtil.asNum(s.dataset.order);s.dataset.order=r>0?-1:1,requestAnimationFrame((()=>e.#$i(s,t.shiftKey)))}#$i(t,e=!1){const s=this,r=GSUtil.asNum(t.dataset.order,-1);e?(s.#Fi=1+Math.max.apply(0,s.#Ni.map((t=>GSUtil.asNum(t.dataset.idx,0)))),GSDOM$1.toggleClass(t,'sorting_desc sorting_asc table-active',!1)):(s.#Fi=1,GSDOM$1.queryAll(s,'thead th').forEach((t=>{t.dataset.idx=0,t.dataset.order=0,GSDOM$1.toggleClass(t,'sorting_desc sorting_asc table-active',!1)}))),t.classList.add(r>0?'sorting_asc':'sorting_desc'),t.dataset.idx=s.#Fi,t.dataset.order=r,GSDOM$1.toggleClass(t,'table-active',!0);let n=[];s.#Hi.forEach((t=>{const e=GSUtil.asNum(t.dataset.order,1),s=GSUtil.asNum(t.dataset.idx,1),r=GSAttr.get(t,'name',t.innerText),i={ord:e,col:t.cellIndex,name:r,idx:s};n.push(i)})),n=GSData.sortData([{name:'idx',ord:1}],n),GSEvent.send(s,'sort',n,!0)}}class GSTableFilter extends HTMLTableRowElement{#qi=!1;static{customElements.define('gs-tablefilter',GSTableFilter,{extends:'tr'}),Object.seal(GSTableFilter)}connectedCallback(){const t=this;t.id=t.id||GSID.id,t.#qi=null!=GSDOM$1.query(t,'input[auto="true"],select[auto="true"]'),t.#Bi(),t.#Pi(),GSComponents.store(t),requestAnimationFrame((()=>t.#tt()))}disconnectedCallback(){GSComponents.remove(this),GSEvent.deattachListeners(this)}get root(){return GSDOM$1.getRoot(this)}#Bi(){const t=this;GSDOM$1.queryAll(t,'input, select').forEach((e=>GSEvent.attach(t,e,'change',(e=>t.#tt(e.target)))))}#Pi(){const t=this;t.#qi&&GSEvent.attach(t,t.root,'data',(e=>t.#wi(e.detail)),!1,!0)}#tt(t){const e=this,s=[];GSDOM$1.queryAll(e,'input, select').forEach((t=>{const r=e.#ji(t);r&&s.push({name:t.name,value:r})})),GSEvent.send(e,'filter',s,!0)}#wi(t){}#ji(t){const e=GSAttr.get(t,'list'),s=this.root.getElementById(e)?.querySelector(`option[value="${t.value}"]`);return s?.dataset?.value||t.value}}class GSPagination extends GSElement{static CSS_ITEM='me-1';static{customElements.define('gs-pager',GSPagination),Object.seal(GSPagination)}constructor(){super()}async getTemplate(t=''){const e=this,s=e.store,r=e.firstlast,n=e.nextprev,i=this.pages,a=[];a.push('<nav><ul class="pagination justify-content-center m-3">'),r&&a.push(e.#Ri(e.first,'first','First page')),n&&a.push(e.#Ri(e.previous,'previous','Previous page'));let o=1;for(;o<=i;)a.push(e.#Ri(o,'','',o==s.page)),o++;return n&&a.push(e.#Ri(e.next,'next','Next page')),r&&a.push(e.#Ri(e.last,'last','Last page')),a.push('</ul></nav>'),a.join('')}#Ri(t='',e='',s='',r=!1){return`<li class="page-item ${GSPagination.CSS_ITEM} ${r?'active':''}"><a class="page-link" name="${e}" title="${s}" href="#" >${t}</a></li>`}#Ui(t){const e=this;requestAnimationFrame((()=>{let t=0===e.pages?0:Math.floor((e.store.page-1)/e.pages)*e.pages+1;e.queryAll('a[name=""]').forEach((s=>{s.parentElement.classList.remove('active','disabled','d-none'),t==e.store.page&&s.parentElement.classList.add('active'),t>e.store.pages&&s.parentElement.classList.add('disabled','d-none'),s.text=t++}))}))}#rt(t){const e=this,s=t.target.name||t.target.text;switch(s){case'first':return e.store.firstPage();case'last':return e.store.lastPage();case'next':return e.store.nextPage();case'previous':return e.store.prevPage()}e.store.page=s||e.store.page}onReady(){const t=this;t.attachEvent(t.store,'data',t.#Ui.bind(t)),t.queryAll('a').forEach((e=>t.attachEvent(e,'click',t.#rt.bind(t))))}get table(){return GSDOM$1.closest(this,'GS-TABLE')}get store(){const t=GSAttr.get(this,'store');return t?GSComponents$1.get(t):this.table.store}get nextprev(){return GSAttr.getAsBool(this,'nextprev',!0)}get firstlast(){return GSAttr.getAsBool(this,'firstlast',!0)}get pages(){return GSAttr.getAsNum(this,'pages',5)}get first(){return GSAttr.get(this,'first','&laquo;')}get last(){return GSAttr.get(this,'last','&raquo;')}get next(){return GSAttr.get(this,'next','&rsaquo;')}get previous(){return GSAttr.get(this,'previous','&lsaquo;')}}class GSNotification extends GSElement{static TOP_START='position-fixed top-0 start-0';static TOP_CENTER='position-fixed top-0 start-50 translate-middle-x';static TOP_END='position-fixed top-0 end-0';static MIDDLE_START='position-fixed top-50 start-0 translate-middle-y';static MIDDLE_CENTER='position-fixed top-50 start-50 translate-middle';static MIDDLE_END='position-fixed top-50 end-0 translate-middle-y';static BOTTOM_START='position-fixed bottom-0 start-0';static BOTTOM_CENTER='position-fixed bottom-0 start-50 translate-middle-x';static BOTTOM_END='position-fixed bottom-0 end-0';static DEFAULT=GSNotification.BOTTOM_END;#dt=new Set;static get observedAttributes(){return GSElement.observeAttributes(['position'])}connectCallback(){super.connectedCallback()}attributeCallback(t='',e='',s=''){const r=this;e=r.#zi(e),s=r.#zi(s);const n=r.query('div');GSDOM$1.toggleClass(n,e,!1),GSDOM$1.toggleClass(n,s,!0)}#zi(t){let e=GSNotification[t];return GSUtil.isString(e)&&e.startsWith('position-')?e:t}async getTemplate(t=''){return`<div class="toast-container ${this.css} ${this.position}" style="z-index: 10000;">\n    <slot name="content"></slot>\n    </div>`}get css(){return GSAttr.get(this,'css','p-3')}set css(t=''){GSAttr.set(this,'css',t)}get position(){return GSAttr.get(this,'position',GSNotification.DEFAULT)}set position(t=''){GSAttr.set(this,'position',t)}get native(){return GSAttr.getAsBool(this,'native',!1)}set native(t=''){GSAttr.setAsBool(this,'native',t)}info(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-info',s,r)}success(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-success',s,r)}warn(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-warning',s,r)}danger(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-danger',s,r)}primary(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-primary',s,r)}secondary(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-secondary',s,r)}dark(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-dark',s,r)}light(t='',e='',s=!1,r=2){return this.show(t,e,'text-bg-light',s,r)}async show(t='',e='',s='',r=!1,n=2,i){const a=this;if(a.native){let s=await GSNotification.requestPermission();if(s&&(s=a.#Vi(t,e,n,i)),s)return s}return a.#_i(t,e,s,r,n)}#_i(t='',e='',s='',r=!1,n=2){const i=`<gs-toast slot="content" css="${s}"  closable="${r}" timeout="${n}" message="${e}" title="${t}"></gs-toast>`,a=GSDOM$1.parse(i,!0);return this.appendChild(a),a}#Vi(t='',e='',s=2,r={}){const n=this;r.body=r.body||e;const i=new Notification(t,r);n.#dt.add(i);const a=n.#Wi.bind({notification:i,owner:n});return i.addEventListener('close',a),s>0&&setTimeout(a,1e3*s),i}#Wi(){const t=this;t.notification.close(),t.owner.#dt.delete(t.notification)}clear(){const t=this;Array.from(t.querySelectorAll('gs-toast')).forEach((t=>t.remove())),t.#dt.forEach((t=>t.close())),t.#dt.clear()}static get isNativeSupported(){return'Notification'in self}static get isGranted(){return'granted'===Notification.permission}static async requestPermission(){return!!GSNotification.isNativeSupported&&(GSNotification.isGranted||await Notification.requestPermission(),GSNotification.isGranted)}static{customElements.define('gs-notification',GSNotification),Object.seal(GSNotification)}}class GSToast extends GSElement{static{customElements.define('gs-toast',GSToast),Object.seal(GSToast)}static get observedAttributes(){return GSElement.observeAttributes(['placement','css'])}attributeCallback(t='',e='',s=''){if('css'===t){const t=this.query('.toast');GSDOM$1.toggleClass(t,e,!1),GSDOM$1.toggleClass(t,s,!0)}}async getTemplate(t=''){const e=this,s=e.closable?'<button type="button" class="btn-close me-2 m-auto"></button>':'';return`\n        <div class="mt-1 mb-1 toast fade ${e.visible?'show':''} ${e.css}">\n          <div class="d-flex">\n              <div class="toast-body">\n              ${e.message}\n              </div>\n              ${s}\n          </div>\n      </div>    \n    `}onReady(){const t=this,e=t.queryAll('button');Array.from(e).forEach((e=>t.attachEvent(e,'click',t.close.bind(t)))),super.onReady(),t.visible&&t.open()}show(t='',e='',s='',r=!0,n=!1,i=2){const a=this;a.css=s||a.css,a.title=t,a.message=e,a.timeout=i,a.closable=1==n,a.visible=1==r,a.open()}open(){const t=this;requestAnimationFrame((async()=>{GSDOM$1.toggleClass(this.#Yi,'show',!0),t.timeout<=0||(await GSUtil.timeout(1e3*t.timeout),t.close())}))}close(){this.#de()}dismiss(){this.#de()}async#de(){return GSDOM$1.toggleClass(this.#Yi,'show',!1),await GSUtil.timeout(GSDOM$1.SPEED),this.remove()}get#Yi(){return this.query('.toast')}get isFlat(){return!0}get title(){return GSAttr.get(this,'title')}set title(t=''){GSAttr.set(this,'title',t)}get message(){return GSAttr.get(this,'message')}set message(t=''){GSAttr.set(this,'message',t)}get css(){return GSAttr.get(this,'css')}set css(t=''){GSAttr.set(this,'css',t)}get timeout(){return GSAttr.getAsNum(this,'timeout',2)}set timeout(t=2){GSAttr.set(this,'timeout',t)}get closable(){return GSAttr.getAsBool(this,'closable')}set closable(t=!0){GSAttr.set(this,'closable',1==t)}get visible(){return GSAttr.getAsBool(this,'visible',!0)}set visible(t=!0){GSAttr.set(this,'visible',1==t)}}
//# sourceMappingURL=io.greenscreens.components.all.min.js.map
