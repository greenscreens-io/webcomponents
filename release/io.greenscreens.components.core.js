(()=>{"use strict";class GSBase extends HTMLElement{static#t=0;#e="";static get observedAttributes(){return[]}static nextID(){return GSBase.#t++,`GSHID_${GSBase.#t}`}static hashCode(t){let e=0,r=t.length,n=0;if(r>0)for(;n<r;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}static sendEvent(t=document,e,r="",n=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:r,bubbles:n,composed:s,cancelable:i});return t.dispatchEvent(a)}static sendSuspendedEvent(t=document,e,r=""){requestAnimationFrame((()=>{GSBase.sendEvent(t,e,r)}))}connectedCallback(){const t=this;if(t.url&&t.isRenderable()){const e=GSBase.hashCode(t.url);if(document.querySelector(`[data-hash="${e}"]`))return void t.remove();const r=t.render(),n=r instanceof Promise;r&&!n&&(r.dataset.hash=e,t.isHead?document.head.appendChild(r):t.insertAdjacentElement("afterend",r),t.isAuto&&(r.id=r.id?r.id:GSBase.nextID(),t.#e=r.id))}t.isAuto||t.remove()}disconnectedCallback(){const t=this;if(t.isAuto&&t.#e){const e=document.querySelector(`#${t.#e}`);e&&e.remove()}t.dispose()}attributeChangedCallback(t,e,r){const n=this;requestAnimationFrame((()=>{n.attributeCallback(t,e,r)}))}attributeCallback(t,e,r){}render(){}dispose(){}isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}isSchema(){const t=this.schema;if(!t)return!0;const e=location.protocol.replace(":","");return"http"===t&&e===t||"https"===t&&e===t}isAsset(){return this.isTarget("GreenScreens")}isTarget(t=""){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().indexOf(e)>-1&&(t=!0)})),t}const r=new RegExp(`${t}`,"i");return!!navigator.userAgent.match(r)}isRenderable(){const t=this,e=t.isMobile(),r=t.isAsset(),n=t.isSchema(),s=t.target,i=t.env;return!!n&&(("assets"!==i||!1!==r)&&(("browser"!==i||!0!==r)&&(("mobile"!==i||!1!==e)&&(("desktop"!==i||!0!==e)&&!!t.isTarget(s)))))}get env(){return this.getAttribute("env")||""}get target(){return this.getAttribute("target")||""}get url(){const t=this;let e=t.getAttribute("url")||"";if("assets"===t.env)return"**"+e;if(t.#r)try{let t=`${location.origin}${location.pathname}`;e.startsWith("/")&&(t=location.origin),e.startsWith("http")&&(t=void 0);const r=new URL(e,t);r.searchParams.append("_dc",Date.now()),e=r.href}catch(t){console.log(t)}return e}get type(){const t=this;let e=t.getAttribute("type")||"";return e||(t.url.indexOf(".js")>0?e="text/javascript":t.url.indexOf(".css")>0&&(e="text/css")),e}get async(){return this.getAttributeBool("async","false")}get defer(){return this.getAttributeBool("defer","false")}get isHead(){return this.getAttributeBool("head")}get isAuto(){return this.getAttributeBool("auto")}get schema(){return this.getAttribute("schema")||""}get nonce(){return this.getAttribute("nonce")||""}get crossorigin(){return this.getAttribute("crossorigin")}get fetchpriority(){return this.getAttribute("fetchpriority")||"auto"}get integrity(){return this.getAttribute("integrity")}get referrerpolicy(){return this.getAttribute("referrerpolicy")}getAttributeBool(t="",e="true"){return"true"===(this.getAttribute(t)||e)}get#r(){return self.hasOwnProperty("GS_NO_CACHE")?self.GS_NO_CACHE:!!localStorage&&"true"==localStorage.getItem("GS_NO_CACHE")}static{Object.seal(GSBase)}}class GSCacheStyles{static#n=new Map;static set(t,e){const r=this;if(e instanceof CSSStyleSheet&&r.#n.set(t,e),"string"==typeof e){const n=new CSSStyleSheet;n.replaceSync(e),r.#n.set(t,n)}return r.get(t)}static remove(t){return this.#n.delete(t)}static get(t){return this.#n.get(t)}static getOrSet(t,e){if(e&&0===e.cssRules.length)return;const r=GSCacheStyles,n=r.get(t);return n||r.set(t,e)}static get styles(){return Array.from(new Map([...GSCacheStyles.#n].sort(((t,e)=>String(t[0]).localeCompare(e[0])))).values())}static injectStyle(t="",e=0){if(t)try{e=e||GSBase.hashCode(t);const r=new CSSStyleSheet;r.replaceSync(t),GSCacheStyles.getOrSet(e,r),document.adoptedStyleSheets=GSCacheStyles.styles}catch(t){console.log(t)}}static{Object.freeze(GSCacheStyles),window.GSCacheStyles=GSCacheStyles;const t=".gs-hide{display:none;}.gs-hide-orientation,.gs-render{display:none !important;}gs-item{display:none !important;}";GSCacheStyles.injectStyle(t)}}class GSLinkExt extends HTMLLinkElement{#s=null;constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.isCSS&&(t.#s=setInterval(t.#i.bind(t),1))}connectedCallback(){}disconnectedCallback(){if(!this.isCSS)return;const t=GSCacheStyles.remove(this.order);GSBase.sendSuspendedEvent(document,"gs-style",t)}#i(){const t=this;if(!t.sheet)return;clearInterval(t.#s),GSCacheStyles.injectStyle(t.asText,t.order);const e=GSCacheStyles.get(t.order);GSBase.sendSuspendedEvent(document,"gs-style",e)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join("")}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get isCSS(){return"stylesheet"===this.rel||this.href.indexOf(".css")>0}get order(){return this.getAttribute("order")}set order(t=""){return this.setAttribute("order",t)}static{customElements.define("gs-ext-link",GSLinkExt,{extends:"link"}),Object.freeze(GSLinkExt)}}class GSStyleExt extends HTMLStyleElement{#s=null;constructor(){super();const t=this;t.order||(t.order=GSBase.nextID()),t.#s=setInterval(t.#i.bind(t),1)}connectedCallback(){}disconnectedCallback(){const t=GSCacheStyles.remove(this.order);GSBase.sendSuspendedEvent(document,"gs-style",t)}#i(){const t=this;if(!t.sheet)return;clearInterval(t.#s),GSCacheStyles.injectStyle(t.asText,t.order);const e=GSCacheStyles.get(t.order);GSBase.sendSuspendedEvent(document,"gs-style",e)}get asText(){return Object.values(this.sheet.cssRules).map((t=>t.cssText)).join("")}get sheet(){const t=this;return Object.values(document.styleSheets).filter((e=>e.ownerNode===t)).pop()}get order(){return this.getAttribute("order")}set order(t=""){return this.setAttribute("order",t)}static{Object.freeze(GSStyleExt),customElements.define("gs-ext-style",GSStyleExt,{extends:"style"})}}class GSCSS extends GSBase{static get observedAttributes(){return["disabled"].concat(super.observedAttributes)}attributeCallback(t,e,r){const n=this;if("disabled"===t)return n.isDisabled?n.dispose():n.render()}constructor(){super();const t=this;t.disabled=0==t.notheme&&t.theme!==GSCSS.activeTheme}async render(){const t=this;if(!t.isDisabled){t.order||(t.order=GSBase.nextID());try{const e=await fetch(t.url);if(!e.ok)return;const r=await e.text();GSCacheStyles.injectStyle(r,t.order);const n=GSCacheStyles.get(t.order);n&&GSBase.sendSuspendedEvent(document,"gs-style",n)}catch(e){GSCacheStyles.remove(t.order),console.log(e)}}}dispose(){const t=this;if(!t.isAuto)return;const e=GSCacheStyles.get(t.order);GSCacheStyles.remove(t.order),GSBase.sendSuspendedEvent(document,"gs-style",e),document.adoptedStyleSheets=GSCacheStyles.styles}get order(){return this.getAttribute("order")}set order(t=""){return this.setAttribute("order",t)}get notheme(){return"true"===this.getAttribute("notheme")}get disabled(){return this.getAttribute("disabled")}set disabled(t=""){return this.setAttribute("disabled",""+t=="true")}get isDisabled(){return"true"===this.disabled}get theme(){return this.getAttribute("theme")||"default"}static get activeTheme(){return new URLSearchParams(location.hash.slice(1)).get("theme")||"default"}static#a(t){const e=GSCSS.activeTheme;Array.from(document.querySelectorAll("gs-css")).filter((t=>0==t.notheme)).forEach((t=>t.disabled=t.theme!==e))}static{Object.freeze(GSCSS),customElements.define("gs-css",GSCSS),window.addEventListener("hashchange",GSCSS.#a,!1)}}class GSScript extends GSBase{render(){const t=this,e=document.createElement("script");return e.src=t.url,t.getAttributeNames().filter((t=>"url"!==t)).forEach((r=>e.setAttribute(r,t.getAttribute(r)))),e}static{customElements.define("gs-script",GSScript),Object.freeze(GSScript)}}class GSLink extends GSBase{render(){const t=this,e=document.createElement("link");return e.href=t.url,t.getAttributeNames().filter((t=>"url"!==t)).forEach((r=>e.setAttribute(r,t.getAttribute(r)))),t.shadow&&"stylesheet"===e.rel&&e.setAttribute("is","gs-ext-link"),e}get rel(){const t=this;let e=t.getAttribute("rel")||"";return e||t.url.indexOf(".css")&&(e="stylesheet"),e}get shadow(){return"true"===this.getAttribute("shadow")}static{customElements.define("gs-link",GSLink),Object.freeze(GSLink)}}class GSEventBus extends EventTarget{static#o=new Map;#c=new Set;static send(t="",e="",r){return GSEventBus.register(t).emit(e,r)}static exist(t=""){return t&&GSEventBus.#o.has(t)}static register(t=""){return GSEventBus.exist(t)||GSEventBus.#o.set(t,new GSEventBus),GSEventBus.#o.get(t)}static unregister(t=""){const e=GSEventBus.#o.get(t);return e&&e.#l(),GSEventBus.#o.delete(t)}#l(){const t=this;Array.from(t.#c).forEach((e=>{t.removeEventListener(e.type,e.listener)})),t.#c.clear()}#u(t){return"function"==typeof t}on(t="",e){const r=this;if(r.#u(e))return r.#c.add({type:t,listener:e}),r.addEventListener(t,e)}once(t,e){const r=this;if(!r.#u(e))return;const wrap=t=>{e(t),r.#c.delete(wrap)};return wrap.type=t,wrap.listener=e,r.#c.add(wrap),r.addEventListener(t,wrap,{once:!0})}off(t="",e){const r=this;return!!r.#u(e)&&(Array.from(r.#c).filter((r=>r.type===t&&r.listener===e)).forEach((t=>r.#c.delete(t))),r.removeEventListener(t,e))}emit(t="",e){const r=new CustomEvent(t,{detail:e});return this.dispatchEvent(r)}}class GSDOMObserver_GSDOMObserver extends MutationObserver{static#d=new Map;static#S=new Map;observe(t,e){const r=e||{childList:!0,subtree:!0};return super.observe(t,r)}static create(t){const e=new GSDOMObserver_GSDOMObserver(GSDOMObserver_GSDOMObserver.#m);return e.observe(t),e}static#h(t=!1){return t?GSDOMObserver_GSDOMObserver.#S:GSDOMObserver_GSDOMObserver.#d}static get#g(){return GSDOMObserver_GSDOMObserver.#G||GSDOMObserver_GSDOMObserver.#p}static get#G(){return GSDOMObserver_GSDOMObserver.#d.size>0}static get#p(){return GSDOMObserver_GSDOMObserver.#S.size>0}static#m(t){GSDOMObserver_GSDOMObserver.#g&&t.forEach((t=>{GSDOMObserver_GSDOMObserver.#G&&t.addedNodes.forEach((t=>GSDOMObserver_GSDOMObserver.#f(t,GSDOMObserver_GSDOMObserver.#d))),GSDOMObserver_GSDOMObserver.#p&&t.removedNodes.forEach((t=>GSDOMObserver_GSDOMObserver.#f(t,GSDOMObserver_GSDOMObserver.#S)))}))}static#f(t,e){return 0!==e.size&&(GSDOMObserver_GSDOMObserver.#b(t,e),t.childNodes.forEach((t=>GSDOMObserver_GSDOMObserver.#f(t,e))),!0)}static#b(t,e){e.forEach(((e,r)=>{try{r(t)&&e(t)}catch(t){console.log(t)}}))}static#y(t,e,r){if(t instanceof HTMLElement==0)return!1;const n=new Map;return n.set(e,r),GSDOMObserver_GSDOMObserver.#f(t,n)}static#u(t){return"function"==typeof t}static#v(t,e){return GSDOMObserver_GSDOMObserver.#u(t)&&GSDOMObserver_GSDOMObserver.#u(e)}static registerFilter(t,e,r=!1){return!!GSDOMObserver_GSDOMObserver.#v(t,e)&&(GSDOMObserver_GSDOMObserver.#h(r).set(t,e),r||GSDOMObserver_GSDOMObserver.#y(document.body,t,e),!0)}static unregisterFilter(t,e=!1){return!!GSDOMObserver_GSDOMObserver.#u(t)&&GSDOMObserver_GSDOMObserver.#h(e).delete(t)}static{Object.freeze(GSDOMObserver_GSDOMObserver),window.GSDOMObserver=GSDOMObserver_GSDOMObserver;const t=GSDOMObserver_GSDOMObserver.create(document.documentElement);window.addEventListener("unload",(()=>{t.disconnect()}))}}class GSLog{static logging=!0;static info(t,e){this.#O(t,e,!0,"info")}static warn(t,e){this.#O(t,e,!0,"warn")}static error(t,e){this.#O(t,e,!0,"error")}static log(t,e,r){this.#O(t,e,r)}static#O(t,e,r,n){if(!r&&!this.logging)return;let s=console[n||"log"];if(s="function"==typeof s?s:console.log,t)return s(`${t.nodeName} -> ${t.id}: ${e}`);s(e)}static{Object.seal(GSLog)}}class GSUtil{static FLAT=1==self.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isString=t=>"string"==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asNum=(t=0)=>GSUtil.isNumber(t)?parseFloat(t):0;static asBool=(t=!1)=>"true"===t.toString().trim().toLowerCase();static fromLiteral=(t,e)=>t.replace(/\${(.*?)}/g,((t,r)=>e[r]));static capitalize=t=>t[0].toUpperCase()+t.slice(1).toLowerCase();static capitalizeAttr=t=>t.split("-").map(((t,e)=>e?GSUtil.capitalize(t):t)).join("");static initerror=()=>{throw new Error("This class cannot be instantiated")};static isURL=(t="")=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t="")=>t.indexOf("<")>-1&&t.indexOf(">")>0;static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static isJsonString(t=""){return"string"==typeof t&&(t.startsWith("{")||t.startsWith("["))}static isJsonType(t=""){return Array.isArray(t)||"object"==typeof t}static isJson(t=""){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t=""){return GSUtil.isJsonString(t)?JSON.parse(t):GSUtil.isJsonType(t)?t:(GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),null)}static normalize(t,e=""){return GSUtil.isString(t)?t.trim():(t||e).toString()}static fromTemplateLiteral(t,e){const r=Object.keys(e),n=Object.values(e);return new Function(...r,`return \`${t}\`;`)(...n)}static parseValue(t){if(!GSUtil.isStringNonEmpty(t))return;let e=window,r=null;return t.trim().split(".").forEach(((t,n,s)=>{if(e)return n<s.length-1?e=e[t]:void(r=e[t])})),r}static isStringNonEmpty(t=""){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=""){return!!GSUtil.isString(t)&&0===t.trim().length}static isStringMatch(t,e){const r=GSUtil.isStringNonEmpty(t),n=GSUtil.isStringNonEmpty(e);return r&&n?t.trim().toLowerCase()==e.trim().toLowerCase():r===n}static async timeout(t=0){return new Promise((e=>{setTimeout(e.bind(null,!0),t)}))}static{Object.seal(GSUtil),window.GSUtil=GSUtil}}class GSFunction{static isFunction=t=>"function"==typeof t;static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e="AsyncFunction"==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){try{return await t(e)}catch(t){return t}}static callFunctionSync(t,e){try{return t(e)}catch(t){return t}}static callFunction(t,e){if(GSFunction.isFunction(t))return GSFunction.isFunctionAsync(t)?GSFunction.callFunctionAsync(t,e):GSFunction.callFunctionSync(t,e)}static parseFunction(t){const e=GSUtil.parseValue(t);return GSFunction.isFunction(e)?e:null}static{Object.seal(GSFunction)}}class GSID{static#t=0;static reset(){this.#t=0}static next(t="GSId-"){return`${t}${this.#t++}`}static get id(){return this.next()}static hashCode(t){const e=(t||"").length;let r=0,n=0;if(0===e)return r;for(;n<e;)r=(r<<5)-r+t.charCodeAt(n++)|0;return r}static{Object.freeze(GSID)}}class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static set(t,e,r){GSAttr.isHTMLElement(t)&&(GSUtil.normalize(r)?t.setAttribute(e,r):t.removeAttribute(e))}static get(t,e="",r=""){if(!GSAttr.isHTMLElement(t))return r;const n=t.getAttribute(e)||r;return GSUtil.normalize(n)}static getAsBool(t,e="",r="false"){const n=GSAttr.get(t,e,r);return GSUtil.asBool(n)}static getAsNum(t,e="",r="0"){const n=GSAttr.get(t,e,r);return GSUtil.asNum(n)}static getAsJson(t,e="",r="0"){const n=GSAttr.get(t,e,r,{});return JSON.parse(n)}static setAsBool(t,e="",r="false"){return GSAttr.set(t,e,GSUtil.asBool(r),!1)}static setAsNum(t,e="",r="0"){return GSAttr.set(t,e,GSUtil.asNum(r),NaN)}static setAsJson(t,e="",r="0"){return GSAttr.set(t,e,JSON.stringify(r),"{}")}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith("data-"))).map((t=>`${t.name}="${t.value}"`)).join(" ")}static{Object.seal(GSAttr)}}class GSDOM{static SPEED=300;static parse(t="",e=!1,r="text/html"){try{const n=(new DOMParser).parseFromString(t,r);return e?n?.body?.firstElementChild:n}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e="",r=!1){const n=GSDOM.parse(e),s=GSDOM.#A(n.head.children).concat(GSDOM.#A(n.body.children)),i=r||1!==s.length,a=GSDOM.wrap(t,i?null:s.shift());for(;s.length>0;)a.appendChild(s.shift());return a}static wrap(t,e){return GSDOM.link(t,e||document.createElement("gs-block"))}static link(t,e){return e.setAttribute("proxy",`#${t.id}`),t.slot&&e.setAttribute("slot",t.slot),e}static#A(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isElement(t,e){if(e&&t)if("string"==typeof e){if(e.toUpperCase()===t.tagName)return t}else if(t instanceof e)return t;return!1}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){return 0===t?.tagName?.indexOf("GS-")}static isGSExtra(t){return 0===t?.getAttribute("is")?.indexOf("GS-")}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?"gs-hide-orientation":"gs-hide")}static show(t,e=!1){return t?.classList?.remove(e?"gs-hide-orientation":"gs-hide")}static addSibling(t,e){const r=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),n=GSDOM.isHTMLElement(t)&&r,s=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!n||s)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,r){const n=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),s=t===e&&t.parentNode===e;return!(!n||s)&&t.insertAdjacentElement(r,e)}static removeElement(t){return t?.parentNode?.removeChild(t)}static walk(t,e=!1,r=!1,n=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,r,n)}static*childAll(t,e=!1,r=!0,n=!1){if(!t)return;n&&(yield t),r&&(yield*GSDOM.childAll(t.shadowRoot,e,r,!0));const s=e?t.childNodes:t.children;if(s)for(let t of s)yield*GSDOM.childAll(t,e,r,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static getRoot(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static getByID(t,e){if(!t||!qry)return null;const r=GSDOM.walk(t,!0);for(let t of r)if(t.id===e)return t;return null}static closest(t,e){if(!t||!e)return null;const r=GSDOM.walk(t,!0);for(let t of r)if(GSDOM.matches(t,e))return t;return null}static query(t,e){if(!t||!e)return null;if(GSDOM.matches(t,e))return t;const r=GSDOM.walk(t,!1,!1);for(let t of r)if(GSDOM.matches(t,e))return t;return null}static matches(t,e){return t&&"function"==typeof t.matches&&t.matches(e)}static queryAll(t,e){const r=[];if(!t||!e)return r;const n=GSDOM.walk(t,!1,!1);for(let t of n)GSDOM.matches(t,e)&&r.push(t);return r}static setHTML(t,e=""){if(!GSDOM.isHTMLElement(t))return!1;t.innerHTML=e}static setText(t,e=""){GSDOM.isHTMLElement(t)&&(t.innerText=e)}static toggleClass(t,e=!0,r="d-none"){return!!GSDOM.isHTMLElement(t)&&(!(!r||0==r.trim().length)&&(r=r.split(" ").filter((t=>t&&t.trim().length>0)),null===e?r.forEach((e=>t.classList.toggle(e))):void(e?t.classList.add.apply(t.classList,r):t.classList.remove.apply(t.classList,r))))}static hasClass(t,e=""){return t?.classList?.contains(e)}static clearInputs(t,e="input, textarea"){const r=GSDOM.unwrap(t);requestAnimationFrame((()=>{r.querySelectorAll(e).forEach((t=>t.value=""))}))}static toValue(t){if(!GSDOM.isHTMLElement(t))return;let e=t.value;if("text"===t.type){const r=t.computedStyleMap().get("text-transform");r&&("lowercase"==r.value&&(e=t.value.toLowerCase()),"uppercase"==r.value&&(e=t.value.toUpperCase()))}return e}static toObject(t,e="input, textarea, select",r=!1){const n=GSDOM.unwrap(t),s={},i=GSDOM.queryAll(n,e);return Array.from(i).filter((t=>t.name)).forEach((t=>{(r||"true"!==t.dataset.ignore)&&(s[t.name]=GSDOM.toValue(t))})),s}static fromObject(t,e,r="input, textarea, select"){if(!e)return;const n=GSDOM.unwrap(t),s=GSDOM.queryAll(n,r);Array.from(s).filter((t=>t.name&&e.hasOwnProperty(t.name))).forEach((t=>t.value=e[t.name]))}static fromURLHashToForm(t){location.hash.slice(1).split("&").every((e=>{if(e.length<2)return!0;const r=e.split("=");return GSDOM.setValue(`input[name=${r[0]}]`,r[1],t),!0}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,e="input, select, .btn"){GSDOM.queryAll(t,e).forEach((t=>t.removeAttribute("disabled")))}static disableInput(t,e="input, select, .btn"){GSDOM.queryAll(el,e).forEach((t=>t.setAttribute("disabled",!0)))}static setValue(t,e,r){const n=GSDOM.query(r,t);n&&(n.value=e)}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),r=[];let n;for(;n=e.nextNode();)r.push(n);return r}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,"\t").replaceAll(/(\n*\t*)*(?=\n\t*)/g,"")))}static validate(t,e,r,n=!1){if(t.tagName!==e){if(n)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),r))return!0;if(n)return!1;const s=GSDOM.toValidationError(t,r);throw new Error(s)}static isAllowed(t,e){return Array.isArray(t)?0===t.filter((t=>GSDOM.isAllowed(t,e))).length:!(t instanceof Text||t instanceof Comment)&&-1===e.indexOf(t.tagName)}static toValidationError(t,e){const r=`<${e.join(">, <")}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${r}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let r=!0;try{const r=await fetch(e);if(!r.ok)return;const n=await r.text(),s=new CSSStyleSheet;s.replaceSync(n),t.shadowRoot.adoptedStyleSheets=[s]}catch(t){console.log(t),r=!1}return r}static{Object.seal(GSDOM),window.GSDOM=GSDOM}}class GSEvent{static#E=new Map;static#M=!1;static protect(){window.addEventListener("contextmenu",(t=>{GSEvent.prevent(t)})),document.addEventListener("keydown",(t=>{const e=t.code;return"F12"!=e&&((!t.ctrlKey||!t.shiftKey||"KeyI"!=e)&&void 0)}))}static async waitPageLoad(t,e="loaded",r,n=100){GSEvent.#M||await GSEvent.wait(window,"load"),GSEvent.#M=!0,await GSUtil.timeout(n),GSFunction.callFunction(r),GSEvent.sendSuspended(t,e)}static async waitAnimationFrame(t){return new Promise(((e,r)=>{requestAnimationFrame((()=>{try{e(),"function"==typeof t&&t()}catch(t){console.log(t),r(t)}}))}))}static listen(t,e,r,n,s=!1){return!e&&t?t.addEventListener(r,n,s):GSDOM.queryAll(t,e).map((t=>t.addEventListener(r,n,s)))}static unlisten(t,e,r,n){return!e&&t?t.removeEventListener(r,n):GSDOM.queryAll(t,e).map((t=>t.removeEventListener(r,n)))}static once(t,e,r,n){return GSEvent.listen(t,e,r,n,{once:!0})}static wait(t,e=""){return new Promise(((r,n)=>{if(!e)return n("Event undefined!");GSEvent.once(t,null,e,(t=>r(t.detail)))}))}static prevent(t){GSFunction.hasFunction(t,"preventDefault")&&t.preventDefault(),GSFunction.hasFunction(t,"stopPropagation")&&t.stopPropagation()}static send(t=document,e,r="",n=!1,s=!1,i=!1){const a=new CustomEvent(e,{detail:r,bubbles:n,composed:s,cancelable:i});return t.dispatchEvent(a)}static sendSuspended(t=document,e,r="",n=!1,s=!1,i=!1){e&&requestAnimationFrame((()=>{GSEvent.send(t,e,r,n,s,i)}))}static attach(t,e,r="",n,s=!1,i=!1){if(!e)return!1;if(e.offline)return!1;if(!GSFunction.isFunction(n))return!1;if(!GSFunction.hasFunction(e,"addEventListener"))return!1;const a=this,o=a.#D(t,e,r,n),c=a.#w(t);return a.#T(c,o.key).set(o.fnkey,o),o.capture=i,s&&(o.once=t=>{try{o.fn(t)}finally{a.remove(o.own,o.el,o.name,o.once)}},Object.defineProperty(o.once,"gsid",{value:n.gsid,writable:!1})),e.addEventListener(r,s?o.once:o.fn,{once:s,capture:i}),!0}static remove(t,e,r="",n){const s=this,i=s.#D(t,e,r,n),a=s.#w(t),o=s.#T(a,i.key),c=o.get(i.fnkey);if(c)o.delete(c.fnkey),s.#C(c);else if(i.fnkey===i.key)for(let t of o.values())o.delete(t.fnkey),s.#C(t);0===o.size&&a.delete(i.key),0===a.size&&s.#E.delete(t)}static deattachListeners(t){const e=this,r=e.#L(t);if(!r)return;const n=r.values();for(let t of n){for(let r of t.values())e.#C(r);t.clear()}r.clear()}static#D(t,e,r="",n=""){if(!e)return!1;const s=this.#F(e),i=this.#I(n);return{own:t,fn:n,el:e,name:r,key:GSID.hashCode(`${s}${r}`),fnkey:GSID.hashCode(`${s}${r}${i||""}`)}}static#T(t,e){let r=t.get(e);return r||(r=new Map,t.set(e,r)),r}static#I(t){return GSFunction.isFunction(t)?(t.gsid||Object.defineProperty(t,"gsid",{value:GSID.next(),writable:!1}),t.gsid):null}static#F(t){let e=GSAttr.get(t,"data-gselid");return e||(e=GSID.next(),GSAttr.set(t,"data-gselid",e)),e}static#w(t){return this.#T(this.#E,t)}static#L(t){const e=this.#E.get(t);if(e)return this.#E.delete(t),e}static#C(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static{Object.freeze(GSEvent)}}class GSComponents{static#E=new Set;static store(t){GSComponents.#E.add(t)}static remove(t){GSComponents.#E.delete(t)}static get(t=""){const e=Array.from(this.#E).filter((e=>e.id===t));return 0===e.length?null:e[0]}static#x(t="",e=0,r){const fn=e=>{const n=e.detail;if(t.startsWith("gs-")&&n.tagName===t.toUpperCase()||n.id===t)return GSEvent.unlisten(document.body,null,"componentready",fn),r(n)},n={once:!1,capture:!1};e>0&&(n.signal=AbortSignal.timeout(e)),GSEvent.listen(document.body,null,"componentready",fn,n)}static waitFor(t="",e=0){return new Promise(((r,n)=>{let s=GSComponents.find(t)||GSComponents.get(t);return s?r(s):GSComponents.#x(t,e,r)}))}static notifyFor(t="",e){if(!GSFunction.isFunction(e))return!1;const callback=r=>{const n=r.path[0];return n.id===t||n.tagName===t?e(n,r):void 0},r=GSComponents.find(t)||GSComponents.get(t);return r?e(r):(GSEvent.listen(document.body,null,"componentready",callback),callback)}static findAll(t="",e=!0,r=!0){let n=Array.from(GSComponents.#E);return t&&(n=n.filter((e=>e&&GSDOM.matches(e,t)))),e||(n=n.filter((t=>t.shadowRoot))),r||(n=n.filter((t=>!t.shadowRoot))),n}static find(t="",e=!0,r=!0){return GSComponents.findAll(t,e,r).shift()}static isElement(t=""){return GSDOM.isGSElement(t)||GSDOM.isGSElement(t.prototype)}static isExtra(t=""){return GSDOM.isGSExtra(t)||GSDOM.isGSExtra(t.prototype)}static getOwner(t,e){if(!(GSDOM.isGSElement(t)||GSDOM.isHTMLElement(t)))return null;const r=GSDOM.parentAll(t);for(let t of r){if(!t)break;if(t instanceof ShadowRoot){const r=GSDOM.parent(t);return e?GSDOM.isElement(r,e)?r:GSComponents.getOwner(r,e):r}if(GSDOM.isElement(t,e))return t}return e?null:GSDOM.parent(t)}static hasGetter(t,e){return GSComponents.hasFunc(t,e,"get")}static hasSetter(t,e){return GSComponents.hasFunc(t,e,"set")}static hasFunc(t,e,r){const n=Reflect.getOwnPropertyDescriptor(t.__proto__,e);return n&&"function"==typeof n[r]}static listenStyles(){GSComponents.#k||(document.addEventListener("gs-style",GSComponents.#$),GSComponents.#k=!0)}static unlistenStyles(){document.removeEventListener("gs-style",GSComponents.#$),GSComponents.#k=!1}static#k=!1;static#$(){requestAnimationFrame((()=>{GSComponents.findAll(null,!1,!0).filter((t=>t.shadowRoot)).forEach((t=>t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles))}))}static{Object.freeze(GSComponents),GSComponents.listenStyles(),window.GSComponents=GSComponents}}class GSData{static uniqe(t){return Array.from(new Set(t))}static arraysEqual(t,e){if(t===e)return!0;if(!Array.isArray(t))return!1;if(!Array.isArray(e))return!1;t.sort(),e.sort();for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}static mergeArrays(t=[],e=[]){return t.concat(e).filter(((t,e,r)=>r.indexOf(t)===e))}static filterData(t,e,r){return 0===t.length?e:e.filter((e=>GSData.filterRecord(e,t,r)))}static filterRecord(t,e,r){return"string"==typeof e?GSData.filterSimple(t,e,r):GSData.filterComplex(t,e)}static filterSimple(t,e="",r){e=e.toLowerCase(),r=r||Object.keys(t);let n=null;for(let s of r)if(n=t[s],n&&n.toString().toLowerCase().indexOf(e)>-1)return!0;return!1}static filterComplex(t,e){let r=!0;for(let n of e)if(r=r&&t.hasOwnProperty(n.name)&&t[n.name].indexOf(n.value)>-1,!r)break;return r}static sortData(t,e){return 0===t.length?e:e.sort(((e,r)=>GSData.sortPair(e,r,t)))}static sortPair(t,e,r){const n=Array.isArray(t);let s=0;return r.forEach(((r,i)=>{if(!r)return;const a=r.col||i,o=n?a:r.name,c=t[o],l=e[o];s=GSData.compare(c,l,r.ord,s)})),s}static compare(t,e,r,n){return GSUtil.isNumber(t)?n||GSData.compareNum(t,e,r):"string"==typeof t?n||GSData.compareString(t,e,r):n}static compareString(t,e,r){return r<0?e.localeCompare(t):t.localeCompare(e)}static compareNum(t,e,r){return r<0?e-t:t-e}static{Object.seal(GSData)}}class GSLoader{static TEMPLATE_URL=self.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static{if(!self.GS_TEMPLATE_URL){const t=location.href.split("?").pop();let e=t.split("/");GSLoader.TEMPLATE_URL=t.endsWith("/")?t:e.slice(0,-1).join("/"),self.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}self.hasOwnProperty("GS_NO_CACHE")&&(GSLoader.NO_CACHE=!0===self.GS_NO_CACHE,localStorage&&localStorage.setItem("GS_NO_CACHE",GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&"true"==localStorage.getItem("GS_NO_CACHE")}static normalizeURL(t="",e=!1){t=t||"";let r=null;const n=location.pathname.split("/").pop(-1).indexOf(".")>-1;r=t.startsWith("http")?t:t.startsWith("/")?`${location.origin}/${t}`:n?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`;const s=new URL(r.replaceAll("//","/"));return!e&&GSLoader.NO_CACHE&&s.searchParams.append("_dc",Date.now()),s.href}static parentPath(t="",e=1){return(t||"").split("/").slice(0,-1*e).join("/")}static async getTemplate(t=""){if(!t)return t;if(t.startsWith("#")){const e=GSDOM.query(document.documentElement,t);return e?e.innerHTML:t}return GSUtil.isHTML(t)?t:(t=GSLoader.#j(t),GSLoader.loadSafe(t))}static#j(t=""){return t=t.startsWith("//")?GSLoader.#N+"/"+t:t,GSLoader.normalizeURL(t)}static get#N(){return GSLoader.normalizeURL(GSLoader.#_,!0)}static get#_(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace("//","/"):""}static async loadTemplate(t="",e="GET"){const r=GSLoader.#j(t);return await GSLoader.load(r,e)}static async load(t="",e="GET",r,n=!1){let s=null;const i="Content-Type";(r=r||{})[i]=n?"application/json":r[i]||"text/plain";const a=GSLoader.normalizeURL(t,!0),o=await fetch(a,{method:e,headers:r});return o.ok&&(s=n?await o.json():await o.text()),s}static async loadSafe(t="",e="GET",r,n=!1,s){try{if(t)return GSLoader.load(t,e,r,n)}catch(t){GSLog.error(this,t)}return s||(n?{}:"")}static async loadData(t=""){const e=GSUtil.isJson(t),r=!e&&GSFunction.parseFunction(t),n=GSFunction.isFunction(r);if((!n&&GSUtil.parseValue(t)||e)&&(t=GSUtil.toJson(t)),n){t=GSFunction.isFunctionAsync(r)?await GSFunction.callFunctionAsync(r,this):GSFunction.callFunction(r)}if(GSUtil.isJsonType(t))return t}static{Object.seal(GSLoader)}}class GSItem extends HTMLElement{static#U="data-bs-dismiss";static#H="data-bs-target";static#B="data-bs-toggle";static#R="data-action";static#P="data-inject";static#q="data-css";static#V="data-selectable";static#z=["GS-ITEM","TEMPLATE"];static{customElements.define("gs-item",GSItem),Object.seal(GSItem)}constructor(){super(),GSItem.validate(this)}static validate(t,e="GS-ITEM"){return GSDOM.validate(t,e,GSItem.#z)}static async getTemplate(t){let e=GSItem.getTemplate(t);const r=e?await GSLoader.getTemplate(e):"";return r||(e=t.querySelector("template"),e?e.innerHTML:"")}static getBody(t,e=!1){let r=GSItem.getTemplate(t);const n=GSAttr.get(t,"css-template","");return r?`<gs-template flat="${e}" href="${r}" class="${n}"></gs-template>`:(r=t.querySelector("template"),r?r.innerHTML:"")}static genericItems(t){return GSDOM.isHTMLElement(t)?Array.from(t.childNodes).filter((t=>"GS-ITEM"==t.tagName)):[]}static generateItem(t=""){return GSUtil.isJsonType(t)?Array.isArray(t)?GSItem.#J(t):GSItem.#W(t):""}static#K(t){return GSUtil.isNumber(t)||GSUtil.isStringNonEmpty(t)}static#J(t){return t.map((t=>GSItem.#W(t))).join("\n")}static#W(t){return`<gs-item ${GSItem.#X(t)}>${Array.isArray(t.items)?GSItem.generateItem(t.items):""}</gs-item>`}static#X(t){return Object.entries(t).filter((t=>GSItem.#K(t[1]))).map((t=>`${t[0]}="${t[1]}"`)).join(" ")}static getDismissAttr(t){const e=GSItem.getDismiss(t);return e?`${GSItem.#U}="${e}"`:""}static getTargetAttr(t){const e=GSItem.getTarget(t);return e?`${GSItem.#H}="${e}"`:""}static getToggleAttr(t){const e=GSItem.getToggle(t);return e?`${GSItem.#B}="${e}"`:""}static getActionAttr(t){const e=GSItem.getAction(t);return e?`${GSItem.#R}="${e}"`:""}static getInjectAttr(t){const e=GSItem.getInject(t);return e?`${GSItem.#P}="${e}"`:""}static getCSSAttr(t){const e=GSItem.getCSS(t);return e?`${GSItem.#q}="${e}"`:""}static getSelectableAttr(t){const e=GSItem.getSelectable(t);return e?"":`${GSItem.#V}="${e}"`}static getActive(t){return GSAttr.getAsBool(t,"active")}static getAction(t){return GSAttr.get(t,"action")}static getDismiss(t){return GSAttr.get(t,"dismiss")}static getTarget(t){return GSAttr.get(t,"target")}static getToggle(t){return GSAttr.get(t,"toggle")}static getInject(t){return GSAttr.get(t,"inject")}static getSelectable(t){return GSAttr.getAsBool(t,"selectable",!0)}static getName(t){return GSAttr.get(t,"name","")}static getCSS(t){return GSAttr.get(t,"css","")}static getTemplate(t){return GSAttr.get(t,"template","")}get dismissAttr(){return GSItem.getDismissAttr(this)}get targetAttr(){return GSItem.getTargetAttr(this)}get toggleAttr(){return GSItem.getToggleAttr(this)}get actionAttr(){return GSItem.getActionAttr(this)}get injectAttr(){return GSItem.getInjectAttr(this)}get action(){return GSItem.getAction(this)}get dismiss(){return GSItem.getDismiss(this)}get target(){return GSItem.getTarget(this)}get toggle(){return GSItem.getToggle(this)}get inject(){return GSItem.getInject(this)}get selectable(){return GSItem.getSelectable(this)}get name(){return GSItem.getName(this)}get css(){return GSItem.getCSS(this)}get active(){return GSItem.getActive(this)}get template(){return GSItem.getTemplate(this)}get body(){return GSItem.getBody(el)}static toDom(t,e="gs-item",r="name",n="value",s="type",i=!1){const a=[];return i||a.push('<gs-item type="object">'),Array.isArray(t)?t.forEach(((t,i)=>{const o=typeof t,c=Array.isArray(t);!c&&"object"===o||c?(a.push(`<${e} ${s}="object">`),a.push(GSItem.toDom(t,e,r,n,s,!0))):a.push(`<${e} ${n}="${t}" ${s}="${o}">`),a.push(`</${e}>`)})):Object.entries(t).forEach((t=>{const i=t[0],o=t[1],c=typeof o,l=Array.isArray(o),u=!l&&"object"===c;let d=!1;if(l&&o.length>0){const t=Array.isArray(o[0]),e="object"==typeof o[0];d=!(t||e)}d||l?(a.push(`<${e} ${r}="${i}" ${s}="array">`),a.push(GSItem.toDom(o,e,r,n,s,!0))):u?(a.push(`<${e} ${r}="${i}" ${s}="object">`),a.push(GSItem.toDom(o,e,r,n,s,!0))):a.push(`<${e} ${r}="${i}" ${n}="${o}" ${s}="${c}">`),a.push(`</${e}>`)})),i||a.push("</gs-item>"),a.join("")}static toJson(t,e="name",r="value",n="type"){if(!(t instanceof HTMLElement))return{};const s=t.getAttribute(e),i=t.getAttribute(r),a=t.getAttribute(n);let o=null;switch(a){case"array":o=[];break;case"object":o={};break;default:return GSItem.#Z(i,a)}const c=Array.from(t.children),l="array"===a,u="object"===a;return c.forEach((t=>{const i=t.getAttribute(e);if(l)o.push(GSItem.toJson(t,e,r,n));else if(u){const s=GSItem.toJson(t,e,r,n);o[i]=s}else{const e=t.getAttribute(r),a=t.getAttribute(n);o[s][i]=GSItem.#Z(e,a)}})),o}static#Z(t,e){switch(e){case"boolean":return"true"===t;case"number":return parseFloat(t);default:return t}}}class GSBlock extends HTMLElement{constructor(){super()}connectedCallback(){this.id||this.setAttribute("id",GSID.id)}disconnectedCallback(){const t=GSDOM.query(document.body,this.proxy);t&&t.remove()}get proxy(){return GSAttr.get(this,"proxy")}static{customElements.define("gs-block",GSBlock),Object.seal(GSBlock)}}class GSi18n extends HTMLElement{static#Q=/\{\w+\}/g;static#Y=!1;#tt=new Map;#E=new Set;#et=!1;#rt=0;#nt=!1;#st=this.#it.bind(this);#s=this.#at.bind(this);static{customElements.define("gs-i18n",GSi18n),Object.seal(GSi18n)}static get observedAttributes(){return["lang","auto"]}static get isInitialized(){return GSi18n.#Y}constructor(){super()}connectedCallback(){const t=this;if(t.id=t.id?t.id:GSID.id,t.#nt=!!GSComponents.find(this.tagName),t.#nt)return console.log(`${t.tagName} ID: ${t.id} is ignored, i18n is already in use by another instance!`);GSi18n.#Y=t,GSComponents.store(t),t.#ot()}disconnectedCallback(){const t=this;clearInterval(t.#rt),GSDOMObserver_GSDOMObserver.unregisterFilter(t.#st,t.#s),GSComponents.remove(t),t.#tt.clear(),t.#tt=null,t.#s=null,t.#st=null,t.#nt||(GSi18n.#Y=null)}attributeChangedCallback(t="",e="",r=""){this.#ct(t,e,r)}async#ct(t="",e="",r=""){const n=this;"lang"===t&&(n.#tt.has(r)||await n.#lt(r),n.translateDOM(document.documentElement,n.auto)),"auto"===t&&n.#ot()}#ut(t){return!(t instanceof HTMLScriptElement||t instanceof HTMLStyleElement||t instanceof HTMLLinkElement||t instanceof HTMLMetaElement||t instanceof Comment)}#it(t){const e=t instanceof Text;if(e&&0==t.textContent.trim().length)return!1;const r=e?t.parentElement:t;return this.#ut(r)&&this.#dt(r)}#dt(t){return"false"!==GSAttr.get(t,"translate")}#at(t){this.#E.add(t)}#St(){const t=this;t.#et||0!==t.#E.size&&requestAnimationFrame((()=>{try{Array.from(t.#E).forEach((e=>{t.#E.delete(e),t.#mt(e)}))}catch(t){console.log(t)}}))}#mt(t){const e=this;if(e.#et>0)return e.#E.add(t);if(t===document.documentElement)e.translateDOM(t,e.auto);else{t instanceof Text?e.#ht(t):e.#gt(t)}t.shadowRoot&&e.translateDOM(t.shadowRoot,e.auto)}#gt(t){const e=this;e.list.forEach((r=>e.#Gt(t,r)))}#Gt(t,e){const r=`data-gs-i8n-${e}`;let n=GSAttr.get(t,r),s=GSAttr.get(t,e);n?s=n:s&&GSAttr.set(t,r,s),s&&GSAttr.set(t,e,this.translate(s))}#ht(t){t.gsi18n=t.gsi18n||t.textContent,t.textContent=this.translate(t.gsi18n)}async#lt(t=""){const e=this,r={"Cache-Control":"no-cache",Pragma:"no-cache"};let n=null;try{e.#et++;const s=GSLoader.normalizeURL(`${e.url}/${t}.json`);if(n=await GSLoader.load(s,"GET",r,!0),!n&&t.indexOf("_")>0&&(n=await e.#lt(t.split("_")[0])),!n)return!1;e.#n(t,n)}finally{e.#et--}return e.auto||e.#St(),!0}#n(t,e){if(!e||!t)return!1;const r=this.#pt(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0]);r.set(e,t[1])})),!0}#pt(t=""){const e=this;return e.#tt.has(t)||(e.#tt.set(t,new Map),e.#lt(t)),e.#tt.get(t)}#ot(){const t=this;t.auto?(GSDOMObserver_GSDOMObserver.registerFilter(t.#st,t.#s),t.#rt=setInterval(t.#St.bind(t),500)):(GSDOMObserver_GSDOMObserver.unregisterFilter(t.#st,t.#s),clearInterval(t.#rt))}translateDOM(t,e=!1){const r=this;t!==document.documentElement&&r.#E.add(t),Array.from(t.childNodes).filter((t=>r.#it(t))).forEach((t=>0==t.childNodes.length?r.#E.add(t):r.translateDOM(t,!0))),e||r.#St()}translate(t){if(GSUtil.isStringEmpty(t))return t;const e=this;let r=t,n=null,s=null,i=null;for(GSi18n.#Q.lastIndex=-1;null!==(i=GSi18n.#Q.exec(t));)n=i[0],s=e.find(n.slice(1,-1)),r=r.replace(n,s);return r}find(t){const e=GSID.hashCode(t);return this.#pt(this.lang).get(e)||t}get auto(){return GSAttr.getAsBool(this,"auto",!0)}set auto(t=""){GSAttr.setAsBool(this,"auto",t)}get default(){return GSAttr.get(this,"default",document.documentElement.lang||navigator.language)}set default(t=""){GSAttr.set(this,"default",t)}get lang(){return GSAttr.get(this,"lang",this.default)}set lang(t=""){GSAttr.set(this,"lang",t)}get list(){return GSAttr.get(this,"list","title,comment").split(",")}set list(t=""){t=Array.isArray(t)?t.join(","):t,GSAttr.set(this,"list",t)}get url(){return GSAttr.get(this,"url",`${location.origin}/i18n/`)}set url(t=""){GSAttr.set(this,"url",t)}}class GSEnvironment{static isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static isDesktop(){return!GSEnvironment.isMobile()}static isValidBrowser(t=""){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().indexOf(e)>-1&&(t=!0)})),t}const r=navigator.userAgent.toLocaleLowerCase(),n=r.indexOf("edg")>0;return!(!n||!e.startsWith("edg"))||!n&&r.indexOf(e)>0}static isValidEnvironment(t=""){return!t||("desktop"===t?GSEnvironment.isDesktop():"mobile"===t?GSEnvironment.isMobile():GSEnvironment.isDevice(t))}static isDevice(t=""){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=""){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.indexOf("portrait")>-1?"portrait"===t||"vertical"===t:!(e.indexOf("landscape")>-1)||("landscape"===t||"horizontal"===t)}static{Object.seal(GSEnvironment)}}class GSElement extends HTMLElement{#ft=!1;#bt=!1;#yt=null;#vt=null;#Ot=!1;#At=null;static{customElements.define("gs-element",GSElement)}constructor(){super()}static observeAttributes(t){return GSData.mergeArrays(t,GSElement.observedAttributes)}static get observedAttributes(){return["orientation","id"]}get template(){return GSAttr.get(this,"template","")}set template(t){GSAttr.set(this,"template",t)}get isFlat(){return GSUtil.FLAT||GSAttr.getAsBool(this,"flat")}get isProxy(){return this.#Ot}get proxy(){return GSAttr.get(this,"proxy",!1)}get environment(){return GSAttr.get(this,"environment","")}set environment(t){GSAttr.set(this,"environment",t)}get os(){return GSAttr.get(this,"os","")}set os(t){GSAttr.set(this,"os",t)}get browser(){return GSAttr.get(this,"browser","")}set browser(t){GSAttr.set(this,"browser",t)}get orientation(){return GSAttr.get(this,"orientation","")}set orientation(t){GSAttr.set(this,"orientation",t)}get onready(){return GSAttr.get(this,"onready","")}set onready(t){GSAttr.set(this,"onready",t)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get owner(){return GSComponents.getOwner(this)}get offline(){return this.#bt}get online(){return!this.#bt}get ready(){return this.#ft}get anchor(){const t="beforeend@self";return this.proxy?t:GSAttr.get(this,"anchor",t)}get self(){const t=this;return t.isProxy&&t.#yt instanceof GSElement?t.#yt.self:t.#yt}updateUI(){const t=this;t.shadowRoot&&(t.shadowRoot.adoptedStyleSheets=GSCacheStyles.styles,GSi18n.isInitialized&&GSi18n.isInitialized.translateDOM(t.shadowRoot))}getStyle(){return GSAttr.get(this,"style","")}getByID(t=""){return GSDOM.getByID(this,t)}closest(t=""){return GSDOM.closest(this,t)}query(t=""){return GSDOM.query(this.self,t)}queryAll(t=""){return GSDOM.queryAll(this.self,t)}async getTemplate(t=""){return GSLoader.getTemplate(t)}hide(t=!1){GSDOM.hide(this,t)}show(t=!1){GSDOM.show(this,t)}async waitEvent(t=""){if(!t)throw new Error("Event undefined!");const e=this;return new Promise(((r,n)=>{e.once(t,(t=>r(t.detail)))}))}once(t,e){return this.listen(t,e,!0)}on(t,e,r=!1){return this.listen(t,e,r)}off(t,e){return this.unlisten(t,e)}listen(t,e,r=!1){return this.attachEvent(this,t,e,r)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e="",r,n=!1){return GSEvent.attach(this,t,e,r,n)}removeEvent(t,e="",r){return GSEvent.remove(this,t,e,r)}connectedCallback(){const t=this;if(!t.#Et()){if(!(t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS))return t.remove();t.id||(t.id=GSID.id),t.#At=t.#Mt(),t.#Ot=t.#At.ref,GSComponents.store(t),t.#Dt()}}disconnectedCallback(){const t=this;t.#bt=!0,t.#vt&&t.#vt.disconnect(),GSComponents.remove(t),GSEvent.deattachListeners(t),t.#wt(),t.#vt=null,t.#yt=null,t.#At=null}attributeChangedCallback(t,e,r){const n=this;"orientation"===t&&n.#Tt(),"id"===t&&(GSComponents.remove(e),GSComponents.store(n)),n.#ft&&requestAnimationFrame((()=>{n.attributeCallback(t,e,r)}))}attributeCallback(t,e,r){}onReady(){const t=this;if(t.offline)return;t.#ft=!0;const e=GSFunction.parseFunction(t.onready);GSFunction.callFunction(e),GSEvent.send(t,"componentready",t.id,!0,!0)}#Tt(t){const e=this;requestAnimationFrame((()=>{e.offline||(e.isValidOrientation?e.show(!0):e.hide(!0))}))}#Et(){const t=GSComponents.getOwner(this,GSElement);return t&&t.isProxy}#Ct(){const t=this;requestAnimationFrame((()=>{t.updateUI()}))}get#Lt(){const t=this;return t.shadowRoot||(t.attachShadow({mode:"open"}),t.#vt=GSDOMObserver.create(t.#Lt),t.updateUI()),t.shadowRoot}get#Ft(){const t=this;return t.#Ot&&t.isFlat||!t.#Ot}async#It(){const t=this;if(t.offline)return;const e=t.#Ft,r=e?await t.getTemplate(t.template):t.outerHTML;await GSEvent.waitAnimationFrame((()=>{if(t.offline)return;const n=t.#At;if(t.#Ot)return e?t.#yt=GSDOM.parseWrapped(t,r,!0):(t.#yt=GSDOM.parse(r,!0),t.#yt.id=t.id,t.id=GSID.id),GSDOM.link(t,t.#yt),void GSDOM.insertAdjacent(n.target,t.#yt,n.anchor);if(n.target!==t){if(n.target===t.parentElement)return t.#yt=t.isFlat?t:t.#Lt,void(t.#yt.innerHTML=r);t.#yt=GSDOM.parseWrapped(t,r,!0),GSDOM.link(t,t.#yt),GSDOM.insertAdjacent(n.target,t.#yt,n.anchor)}else if(t.isFlat)if(r){const e=GSDOM.parseWrapped(t,r,!1);t.#yt=e,GSDOM.insertAdjacent(n.target,e,n.anchor)}else t.#yt=t;else t.#yt=t.#Lt,t.#yt.innerHTML=r})),t.updateUI()}#Mt(){const t=this,e=t.anchor,r=e.indexOf("@");let n=r>0?e.slice(0,r):e,s=r>0?e.slice(r+1):"self";"self"!==n&&"parent"!==n||(s=s||n,n=null),n=GSUtil.normalize(n,"beforeend"),s=GSUtil.normalize(s,"self");let i=null;switch(s){case"self":i=t;break;case"parent":i=t.parentElement;break;default:i=GSDOM.query(document.documentElement,s)}if(!i){const e=`Injection point not available!\nElement: ${t.tagName}, Id:${t.id}, tgt:${s}`;throw GSLog.error(t,e),new Error(e)}return{anchor:n,target:i,ref:!(i===t||i===t.parentElement)}}#wt(){const t=this;t.#yt&&t.#yt.remove&&(t.#yt.remove(),t.#yt=null)}async#Dt(){const t=this;await t.#It(),t.offline||t.#Ft&&(t.isFlat||t.attachEvent(this,document,"gs-style",t.#Ct.bind(t)),t.attachEvent(this,screen.orientation,"change",t.#Tt.bind(t)),requestAnimationFrame((()=>t.onReady())))}}class GSCacheTemplate{static _store=new Map;static store(t,e){this._store.set(t,e)}static remove(t){return this._store.delete(t)}static load(t){return this._store.get(t)}static getOrCreate(t,e){const r=GSCacheTemplate;let n=r.load(t);return n||(n=r.create(e),r.store(t,n),n)}static create(t){const e=document.createElement("template");return e.innerHTML=t,e}static clone(t){return GSDOM.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(t){const e=GSFunction.parseFunction(t);return!!GSFunction.isFunction(e)&&e}static isHTMLTemplate(t){const e=t?t.trim():"";return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():"";return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e="",r){const n=GSCacheTemplate;return t?n.getOrCreate(e,r):n.create(r)}static loadHTMLTemplate(t=!1,e="",r){const n=GSCacheTemplate,s=n.isHTMLTemplate(r);return s?n.initTemplate(t,e,s):s}static async loadURLTemplate(t=!1,e="",r){const n=GSCacheTemplate,s=r;try{let r=null;return t&&(r=n.load(s)),r?r:(r=await GSLoader.loadTemplate(s),n.initTemplate(t,e,r))}catch(t){GSLog.error(n,t)}return!1}static async loadFunctionTemplate(t=!1,e="",r){const n=GSCacheTemplate,s=n.isFunctionTemplate(r);if(!s)return s;try{let r=null;return n.cached&&(r=n.load(o)),r?r:(r=GSFunction.isFunctionAsync(s)?await s():s(),n.initTemplate(t,e,r))}catch(t){GSLog.error(n,t)}return s}static async loadTemplate(t=!1,e="",r){if(!e)return!1;if(!r)return!1;const n=GSCacheTemplate;let s=!1;return 0==r.indexOf("#")&&(s=document.getElementById(r.slice(1))),s||(s=n.loadHTMLTemplate(t,e,r)),s||(s=await n.loadFunctionTemplate(t,e,r)),s||(s=await n.loadURLTemplate(t,e,r)),s}}class GSTemplate extends HTMLElement{#xt=!1;#yt=null;#vt=null;static get observedAttributes(){return["href"]}constructor(){super()}get id(){return GSAttr.get(this,"id")}set id(t){GSAttr.set(this,"id",t)}get href(){return GSAttr.get(this,"href")}set href(t){GSAttr.set(this,"href",t)}get isFlat(){return GSUtil.FLAT||GSAttr.getAsBool(this,"flat",!1)}get self(){return this.#yt||this.shadowRoot}get environment(){return GSAttr.get(this,"environment","")}set environment(t){GSAttr.set(this,"environment",t)}get os(){return GSAttr.get(this,"os","")}set os(t){GSAttr.set(this,"os",t)}get browser(){return GSAttr.get(this,"browser","")}set browser(t){GSAttr.set(this,"browser",t)}attributeChangedCallback(t,e,r){this.#xt&&"href"===t&&this.loadTemplate()}connectedCallback(){const t=this,e=t.parentElement;if(!e||"GS-ITEM"!=e.tagName){if(!(t.isValidEnvironment&&t.isValidBrowser&&t.isValidOS))return t.remove();t.id||(t.id=GSID.id),t.#xt=!0,GSComponents.store(t),t.loadTemplate()}}disconnectedCallback(){const t=this;t.#xt=!1,t.#wt(),t.#vt&&t.#vt.disconnect(),GSComponents.remove(t),GSCacheTemplate.remove(t.id)}#wt(){const t=this;t.#yt&&(t.#yt.remove(),t.#yt=null)}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get shadow(){const t=this;return!t.shadowRoot&&t.#xt&&(t.attachShadow({mode:"open"}),t.#vt=GSDOMObserver_GSDOMObserver.create(t.shadowRoot)),t.shadowRoot}async loadTemplate(){const t=this,e=await GSCacheTemplate.loadTemplate(!0,t.id,t.href);return e?t.parentElement instanceof HTMLHeadElement?(GSEvent.sendSuspended(document,"gs-template",{id:t.id,href:t.href}),e):(await GSEvent.waitAnimationFrame((async()=>{if(t.#xt){if(t.isFlat){const r=GSDOM.parseWrapped(t,e.innerHTML);t.#yt=t.insertAdjacentElement("afterend",r)}else t.shadow.adoptedStyleSheets=GSCacheStyles.styles,t.shadow.innerHTML=e.innerHTML;GSEvent.sendSuspended(t,"templateready",{id:t.id,href:t.href},!0,!0)}})),e):(GSLog.error(this,`Template not found for: Id=${t.id}; href=${t.href}`),!1)}waitWhenReady(t=""){return t&&(this.href=t),this.waitEvent("templateready")}waitEvent(t=""){const e=this;return new Promise(((r,n)=>{if(!t)return n("Event undefined!");GSEvent.once(e,null,t,(t=>r(t.detail)),{once:!0})}))}query(t=""){return GSDOM.query(this,t)}queryAll(t="",e=!1){return GSDOM.queryAll(this,t)}static{customElements.define("gs-template",GSTemplate),Object.seal(GSTemplate)}}})();
//# sourceMappingURL=io.greenscreens.components.core.js.map