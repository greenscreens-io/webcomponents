class GSLog{static logging=!0;static tracing=!1;static info(t,e){this.#t(t,e,!0,'info')}static warn(t,e){this.#t(t,e,!0,'warn')}static error(t,e){this.#t(t,e,!0,'error')}static trace(t,e){GSLog.tracing&&this.#t(t,e,!1,'error')}static log(t,e,r){this.#t(t,e,r)}static#t(t,e,r,n){if(!r&&!this.logging)return;const a=t?`${t.nodeName} -> ${t.id}: ${e}`:e;let s=console[n||'log'];s='function'==typeof s?s:console.log,s(a),e instanceof Error&&s(e)}static{Object.seal(GSLog)}}class GSUtil{static FLAT=1==globalThis.GS_FLAT;static ALPHANUM=/^[a-zA-Z0-9-_]+$/;static#e=/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g;static isNumber=t=>!isNaN(parseFloat(t))&&isFinite(t);static isDate=t=>t instanceof Date;static isBool=t=>'boolean'==typeof t||t instanceof Boolean;static isString=t=>'string'==typeof t;static isNull=t=>null==t;static toBinary=(t=0)=>t.toString(2);static asBool=(t=!1)=>'true'===t?.toString().trim().toLowerCase();static fromLiteral=(t='',e)=>t.replace(/\${(.*?)}/g,((t,r)=>e[r]));static reverse=t=>(t||'').split('').reverse().join('');static capitalize=(t='')=>t?t[0].toUpperCase()+t.slice(1).toLowerCase():'';static capitalizeAll=(t='',e=' ')=>t.split(e).map(((t,e)=>GSUtil.capitalize(t))).join(e);static capitalizeAttr=(t='')=>t.split('-').map(((t,e)=>e?GSUtil.capitalize(t):t)).join('');static initerror=()=>{throw new Error('This class cannot be instantiated')};static isInstance=t=>t instanceof t.constructor;static range=(t=0,e=10,r=100)=>Math.max(Math.min(r,t),e);static extractNumber=(t='')=>t.match(/[\d,\.]*\d/)?.[0];static asNum(t=0,e=0,r){if(r=r||GSUtil.locale,GSUtil.isString(t)){const e=GSUtil.numberSeparator(r);t=GSUtil.extractNumber(t)?.replaceAll(e,'')||t}return GSUtil.isNumber(t)?parseFloat(t):e}static isURL=(t='')=>/^(https?:\/\/|\/{1,2}|\.\/{1})(\S*\/*){1,}/i.test(t.trim());static isHTML=(t='')=>t.trim().startsWith('<')&&t.trim().endsWith('>');static generateUUID=(t='xxxx-xxxx-xxxx-xxxx-xxxx',e='abcdef0123456789')=>t.replace(/[x]/g,(()=>e[Math.floor(Math.random()*e.length)]));static get locale(){return navigator.language?navigator.language:navigator.languages[0]}static toRegex(t,e){return t instanceof RegExp?t:GSUtil.isStringEmpty(t)?void 0:new RegExp(t,e)}static decimalSeparator(t){return Intl.NumberFormat(t).format(1.1)[1]}static numberSeparator(t){return Intl.NumberFormat(t).format(1e3)[1]}static getDateFormat(t=void 0){return new Intl.DateTimeFormat(t).format(new Date(2e3,0,2)).replace('2000','YYYY').replace('01','MM').replace('1','M').replace('02','DD').replace('2','D')}static isJsonString(t=''){return'string'==typeof t&&(t.startsWith('{')||t.startsWith('['))}static isJsonType(t=''){return t&&Array.isArray(t)||'object'==typeof t}static isJson(t=''){return GSUtil.isJsonString(t)||GSUtil.isJsonType(t)}static toJson(t='',e={},r=!0){return GSUtil.isJsonString(t)?JSON.parse(r?GSUtil.normalizeJson(t):t):GSUtil.isJsonType(t)?t:(t&&GSLog.warn(null,`Invalid data to convert into JSON: ${t}`),e)}static normalizeJson(t=''){return t?.replace(GSUtil.#e,'"$2": ')}static normalize(t,e=''){return(t??e).toString().trim()}static toStringArray(t='',e=' '){return t.split(e).map((t=>t.trim())).filter((t=>t.length>0))}static textTransform(t='',e=''){switch(t){case'lowercase':e=e.toLowerCase();break;case'uppercase':e=e.toUpperCase();break;case'capitalize':e=GSUtil.capitalizeAll(e)}return e}static fromTemplateLiteral(t,e){const r=Object.keys(e),n=Object.values(e);return new Function(...r,`return \`${t}\`;`)(...n)}static decodeHTMLEntities(t){const e=document.createElement('textarea');return e.innerHTML=t,e.value}static parseValue(t){if(!GSUtil.isString(t))return;if(!GSUtil.isStringNonEmpty(t))return;let e=window,r=null;return t.trim().split('.').forEach(((t,n,a)=>{if(e)return n<a.length-1?e=e[t]:void(r=e[t])})),r}static isStringNonEmpty(t=''){return!GSUtil.isStringEmpty(t)}static isStringEmpty(t=''){return 0===GSUtil.normalize(t).trim().length}static isStringMatch(t,e){const r=GSUtil.isStringNonEmpty(t),n=GSUtil.isStringNonEmpty(e);return r&&n?t.trim().toLowerCase()==e.trim().toLowerCase():r===n}static async timeout(t=0,e){return e=GSUtil.isNumber(e)?AbortSignal.timeout(e):e,new Promise(((r,n)=>{const a=setTimeout(r.bind(null,!0),t);e instanceof AbortSignal&&e.addEventListener('abort',(()=>{clearTimeout(a),n(new Error('aborted timeout'))}))}))}static async export(t,e,r='octet/stream'){const n=new Blob(t,{type:r}),a=URL.createObjectURL(n);try{const t=document.createElement('a');t.href=a,t.download=e,t.click(),await GSUtil.timeout(2e3)}finally{URL.revokeObjectURL(a)}}static register(t,e,r,n=!0,a=!1,s=!1){HTMLElement.isPrototypeOf(e)&&(customElements.get(t)||(customElements.define(t,e,{extends:r?.toLowerCase()}),n&&!Object.isSealed(e)&&Object.seal(e),a&&!Object.isFrozen(e)&&Object.freeze(e),s&&(self[e.name]=e)))}static async importSource(t){const e=new Blob([t],{type:'text/javascript'}),r=URL.createObjectURL(e);try{return await import(r)}finally{URL.revokeObjectURL(r)}}static async writeToClipboard(t=''){const e=await navigator.permissions.query({name:'clipboard-write'});return'granted'===e.state||'prompt'===e.state?navigator.clipboard.writeText(t):''}static async readFromClipboard(){const t=await navigator.permissions.query({name:'clipboard-read'});return'granted'===t.state||'prompt'===t.state?navigator.clipboard.readText():''}static{Object.seal(GSUtil),globalThis.GSUtil=GSUtil}}let t=class GSFunction{static isFunction=t=>'function'==typeof t;static isFunctionNative(t){return GSFunction.isFunction(t)&&t.toString().includes('native code')}static hasFunction(t,e){return t&&GSFunction.isFunction(t[e])}static hasGetter(t,e){return GSFunction.isFunctionDefined(t,e,'get')}static hasSetter(t,e){return GSFunction.isFunctionDefined(t,e,'set')}static isFunctionDefined(t,e,r){const n=!!t&&Reflect.getOwnPropertyDescriptor(t.__proto__,e);return n&&'function'==typeof n[r]}static isFunctionAsync(t){if(!GSFunction.isFunction(t))return!1;let e=t instanceof GSFunction.callFunctionAsync.constructor;return e||(e='AsyncFunction'==t[Symbol.toStringTag]),e}static async callFunctionAsync(t,e){const r=arguments?Array.from(arguments).slice(2):[];return await t.apply(e||null,r)}static callFunctionSync(t,e){const r=arguments?Array.from(arguments).slice(2):[];return t.apply(e||null,r)}static async callFunction(t,e,r=!0){if(t=GSUtil.isString(t)?GSFunction.parseFunction(t):t,!GSFunction.isFunction(t))return;if(!r&&GSFunction.isFunctionNative(t))return;const n=arguments?Array.from(arguments).slice(3):[];return GSFunction.isFunctionAsync(t)?await GSFunction.callFunctionAsync(t,e,...n):GSFunction.callFunctionSync(t,e,...n)}static parseFunction(t){const e=GSUtil.parseValue(t);return GSFunction.isFunction(e)?e:null}static async#r(t,e,r){if(!GSFunction.isFunction(t))return;return GSFunction.isFunctionAsync(t)?await t.apply(e,r):t.apply(e,r)}static callOnceFifo(t,e){let r=!1;return async(...n)=>{if(r)return;r=!0;const a=e||this;return await GSFunction.#r(t,a,n)}}static callOnceLifo(t,e){let r=0;return(...n)=>{if(r<0)return;r++;const a=e||this;return new Promise(((e,s)=>{queueMicrotask((async()=>{if(!(r<=0)&&(r--,0===r))try{const r=await GSFunction.#r(t,a,n);e(r)}catch(t){s(t)}finally{r=-1}}))}))}}static{Object.seal(GSFunction),globalThis.GSFunction=GSFunction}};class GSCSSMap{static#n=!!globalThis.document?.body?.computedStyleMap;#a;constructor(t){this.#a=GSCSSMap.#s(t)}get(t){const e=this;if(e.#a)return GSCSSMap.#n?e.#a.get(t):e.#a[GSUtil.capitalizeAttr(t)]}asText(t){return(this.get(t)||'')?.toString()}asBool(t){const e=this.get(t);return GSUtil.asBool(GSCSSMap.#n?e?.value:e)}asNum(e){let r=this.get(e);return GSCSSMap.#n&&t.isFunction(r?.to)&&'number'!==r.unit&&(r=r.to('px')),GSUtil.asNum(GSCSSMap.#n?r?.value:r.match(/\d*(\.\d*)?/g).filter((t=>GSUtil.isNumber(t))).shift())}matches(t,e){return this.asText(t)==e}static#s(t){return GSCSSMap.#n?t.computedStyleMap():globalThis.window?.getComputedStyle?globalThis.window.getComputedStyle(t):null}static styleValue(t,e){return GSCSSMap.getComputedStyledMap(t).get(e)}static getComputedStyledMap(t){return new GSCSSMap(t)}static#i(t){return t?(t=String(t).replace(/\s*([>~+])\s*/g,' $1 ')).replace(/(\s+)/g,' ').trim():''}static#o(t,e){return t.split(e).map((t=>t.trim())).filter((t=>t))}static#l(t,e){return!!t&&e.some((e=>t.includes(e)))}static findRule(t){const e=GSCSSMap,r=e.#o(e.#i(t),',');return Array.from(globalThis.document.styleSheets).map((t=>Array.from(t.cssRules||[]))).reduce(((t,e)=>t.concat(e)),[]).filter((t=>e.#l(e.#i(t.selectorText),r)))}static{Object.seal(GSCSSMap),globalThis.GSCSSMap=GSCSSMap}}class GSDate extends Date{static DEFAULT_FORMAT='YYYY-MM-DDTHH:mm:ssZ';static REGEX_FORMAT=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;#c=navigator.locale;format(t=GSDate.DEFAULT_FORMAT,e){this.locale=e;const r=this.asJSON();return t.replace(GSDate.REGEX_FORMAT,((t,e)=>e||r[t]))}build(){const t=this,e=t.last.getDate(),r=t.first.getDay(),n=t.#u(),a=0===r?[]:' '.repeat(r+(n?-2:-1)).split(' ');let s=1;for(;s<=e;)a.push(s.toString()),s++;for(;a.length%7!=0;)a.push('');return a}get locale(){return this.#c}set locale(t){this.#c=t||navigator.language}get year(){return this.getFullYear()}set year(t=0){this.setFullYear(t)}get month(){return this.getMonth()}set month(t=0){this.setMonth(t)}get day(){return this.getDate()}set day(t=0){this.setDate(t)}get first(){return new GSDate(this.getFullYear(),this.getMonth(),1)}get last(){return new GSDate(this.getFullYear(),this.getMonth()+1,0)}get YY(){return String(this.YYYY).slice(-2)}get YYYY(){return this.getFullYear()}get M(){return this.getMonth()+1}get MM(){return this.M.toString().padStart(2,'0')}get MMM(){return this.#d({month:'short'})}get MMMM(){return this.#d({month:'long'})}get D(){return this.getDate().toString()}get DD(){return this.D.padStart(2,'0')}get d(){return this.getDay().toString()}get dd(){return this.ddd.slice(0,2)}get ddd(){return this.#d({weekday:'short'})}get dddd(){return this.#d({weekday:'long'})}get H(){return this.getHours().toString()}get HH(){return this.H.padStart(2,'0')}get h(){return this.#h(1)}get hh(){return this.#h(2)}get a(){return this.#m(!0)}get A(){return this.#m(!1)}get m(){return this.getMinutes().toString()}get mm(){return this.m.padStart(2,'0')}get s(){return this.getSeconds().toString()}get ss(){return this.s.padStart(2,'0')}get SSS(){return this.getMilliseconds().toString().padStart(3,'0')}get Z(){return this.#p()}get ZZ(){return this.Z.replace(':','')}get Q(){return Math.ceil(this.M/3)}get k(){return(this.getHours()+1).toString()}get kk(){return this.k.padStart(2,'0')}get W(){const t=new Date(this.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)}get WW(){return this.W.toString().padStart(2,'0')}get x(){return this.getTime()}get X(){return Math.floor(this.x/1e3)}asJSON(){const t=this;return{YY:t.YY,YYYY:t.YYYY,M:t.M,MM:t.MM,MMM:t.MMM,MMMM:t.MMMM,D:t.D,DD:t.DD,d:t.d,dd:t.dd,ddd:t.ddd,dddd:t.dddd,H:t.H,HH:t.HH,h:t.h,hh:t.hh,a:t.a,A:t.A,m:t.m,mm:t.mm,s:t.s,ss:t.ss,SSS:t.SSS,Z:t.Z,ZZ:t.ZZ,Q:t.Q,k:t.k,kk:t.kk,W:t.W,WW:t.WW,x:t.x,X:t.X}}static monthList(t=!1,e=navigator.locale,r=!0){const n=new GSDate;n.locale=e,n.setMonth(0);const a=[];let s=null,i=12;for(;i--;)s=t?n.MMM:n.MMMM,s=r?n.#g(s):s,a.push(s),n.setMonth(n.getMonth()+1);return a}static dayList(t=!1,e=navigator.locale,r=!0){const n=new GSDate;n.locale=e;const a=n.#u()?1:0;n.setDate(n.getDate()-n.getDay()+a);const s=[];let i=null,o=7;for(;o--;)i=t?n.ddd:n.dddd,i=r?n.#g(i):i,s.push(i),n.setDate(n.getDate()+1);return s}#u(){return 1===new Intl.Locale(this.#c)?.weekInfo?.firstDay}#g(t=''){return t.charAt(0).toUpperCase()+t.slice(1)}#d(t){return this.toLocaleString(this.#c,t)}#h(t){return(this.getHours()%12||12).toString().padStart(t,'0')}#m(t){const e=this.#d({hour:'2-digit',hour12:!0}).split(' ').pop(-1);return t?e.toLowerCase():e}#p(){const t=-1*this.getTimezoneOffset(),e=Math.abs(t),r=e%60;return`${t<=0?'+':'-'}${Math.floor(e/60).toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}`}static parse(t,e,r){e=e||GSUtil.getDateFormat(r);const n=GSDate.#S(e);return GSDate.#f(t,n)}static#S(t){return new RegExp('^\\s*'+t.toUpperCase().replaceAll(/([MDY])\1*/g,'(?<$1>\\d+)')+'\\s*$')}static#f(t,e){const{groups:r}=t.match(e)??{};if(!r)return null;const n=Number(r.Y),a=Number(r.M),s=Number(r.D);if(n<1e3||n>2999)return null;if(a<1||a>12)return null;const i=new Date(n,a-1,s);return s!==i.getDate()||isNaN(i.valueOf())?null:i}static{globalThis.GSDate=GSDate}}class GSData{static PROPERTIES={name:{},type:{},format:{},currency:{},locale:{},extract:{}};static uniqe(t){return Array.from(new Set(t))}static compareArrays=(t,e)=>t.length===e.length&&t.every(((t,r)=>t===e[r]));static arraysEqual(t,e){return!!Array.isArray(t)&&(!!Array.isArray(e)&&(t===e||(t=t.toSorted(),e=e.toSorted(),GSData.compareArrays(t,e))))}static mergeArrays(t=[],e=[]){return[...t,...e].filter(((t,e,r)=>r.indexOf(t)===e))}static mergeObjects(t=[]){let e={};return t.filter((t=>t)).forEach((t=>e={...e,...t})),e}static format(t,e){const r=GSData.#G(t,e),n=t.locale||GSUtil.locale,a=GSUtil.toRegex(t.extract,'g');switch(e=a?e.match(a)[0]:e,r){case'timestamp':return e instanceof Date?e:Date.parse(e);case'date':if(e instanceof Date)return e;const r=GSUtil.asBool(t.format)?void 0:t.format;return GSUtil.isString(e)?GSDate.parse(e,r,n):e&&0!=e?new GSDate(e).format(r,n):e;case'string':case'text':if(e instanceof Date){const r=t.format||GSUtil.getDateFormat(n);return new GSDate(e).format(r,n)}break;case'boolean':return GSUtil.asBool(e,!1);case'number':return GSUtil.asNum(e,e,n);case'currency':GSUtil.isString(e)&&(e=GSUtil.asNum(e));const a={style:'currency',currency:t.currency};return new Intl.NumberFormat(n,a).format(e)}return e}static#G(t,e){return t.type?t.type:e instanceof Date?'date':e instanceof Number?'number':e instanceof Boolean?'boolean':typeof e}static*filter(t=[],e=[],r,n=0){let a=0,s=!1;for(let i of t)if(s=GSData.filterRecord(i,e,r),s&&(a++,yield i),n>0&&a>=n)break}static filterData(t=[],e=[],r,n=0){return t=Array.isArray(t)?t:[],0===(e=Array.isArray(e)?e:[]).length?t:[...GSData.filter(t,e,r,n)]}static filterRecord(t,e,r){return'string'==typeof e?GSData.filterSimple(t,e,r):GSData.filterComplex(t,e)}static filterSimple(t,e='',r){e=e.toLowerCase(),r=r||Object.keys(t);let n=null;for(let a of r)if(n=t[a],GSData.filterValue(n,e))return!0;return!1}static filterComplex(t,e){let r=!0,n=null;for(let a of e)if(n=t[a.name],r=a.name?r&&GSData.filterValue(n,a):r&&GSData.filterSimple(t,a.value),!r)break;return r}static filterValue(t,e){return t instanceof Date?GSData.matchDate(t,e):t instanceof Date?GSData.matchNumber(t,GSUtil.asNum(e.value),e.op):(''+t).toLocaleLowerCase().includes((''+e.value).toLocaleLowerCase())}static matchDate(t,e,r){if('string'==typeof e){const n=''+e,a=t.toLocaleDateString(r),s=t.toISOString();return a.includes(n)||s.includes(n)}if(!e.value)return!1;switch(e.value instanceof Date?'date':typeof e.value){case'number':return GSData.matchNumber(t.getTime(),e.value,e.op);case'date':return GSData.matchNumber(t.getTime(),e.value.getTime(),e.op)}return GSData.matchDate(t,''+e.value,e.locale)}static matchNumber(t=0,e=0,r='eq'){switch(r){case'gt':return e>t;case'lt':return e<t;case'ge':return e>=t;case'le':return e<=t}return t===e}static sortData(t,e){return 0===e.length?t:t.toSorted(((t,r)=>GSData.sortPair(t,r,e)))}static sortPair(t,e,r){const n=Array.isArray(t);let a=0;return r.forEach(((r,s)=>{if(!r)return;const i=GSUtil.isNumber(r)?r:r.ord,o=GSUtil.isNumber(r.col)?r.col:s,l=n?o:r.name,c=t[l],u=e[l];a=GSData.compare(c,u,i,a)})),a}static compare(t,e,r,n){return GSUtil.isNumber(t)&&GSUtil.isNumber(e)?n||GSData.compareNum(t,e,r):GSUtil.isString(t)||GSUtil.isString(e)?n||GSData.compareString(t,e,r):GSUtil.isBool(t)||GSUtil.isBool(e)?n||GSData.compareBool(t,e,r):GSUtil.isDate(t)||GSUtil.isDate(e)?n||GSData.compareNum(Number(t),Number(e),r):n}static compareBool(t,e,r){return t=t?1:0,e=e?1:0,GSData.compareNum(t,e,r)}static compareString(t,e,r){const n=(t||'').toString(),a=(e||'').toString();return r<0?a.localeCompare(n):n.localeCompare(a)}static compareNum(t,e,r){return r<0?e-t:t-e}static writeToOject(t,e,r,n=!0){if(n&&GSUtil.isNull(r))return;const a=e.split('.');if(1===a.length)return GSData.#y(t,e,r);const s=a.slice(0,-1),i=a.slice(-1)[0];return s.forEach((e=>{t.hasOwnProperty(e)||(t[e]={}),t=t[e]})),GSData.#y(t,i,r)}static#y(t,e,r){return t.hasOwnProperty(e)?(Array.isArray(t[e])||(t[e]=[t[e]]),Array.isArray(r)?t[e]=t[e].concat(r):t[e].push(r)):t[e]=r,t}static readFromProperty(t,e){if(GSUtil.isNull(t))return;const r=/\[\d+\]$/g;let n=e,a='';return r.test(e)?(n=e.replace(r,''),a=e.match(r).shift().match(/\d+/).shift(),a=GSUtil.asNum(a),t=t.hasOwnProperty(n)?t=t[n][a]:null):t=t.hasOwnProperty(n)?t=t[n]:null,t}static readFromObject(t,e){return e.split('.').filter((t=>!GSUtil.isNull(t))).forEach((e=>t=GSData.readFromProperty(t,e))),t}static objectPathExist(t,e){return!!e&&e.split('.').map((e=>GSData.readFromProperty(t,e))).filter((t=>!GSUtil.isNull(t))).length>0}static{Object.seal(GSData),globalThis.GSData=GSData}}class GSDOM{static QUERY_FOCUSABLE='a[href]:not([tabindex=\'-1\']),area[href]:not([tabindex=\'-1\']),input:not([disabled]):not([tabindex=\'-1\']),select:not([disabled]):not([tabindex=\'-1\']),textarea:not([disabled]):not([tabindex=\'-1\']),button:not([disabled]):not([tabindex=\'-1\']),iframe:not([tabindex=\'-1\']),[tabindex]:not([tabindex=\'-1\']),[contentEditable=true]:not([tabindex=\'-1\'])';static QUERY_INPUT='input:not([type=\'hidden\']):not(disabled):not(readonly),select:not([type=\'hidden\']):not(disabled):not(readonly),textarea:not([type=\'hidden\']):not(disabled):not(readonly)';static#b=['INPUT','SELECT','TEXTAREA','OUTPUT'];static SPEED=300;static get activeElement(){return GSDOM.active(document.activeElement)}static active(t){return t.shadowRoot?.activeElement?GSDOM.active(t.shadowRoot?.activeElement):t}static isVisible(t){if(!GSDOM.isHTMLElement(t))return!1;const e=GSCSSMap.getComputedStyledMap(t),r=!e.matches('visibility','hidden'),n=!e.matches('display','none'),a=e.asNum('opacity')>0,s=t.getBoundingClientRect();return s.width>0&&s.height>0&&a&&r&&n}static parse(t='',e=!1,r='text/html'){try{const n=(new DOMParser).parseFromString(t,r);return e?n?.head?.firstElementChild||n?.body?.firstElementChild:n}catch(t){throw GSLog.error(null,t),t}}static parseWrapped(t,e='',r=!1){const n=GSDOM.parse(e),a=[...GSDOM.#E(n.head.children),...GSDOM.#E(n.body.children)],s=r||1!==a.length,i=GSDOM.wrap(t,s?null:a.shift());for(;a.length>0;)i.appendChild(a.shift());return i}static wrap(t,e){return GSDOM.link(t,e||document.createElement('gs-block'))}static link(t,e){return e.setAttribute('proxy',`#${t.id}`),t.slot&&e.setAttribute('slot',t.slot),e}static#E(t){return Array.from(t||[]).filter((t=>!GSDOM.isText(t)))}static isFormElement(t){const e=GSUtil.isString(t)?t:t?.tagName;return GSDOM.#b.includes(e)}static formElements(t){return GSDOM.queryAll(t,GSDOM.#b.map((t=>t.toLowerCase())))}static isButtonElement(t){return t instanceof HTMLButtonElement||'GS-BUTTON'===t?.tagName||GSDOM.hasClass(t,'btn')}static isElement(t,e){if(!(e&&t))return!1;if(!GSUtil.isString(e))return t instanceof e;const r=customElements.get(e.toLowerCase());if(r&&t instanceof r)return t;const n=GSDOM.inheritance(t);for(let r of n)if(r?.constructor?.name===e)return t;return e.toUpperCase()===t.tagName&&t}static isTemplateElement(t){return t instanceof HTMLTemplateElement}static isHTMLElement(t){return t instanceof HTMLElement}static isSVGElement(t){return t instanceof SVGElement}static isText(t){return t instanceof Text}static isComment(t){return t instanceof Comment}static isGSElement(t){if(!t?.clazzName)return!1;const e=GSDOM.inheritance(t);for(let t of e){if(!t)break;if('GSElement'===t?.clazzName)return!0}return!1}static isGSExtra(t){return 0===t?.getAttribute('is')?.indexOf('GS-')}static getChilds(t){return Array.from(t?.childNodes||[]).filter((t=>GSDOM.isGSElement(t)))}static hide(t,e=!1){return t?.classList?.add(e?'gs-hide-orientation':'gs-hide')}static show(t,e=!1){return t?.classList?.remove(e?'gs-hide-orientation':'gs-hide')}static addSibling(t,e){const r=GSDOM.isHTMLElement(e)||GSDOM.isSVGElement(e),n=GSDOM.isHTMLElement(t)&&r,a=t===e&&t.parentNode===e||t.nextElementSibling===e;return!(!n||a)&&t.parentNode.insertBefore(e,t.nextElementSibling)}static appendChild(t,e){return!(!(GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e))||t===e)&&t.appendChild(e)}static insertAdjacent(t,e,r){const n=GSDOM.isHTMLElement(t)&&GSDOM.isHTMLElement(e),a=t===e&&t.parentNode===e;return!(!n||a)&&t.insertAdjacentElement(r,e)}static removeElement(t){return GSDOM.parent(t)?.removeChild(t)}static walk(t,e=!1,r=!1,n=!0){return e?GSDOM.parentAll(t):GSDOM.childAll(t,r,n)}static*childAll(t,e=!1,r=!0,n=!1){if(!t)return;n&&(yield t),r&&(yield*GSDOM.childAll(t.shadowRoot,e,r,!0));const a=e?t.childNodes:t.children;if(a)for(let t of a)yield*GSDOM.childAll(t,e,r,!0)}static parent(t){return t?t.parentElement||t.parentNode||t.host:null}static*parentAll(t){let e=GSDOM.parent(t);for(;e;)yield e,e=GSDOM.parent(e);if(e)return yield e}static*inheritance(t){let e=t.__proto__;for(;e;)yield e,e=e.__proto__;if(e)return yield e}static offsetParent(t){let e=t?.offsetParent;if(e)return e;const r=GSDOM.parentAll(t);for(const t of r)if(e=t.offsetParent,e)break;return e}static root(t){if(!t)return null;const e=GSDOM.parentAll(t);for(let t of e){if(t instanceof ShadowRoot)return t;if(t instanceof HTMLBodyElement)return t}return null}static component(t){return GSDOM.parent(GSDOM.root(t))}static getElementIndex(t){return GSDOM.isHTMLElement(t)?[...t.parentElement.children].indexOf(t):0}static getByID(t,e){if('string'==typeof t)return GSDOM.getByID(document.documentElement,t);if(!t||!e)return null;const r=GSDOM.walk(t,!1);for(let t of r)if(t.id===e)return t;return null}static closest(t,e){if('string'==typeof t)return GSDOM.closest(document.documentElement,e);if(!t||!e)return null;const r=GSDOM.walk(t,!0);for(let t of r)if(GSDOM.matches(t,e))return t;return null}static query(t,e,r=!1,n=!0){if('string'==typeof t)return GSDOM.query(document.documentElement,t,r,n);if(!t||!e)return null;if(GSDOM.matches(t,e))return GSDOM.#v(t);const a=GSDOM.walk(t,!1,r,n);for(let t of a)if(GSDOM.matches(t,e))return GSDOM.#v(t);return null}static queryAll(t,e,r=!1,n=!0){if('string'==typeof t)return GSDOM.queryAll(document.documentElement,t,r,n);const a=[];if(!t||!e)return a;const s=GSDOM.walk(t,!1,r,n);for(let t of s)GSDOM.matches(t,e)&&a.push(GSDOM.#v(t));return a}static#v(t){return'FORM'!==t.tagName?t:GSDOM.isHTMLElement(t.id)?new Proxy(t,{get:(t,e,r)=>{if('_owner_'===e)return t;if('id'===e)return t.getAttribute('id');const n=Reflect.get(t,e);return GSFunction.isFunction(n)?n.bind(t):n},set:(t,e,r)=>t[e]=r}):t}static matches(t,e){return t&&'function'==typeof t.matches&&t.matches(e)}static setHTML(t,e='',r=!1,n){(t instanceof ShadowRoot||t instanceof HTMLElement||t instanceof HTMLTemplateElement)&&(r&&t?.setHTML?n?t.setHTML(e,{sanitizer:n}):t.setHTML(e):t.innerHTML=e instanceof Document?e.body.innerHTML:e)}static setText(t,e=''){t&&(t.textContent=e)}static css(t,e){if(GSUtil.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!(Array.isArray(t)&&t.length>0))return!1;requestAnimationFrame((()=>{t.forEach((t=>{Object.entries(e).forEach((e=>{t.style[e[0]]=e[1]}))}))}))}static toggleClass(t,e,r){return GSUtil.isString(t)&&(t=GSDOM.queryAll(t)),GSDOM.isHTMLElement(t)&&(t=[t]),!!(Array.isArray(t)&&t.length>0)&&(!(!e||0==e.trim().length)&&(e=e.split(' ').filter((t=>t&&t.trim().length>0)),GSUtil.isNull(r)?e.forEach((e=>{t.forEach((t=>t.classList.toggle(e)))})):(t.forEach((t=>{r?t.classList.add.apply(t.classList,e):t.classList.remove.apply(t.classList,e)})),!0)))}static toggle(t,e){return GSDOM.toggleClass(t,'d-none',GSUtil.isNull(e)?e:!e)}static hasClass(t,e=''){return t?.classList?.contains(e)}static clearInputs(t,e='input, textarea, output'){const r=GSDOM.unwrap(t);requestAnimationFrame((()=>{r.querySelectorAll(e).forEach((t=>t.value=''))}))}static getValue(t){switch(t.type){case'datetime-local':case'number':return t.value?t.valueAsNumber:t.value;case'select-multiple':return Array.from(t.selectedOptions).map((t=>t.value));case'checkbox':return t.hasAttribute('value')&&t.value?t.checked?t.value:null:t.checked;default:return t.value}}static toValue(t){if(!GSDOM.isHTMLElement(t))return;let e=GSDOM.getValue(t);if('text'===t.type){const r=GSCSSMap.styleValue(t,'text-transform');r&&(e=GSUtil.textTransform(r.value,e))}return e}static fromValue(t,e){if(!GSDOM.isHTMLElement(t))return;const r=Array.isArray(e)?e[0]||'':e;if('checkbox'===t.type)t.hasAttribute('value')?t.checked=r===t.value:t.checked=1==r;else t.value=r}static toObject(t,e='input, textarea, select, output',r=!0){const n=GSDOM.unwrap(t),a={};return GSDOM.queryAll(n,e).filter((t=>t.name)).filter((t=>'true'!==t.dataset.ignore)).filter((t=>!!r||t.checkValidity())).forEach((t=>{('radio'!==t.type||t.checked)&&GSData.writeToOject(a,t.name,GSDOM.toValue(t))})),a}static fromObject(t,e,r='input, textarea, select, output'){if(e=GSUtil.toJson(e),0===Object.entries(e).length)return;const n=GSDOM.unwrap(t),a=GSDOM.queryAll(n,r);return Array.from(a).forEach((t=>GSDOM.fromObject2Element(t,e))),e}static fromObject2Element(t,e){if(!GSData.objectPathExist(e,t.name))return;const r=GSData.readFromObject(e,t.name);'radio'!==t.type?GSDOM.fromValue(t,r):t.value===r&&(t.checked=!0)}static toJson(t,e=!0,r=!1){if(Array.isArray(t))return t.map((t=>GSDOM.toJson(t,e)));const n={};if(!GSDOM.isHTMLElement(t))return n;if(r||(n['#tagName']=t.tagName.toLowerCase()),n.$text=t.innerText,Array.from(t.attributes).forEach((t=>n[t.name]=t.value)),e){const a=Array.from(t.children).map((t=>GSDOM.toJson(t,e,r)));a.length>0&&(n.items=a)}return n}static fromJson(t,e='gs-item',r=!1){return r?GSDOM.fromJsonAsString(t,e):GSDOM.fromJsonAsDOM(t,e)}static fromJsonAsDOM(t,e='gs-item'){if(!t)return null;if(GSUtil.isNumber(t)||GSUtil.isString(t))return GSDOM.fromJsonAsDOM({title:t},e);if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsDOM(t,e)));const r=t['#tagName']||e,n=document.createElement(r);return Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.setAttribute(e,t[e]))),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsDOM(t,e);n.appendChild(r)})),n}static fromJsonAsString(t,e='gs-item'){if(!t)return null;if(Array.isArray(t))return t.map((t=>GSDOM.fromJsonAsString(t))).join('');const r=t['#tagName']||e,n=[];return n.push(`<${r} `),Object.keys(t).filter((t=>'items'!=t&&'#'!=t[0])).forEach((e=>n.push(` ${e}="${t[e]}" `))),n.push('>'),Array.isArray(t.items)&&t.items.forEach((t=>{const r=GSDOM.fromJsonAsString(t,e);n.push(r)})),n.push(`</${r}>`),n.join('')}static fromURLHashToForm(t){location.hash.slice(1).split('&').filter((t=>t.length>1)).forEach((e=>{const r=e.split('=');GSDOM.setValue(`input[name=${r[0]}]`,r[1],t)}))}static unwrap(t){return t?t.self||t:document}static enableInput(t,e='input, select, textarea, .btn',r=!0,n=''){let a=GSDOM.queryAll(t,e);!r&&n&&(a=a.filter((t=>GSUtil.asBool(t.dataset[n])))),a.forEach((t=>t.removeAttribute('disabled')))}static disableInput(t,e='input, select, textarea, .btn',r=!0,n=''){GSDOM.queryAll(t,e).filter((t=>!!r||!t.disabled)).forEach((t=>{t.setAttribute('disabled',!0),n&&(t.dataset[n]=!0)}))}static setValue(t,e,r){GSDOM.queryAll(r,t).forEach((t=>GSDOM.fromValue(t,e)))}static textNodesUnder(t){const e=document.createTreeWalker(t||document,NodeFilter.SHOW_TEXT,null,!1),r=[];let n;for(;n=e.nextNode();)r.push(n);return r}static cleanHTML(t){const e=GSDOM.textNodesUnder(t||document).filter((t=>0===t.wholeText.trim().length));e.filter((t=>t.nextSibling instanceof Text)).forEach((t=>t.remove())),e.forEach((t=>t.nodeValue=t.wholeText.replaceAll(/\u0020{4}/g,'\t').replaceAll(/(\n*\t*)*(?=\n\t*)/g,'')))}static validate(t,e,r,n=!1){if(t.tagName!==e){if(n)return!1;throw new Error(`Owner element : ${t.tagName}, id:${t.id} is not of excpected type: ${e}`)}if(GSDOM.isAllowed(Array.from(t.childNodes),r))return!0;if(n)return!1;const a=GSDOM.toValidationError(t,r);throw new Error(a)}static isAllowed(t,e){if(Array.isArray(t))return 0===t.filter((t=>GSDOM.isAllowed(t,e))).length;const r=!(t instanceof Text||t instanceof Comment),n=!e.includes(t.tagName);return r&&n}static toValidationError(t,e){const r=`<${e.join('>, <')}>`;return`${t.tagName} ID: ${t.id} allows as a child nodes only : ${r}!`}static async injectCSS(t,e){if(!t?.shadowRoot instanceof ShadowRoot)return!1;let r=!0;try{const r=await fetch(e);if(!r.ok)return;const n=await r.text(),a=new CSSStyleSheet;a.replaceSync(n),t.shadowRoot.adoptedStyleSheets=[a]}catch(t){GSLog.error(null,t),r=!1}return r}static{Object.seal(GSDOM),globalThis.GSDOM=GSDOM}}class Utils{static get notify(){return GSDOM.query('gs-notification')}static inform(t=!1,e){return t?Utils.notify?.info('Info',e):(Utils.notify?.danger('Error',e),t)}static handleError(t){const e=t.data?.error||t.msg||t.message||t.toString();return Utils.inform(!1,e),e}static async load(t=''){const e=await fetch(t);return await e.json()}}const e=globalThis.GS_LIT_URL||'/bootstrap-lit/assets/lib/lit-all.min.js',r=await import(e);r.ReactiveController,r.ReactiveElement,r.AsyncDirective,r.AsyncReplaceDirective,r.CSSResult,r.Directive;const n=r.LitElement;r.PartType,r.TemplateResultType,r.UnsafeHTMLDirective,r.UntilDirective,r._$LE,r._$LH,r.adoptStyles,r.asyncAppend,r.asyncReplace,r.cache,r.choose;r.classMap;r.clearPart;r.createRef;r.css,r.defaultConverter,r.directive,r.getCommittedValue,r.getCompatibleStyle,r.getDirectiveClass,r.guard;r.html;r.ifDefined,r.insertPart,r.isCompiledTemplateResult,r.isDirectiveResult,r.isPrimitive,r.isServer,r.isSingleExpression,r.isTemplateResult,r.join,r.keyed,r.literal,r.live,r.map;const a=r.noChange;r.notEqual,r.nothing,r.range;r.ref;r.removePart,r.render,r.repeat,r.setChildPartValue,r.setCommittedValue,r.staticHtml,r.staticSvg,r.styleMap,r.supportsAdoptingStyleSheets,r.svg;const s=r.templateContent;r.unsafeCSS,r.unsafeHTML,r.unsafeSVG,r.unsafeStatic,r.until,r.when,r.withStatic;class GSID{static#D=0;static reset(){this.#D=0}static next(t='GSId-'){return`${t}${this.#D++}`}static get id(){return this.next()}static hashCode(t){const e=(t||'').length;let r=0,n=0;if(0===e)return r;for(;n<e;)r=(r<<5)-r+t.charCodeAt(n++)|0;return r}static setIf(t){t&&(t.id='string'!=typeof t.id?GSID.id:t.id||GSID.id)}static{Object.freeze(GSID)}}class GSAttr{static isHTMLElement(t){return t instanceof HTMLElement}static toggle(t,e,r=!1){GSAttr.isHTMLElement(t)&&(r?t.setAttribute(e,''):t.removeAttribute(e))}static set(t,e,r){GSAttr.isHTMLElement(t)&&(GSUtil.normalize(r)?t.setAttribute(e,r):t.removeAttribute(e))}static get(t,e='',r=''){if(!GSAttr.isHTMLElement(t))return r;if(!GSUtil.isInstance(t))return;const n=t.getAttribute(e)||r;return GSUtil.normalize(n)}static getAsBool(t,e='',r='false'){const n=GSAttr.get(t,e,r);return GSUtil.asBool(n,r)}static getAsNum(t,e='',r='0'){const n=GSAttr.get(t,e,r);return GSUtil.asNum(n,r)}static getAsJson(t,e='',r='0'){const n=GSAttr.get(t,e,r,{});return GSUtil.toJson(n)}static setAsBool(t,e='',r='false'){GSAttr.set(t,e,GSUtil.asBool(r),!1)}static setAsNum(t,e='',r='0'){GSAttr.set(t,e,GSUtil.asNum(r),NaN)}static setAsJson(t,e='',r='0'){GSAttr.set(t,e,JSON.stringify(r),'{}')}static flattenJson(t){return Object.entries(t||{}).map((t=>`${t[0]}=${t[1]}`)).join(' ')}static jsonToAttr(t,e){GSAttr.isHTMLElement(e)&&Object.entries(t||{}).map((t=>GSAttr.set(e,t[0],t[1])))}static dataToString(t){return Array.from(t.attributes).filter((t=>t.name.startsWith('data-'))).map((t=>`${t.name}="${t.value}"`)).join(' ')}static flatten(t,e=' '){return Array.from(t?.attributes||[]).map((t=>`${t.name}="${t.value}"`)).join(e)}static proxify(t,e={},r='items'){return new Proxy(t,{set(t,r,n){if('self'===r)return;if('dataset'===r)return t.dataset=n;const a=e[r]?.type;switch(r=e[r]?.attribute||r,a){case Boolean:GSAttr.toggle(t,r,GSUtil.asBool(n));break;case Number:GSAttr.setAsNum(t,r,n);break;case Object:case Array:GSAttr.set(t,r,JSON.stringify(n));default:GSAttr.set(t,r,n)}return!0},get(t,n){if('self'===n)return t;if('dataset'===n)return t.dataset;if(n===r)return Array.from(t.children).map((t=>GSAttr.proxify(t,e,r)));const a=e[n]?.type,s=!!e[n]?.unsafe,i=e[n]?.default,o=!0===e[n]?.multi;n=e[n]?.attribute||n;let l=GSAttr.get(t,n);switch(a){case Boolean:return t.hasAttribute(n);case Number:return GSUtil.asNum(l,0);case Object:return GSUtil.toJson(l,{});case Array:return GSUtil.toJson(l,[]);default:return l=s?l||i||'':l||i||void 0,o?GSUtil.toStringArray(l):l}}})}static{Object.seal(GSAttr),globalThis.GSAttr=GSAttr}}class GSEvents{static#M=0;static#w=!1;static#A=new Map;static#T=!1;static#O=0;get altContext(){return GSEvents.#w}set altContext(t){GSEvents.#w=GSUtil.asBool(t,!0)}static protect(){GSEvents.listen(globalThis,null,'contextmenu',GSEvents.#L),GSEvents.listen(globalThis.document,null,'keydown',GSEvents.#C)}static#L(t){!GSEvents.#w&&t.shiftKey||GSEvents.prevent(t)}static#C(t){const e=t.code;return'F12'!=e&&((!t.ctrlKey||!t.shiftKey||'KeyI'!=e)&&void 0)}static async waitPageLoad(e,r='loaded',n,a=100,s=!0){if(!GSEvents.#T)try{await GSEvents.wait(globalThis.window,'load',a,s),GSEvents.#T=!0}catch(t){}await t.callFunction(n),GSEvents.sendSuspended(e,r)}static wait(t,e='',r=0,n=!0){if(GSUtil.isStringEmpty(e))throw new Error('Event undefined!');if(!GSUtil.isNumber(r))throw new Error('Invalid timeout value!');return r>0?GSEvents.once(t,null,e,null,r):new Promise((a=>{GSEvents.once(t,null,e,(t=>{n&&GSEvents.prevent(t),a(t)}),r)}))}static async waitAnimationFrame(e,r=!1){if(r){if('function'!=typeof e)return;if(GSEvents.#O>0)return t.callFunction(e);GSEvents.#O++}return new Promise(((n,a)=>{requestAnimationFrame((async()=>{try{const r=await t.callFunction(e);n(r)}catch(t){a(t)}finally{r&&GSEvents.#O>0&&GSEvents.#O--}}))}))}static listen(t,e,r,n,a=!1){return!e&&t?t.addEventListener(r,n,a):GSDOM.queryAll(t,e).map((t=>t.addEventListener(r,n,a)))}static unlisten(t,e,r,n){return!e&&t?t.removeEventListener(r,n):GSDOM.queryAll(t,e).map((t=>t.removeEventListener(r,n)))}static on=GSEvents.listen;static off=GSEvents.unlisten;static once(t,e,r,n,a=0){const s=GSEvents.#U(a);return s&&s.internal?new Promise(((a,i)=>{GSEvents.listen(t,e,r,n||a,{once:!0,signal:s}),s.addEventListener('abort',i)})):GSEvents.listen(t,e,r,n,{once:!0,signal:s})}static prevent(e,r=!0){t.hasFunction(e,'preventDefault')&&e.preventDefault(),t.hasFunction(e,'stopPropagation')&&e.stopPropagation(),r&&t.hasFunction(e,'stopImmediatePropagation')&&e.stopImmediatePropagation()}static send(t=document,e,r='',n=!1,a=!1,s=!1){const i=new CustomEvent(e,{detail:r,bubbles:n,composed:a,cancelable:s});return t?.dispatchEvent(i)}static toEvent(t,e){let r=null;switch(t){case'copy':case'cut':case'paste':r=new ClipboardEvent(t,e);break;case'blur':case'focus':case'focusin':case'focusout':r=new FocusEvent(t,e);break;case'input':case'beforeinput':r=new InputEvent(t,e);break;case'keydown':case'keyup':case'keypress':r=new KeyboardEvent(t,e);break;case'dblclick':case'mousedown':case'mouseenter':case'mouseleave':case'mousemove':case'mouseout':case'mouseover':case'mouseup':r=new MouseEvent(t,e);break;case'submit':r=new SubmitEvent(t,e);break;case'touchstart':case'touchend':case'touchmove':case'touchcancel':r=new TouchEvent(t,e);break;case'whell':r=new WheelEvent(t,e);break;case'pointerover':case'pointerenter':case'pointerdown':case'pointermove':case'pointerup':case'pointercancel':case'pointerout':case'pointerleave':case'pointerrawupdate':case'gotpointercapture':case'lostpointercapture':r=new PointerEvent(t,e);break;default:r=new CustomEvent(t,e)}return r}static isMouseOrPointerEvent(t){return t instanceof MouseEvent||t instanceof PointerEvent}static sendSuspended(t=document,e,r='',n=!1,a=!1,s=!1){return requestAnimationFrame((()=>{GSEvents.send(t,e,r,n,a,s)}))}static sendDelayed(t=1,e=document,r,n='',a=!1,s=!1,i=!1){return setTimeout((()=>GSEvents.send(e,r,n,a,s,i)),t)}static attach(e,r,n='',a,s=!1,i=!1){if(!r)return!1;if(!(window instanceof Window||r.isConnected))return!1;if(!t.isFunction(a))return!1;if(!t.hasFunction(r,'addEventListener'))return!1;const o=this,l=o.#x(e,r,n,a),c=o.#R(e);return o.#N(c,l.key).set(l.fnkey,l),l.capture=i,s&&(l.once=t=>{try{l.fn(t)}finally{o.remove(l.own,l.el,l.name,l.once)}},Object.defineProperty(l.once,'gsid',{value:a.gsid,writable:!1})),r.addEventListener(n,s?l.once:l.fn,{once:s,capture:i}),!0}static remove(t,e,r='',n){const a=this,s=a.#x(t,e,r,n),i=a.#R(t),o=a.#N(i,s.key),l=o.get(s.fnkey);if(l)o.delete(l.fnkey),a.#F(l);else if(s.fnkey===s.key)for(let t of o.values())o.delete(t.fnkey),a.#F(t);0===o.size&&i.delete(s.key),0===i.size&&a.#A.delete(t)}static deattachListeners(t){const e=this,r=e.#j(t);if(!r)return;const n=r.values();for(let t of n){for(let r of t.values())e.#F(r);t.clear()}r.clear()}static#x(t,e,r='',n=''){if(!e)return!1;const a=this.#k(e),s=this.#H(n);return{own:t,fn:n,el:e,name:r,key:GSID.hashCode(`${a}${r}`),fnkey:GSID.hashCode(`${a}${r}${s||''}`)}}static#N(t,e){let r=t.get(e);return r||(r=new Map,t.set(e,r)),r}static#H(e){return t.isFunction(e)?(e.gsid||Object.defineProperty(e,'gsid',{value:GSID.next(),writable:!1}),e.gsid):null}static#k(t){let e=t[Symbol.for('gs-event-id')];return e||(e=GSID.id,t[Symbol.for('gs-event-id')]=e),e}static#R(t){return this.#N(this.#A,t)}static#j(t){const e=this.#A.get(t);if(e)return this.#A.delete(t),e}static#F(t){t.el.removeEventListener(t.name,t.once?t.once:t.fn,{capture:t.capture}),t.el=null,t.fn=null,t.once=null}static#U(t=0){return GSUtil.isNumber(t)&&t>0?((t=AbortSignal.timeout(t)).internal=!0,t):t instanceof AbortSignal?t:void 0}static monitorAction(t,e){t.on('action',(async r=>{const n=t,a=r.detail,s=a.action||a.data?.action;await GSEvents.onAction(n,s,e,r)}))}static async onAction(e,r,n,a){const s=GSEvents.findAction(e,r,n);if(!s)return;GSEvents.prevent(a);let i=!1;try{i=t.isFunctionAsync(s)?await s(a):s(a)}catch(r){if(i=r,!t.isFunction(e.onError))throw r;e.onError(r)}return i}static findAction(e,r='',n=''){let a=!1;if(!r)return a;const s=e;r=GSUtil.capitalizeAttr(GSUtil.capitalize(r));const i=`on${n=GSUtil.capitalizeAttr(GSUtil.capitalize(n))}${r}`;globalThis.GS_LOG_ACTION&&GSLog.warn(e,`Action : ${i}`);const o=s[i];return a=t.isFunction(o),a=a&&!t.isFunctionNative(o),a?s[i].bind(s):null}static#I(){clearTimeout(GSEvents.#M),GSEvents.#M=setTimeout((async()=>{await GSEvents.waitAnimationFrame(),GSEvents.send(window,'resized')}),100)}static resizeMonitor(){const t=GSEvents,e=document.documentElement,r=t.#x(e,window,'resize',t.#I),n=t.#R(e),a=n.get(r.key)?.get(r.fnkey);a||t.attach(e,window,'resize',t.#I)}static{Object.freeze(GSEvents),globalThis.GSEvents=GSEvents}}class GSEnvironment{static get isMobile(){return navigator.userAgentData?navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static get isDesktop(){return!GSEnvironment.isMobile}static get isWebkit(){return/webkit/.test(navigator.userAgent.toLowerCase())}static isValidProtocol(t=''){return!t||location.protocol.slice(0,-1)===t}static isValidBrowser(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData){let t=!1;return navigator.userAgentData.brands.forEach((r=>{r.brand.toLowerCase().includes(e)&&(t=!0)})),t}const r=navigator.userAgent.toLocaleLowerCase()||'',n=r.includes('edg');return!(!n||!e.startsWith('edg'))||!n&&r.includes(e)}static isValidEnvironment(t=''){return!t||('desktop'===t?GSEnvironment.isDesktop:'mobile'===t?GSEnvironment.isMobile:GSEnvironment.isDevice(t))}static isDevice(t=''){if(!t)return!0;const e=t.toLowerCase();if(navigator.userAgentData&&navigator.userAgentData.platform){return navigator.userAgentData.platform.toLowerCase()===e}return navigator.userAgent.toLocaleLowerCase().indexOf(e)>1}static isValidOrientation(t=''){if(!t)return!0;if(!screen.orientation)return!0;const e=screen.orientation.type;return e.includes('portrait')?'portrait'===t||'vertical'===t:!e.includes('landscape')||('landscape'===t||'horizontal'===t)}static{Object.seal(GSEnvironment)}}class GSLoader{static TEMPLATE_URL=globalThis.GS_TEMPLATE_URL||location.origin;static NO_CACHE=!1;static{if(!globalThis.GS_TEMPLATE_URL){const t=location.href.split('?').pop();let e=t.split('/');GSLoader.TEMPLATE_URL=t.endsWith('/')?t:e.slice(0,-1).join('/'),globalThis.GS_TEMPLATE_URL=GSLoader.TEMPLATE_URL}const t='GS_NO_CACHE'in self;t&&(GSLoader.NO_CACHE=!0===globalThis.GS_NO_CACHE,localStorage&&localStorage.setItem('GS_NO_CACHE',GSLoader.NO_CACHE)),GSLoader.NO_CACHE=!!localStorage&&'true'==localStorage.getItem('GS_NO_CACHE')}static normalizeURL(t='',e=!1){t=t||'';let r=null;const n=location.pathname.split('/').pop(-1).includes('.'),a=t.includes('extension:/');r=t.startsWith('http')||a?t:t.startsWith('/')?`${location.origin}/${t}`:n?`${location.origin}${location.pathname}/../${t}`:`${location.origin}${location.pathname}/${t}`,r=r.split('://').map((t=>t.replaceAll(/\/{2,}/g,'/'))).join('://');const s=new URL(r);return!e&&GSLoader.NO_CACHE&&s.searchParams.append('_dc',Date.now()),s.href}static parentPath(t='',e=1){return(t||'').split('/').slice(0,-1*e).join('/')+'/'}static async getTemplate(t=''){if(!t)return t;if(t.startsWith('#')){const e=GSDOM.query(document.documentElement,t);return e?e.innerHTML:t}return GSUtil.isHTML(t)?t:(t=GSLoader.#P(t),GSLoader.loadSafe(t))}static#P(t=''){return t=t.startsWith('//')?GSLoader.#$+'/'+t:t,GSLoader.normalizeURL(t)}static get#$(){return GSLoader.normalizeURL(GSLoader.#z,!0)}static get#z(){return GSLoader.TEMPLATE_URL?GSLoader.TEMPLATE_URL.replace('//','/'):''}static async loadTemplate(t='',e='GET'){const r=GSLoader.#P(t);return await GSLoader.load(r,e)}static async load(t='',e='GET',r,n=!1,a){let s=null;const i='Content-Type';(r={...r})[i]=n?'application/json; utf-8':r[i]||'text/plain',r.Accept='application/json';const o=GSLoader.normalizeURL(t,!0),l={method:e,headers:r};('POST'===e||'PUT'===e&&a)&&(l.body=JSON.stringify(a));const c=await fetch(o,l);return c.ok&&(s=n?await c.json():await c.text()),s}static async loadSafe(t='',e='GET',r,n=!1,a,s){try{if(t)return GSLoader.load(t,e,r,n,s)}catch(t){GSLog.error(this,t)}return a||(n?{}:'')}static async loadData(e=''){const r=GSUtil.isJson(e),n=!r&&t.parseFunction(e),a=n&&t.isFunction(n);if((!a&&GSUtil.parseValue(e)||r)&&(e=GSUtil.toJson(e)),a&&(e=await t.callFunction(n)),GSUtil.isJsonType(e))return e}static{Object.seal(GSLoader),globalThis.GSLoader=GSLoader}}class GSPromise{#B;#_;#q;#J;#V;#W;constructor(t,e){const r=this;r.#_=t,r.#B=e instanceof AbortSignal?e:null,r.#B=GSUtil.isNumber(e)?AbortSignal.timeout(e):r.#B,r.#q={abort:r.#Y.bind(r)}}await(){const t=this;return t.#W||(t.#B?.addEventListener('abort',t.#q.abort),t.#W=new Promise(t.#Z.bind(t))),t.#W}get aborted(){return!0===this.#B?.aborted}#Z(t,e){const r=this;r.#J=t,r.#V=e;try{r.#_(r.#K.bind(r),r.#X.bind(r))}catch(t){r.#Q(),e(t)}}#Y(){this.#Q(),this.#V(new Error('Promise aborted!'))}#K(t){const e=this;return e.#Q(),e.aborted?null:e.#J(t)}#X(t){const e=this;return e.#Q(),e.aborted?null:e.#V(t)}#Q(){this.#B?.removeEventListener('abort',this.#q.abort)}static sequential(t){return Array.isArray(t)||(t=[]),t.reduce(((t,e)=>t.then(e)),Promise.resolve())}static{globalThis.GSPromise=GSPromise}}const i=globalThis.GS_LOCALIZATION_LANGUAGE||document.documentElement.lang||navigator.language;const l=new class GSLocalizationImpl{#tt=new Map;#et=new Set;#rt=!1;#nt=globalThis.GS_LOCALIZATION_URL;#at=i;#st;constructor(){this.load()}get default(){return this.#at}set default(t=''){this.#at=t||i}get lang(){return this.#st||this.default}set lang(t=''){this.#st=t}get url(){return this.#nt}set url(t=''){this.#nt=t||globalThis.GS_LOCALIZATION_URL}translate(t='',e=''){const r=this;if(GSUtil.isStringEmpty(t))return e;if(!r.#tt.has(t))return r.load(t),e;const n=r.#it('default'),a=r.#it(t),s=n.get(GSID.hashCode(e));return s&&a.get(s)||e}reset(){const t=this;t.#at=i,t.#st=void 0,t.load()}load(t='default'){const e=this;GSUtil.isStringEmpty(t)||GSUtil.isStringEmpty(e.url)||e.#tt.has(t)||(e.#et.add(t),e.#rt||(e.#rt=!0,queueMicrotask((async()=>{const t=Array.from(e.#et.values()).map((t=>e.loadWait(t)));await GSPromise.sequential(t),e.#rt=!1}))))}async loadWait(t){const e=this;if(GSUtil.isStringEmpty(t))return;if(GSUtil.isStringEmpty(e.url))return;const r=GSLoader.normalizeURL(`${e.url}/${t}.json`);let n=await GSLoader.loadSafe(r,'GET',{'Cache-Control':'no-cache',Pragma:'no-cache'},!0);if(!n&&t.indexOf('-')>0&&(n=await e.loadWait(t.split('-')[0])),!n)return!1;e.#et.delete(t),e.#ot(t,n)}#ot(t,e){if(!e||!t)return!1;const r='default'===t,n=this.#it(t);return Object.entries(e).forEach((t=>{const e=GSID.hashCode(t[0].trim());n.set(e,r?GSID.hashCode(t[1]):t[1])})),GSEvents.send(window,'gs-language',{details:t}),!0}#it(t=''){const e=this;return e.#tt.has(t)||e.#tt.set(t,new Map),e.#tt.get(t)}};class GSDynamicStyle extends CSSStyleSheet{constructor(t='dynamic'){super(),this.id=t||GSID.id}deleteRule(t=''){const e=this;Array.from(e.cssRules).map(((e,r)=>e.selectorText===`.${t}`?r:-1)).filter((t=>t>-1)).forEach((t=>e.deleteRule(t)))}getRule(t=''){return Array.from(this.cssRules).filter((e=>e.selectorText===`.${t}`)).pop()}setRule(t,e='',r=!1){const n=this;if(!t)return;let a=n.getRule(t);if(!a)return n.insertRule(`.${t} {}`),n.setRule(t,e,r);if(!e)return a;let s=[];return s='string'==typeof e?e.replaceAll('\n','').split(';').map((t=>t.trim().split(':'))).filter((t=>2===t.length)):Object.entries(e),r?s.forEach((t=>n.#lt(a,t[0],t[1]))):requestAnimationFrame((()=>{s.forEach((t=>n.#lt(a,t[0],t[1])))})),a}#lt(t,e='',r=''){const n=(r=r||'').includes('!important');r=r.replace('!important',''),e=e.trim(),t.style.setProperty(e,r,n?'important':'')}static dynamicStyleSheet(t){const e=GSDOM.root(t),r=t.dataset.sheet||'dynamic';return GSDynamicStyle.dynamicStyleSheetByID(e,r)}static dynamicStyleSheetByID(t,e){return Array.from(t?.adoptedStyleSheets).filter((t=>t.id===e)).pop()}static dynamicRule(t){const e=GSDynamicStyle.dynamicStyleSheet(t);return e?.getRule(t.dataset.gsClass)}static dynamicRuleByID(t,e){const r=GSDynamicStyle.dynamicStyleSheetByID(t,'dynamic');return r?.getRule(e)}static dynamicStyle(t){const e=GSDynamicStyle.dynamicRule(t);return e?.style}static dynamicStyleByID(t,e){const r=GSDynamicStyle.dynamicRuleByID(t,e);return r?.style}static applyDynamicStyle(t,e){requestAnimationFrame((()=>{const r=GSDynamicStyle.dynamicStyle(t);return Object.assign(r,e)}))}static applyDynamicStyleByID(t,e,r){requestAnimationFrame((()=>{const n=GSDynamicStyle.dynamicStyleByID(t,e);return Object.assign(n,r)}))}}class AdoptedController{#ct;#ut;constructor(t){this.#ct=t,t.addController(this)}hostConnected(){AdoptedController.#dt.add(this),this.#ht()}hostDisconnected(){const t=this;AdoptedController.#dt.delete(t.#ct),t.#ct.removeController(t)}style(t,e){const r=this;return r.#ut=r.#ut??new GSDynamicStyle('dynamic'),r.#ut.setRule(t,e,!0)}#ht(t=!1){const e=this;if(e.#mt&&(t||e.#pt)){const t=[...document.adoptedStyleSheets],r=Array.from(e.#mt);e.#ut&&r.push(e.#ut),e.#gt.adoptedStyleSheets=[...t,...r]}}get#pt(){return document.adoptedStyleSheets.id!==this.#mt?.id}get#gt(){return this.#ct.renderRoot}get#mt(){return this.#gt?.adoptedStyleSheets}static#dt=new Set;static#St(t){requestAnimationFrame((()=>{AdoptedController.#dt.forEach((t=>t.#ht()))}))}static#ft(){const t=AdoptedController;GSEvents.on(window,null,'gs-adopted',t.#St)}static{this.#ft()}}class ContentController{#ct;#Gt;#yt=new Set;constructor(t){this.#ct=t,t.addController(this)}hostDisconnected(){const t=this;t.#ct.removeController(t),t.#bt(),t.#ct=null,t.#yt=null,t.#Gt=null}hostUpdated(){const t=this;t.#Et()||t.#yt.add(t.#vt)}get contentRef(){return this.#Gt}get#Dt(){return this.#ct?.renderOptions}get#vt(){return this.#Dt?.renderBefore?.previousElementSibling}#Et(){const t=this,e=t.#vt,r=t.#ct?.renderRoot,n=t.#ct?.shadowRoot;return e===n||e==r}#bt(){const t=this;t.#ct?.keep||(Array.from(t.#yt).forEach((t=>t?.remove())),t.#yt.clear())}}class GSTemplateCache{static#ot=new Map;static store(t,e){this.#ot.set(t,e)}static remove(t){return this.#ot.delete(t)}static load(t){return this.#ot.get(t)}static getOrCreate(t,e){const r=GSTemplateCache;let n=r.load(t);return n||(n=r.create(e),r.store(t,n),n)}static create(t){const e=document.createElement('template');return GSDOM.setHTML(e,t),e}static clone(t){return GSDOM.isTemplateElement(t)?t.content.cloneNode(!0):null}static isFunctionTemplate(e){const r=t.parseFunction(e);return!!t.isFunction(r)&&r}static isHTMLTemplate(t){const e=t?t.trim():'';return!!/^<(.*)>$/s.test(e)&&t}static isURLTemplate(t){const e=t?t.trim():'';return!!/^(https?:\/\/|.{0,2}\/{1,2})/i.test(e)&&t}static initTemplate(t=!1,e='',r){const n=GSTemplateCache;return t?n.getOrCreate(e,r):n.create(r)}static loadHTMLTemplate(t=!1,e='',r){const n=GSTemplateCache,a=n.isHTMLTemplate(r);return a?n.initTemplate(t,e,a):a}static async loadURLTemplate(t=!1,e='',r){const n=GSTemplateCache;try{let a=null;return t&&(a=n.load(r)),a?a:(a=await GSLoader.loadTemplate(r),n.initTemplate(t,e,a))}catch(t){GSLog.error(n,t)}return!1}static async loadFunctionTemplate(e=!1,r='',n){const a=GSTemplateCache,s=a.isFunctionTemplate(n);if(!s)return s;try{let n=null;return a.cached&&(n=a.load(o)),n?n:(n=t.isFunctionAsync(s)?await s():s(),a.initTemplate(e,r,n))}catch(t){GSLog.error(a,t)}return s}static async loadTemplate(t=!1,e='',r){if(!e)return!1;if(!r)return!1;const n=GSTemplateCache;let a=!1;return 0==r.indexOf('#')?document.getElementById(r.slice(1)):(a||(a=n.loadHTMLTemplate(t,e,r)),a||(a=await n.loadFunctionTemplate(t,e,r)),a||(a=await n.loadURLTemplate(t,e,r)),a)}}class GSAttributeHandler{static#Mt=Symbol();static#wt=Symbol();static DEFINITION={action:{attribute:'data-gs-action'},anchor:{attribute:'data-gs-anchor'},attribute:{attribute:'data-gs-attribute'},call:{attribute:'data-gs-call'},exec:{attribute:'data-gs-exec'},inject:{attribute:'data-gs-inject'},property:{attribute:'data-gs-property'},swap:{attribute:'data-gs-swap'},target:{attribute:'data-gs-target'},template:{attribute:'data-gs-template'},toggle:{attribute:'data-gs-toggle'},trigger:{attribute:'data-gs-trigger'},value:{attribute:'data-gs-value'},calls:{attribute:'data-gs-call',multi:!0},toggles:{attribute:'data-gs-toggle',multi:!0},timeout:{attribute:'data-gs-timeout',type:Number},triggers:{attribute:'data-gs-trigger',multi:!0}};#ct;#v;#At=!1;#_;constructor(t){const e=this;e.#ct=t,e.#_=e.handle.bind(e),e.#v=GSAttributeHandler.proxify(e.#ct)}handle(t){const e=this;e.targets.forEach((r=>e.#Tt(e.#ct,r,t)))}#Tt(t,e,r){const n=this;n.#Ot(e,r),n.#Lt(e),n.#Ct(e),n.#Ut(e),n.#xt(e),n.#Rt(e,r),n.#Nt(t,e,r),n.#Ft(t,e,r),n.#jt(e),n.#kt(t,e),n.#Ht(t,e)}#Ot(t,e){const r=e.target.field||e.target.form||e.target,n=(HTMLFormElement,GSDOM.isFormElement(r));n?t[r.name]=GSDOM.getValue(r):Object.assign(t,GSDOM.toObject(r))}#Lt(t){GSEvents.send(t,'action',this.action)}#Ct(t){const e=this;if(e.isAttributeJSON){const r=GSUtil.toJson(e.attribute);return GSAttr.jsonToAttr(t,r)}e.attributes.forEach((r=>e.#It(t,r[0],e.value||r[1])))}#Ut(t){const e=this;if(e.isPropertyJSON){const r=GSUtil.toJson(e.property);return Object.assign(t,r)}e.properties.forEach((r=>e.#Pt(t,r[0],e.value||r[1])))}#It(t,e,r){if(GSUtil.isBool(t[e]))return GSAttr.toggle(t,e,!t[e]);GSUtil.isNumber(t[e])&&(r=GSUtil.asNum(r)),GSAttr.set(t,e,r)}#Pt(t,e,r){GSUtil.isBool(t[e])?GSUtil.isStringEmpty(r)?t[e]=!t[e]:t[e]=GSUtil.asBool(r):GSUtil.isNumber(t[e])?t[e]=GSUtil.asNum(r):t[e]=r}async#xt(t){const e=this,r=1e3*e.timeout;let n=e.toggles;if(0===r)n.forEach((e=>GSDOM.toggleClass(t,e)));else{t[e.#$t]&&(n=n.reverse());for(const e of n)await GSUtil.timeout(r),GSDOM.toggleClass(t,e);t[e.#$t]=!t[e.#$t]}}#Nt(e,r,n){const a=GSUtil.isJsonString(e.value)?GSUtil.toJson(e.value):e.value;this.calls.forEach((e=>t.callFunction(r[e],r,!0,a||n)))}#Ft(t,e,r){if(this.exec)try{new Function(this.exec).bind(e)()}catch(t){GSLog.error(e,t)}}#Rt(t,e){this.triggers.forEach((r=>GSEvents.send(t,r,e)))}#kt(t,e){if(this.inject){const r=GSDOM.parse(this.inject,!0);this.#zt(t,e,r)}}#jt(t){this.swap&&(t.innerHTML=this.swap)}async#Ht(t,e){const r=await GSTemplateCache.loadTemplate(!0,this.template,this.template);this.#Bt(t,e,r)}#Bt(t,e,r){const n=GSTemplateCache.clone(r);this.#zt(t,e,n)}#zt(t,e,r){t.anchor?GSDOM.insertAdjacent(e,r,t.anchor):GSDOM.appendChild(e,r)}attach(t='click'){const e=this;e.#At||(GSEvents.on(e.#ct,null,t,e.#_),e.#At=!0)}deattach(t='click'){const e=this;GSEvents.off(e.#ct,null,t,e.#_),e.#At=!1}get#$t(){return GSAttributeHandler.#Mt}get targets(){const t=this;switch(t.target){case'this':case'self':return[t.#ct];case'owner':return[GSDOM.root(t.#ct)];case'parent':return[t.#ct.parentElement]}return GSDOM.queryAll(document.body,t.target,!1,!0)||[t.#ct]}get host(){return this.#ct}get action(){return this.#v.action}get anchor(){return this.#v.anchor}get attribute(){return this.#v.attribute}get exec(){return this.#v.exec}get call(){return this.#v.call}get inject(){return this.#v.inject}get property(){return this.#v.property}get swap(){return this.#v.swap}get target(){return this.#v.target}get toggle(){return this.#v.toggle}get trigger(){return this.#v.trigger}get timeout(){return this.#v.timeout}get template(){return this.#v.template}get value(){return this.#v.value}get calls(){return this.#v.calls}get toggles(){return this.#v.toggles}get triggers(){return this.#v.triggers}get attributes(){return(this.#v.attribute||'').split(/[,;]/g).map((t=>t.split('='))).filter((t=>GSUtil.isStringNonEmpty(t)))}get properties(){return(this.#v.property||'').split(/[,;]/g).map((t=>t.split('='))).filter((t=>GSUtil.isStringNonEmpty(t)))}get isPropertyJSON(){return GSUtil.isJson(this.property)}get isAttributeJSON(){return GSUtil.isJson(this.attribute)}static proxify(t){return GSAttr.proxify(t,GSAttributeHandler.DEFINITION)}static process(t,e){if(!t?.hasAttribute('gs-target'))return;let r=t[GSAttributeHandler.#wt];r instanceof GSAttributeHandler||(r=new GSAttributeHandler(t),t[GSAttributeHandler.#wt]=r),r.handle(e)}static create(t){const e=new GSAttributeHandler(t);return e.attach(),e}static clone(t,e){const r=GSAttributeHandler.DEFINITION;Object.values(r).filter((e=>t.hasAttribute(e.attribute))).forEach((r=>e.setAttribute(r.attribute,t.getAttribute(r.attribute))))}static{const t=GSAttributeHandler.DEFINITION;Object.values(t).forEach((t=>Object.freeze(t))),Object.freeze(t)}}class AttributeController extends GSAttributeHandler{constructor(t){super(t);t.addController(this)}hostConnected(){this.attach(this.#_t)}hostDisconnected(){const t=this;t.host.removeController(t),t.deattach(t.#_t)}onNotify(t){this.handle(t)}get#_t(){const t=this.host?.tagName.toLowerCase(),e=this.host?.clazzName,r=GSDOM.isFormElement(this.host),n=['gs-form','gs form-group'].includes(t),a=['GSFormGroupElement'].includes(e);return n||a||r?'change':'click'}}class LocalizationController{#ct;#c;constructor(t){const e=this;e.#ct=t,e.#c=t.locale,t.addController(e)}hostConnected(){LocalizationController.#dt.add(this)}hostDisconnected(){const t=this;LocalizationController.#dt.delete(t),t.#ct.removeController(t)}hostUpdate(){const t=this;t.#c!==t.#ct?.locale&&(t.#c,t.#ct?.locale,t.updateLanguage(t.#c))}updateLanguageExt(t){this.#c||this.updateLanguage(t)}updateLanguage(t){t&&this.#ct.requestUpdate()}static#dt=new Set;static#qt(t){LocalizationController.#dt.forEach((e=>e.updateLanguageExt(t.detail)))}static#ft(){GSEvents.on(window,null,'gs-language',LocalizationController.#qt)}static{LocalizationController.#ft()}}class OrientationController{static#Jt=new Set;#ct;constructor(t){this.#ct=t,t.addController(this)}hostConnected(){OrientationController.#Jt.add(this),this.update()}hostDisconnected(){const t=this;OrientationController.#Jt.delete(t.#ct),t.#ct.removeController(t),t.#ct=null}update(){this.#ct.requestUpdate()}static#Vt(t){Array.from(OrientationController.#Jt).forEach((t=>t.update()))}static{screen.orientation.addEventListener('change',OrientationController.#Vt)}}class TemplateController{#ct;#Wt;#Yt;#Zt;static#Kt=!1;static#Xt=new Set;constructor(t){this.#ct=t,t.addController(this)}hostConnected(){this.#Zt=!1,this.#Qt()}hostDisconnected(){const t=this;t.#ct.removeController(t),t.#ct=null,t.#Yt=null,t.#Wt=null}hostUpdate(){this.#Qt()}requestUpdate(){this.#ct.requestUpdate()}hostUpdated(){this.#Zt&&this.#ct.templateInjected?.()}#Qt(){const t=this,e=t.templateRef;t.#Yt!==e&&(t.#Yt=e,e&&TemplateController.#te(this))}async#ee(){const t=this,e=t.templateRef;if(!e)return;const r=e instanceof HTMLTemplateElement?e:await GSTemplateCache.loadTemplate(!0,e,e);r&&(t.#Wt=r,t.#Zt=!0,t.#ct.requestUpdate())}get isTemplateElement(){return'GS-TEMPLATE'===this.#ct?.tagName}get template(){return this.#Wt}get templateRef(){const t=this.#ct;if(t)return this.isTemplateElement?t.url:t.template||t.query('template',!1)}static async#re(t){await GSUtil.timeout(100);const e=Array.from(t);for(let r of e)await r.#ee(),t.delete(r)}static#te(t){const e=TemplateController;e.#Xt.add(t),e.#Kt||(e.#Kt=!0,queueMicrotask((()=>e.#re(e.#Xt).finally(e.#Kt=!1))))}}class OrientationTypes{static values=['','horizontal','vertical','portrait','landscape'];static includes(t){return OrientationTypes.values.includes(t)}static isVertical(t){const e=OrientationTypes.values.indexOf(t);return 2===e||3===e}static isHorizontal(t){const e=OrientationTypes.values.indexOf(t);return 1===e||4===e}}const c={hasChanged:(t,e)=>t!==e&&OrientationTypes.includes(t)},u=['','http','https'],d={hasChanged:(t,e)=>t!==e&&u.includes(t)},h=['','dektop','mobile','tablet','android','linux','windows','macos','ios'],m={hasChanged:(t,e)=>t!==e&&h.includes(t)};class ThemeController{#ct;#ne;constructor(t){const e=this;e.#ct=t,e.#ne=t.theme,t.addController(e)}hostConnected(){ThemeController.#dt.add(this)}hostDisconnected(){const t=this;ThemeController.#dt.delete(t),t.#ct.removeController(t)}hostUpdate(){const t=this;t.#ne!==t.#ct?.theme&&(t.#ne,t.#ct?.theme,t.updateTheme(t.#ne))}updateThemeExt(t){this.#ne||this.updateTheme(t)}updateTheme(t){if(!t)return;GSAttr.set(this.#ct,'data-bs-theme',t);const e=this.#ct?.renderRoot?.children||[];Array.from(e).forEach((e=>GSAttr.set(e,'data-bs-theme',t)))}static#dt=new Set;static#ae(t){ThemeController.#dt.forEach((e=>e.updateThemeExt(t.detail)))}static#ft(){GSEvents.on(window,null,'gs-theme',ThemeController.#ae)}static{ThemeController.#ft()}}const notEmpty=(t,e)=>t!==e&&t;class GSEvent extends EventTarget{#se=new Set;#ie(t='',e){const r=Array.from(this.#se);return this.#oe(e)?r.filter((r=>r.type===t&&r.listener===e)):r.filter((e=>e.type===t))}#oe(t){return'function'==typeof t}on(t='',e,r=0,n=!1){if(!t)return reject('Event undefined!');let a=null;a=n instanceof AbortController?n:n?new GSAbortController(r):null;const s=a||0==r?a?.signal:AbortSignal.timeout(r);return this.addEventListener(t,e,{signal:s}),a||s}once(t,e,r=0,n=!1){if(!t)return reject('Event undefined!');const a=this,wrap=t=>{e(t),a.#se.delete(wrap)};return wrap.type=t,wrap.listener=e,wrap.timeout=r,n instanceof AbortController?wrap.controller=n:wrap.controller=n?new GSAbortController(r):null,wrap.signal=wrap.controller||0==r?wrap.controller?.signal:AbortSignal.timeout(r),a.addEventListener(t,wrap,{once:!0,signal:wrap.signal}),wrap.controller||wrap.signal}off(t='',e){this.removeEventListener(t,e)}emit(t='',e,r=0){const n=this;return!0===r?queueMicrotask((()=>n.#le(t,e))):(r=GSUtil.asNum(r,0))<=0?n.#le(t,e):setTimeout((()=>n.#le(t,e)),r)}#le(t='',e){const r=new CustomEvent(t,{detail:e});return this.dispatchEvent(r)}wait(t='',e){const r=this;return new GSPromise(((e,n)=>{r.once(t,e)}),e).await()}listen(t,e){this.on(t,e)}unlisten(t,e){this.off(t,e)}unbind(){Array.from(this.#se).forEach((t=>{super.removeEventListener(t.type,t.listener)})),this.#se.clear()}addEventListener(t,e,r){return!!this.#oe(e)&&(this.#se.add({type:t,listener:e}),super.addEventListener(t,e,r))}removeEventListener(t,e){const r=this,n=r.#ie(t,e);n.forEach((t=>super.removeEventListener(t.type,t.listener))),n.forEach((t=>r.#se.delete(t)))}static{Object.freeze(GSEvent),globalThis.GSEvent=GSEvent}}class GSReadWriteRegistryImpl extends GSEvent{static#ce=null;static#ue=Symbol();#de=new Map;#a=new Map;constructor(t){if(t!=GSReadWriteRegistryImpl.#ue)throw new Error('Creating new instance not allowed.');super()}addHandler(t,e){this.#de.set(t,e)}removeHandler(t){this.#de.delete(t)}getHandler(t){return this.#de.get(t)}newHandler(t,e,r){const n=this.getHandler(t);return n?new n(e,r):void 0}register(t){const e=this;e.#he(t);const r=e.find(t.id);if(r!=t){if(r)throw new Error(`Key (${t.id}) already exist in read/write registry!`);e.#a.set(t.id,t),e.emit(`register-${t.id}`,t),e.emit('register',t)}}unregister(t){const e=this;GSUtil.isString(t)&&(t=e.find(t)),e.#he(t);const r=e.#a.delete(t.id);return r&&(e.emit(`unregister-${t.id}`,t),e.emit('unregister',t)),r}find(t){return this.#a.get(t)}async wait(t='',e,r=!0){if(!t)throw new Error('GSReadWrite ID not valid.');const n=this;if(r){const e=n.find(t);if(e)return e}const a=r?'register':'unregister';return await super.wait(`${a}-${t}`,e),n.find(t)}#he(t){}static get#me(){return GSReadWriteRegistryImpl.#ce||(GSReadWriteRegistryImpl.#ce=new GSReadWriteRegistryImpl(GSReadWriteRegistryImpl.#ue)),GSReadWriteRegistryImpl.#ce}static{Object.seal(GSReadWriteRegistryImpl),globalThis.GSReadWriteRegistry=GSReadWriteRegistryImpl.#me}}const p=globalThis.GSReadWriteRegistry;class DataController{#ct;#pe;#ge;#Se;constructor(t){const e=this;e.#ct=t,e.#pe=e.#fe.bind(e),e.#ge=e.#Ge.bind(e),e.#Se=e.#ye.bind(e),e.#ct.addController(e)}hostConnected(){this.#be(!1)}hostDisconnected(){const t=this;t.#Ee(),t.#ct.removeController(t)}async relink(t=!0){this.#Ee(),this.#be(t)}async read(t){return this.store?.read(this.#ct)}async write(t){return this.store?.write(this.#ct,t)}async storage(){return p.wait(this.storeID)}sort(t){if(this.store)return this.store.sort=t,this.store.read()}filter(t){if(this.store)return this.store.filter=t,this.store.read()}search(t){this.store&&(this.store.search=t)}get store(){return p.find(this.storeID)}get storeID(){return this.#ct?.storage}firstPage(){this.page=1}lastPage(){this.nextPage()}nextPage(){this.page=this.page+1}prevPage(){this.page=this.page-1}get page(){const t=this.store;return t?Math.floor(t.skip/Math.max(t.limit,1))+1:1}set page(t){t=Math.max(1,GSUtil.asNum(t,1));const e=this.store;e&&(e.skip=t>0?e.limit*t-e.limit:0,e.read(this.#ct))}async#be(t=!0){const e=this,r=await e.storage();r?.on('read',e.#pe),r?.on('write',e.#ge),r?.on('error',e.#Se),t&&r.read(e.#ct)}#Ee(){const t=this,e=t.store;e?.off('read',t.#pe),e?.off('write',t.#ge),e?.off('error',t.#Se)}#fe(t){this.#ct.onDataRead?.(t.detail.data),this.#ve('data-read',t.detail.data)}#Ge(t){this.#ct.onDataWrite?.(t.detail.data),this.#ve('data-write',t.detail.data)}#ye(t){const e=this;GSLog.error(e.#ct,t),e.#ct.onDataError?.(t),e.#ve('data-error',t.detail.data)}#ve(t,e){this.#ct.emit(t,e,!0,!1,!0)}}class GSElement extends n{static properties={flat:{type:Boolean},rtl:{type:Boolean,reflect:!0},hide:{type:Boolean,reflect:!0},padding:{type:Number},margin:{type:Number},rounded:{type:Boolean},bordered:{type:Boolean},shadow:{type:Boolean},keep:{type:Boolean},onready:{},css:{},theme:{},os:{},browser:{},locale:{reflect:!0,hasChanged:notEmpty},environment:m,orientation:c,protocol:d,template:{}};#De;#Me;#we;#Ae;#Te;#Oe;#Wt;#Le;constructor(){super();const t=this;t.css='',t.locale='',t.#De=new AdoptedController(t),t.#Le=new ContentController(t),t.#Ae=new LocalizationController(t),t.#we=new OrientationController(t),t.#Wt=new TemplateController(t),t.#Oe=new ThemeController(t)}attributeChangedCallback(t,e,r){super.attributeChangedCallback(t,e,r)}connectedCallback(){super.connectedCallback(),this.isBindable&&this.binded()}disconnectedCallback(){GSEvents.deattachListeners(this),super.disconnectedCallback()}createRenderRoot(){return this.flat?this:super.createRenderRoot()}firstUpdated(){super.firstUpdated();const e=this;if(e.onready){const r=e.onready.startsWith('this')?this:window;t.callFunction(e.onready,r)}}willUpdate(t){const e=this;t.has('storage')&&(e.storage?e.#Te?e.#Te.relink():e.#Te=new DataController(e):(e.#Te?.hostDisconnected(),e.#Te=void 0))}render(){return this.isAllowRender&&!this.hide?this.renderUI():''}renderUI(){return a}renderTemplate(){return this.templateRef?s(this.templateRef):''}renderClass(){const t=this,e={border:t.bordered,'shadow-sm':t.shadow,rounded:t.rounded,[`p-${t.padding}`]:t.padding>=0,[`m-${t.margin}`]:t.margin>=0};return t.mapCSS(t.css,e)}binded(){this.#Me??=new AttributeController(this)}handle(t){this.#Me?.handle(t)}mapCSS(t,e,r=!0){return e=e||{},(t||'').split(' ').map((t=>t.trim())).filter((t=>t.length>0)).map((t=>e[t.trim()]=r)),e}dynamicStyle(t,e){return this.#De.style(t,e)}getByID(t=''){return GSDOM.getByID(this,t)}closest(t=''){return GSDOM.closest(this,t)}query(t='',e=!1){return GSDOM.query(this,t,!1,e)}queryAll(t='',e=!1){return GSDOM.queryAll(this,t,!1,e)}notify(t=!0,e=!1,r){this.emit('notify',r,t,e,!0)}emit(t,e='',r=!1,n=!1,a=!1){return GSEvents.send(this,t,e,r,n,a)}waitEvent(t='',e=0){return GSEvents.wait(this,t,e)}once(t,e){return this.listen(t,e,!0)}on(t,e,r=!1){return this.listen(t,e,r)}off(t,e){return this.unlisten(t,e)}prevent(t){GSEvents.prevent(t)}listen(t,e,r=!1){return this.attachEvent(this,t,e,r)}unlisten(t,e){return this.removeEvent(this,t,e)}attachEvent(t,e='',r,n=!1){return GSEvents.attach(this,t,e,r,n)}removeEvent(t,e='',r){return GSEvents.remove(this,t,e,r)}toggle(){this.hide=!this.hide}translate(t){return l.translate(this.locale,t)}get direction(){if(!GSUtil.isNull(this.rtl))return this.rtl?'rtl':'ltr'}get isBindable(){return this.dataset.gsTarget}get isFocused(){return this===document.activeElement}get tag(){return this.tagName.toLowerCase()}get templateRef(){return this.#Wt.template}get contentRef(){return this.#Le.contentRef}get dataController(){return this.#Te}get isAllowRender(){return this.isValidEnvironment&&this.isValidBrowser&&this.isValidOS&&this.isValidProtocol&&this.isValidOrientation}get isValidEnvironment(){return GSEnvironment.isValidEnvironment(this.environment)}get isValidOS(){return GSEnvironment.isDevice(this.os)}get isValidOrientation(){return GSEnvironment.isValidOrientation(this.orientation)}get isValidBrowser(){return GSEnvironment.isValidBrowser(this.browser)}get isValidProtocol(){return GSEnvironment.isValidProtocol(this.protocol)}get clazzName(){return this.constructor.name}get definitions(){const t=[...GSDOM.inheritance(this)].map((t=>t.constructor?.properties)).filter((t=>t));return t.push(this.constructor?.properties),GSData.mergeObjects(t)}static allProperties(t){const e=[...GSDOM.inheritance(t)].map((t=>t.properties)).filter((t=>t));return e.push(t.constructor?.properties||t.properties),GSData.mergeObjects(e)}static define(t,e,r){customElements.get(t)||customElements.define(t,e||this,r)}}class BaseView extends GSElement{renderUI(){return this.renderTemplate()}firstUpdated(){super.firstUpdated(),GSEvents.monitorAction(this)}onError(t){Utils.handleError(t)}}class IPPAttributes extends GSElement{constructor(){super(),this.template='//ipp-printer-attributes.html'}renderUI(){return this.renderTemplate()}load(t){if(!t)return;t=t['printer-attributes']||t;const e=Object.entries(t).map((t=>({key:t[0],value:t[1]})));this.#ot.setData(e)}get#Ce(){return this.query('gs-table')}get#ot(){return this.#Ce.store}static{GSElement.define('gs-ipp-attributes',IPPAttributes)}}class IPPJobs extends BaseView{constructor(){super(),this.template='//ipp-jobs.html'}load(t){if(!t)return;const e=this;e.#Ue.clear(),t.jobs?e.#xe.setData(t.jobs):e.#Re(t)}#Re(t){if(!t)return;t=t['job-attributes']||t;const e=Object.entries(t).map((t=>({key:t[0],value:t[1]})));this.#Ue.setData(e)}get#Ne(){return this.query('#table-jobs')}get#xe(){return this.#Ne.store}get#Fe(){return this.query('#table-job-attributes')}get#Ue(){return this.#Fe.store}onCancelJob(t){}onPrintUri(t){}onPurgeJobs(t){this.#xe.clear()}async onDetails(t){const e=await Utils.load('./data/job-attributes.json');this.load(e)}async onRefresh(t){const e=await Utils.load('./data/jobs.json');this.load(e)}static{BaseView.define('gs-ipp-jobs',IPPJobs)}}class IPPView extends BaseView{constructor(){super(),this.template='//ipp-view.html'}get#je(){return this.query('gs-ipp-attributes')}get#ke(){return this.query('gs-ipp-jobs')}get uri(){return this.query('#printerURI')?.value||''}async onRegister(){this.onRefresh()}async onRefresh(){const t=await Utils.load('./data/printer-attributes.json');this.#je.load(t);const e=await Utils.load('./data/jobs.json');this.#ke.load(e)}static{BaseView.define('gs-ipp-view',IPPView)}}class IPPConsole extends GSElement{constructor(){super(),this.template='//ipp-console.html'}renderUI(){return this.renderTemplate()}log(t=''){this.#He.content=JSON.stringify(t,'',4)}get#He(){return this.query('gs-highlight')}static{GSElement.define('gs-ipp-console',IPPConsole)}}class GSHighlightElement extends GSElement{static get URL_LIB(){return globalThis.GS_URL_HLJS||'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0'}static properties={url:{},theme:{},target:{},language:{}};#Ie=createRef();#Pe;constructor(){super(),this.theme='default'}willUpdate(t){const e=this;t.has('theme')&&e.#ae(),t.has('target')&&e.#$e(),t.has('url')&&e.#ze(),t.has('language')&&e.#Be(e.#Pe)}renderUI(){return html`<pre><code ${ref(this.#Ie)} class="${classMap(this.renderClass())}"><code/><pre/>`}renderClass(){const t=GSUtil.isStringNonEmpty(this.language);return{[`language-${this.language}`]:t}}highlight(t='',e=!1){this.#Pe=t,this.#Be(t,e)}set content(t=''){this.#Pe=t,this.#Be(t)}get content(){return this.#Pe}async#ae(){const t=`${GSHighlightElement.URL_LIB}/styles/${this.theme}.min.css`;GSDOM.injectCSS(this,t)}#$e(){const t=this,e=t.target?GSDOM.query(t.target):null;if(!e)return GSDOM.setHTML(t.#_e,`Element with id ${t.target} not found!`);t.#Pe=e.innerHTML,t.#Be(e.innerHTML)}async#ze(){const t=this,e=await GSLoader.load(t.url);if(!e)return GSDOM.setHTML(t.#_e,`Code URL ${t.url} unreachable!`);t.#Pe=e,t.#Be(e)}get#_e(){return this.#Ie.value}#qe(t){const e=t.data.data;URL.revokeObjectURL(t.data.url),GSDOM.setHTML(this.#_e,t.data.append?this.#_e.innerHTML+e:e),t.target.terminate()}#Be(t='',e=!1){const r=this;if(!t)return GSDOM.setHTML(r.#_e,'No data!');const n=r.#Je,a=new Blob([n],{type:'application/javascript'}),s=URL.createObjectURL(a),i=new Worker(s);i.onmessage=r.#qe.bind(r),i.postMessage({data:t,url:s,append:e})}get#Je(){const t=this.language?this.language.split(',').map((t=>`importScripts('${GSHighlightElement.URL_LIB}/languages/${t.trim()}.min.js');`)).join(''):'';return`globalThis.onmessage = (event) => {\n                importScripts('${GSHighlightElement.URL_LIB}/highlight.min.js');\n                ${t}\n                const result = globalThis.hljs.highlightAuto(event.data.data);\n                postMessage({data:result.value, url:event.data.url, append: event.data.append});};`}static{this.define('gs-highlight')}}
//# sourceMappingURL=io.greenscreens.ipp.min.js.map
