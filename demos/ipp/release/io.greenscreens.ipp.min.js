import{GSDOM as t,GSElement as e,GSEvents as s}from'/webcomponents/release/esm/io.greenscreens.components.all.min.js';class Utils{static get notify(){return t.query('gs-notification')}static inform(t=!1,e){return t?Utils.notify?.info('Info',e):(Utils.notify?.danger('Error',e),t)}static handleError(t){const e=t.data?.error||t.msg||t.message||t.toString();return Utils.inform(!1,e),e}static async load(t=''){const e=await fetch(t);return await e.json()}}class BaseView extends e{renderUI(){return this.renderTemplate()}firstUpdated(){super.firstUpdated(),s.monitorAction(this)}onError(t){Utils.handleError(t)}}class IPPAttributes extends e{constructor(){super(),this.template='//ipp-printer-attributes.html'}renderUI(){return this.renderTemplate()}load(t){if(!t)return;t=t['printer-attributes']||t;const e=Object.entries(t).map((t=>({key:t[0],value:t[1]})));this.#t.setData(e)}get#e(){return this.query('gs-table')}get#t(){return this.#e.store}static{e.define('gs-ipp-attributes',IPPAttributes)}}class IPPJobs extends BaseView{constructor(){super(),this.template='//ipp-jobs.html'}load(t){if(!t)return;const e=this;e.#s.clear(),t.jobs?e.#r.setData(t.jobs):e.#i(t)}#i(t){if(!t)return;t=t['job-attributes']||t;const e=Object.entries(t).map((t=>({key:t[0],value:t[1]})));this.#s.setData(e)}get#o(){return this.query('#table-jobs')}get#r(){return this.#o.store}get#a(){return this.query('#table-job-attributes')}get#s(){return this.#a.store}onCancelJob(t){}onPrintUri(t){}onPurgeJobs(t){this.#r.clear()}async onDetails(t){const e=await Utils.load('./data/job-attributes.json');this.load(e)}async onRefresh(t){const e=await Utils.load('./data/jobs.json');this.load(e)}static{BaseView.define('gs-ipp-jobs',IPPJobs)}}class IPPView extends BaseView{constructor(){super(),this.template='//ipp-view.html'}get#n(){return this.query('gs-ipp-attributes')}get#l(){return this.query('gs-ipp-jobs')}get uri(){return this.query('#printerURI')?.value||''}async onRegister(){this.onRefresh()}async onRefresh(){const t=await Utils.load('./data/printer-attributes.json');this.#n.load(t);const e=await Utils.load('./data/jobs.json');this.#l.load(e)}static{BaseView.define('gs-ipp-view',IPPView)}}class IPPConsole extends e{constructor(){super(),this.template='//ipp-console.html'}renderUI(){return this.renderTemplate()}log(t=''){this.#u.content=JSON.stringify(t,'',4)}get#u(){return this.query('gs-highlight')}static{e.define('gs-ipp-console',IPPConsole)}}
//# sourceMappingURL=io.greenscreens.ipp.min.js.map
