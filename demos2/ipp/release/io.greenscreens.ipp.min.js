import{GSComponents as t,GSElement as e,GSUtil as s,GSFunction as r}from'/webcomponents/release/esm/io.greenscreens.components.all.esm.min.js';import{GSHighlight as a}from'/webcomponents/release/esm/io.greenscreens.extra.esm.min.js';class Utils{static get notify(){return t.get('notification')}static inform(t=!1,e){if(Utils.notify)return t?Utils.notify.info('Info',e):(Utils.notify.danger('Error',e),t)}static handleError(t){const e=t.data?.error||t.msg||t.message||t.toString();return Utils.inform(!1,e),e}static async load(t=''){const e=await fetch(t);return await e.json()}}class BaseView extends e{onReady(){super.onReady();const t=this;t.on('action',t.#t.bind(t))}async#t(t){const e=this;if(t.detail.action)try{const a=s.capitalizeAttr(t.detail.action),i=e[a];r.isFunction(i)&&(r.isFunctionAsync(i)?await e[a](t):e[a](t))}catch(t){Utils.handleError(t)}}}class IPPAttributes extends e{static{customElements.define('gs-ipp-attributes',IPPAttributes),Object.seal(IPPAttributes)}async getTemplate(){return super.getTemplate('//ipp-printer-attributes.html')}onReady(){super.onReady()}load(t){if(!t)return;t=t['printer-attributes']||t;const e=Object.entries(t).map((t=>({key:t[0],value:t[1]})));this.#e.setData(e)}get#s(){return this.query('gs-table')}get#e(){return this.#s.store}}class IPPJobs extends BaseView{static{customElements.define('gs-ipp-jobs',IPPJobs),Object.seal(IPPJobs)}async getTemplate(){return super.getTemplate('//ipp-jobs.html')}load(t){if(!t)return;const e=this;e.#r.clear(),t.jobs?e.#a.setData(t.jobs):e.#i(t)}#i(t){if(!t)return;t=t['job-attributes']||t;const e=Object.entries(t).map((t=>({key:t[0],value:t[1]})));this.#r.setData(e)}get#o(){return this.query('#table-jobs')}get#a(){return this.#o.store}get#n(){return this.query('#table-job-attributes')}get#r(){return this.#n.store}cancelJob(t){}printUri(t){}purgeJobs(t){this.#a.clear()}async details(t){const e=await Utils.load('./data/job-attributes.json');this.load(e)}async refresh(t){const e=await Utils.load('./data/jobs.json');this.load(e)}}class IPPView extends BaseView{static{customElements.define('gs-ipp-view',IPPView),Object.seal(IPPView)}async getTemplate(){return super.getTemplate('//ipp-view.html')}get#l(){return this.query('gs-ipp-attributes')}get#c(){return this.query('gs-ipp-jobs')}get uri(){return this.query('#printerURI')?.value||''}async register(){this.refresh()}async refresh(){const t=await Utils.load('./data/printer-attributes.json');this.#l.load(t);const e=await Utils.load('./data/jobs.json');this.#c.load(e)}}class IPPConsole extends e{static{customElements.define('gs-ipp-console',IPPConsole),Object.seal(IPPConsole)}async getTemplate(){return super.getTemplate('//ipp-console.html')}log(t=''){this.#u.content=JSON.stringify(t,'',4)}get#u(){return this.query('gs-highlight')}}globalThis.GSHighlight=a;
//# sourceMappingURL=io.greenscreens.ipp.min.js.map
